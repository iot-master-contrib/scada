(self.webpackChunkscada=self.webpackChunkscada||[]).push([[684],{5460:()=>{"object"==typeof window&&window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(yn=>{Object.prototype.hasOwnProperty.call(yn,"append")||Object.defineProperty(yn,"append",{configurable:!0,enumerable:!0,writable:!0,value(...j){const Gt=document.createDocumentFragment();j.forEach(Zt=>{const nn=Zt instanceof Node;Gt.appendChild(nn?Zt:document.createTextNode(String(Zt)))}),this.appendChild(Gt)}})})},6684:(Gn,yn,j)=>{"use strict";j.r(yn),j.d(yn,{EditorModule:()=>WL});var Gt={};j.r(Gt),j.d(Gt,{dot:()=>fN,doubleMesh:()=>mN,fixedDot:()=>pN,mesh:()=>gN});var Zt={};j.r(Zt),j.d(Zt,{flipX:()=>Bh,flipXY:()=>Rh,flipY:()=>Fh,watermark:()=>vN});var nn={};j.r(nn),j.d(nn,{blur:()=>yN,brightness:()=>TN,contrast:()=>ON,dropShadow:()=>CN,grayScale:()=>_N,highlight:()=>bN,hueRotate:()=>MN,invert:()=>SN,outline:()=>zN,saturate:()=>wN,sepia:()=>xN});var ko={};j.r(ko),j.d(ko,{async:()=>bk,block:()=>hk,circle:()=>o6,circlePlus:()=>yk,classic:()=>uk,cross:()=>vk,diamond:()=>fk,ellipse:()=>_k,path:()=>gk});var At={};j.r(At),j.d(At,{annotations:()=>KN,atConnectionLength:()=>Nk,atConnectionLengthIgnoreGradient:()=>Ak,atConnectionLengthKeepGradient:()=>s6,atConnectionRatio:()=>kk,atConnectionRatioIgnoreGradient:()=>Ek,atConnectionRatioKeepGradient:()=>r6,connection:()=>Ok,displayEmpty:()=>tk,eol:()=>ek,fill:()=>qN,filter:()=>ck,html:()=>ak,lineHeight:()=>JN,port:()=>lk,ref:()=>EN,refCx:()=>VN,refCy:()=>LN,refD:()=>RN,refDKeepOffset:()=>HN,refDResetOffset:()=>qh,refDx:()=>NN,refDy:()=>kN,refHeight:()=>Gh,refHeight2:()=>ZN,refPoints:()=>jN,refPointsKeepOffset:()=>BN,refPointsResetOffset:()=>Wh,refR:()=>FN,refRCircumscribed:()=>PN,refRInscribed:()=>Zh,refRx:()=>DN,refRy:()=>IN,refWidth:()=>Yh,refWidth2:()=>GN,refX:()=>jh,refX2:()=>$N,refY:()=>$h,refY2:()=>YN,resetOffset:()=>sk,sourceMarker:()=>wk,stroke:()=>WN,style:()=>rk,targetMarker:()=>Mk,text:()=>Xh,textPath:()=>XN,textVerticalAnchor:()=>QN,textWrap:()=>UN,title:()=>nk,vertexMarker:()=>Sk,xAlign:()=>ik,yAlign:()=>ok});var yi={};j.r(yi),j.d(yi,{className:()=>Dk,opacity:()=>Ik,stroke:()=>Vk});var Ci={};j.r(Ci),j.d(Ci,{absolute:()=>Lk,bottom:()=>Gk,ellipse:()=>Hk,ellipseSpread:()=>Bk,left:()=>jk,line:()=>Rk,right:()=>$k,top:()=>Yk});var _i={};j.r(_i),j.d(_i,{bottom:()=>Qk,inside:()=>eD,insideOriented:()=>tD,left:()=>Wk,manual:()=>qk,outside:()=>Xk,outsideOriented:()=>Kk,radial:()=>nD,radialOriented:()=>iD,right:()=>Uk,top:()=>Jk});var on={};j.r(on),j.d(on,{noop:()=>rD,pinAbsolute:()=>hD,pinRelative:()=>lD});var xt={};j.r(xt),j.d(xt,{bottom:()=>bD,bottomLeft:()=>wD,bottomRight:()=>MD,center:()=>vD,left:()=>yD,midSide:()=>OD,nodeCenter:()=>TD,orth:()=>SD,right:()=>CD,top:()=>zD,topLeft:()=>_D,topRight:()=>xD});var Zn={};j.r(Zn),j.d(Zn,{closest:()=>ND,length:()=>ED,orth:()=>kD,ratio:()=>AD});var xi={};j.r(xi),j.d(xi,{anchor:()=>LD,bbox:()=>x6,boundary:()=>PD,rect:()=>ID});var Do={};j.r(Do),j.d(Do,{er:()=>iI,loop:()=>oI,manhattan:()=>V6,metro:()=>nI,normal:()=>HD,oneSide:()=>BD,orth:()=>S6});var Io={};j.r(Io),j.d(Io,{jumpover:()=>fI,loop:()=>rI,normal:()=>sI,rounded:()=>aI,smooth:()=>cI});var M=j(6895),Lt=j(4575),s=j(4650),wi=j(1481);function Mi(i){return[{name:"\u586b\u5145",path:`attrs/${i}/fill`,type:"color"},{name:"\u8fb9\u6846\u989c\u8272",path:`attrs/${i}/stroke`,type:"color"},{name:"\u8fb9\u6846\u5927\u5c0f",path:`attrs/${i}/stroke-width`,type:"stroke"}]}const Ta={name:"\u7ebf\u6761",id:"line",icon:"/app/scada/assets/line.svg",type:"line",extends:{inherit:"edge",markup:[{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"move",pointerEvents:"none"}},{tagName:"path",selector:"wrap",attrs:{fill:"none",cursor:"move",stroke:"transparent",strokeLinecap:"round"}}],attrs:{wrap:{connection:!0,strokeWidth:10,strokeLinejoin:"round"},line:{connection:!0,stroke:"#000",strokeWidth:2,strokeLinejoin:"round",targetMarker:null}},tools:["edge-editor"]},meta:{},properties:[...Mi("line")]},Ys={name:"\u5706\u5f62",id:"circle",icon:"/app/scada/assets/circle.svg",type:"shape",meta:{width:100,height:100},properties:[...Mi("circle")]},Gs={name:"\u692d\u5706",id:"ellipse",icon:"/app/scada/assets/ellipse.svg",type:"shape",meta:{width:100,height:60},properties:[...Mi("ellipse")]},Ue={name:"\u77e9\u5f62",id:"rect",icon:"/app/scada/assets/rect.svg",type:"shape",meta:{width:100,height:40},properties:[...Mi("rect")]};var T=j(655),H=j(7579),ze=j(6451),Si=j(4671),Et=j(4482),mt=j(5403);function Le(i,t=Si.y){return i=i??Po,(0,Et.e)((e,n)=>{let o,r=!0;e.subscribe((0,mt.x)(n,a=>{const c=t(a);(r||!i(o,c))&&(r=!1,o=c,n.next(a))}))})}function Po(i,t){return i===t}var Cn=j(8421),Ti=j(5032);function N(i){return(0,Et.e)((t,e)=>{(0,Cn.Xf)(i).subscribe((0,mt.x)(e,()=>e.complete(),Ti.Z)),!e.closed&&t.subscribe(e)})}var Y=j(9300),Q=j(8675),se=j(3900),re=j(5577),U=j(4004);const wt={now:()=>(wt.delegate||Date).now(),delegate:void 0};class oe extends H.x{constructor(t=1/0,e=1/0,n=wt){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:n,_infiniteTimeWindow:o,_timestampProvider:r,_windowTime:a}=this;e||(n.push(t),!o&&n.push(r.now()+a)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:n,_buffer:o}=this,r=o.slice();for(let a=0;a<r.length&&!t.closed;a+=n?1:2)t.next(r[a]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:n,_infiniteTimeWindow:o}=this,r=(o?1:2)*t;if(t<1/0&&r<n.length&&n.splice(0,n.length-r),!o){const a=e.now();let c=0;for(let l=1;l<n.length&&n[l]<=a;l+=2)c=l;c&&n.splice(0,c+1)}}}var te=j(1135);let qt;try{qt=typeof Intl<"u"&&Intl.v8BreakIterator}catch{qt=!1}let Vo,Zs,qn,Oa,Ce=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?(0,M.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!qt)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(s.Lbi))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ft=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})();function r1(i){return function A8(){if(null==Vo&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Vo=!0}))}finally{Vo=Vo||!1}return Vo}()?i:!!i.capture}function a1(){if(null==qn){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return qn=!1,qn;if("scrollBehavior"in document.documentElement.style)qn=!0;else{const i=Element.prototype.scrollTo;qn=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return qn}function Lo(){if("object"!=typeof document||!document)return 0;if(null==Zs){const i=document.createElement("div"),t=i.style;i.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),n=e.style;n.width="2px",n.height="1px",i.appendChild(e),document.body.appendChild(i),Zs=0,0===i.scrollLeft&&(i.scrollLeft=1,Zs=0===i.scrollLeft?1:2),i.remove()}return Zs}function Wn(i){return i.composedPath?i.composedPath()[0]:i.target}function c1(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var l1=j(2076);function tt(i,t){(function k8(i){return"string"==typeof i&&-1!==i.indexOf(".")&&1===parseFloat(i)})(i)&&(i="100%");var e=function D8(i){return"string"==typeof i&&-1!==i.indexOf("%")}(i);return i=360===t?i:Math.min(t,Math.max(0,parseFloat(i))),e&&(i=parseInt(String(i*t),10)/100),Math.abs(i-t)<1e-6?1:i=360===t?(i<0?i%t+t:i%t)/parseFloat(String(t)):i%t/parseFloat(String(t))}function qs(i){return Math.min(1,Math.max(0,i))}function h1(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function Ws(i){return i<=1?"".concat(100*Number(i),"%"):i}function Un(i){return 1===i.length?"0"+i:String(i)}function u1(i,t,e){i=tt(i,255),t=tt(t,255),e=tt(e,255);var n=Math.max(i,t,e),o=Math.min(i,t,e),r=0,a=0,c=(n+o)/2;if(n===o)a=0,r=0;else{var l=n-o;switch(a=c>.5?l/(2-n-o):l/(n+o),n){case i:r=(t-e)/l+(t<e?6:0);break;case t:r=(e-i)/l+2;break;case e:r=(i-t)/l+4}r/=6}return{h:r,s:a,l:c}}function Aa(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*e*(t-i):e<.5?t:e<2/3?i+(t-i)*(2/3-e)*6:i}function Ea(i,t,e){i=tt(i,255),t=tt(t,255),e=tt(e,255);var n=Math.max(i,t,e),o=Math.min(i,t,e),r=0,a=n,c=n-o,l=0===n?0:c/n;if(n===o)r=0;else{switch(n){case i:r=(t-e)/c+(t<e?6:0);break;case t:r=(e-i)/c+2;break;case e:r=(i-t)/c+4}r/=6}return{h:r,s:l,v:a}}function Na(i,t,e,n){var o=[Un(Math.round(i).toString(16)),Un(Math.round(t).toString(16)),Un(Math.round(e).toString(16))];return n&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function d1(i){return Math.round(255*parseFloat(i)).toString(16)}function f1(i){return Mt(i)/255}function Mt(i){return parseInt(i,16)}var ka={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Oi(i){var t={r:0,g:0,b:0},e=1,n=null,o=null,r=null,a=!1,c=!1;return"string"==typeof i&&(i=function R8(i){if(0===(i=i.trim().toLowerCase()).length)return!1;var t=!1;if(ka[i])i=ka[i],t=!0;else if("transparent"===i)return{r:0,g:0,b:0,a:0,format:"name"};var e=Ht.rgb.exec(i);return e?{r:e[1],g:e[2],b:e[3]}:(e=Ht.rgba.exec(i))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=Ht.hsl.exec(i))?{h:e[1],s:e[2],l:e[3]}:(e=Ht.hsla.exec(i))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=Ht.hsv.exec(i))?{h:e[1],s:e[2],v:e[3]}:(e=Ht.hsva.exec(i))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=Ht.hex8.exec(i))?{r:Mt(e[1]),g:Mt(e[2]),b:Mt(e[3]),a:f1(e[4]),format:t?"name":"hex8"}:(e=Ht.hex6.exec(i))?{r:Mt(e[1]),g:Mt(e[2]),b:Mt(e[3]),format:t?"name":"hex"}:(e=Ht.hex4.exec(i))?{r:Mt(e[1]+e[1]),g:Mt(e[2]+e[2]),b:Mt(e[3]+e[3]),a:f1(e[4]+e[4]),format:t?"name":"hex8"}:!!(e=Ht.hex3.exec(i))&&{r:Mt(e[1]+e[1]),g:Mt(e[2]+e[2]),b:Mt(e[3]+e[3]),format:t?"name":"hex"}}(i)),"object"==typeof i&&(sn(i.r)&&sn(i.g)&&sn(i.b)?(t=function I8(i,t,e){return{r:255*tt(i,255),g:255*tt(t,255),b:255*tt(e,255)}}(i.r,i.g,i.b),a=!0,c="%"===String(i.r).substr(-1)?"prgb":"rgb"):sn(i.h)&&sn(i.s)&&sn(i.v)?(n=Ws(i.s),o=Ws(i.v),t=function V8(i,t,e){i=6*tt(i,360),t=tt(t,100),e=tt(e,100);var n=Math.floor(i),o=i-n,r=e*(1-t),a=e*(1-o*t),c=e*(1-(1-o)*t),l=n%6;return{r:255*[e,a,r,r,c,e][l],g:255*[c,e,e,a,r,r][l],b:255*[r,r,c,e,e,a][l]}}(i.h,n,o),a=!0,c="hsv"):sn(i.h)&&sn(i.s)&&sn(i.l)&&(n=Ws(i.s),r=Ws(i.l),t=function P8(i,t,e){var n,o,r;if(i=tt(i,360),t=tt(t,100),e=tt(e,100),0===t)o=e,r=e,n=e;else{var a=e<.5?e*(1+t):e+t-e*t,c=2*e-a;n=Aa(c,a,i+1/3),o=Aa(c,a,i),r=Aa(c,a,i-1/3)}return{r:255*n,g:255*o,b:255*r}}(i.h,n,r),a=!0,c="hsl"),Object.prototype.hasOwnProperty.call(i,"a")&&(e=i.a)),e=h1(e),{ok:a,format:i.format||c,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:e}}var xn="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),Da="[\\s|\\(]+(".concat(xn,")[,|\\s]+(").concat(xn,")[,|\\s]+(").concat(xn,")\\s*\\)?"),Ia="[\\s|\\(]+(".concat(xn,")[,|\\s]+(").concat(xn,")[,|\\s]+(").concat(xn,")[,|\\s]+(").concat(xn,")\\s*\\)?"),Ht={CSS_UNIT:new RegExp(xn),rgb:new RegExp("rgb"+Da),rgba:new RegExp("rgba"+Ia),hsl:new RegExp("hsl"+Da),hsla:new RegExp("hsla"+Ia),hsv:new RegExp("hsv"+Da),hsva:new RegExp("hsva"+Ia),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function sn(i){return Boolean(Ht.CSS_UNIT.exec(String(i)))}var wn=function(){function i(t,e){var n;if(void 0===t&&(t=""),void 0===e&&(e={}),t instanceof i)return t;"number"==typeof t&&(t=function H8(i){return{r:i>>16,g:(65280&i)>>8,b:255&i}}(t)),this.originalInput=t;var o=Oi(t);this.originalInput=t,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(n=e.format)&&void 0!==n?n:o.format,this.gradientType=e.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return i.prototype.isDark=function(){return this.getBrightness()<128},i.prototype.isLight=function(){return!this.isDark()},i.prototype.getBrightness=function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},i.prototype.getLuminance=function(){var t=this.toRgb(),r=t.r/255,a=t.g/255,c=t.b/255;return.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4))+.0722*(c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4))},i.prototype.getAlpha=function(){return this.a},i.prototype.setAlpha=function(t){return this.a=h1(t),this.roundA=Math.round(100*this.a)/100,this},i.prototype.isMonochrome=function(){return 0===this.toHsl().s},i.prototype.toHsv=function(){var t=Ea(this.r,this.g,this.b);return{h:360*t.h,s:t.s,v:t.v,a:this.a}},i.prototype.toHsvString=function(){var t=Ea(this.r,this.g,this.b),e=Math.round(360*t.h),n=Math.round(100*t.s),o=Math.round(100*t.v);return 1===this.a?"hsv(".concat(e,", ").concat(n,"%, ").concat(o,"%)"):"hsva(".concat(e,", ").concat(n,"%, ").concat(o,"%, ").concat(this.roundA,")")},i.prototype.toHsl=function(){var t=u1(this.r,this.g,this.b);return{h:360*t.h,s:t.s,l:t.l,a:this.a}},i.prototype.toHslString=function(){var t=u1(this.r,this.g,this.b),e=Math.round(360*t.h),n=Math.round(100*t.s),o=Math.round(100*t.l);return 1===this.a?"hsl(".concat(e,", ").concat(n,"%, ").concat(o,"%)"):"hsla(".concat(e,", ").concat(n,"%, ").concat(o,"%, ").concat(this.roundA,")")},i.prototype.toHex=function(t){return void 0===t&&(t=!1),Na(this.r,this.g,this.b,t)},i.prototype.toHexString=function(t){return void 0===t&&(t=!1),"#"+this.toHex(t)},i.prototype.toHex8=function(t){return void 0===t&&(t=!1),function L8(i,t,e,n,o){var r=[Un(Math.round(i).toString(16)),Un(Math.round(t).toString(16)),Un(Math.round(e).toString(16)),Un(d1(n))];return o&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))&&r[3].startsWith(r[3].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}(this.r,this.g,this.b,this.a,t)},i.prototype.toHex8String=function(t){return void 0===t&&(t=!1),"#"+this.toHex8(t)},i.prototype.toHexShortString=function(t){return void 0===t&&(t=!1),1===this.a?this.toHexString(t):this.toHex8String(t)},i.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},i.prototype.toRgbString=function(){var t=Math.round(this.r),e=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(t,", ").concat(e,", ").concat(n,")"):"rgba(".concat(t,", ").concat(e,", ").concat(n,", ").concat(this.roundA,")")},i.prototype.toPercentageRgb=function(){var t=function(e){return"".concat(Math.round(100*tt(e,255)),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},i.prototype.toPercentageRgbString=function(){var t=function(e){return Math.round(100*tt(e,255))};return 1===this.a?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},i.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var t="#"+Na(this.r,this.g,this.b,!1),e=0,n=Object.entries(ka);e<n.length;e++){var o=n[e];if(t===o[1])return o[0]}return!1},i.prototype.toString=function(t){var e=Boolean(t);t=t??this.format;var n=!1;return!e&&this.a<1&&this.a>=0&&(t.startsWith("hex")||"name"===t)?"name"===t&&0===this.a?this.toName():this.toRgbString():("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString())},i.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},i.prototype.clone=function(){return new i(this.toString())},i.prototype.lighten=function(t){void 0===t&&(t=10);var e=this.toHsl();return e.l+=t/100,e.l=qs(e.l),new i(e)},i.prototype.brighten=function(t){void 0===t&&(t=10);var e=this.toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(-t/100*255))),e.g=Math.max(0,Math.min(255,e.g-Math.round(-t/100*255))),e.b=Math.max(0,Math.min(255,e.b-Math.round(-t/100*255))),new i(e)},i.prototype.darken=function(t){void 0===t&&(t=10);var e=this.toHsl();return e.l-=t/100,e.l=qs(e.l),new i(e)},i.prototype.tint=function(t){return void 0===t&&(t=10),this.mix("white",t)},i.prototype.shade=function(t){return void 0===t&&(t=10),this.mix("black",t)},i.prototype.desaturate=function(t){void 0===t&&(t=10);var e=this.toHsl();return e.s-=t/100,e.s=qs(e.s),new i(e)},i.prototype.saturate=function(t){void 0===t&&(t=10);var e=this.toHsl();return e.s+=t/100,e.s=qs(e.s),new i(e)},i.prototype.greyscale=function(){return this.desaturate(100)},i.prototype.spin=function(t){var e=this.toHsl(),n=(e.h+t)%360;return e.h=n<0?360+n:n,new i(e)},i.prototype.mix=function(t,e){void 0===e&&(e=50);var n=this.toRgb(),o=new i(t).toRgb(),r=e/100;return new i({r:(o.r-n.r)*r+n.r,g:(o.g-n.g)*r+n.g,b:(o.b-n.b)*r+n.b,a:(o.a-n.a)*r+n.a})},i.prototype.analogous=function(t,e){void 0===t&&(t=6),void 0===e&&(e=30);var n=this.toHsl(),o=360/e,r=[this];for(n.h=(n.h-(o*t>>1)+720)%360;--t;)n.h=(n.h+o)%360,r.push(new i(n));return r},i.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new i(t)},i.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var e=this.toHsv(),n=e.h,o=e.s,r=e.v,a=[],c=1/t;t--;)a.push(new i({h:n,s:o,v:r})),r=(r+c)%1;return a},i.prototype.splitcomplement=function(){var t=this.toHsl(),e=t.h;return[this,new i({h:(e+72)%360,s:t.s,l:t.l}),new i({h:(e+216)%360,s:t.s,l:t.l})]},i.prototype.onBackground=function(t){var e=this.toRgb(),n=new i(t).toRgb(),o=e.a+n.a*(1-e.a);return new i({r:(e.r*e.a+n.r*n.a*(1-e.a))/o,g:(e.g*e.a+n.g*n.a*(1-e.a))/o,b:(e.b*e.a+n.b*n.a*(1-e.a))/o,a:o})},i.prototype.triad=function(){return this.polyad(3)},i.prototype.tetrad=function(){return this.polyad(4)},i.prototype.polyad=function(t){for(var e=this.toHsl(),n=e.h,o=[this],r=360/t,a=1;a<t;a++)o.push(new i({h:(n+a*r)%360,s:e.s,l:e.l}));return o},i.prototype.equals=function(t){return this.toRgbString()===new i(t).toRgbString()},i}(),Us=2,p1=.16,j8=.05,$8=.05,Y8=.15,g1=5,m1=4,G8=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function v1(i,t,e){var n;return(n=Math.round(i.h)>=60&&Math.round(i.h)<=240?e?Math.round(i.h)-Us*t:Math.round(i.h)+Us*t:e?Math.round(i.h)+Us*t:Math.round(i.h)-Us*t)<0?n+=360:n>=360&&(n-=360),n}function z1(i,t,e){return 0===i.h&&0===i.s?i.s:((n=e?i.s-p1*t:t===m1?i.s+p1:i.s+j8*t)>1&&(n=1),e&&t===g1&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2)));var n}function b1(i,t,e){var n;return(n=e?i.v+$8*t:i.v-Y8*t)>1&&(n=1),Number(n.toFixed(2))}function Pa(i){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=[],n=new wn(i),o=g1;o>0;o-=1){var r=n.toHsv(),a=new wn({h:v1(r,o,!0),s:z1(r,o,!0),v:b1(r,o,!0)}).toHexString();e.push(a)}e.push(n.toHexString());for(var c=1;c<=m1;c+=1){var l=n.toHsv(),h=new wn({h:v1(l,c),s:z1(l,c),v:b1(l,c)}).toHexString();e.push(h)}return"dark"===t.theme?G8.map(function(u){var d=u.index,f=u.opacity;return new wn(t.backgroundColor||"#141414").mix(e[d],100*f).toHexString()}):e}var Va={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},rt={},La={};Object.keys(Va).forEach(function(i){rt[i]=Pa(Va[i]),rt[i].primary=rt[i][5],La[i]=Pa(Va[i],{theme:"dark",backgroundColor:"#141414"}),La[i].primary=La[i][5]});var Ha=j(529),Bt=j(9646),rn=j(9751),Js=j(8505),y1=j(8746),Z8=j(262),C1=j(3099),Ft=j(5698);const an="[@ant-design/icons-angular]:";function _1(i){(0,s.X6Q)()&&console.warn(`${an} ${i}.`)}function x1(i){return Pa(i)[0]}function Qs(i,t){switch(t){case"fill":return`${i}-fill`;case"outline":return`${i}-o`;case"twotone":return`${i}-twotone`;case void 0:return i;default:throw new Error(`${an}Theme "${t}" is not a recognized theme!`)}}function w1(i){return"object"==typeof i&&"string"==typeof i.name&&("string"==typeof i.theme||void 0===i.theme)&&"string"==typeof i.icon}function Xs(i){const t=i.split(":");switch(t.length){case 1:return[i,""];case 2:return[t[1],t[0]];default:throw new Error(`${an}The icon type ${i} is not valid!`)}}function M1(i){return new Error(`${an}the icon ${i} does not exist or is not registered.`)}function ou(){return new Error(`${an}<svg> tag not found.`)}const au=new s.OlP("ant_icons");let S1=(()=>{class i{constructor(e,n,o,r,a){this._rendererFactory=e,this._handler=n,this._document=o,this.sanitizer=r,this._antIcons=a,this.defaultTheme="outline",this._svgDefinitions=new Map,this._svgRenderedDefinitions=new Map,this._inProgressFetches=new Map,this._assetsUrlRoot="",this._twoToneColorPalette={primaryColor:"#333333",secondaryColor:"#E6E6E6"},this._enableJsonpLoading=!1,this._jsonpIconLoad$=new H.x,this._renderer=this._rendererFactory.createRenderer(null,null),this._handler&&(this._http=new Ha.eN(this._handler)),this._antIcons&&this.addIcon(...this._antIcons)}set twoToneColor({primaryColor:e,secondaryColor:n}){this._twoToneColorPalette.primaryColor=e,this._twoToneColorPalette.secondaryColor=n||x1(e)}get twoToneColor(){return{...this._twoToneColorPalette}}get _disableDynamicLoading(){return!1}useJsonpLoading(){this._enableJsonpLoading?_1("You are already using jsonp loading."):(this._enableJsonpLoading=!0,window.__ant_icon_load=e=>{this._jsonpIconLoad$.next(e)})}changeAssetsSource(e){this._assetsUrlRoot=e.endsWith("/")?e:e+"/"}addIcon(...e){e.forEach(n=>{this._svgDefinitions.set(Qs(n.name,n.theme),n)})}addIconLiteral(e,n){const[o,r]=Xs(e);if(!r)throw function tu(){return new Error(`${an}Type should have a namespace. Try "namespace:${name}".`)}();this.addIcon({name:e,icon:n})}clear(){this._svgDefinitions.clear(),this._svgRenderedDefinitions.clear()}getRenderedContent(e,n){const o=w1(e)?e:this._svgDefinitions.get(e)||null;if(!o&&this._disableDynamicLoading)throw M1(e);return(o?(0,Bt.of)(o):this._loadIconDynamically(e)).pipe((0,U.U)(a=>{if(!a)throw M1(e);return this._loadSVGFromCacheOrCreateNew(a,n)}))}getCachedIcons(){return this._svgDefinitions}_loadIconDynamically(e){if(!this._http&&!this._enableJsonpLoading)return(0,Bt.of)(function nu(){return function q8(i){console.error(`${an} ${i}.`)}('you need to import "HttpClientModule" to use dynamic importing.'),null}());let n=this._inProgressFetches.get(e);if(!n){const[o,r]=Xs(e),a=r?{name:e,icon:""}:function Q8(i){const t=i.split("-"),e=function U8(i){return"o"===i?"outline":i}(t.splice(t.length-1,1)[0]);return{name:t.join("-"),theme:e,icon:""}}(o),l=(r?`${this._assetsUrlRoot}assets/${r}/${o}`:`${this._assetsUrlRoot}assets/${a.theme}/${a.name}`)+(this._enableJsonpLoading?".js":".svg"),h=this.sanitizer.sanitize(s.q3G.URL,l);if(!h)throw function iu(i){return new Error(`${an}The url "${i}" is unsafe.`)}(l);n=(this._enableJsonpLoading?this._loadIconDynamicallyWithJsonp(a,h):this._http.get(h,{responseType:"text"}).pipe((0,U.U)(d=>({...a,icon:d})))).pipe((0,Js.b)(d=>this.addIcon(d)),(0,y1.x)(()=>this._inProgressFetches.delete(e)),(0,Z8.K)(()=>(0,Bt.of)(null)),(0,C1.B)()),this._inProgressFetches.set(e,n)}return n}_loadIconDynamicallyWithJsonp(e,n){return new rn.y(o=>{const r=this._document.createElement("script"),a=setTimeout(()=>{c(),o.error(function su(){return new Error(`${an}Importing timeout error.`)}())},6e3);function c(){r.parentNode.removeChild(r),clearTimeout(a)}r.src=n,this._document.body.appendChild(r),this._jsonpIconLoad$.pipe((0,Y.h)(l=>l.name===e.name&&l.theme===e.theme),(0,Ft.q)(1)).subscribe(l=>{o.next(l),c()})})}_loadSVGFromCacheOrCreateNew(e,n){let o;const r=n||this._twoToneColorPalette.primaryColor,a=x1(r)||this._twoToneColorPalette.secondaryColor,c="twotone"===e.theme?function W8(i,t,e,n){return`${Qs(i,t)}-${e}-${n}`}(e.name,e.theme,r,a):void 0===e.theme?e.name:Qs(e.name,e.theme),l=this._svgRenderedDefinitions.get(c);return l?o=l.icon:(o=this._setSVGAttribute(this._colorizeSVGIcon(this._createSVGElementFromString(function eu(i){return""!==Xs(i)[1]}(e.name)?e.icon:function K8(i){return i.replace(/['"]#333['"]/g,'"primaryColor"').replace(/['"]#E6E6E6['"]/g,'"secondaryColor"').replace(/['"]#D9D9D9['"]/g,'"secondaryColor"').replace(/['"]#D8D8D8['"]/g,'"secondaryColor"')}(e.icon)),"twotone"===e.theme,r,a)),this._svgRenderedDefinitions.set(c,{...e,icon:o})),function X8(i){return i.cloneNode(!0)}(o)}_createSVGElementFromString(e){const n=this._document.createElement("div");n.innerHTML=e;const o=n.querySelector("svg");if(!o)throw ou;return o}_setSVGAttribute(e){return this._renderer.setAttribute(e,"width","1em"),this._renderer.setAttribute(e,"height","1em"),e}_colorizeSVGIcon(e,n,o,r){if(n){const a=e.childNodes,c=a.length;for(let l=0;l<c;l++){const h=a[l];"secondaryColor"===h.getAttribute("fill")?this._renderer.setAttribute(h,"fill",r):this._renderer.setAttribute(h,"fill",o)}}return this._renderer.setAttribute(e,"fill","currentColor"),e}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(s.FYo),s.LFG(Ha.jN,8),s.LFG(M.K0,8),s.LFG(wi.H7),s.LFG(au,8))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),lu=(()=>{class i{constructor(e,n,o){this._iconService=e,this._elementRef=n,this._renderer=o}ngOnChanges(e){(e.type||e.theme||e.twoToneColor)&&this._changeIcon()}_changeIcon(){return new Promise(e=>{if(!this.type)return this._clearSVGElement(),void e(null);const n=this._getSelfRenderMeta();this._iconService.getRenderedContent(this._parseIconType(this.type,this.theme),this.twoToneColor).subscribe(o=>{const r=this._getSelfRenderMeta();!function cu(i,t){return i.type===t.type&&i.theme===t.theme&&i.twoToneColor===t.twoToneColor}(n,r)?e(null):(this._setSVGElement(o),e(o))})})}_getSelfRenderMeta(){return{type:this.type,theme:this.theme,twoToneColor:this.twoToneColor}}_parseIconType(e,n){if(w1(e))return e;{const[o,r]=Xs(e);return r?e:function J8(i){return i.endsWith("-fill")||i.endsWith("-o")||i.endsWith("-twotone")}(o)?(n&&_1(`'type' ${o} already gets a theme inside so 'theme' ${n} would be ignored`),o):Qs(o,n||this._iconService.defaultTheme)}}_setSVGElement(e){this._clearSVGElement(),this._renderer.appendChild(this._elementRef.nativeElement,e)}_clearSVGElement(){const e=this._elementRef.nativeElement,n=e.childNodes;for(let r=n.length-1;r>=0;r--){const a=n[r];"svg"===a.tagName?.toLowerCase()&&this._renderer.removeChild(e,a)}}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(S1),s.Y36(s.SBq),s.Y36(s.Qsj))},i.\u0275dir=s.lG2({type:i,selectors:[["","antIcon",""]],inputs:{type:"type",theme:"theme",twoToneColor:"twoToneColor"},features:[s.TTD]}),i})();var Ai=j(8932);function Jn(i){return null!=i&&"false"!=`${i}`}function Ei(i,t=0){return T1(i)?Number(i):t}function T1(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}function Ks(i){return Array.isArray(i)?i:[i]}function He(i){return null==i?"":"string"==typeof i?i:`${i}px`}function Ni(i){return i instanceof s.SBq?i.nativeElement:i}var cn=j(576);function Ba(i){return!!i&&(i instanceof rn.y||(0,cn.m)(i.lift)&&(0,cn.m)(i.subscribe))}function Qn(i){return typeof i<"u"&&null!==i}function er(i){return typeof i>"u"||null===i}function O1(i){return Jn(i)}function Fa(i,t=0){return T1(i)?Number(i):t}function Ra(i,t){return function e(n,o,r){const a=`$$__zorroPropDecorator__${o}`;return Object.prototype.hasOwnProperty.call(n,a)&&(0,Ai.ZK)(`The prop "${a}" is already exist, it will be overrided by ${i} decorator.`),Object.defineProperty(n,a,{configurable:!0,writable:!0}),{get(){return r&&r.get?r.get.bind(this)():this[a]},set(c){r&&r.set&&r.set.bind(this)(t(c)),this[a]=t(c)}}}}function R(){return Ra("InputBoolean",O1)}function vt(i){return Ra("InputNumber",t=>Fa(t,i))}function E1(i){i.stopPropagation(),i.preventDefault()}function N1(i){if(!i.getClientRects().length)return{top:0,left:0};const t=i.getBoundingClientRect(),e=i.ownerDocument.defaultView;return{top:t.top+e.pageYOffset,left:t.left+e.pageXOffset}}function ja(i){return!!i&&"function"==typeof i.then&&"function"==typeof i.catch}function tr(i,t,e){return isNaN(i)||i<t?t:i>e?e:i}function D1(i){return"number"==typeof i&&isFinite(i)}function I1(i,t){return Math.round(i*Math.pow(10,t))/Math.pow(10,t)}let Za,qa;typeof window<"u"&&window;const L1={position:"absolute",top:"-9999px",width:"50px",height:"50px"};function H1(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}const wu="rc-util-key";function B1({mark:i}={}){return i?i.startsWith("data-")?i:`data-${i}`:wu}function Wa(i){return i.attachTo?i.attachTo:document.querySelector("head")||document.body}function F1(i,t={}){if(!H1())return null;const e=document.createElement("style");t.csp?.nonce&&(e.nonce=t.csp?.nonce),e.innerHTML=i;const n=Wa(t),{firstChild:o}=n;return t.prepend&&n.prepend?n.prepend(e):t.prepend&&o?n.insertBefore(e,o):n.appendChild(e),e}const Ua=new Map;function Ho(i,t,e){return{[`${i}-status-success`]:"success"===t,[`${i}-status-warning`]:"warning"===t,[`${i}-status-error`]:"error"===t,[`${i}-status-validating`]:"validating"===t,[`${i}-has-feedback`]:e}}const Su={name:"align-left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M120 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm0 424h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm784 140H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-424H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z" /></svg>'},ku={name:"align-center",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M264 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm496 424c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496zm144 140H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-424H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z" /></svg>'},Vu={name:"align-right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M904 158H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 424H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 212H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-424H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z" /></svg>'},j1={name:"copy",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z" /></svg>'},$1={name:"delete",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z" /></svg>'},Y1={name:"down",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z" /></svg>'},qu={name:"export",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M888.3 757.4h-53.8c-4.2 0-7.7 3.5-7.7 7.7v61.8H197.1V197.1h629.8v61.8c0 4.2 3.5 7.7 7.7 7.7h53.8c4.2 0 7.7-3.4 7.7-7.7V158.7c0-17-13.7-30.7-30.7-30.7H158.7c-17 0-30.7 13.7-30.7 30.7v706.6c0 17 13.7 30.7 30.7 30.7h706.6c17 0 30.7-13.7 30.7-30.7V765.1c0-4.3-3.5-7.7-7.7-7.7zm18.6-251.7L765 393.7c-5.3-4.2-13-.4-13 6.3v76H438c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z" /></svg>'},Ku={name:"group",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><defs><style /></defs><path d="M912 820.1V203.9c28-9.9 48-36.6 48-67.9 0-39.8-32.2-72-72-72-31.3 0-58 20-67.9 48H203.9C194 84 167.3 64 136 64c-39.8 0-72 32.2-72 72 0 31.3 20 58 48 67.9v616.2C84 830 64 856.7 64 888c0 39.8 32.2 72 72 72 31.3 0 58-20 67.9-48h616.2c9.9 28 36.6 48 67.9 48 39.8 0 72-32.2 72-72 0-31.3-20-58-48-67.9zM888 112c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 912c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-752c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm704 680H184V184h656v656zm48 72c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z" /><path d="M288 474h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64zm-56 420h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64z" /></svg>'},rd={name:"redo",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z" /></svg>'},hd={name:"scissor",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M567.1 512l318.5-319.3c5-5 1.5-13.7-5.6-13.7h-90.5c-2.1 0-4.2.8-5.6 2.3l-273.3 274-90.2-90.5c12.5-22.1 19.7-47.6 19.7-74.8 0-83.9-68.1-152-152-152s-152 68.1-152 152 68.1 152 152 152c27.7 0 53.6-7.4 75.9-20.3l90 90.3-90.1 90.3A151.04 151.04 0 00288 582c-83.9 0-152 68.1-152 152s68.1 152 152 152 152-68.1 152-152c0-27.2-7.2-52.7-19.7-74.8l90.2-90.5 273.3 274c1.5 1.5 3.5 2.3 5.6 2.3H880c7.1 0 10.7-8.6 5.6-13.7L567.1 512zM288 370c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80zm0 444c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z" /></svg>'},ud={name:"save",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z" /></svg>'},fd={name:"snippets",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M832 112H724V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H500V72c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v40H320c-17.7 0-32 14.3-32 32v120h-96c-17.7 0-32 14.3-32 32v632c0 17.7 14.3 32 32 32h512c17.7 0 32-14.3 32-32v-96h96c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM664 888H232V336h218v174c0 22.1 17.9 40 40 40h174v338zm0-402H514V336h.2L664 485.8v.2zm128 274h-56V456L544 264H360v-80h68v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h152v32c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-32h68v576z" /></svg>'},G1={name:"star",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z" /></svg>'},gd={name:"undo",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z" /></svg>'},md={name:"ungroup",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><defs><style /></defs><path d="M736 550H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16zm-56 136H344v-64h336v64zm208 130c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zM736 266H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16zm-56 136H344v-64h336v64zm208-194c39.8 0 72-32.2 72-72s-32.2-72-72-72-72 32.2-72 72 32.2 72 72 72zm0-96c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 64c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0 656c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z" /></svg>'},Z1={name:"up",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z" /></svg>'},zd={name:"vertical-align-bottom",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M859.9 780H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM505.7 669a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V176c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z" /></svg>'},bd={name:"vertical-right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M326 164h-64c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V172c0-4.4-3.6-8-8-8zm444 72.4V164c0-6.8-7.9-10.5-13.1-6.1L335 512l421.9 354.1c5.2 4.4 13.1.7 13.1-6.1v-72.4c0-9.4-4.2-18.4-11.4-24.5L459.4 512l299.2-251.1c7.2-6.1 11.4-15.1 11.4-24.5z" /></svg>'},yd={name:"vertical-align-middle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M859.9 474H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zm-353.6-74.7c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7.4-11.7-5.7-11.7H550V104c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v156h-62.8c-6 0-9.4 7-5.7 11.7l100.8 127.6zm11.4 225.4a7.14 7.14 0 00-11.3 0L405.6 752.3a7.23 7.23 0 005.7 11.7H474v156c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V764h62.8c6 0 9.4-7 5.7-11.7L517.7 624.7z" /></svg>'},q1={name:"vertical-align-top",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z" /></svg>'},Cd={name:"vertical-left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M762 164h-64c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V172c0-4.4-3.6-8-8-8zm-508 0v72.4c0 9.5 4.2 18.4 11.4 24.5L564.6 512 265.4 763.1c-7.2 6.1-11.4 15-11.4 24.5V860c0 6.8 7.9 10.5 13.1 6.1L689 512 267.1 157.9A7.95 7.95 0 00254 164z" /></svg>'};var ki=j(9718);const Md=["pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"],ir=2,W1=.16,Td=.05,Od=.05,Ad=.15,U1=5,J1=4,Ed=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Q1({r:i,g:t,b:e}){const n=Ea(i,t,e);return{h:360*n.h,s:n.s,v:n.v}}function or({r:i,g:t,b:e}){return`#${Na(i,t,e,!1)}`}function X1(i,t,e){let n;return n=Math.round(i.h)>=60&&Math.round(i.h)<=240?e?Math.round(i.h)-ir*t:Math.round(i.h)+ir*t:e?Math.round(i.h)+ir*t:Math.round(i.h)-ir*t,n<0?n+=360:n>=360&&(n-=360),n}function K1(i,t,e){if(0===i.h&&0===i.s)return i.s;let n;return n=e?i.s-W1*t:t===J1?i.s+W1:i.s+Td*t,n>1&&(n=1),e&&t===U1&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2))}function e4(i,t,e){let n;return n=e?i.v+Od*t:i.v-Ad*t,n>1&&(n=1),Number(n.toFixed(2))}function t4(i,t={}){const e=[],n=Oi(i);for(let o=U1;o>0;o-=1){const r=Q1(n),a=or(Oi({h:X1(r,o,!0),s:K1(r,o,!0),v:e4(r,o,!0)}));e.push(a)}e.push(or(n));for(let o=1;o<=J1;o+=1){const r=Q1(n),a=or(Oi({h:X1(r,o),s:K1(r,o),v:e4(r,o)}));e.push(a)}return"dark"===t.theme?Ed.map(({index:o,opacity:r})=>or(function Nd(i,t,e){const n=e/100;return{r:(t.r-i.r)*n+i.r,g:(t.g-i.g)*n+i.g,b:(t.b-i.b)*n+i.b}}(Oi(t.backgroundColor||"#141414"),Oi(e[o]),100*r))):e}const kd=new s.OlP("nz-config"),Dd=`-ant-${Date.now()}-${Math.random()}`;function n4(i,t){const e=function Id(i,t){const e={},n=(a,c)=>{let l=a.clone();return l=c?.(l)||l,l.toRgbString()},o=(a,c)=>{const l=new wn(a),h=t4(l.toRgbString());e[`${c}-color`]=n(l),e[`${c}-color-disabled`]=h[1],e[`${c}-color-hover`]=h[4],e[`${c}-color-active`]=h[7],e[`${c}-color-outline`]=l.clone().setAlpha(.2).toRgbString(),e[`${c}-color-deprecated-bg`]=h[1],e[`${c}-color-deprecated-border`]=h[3]};if(t.primaryColor){o(t.primaryColor,"primary");const a=new wn(t.primaryColor),c=t4(a.toRgbString());c.forEach((h,u)=>{e[`primary-${u+1}`]=h}),e["primary-color-deprecated-l-35"]=n(a,h=>h.lighten(35)),e["primary-color-deprecated-l-20"]=n(a,h=>h.lighten(20)),e["primary-color-deprecated-t-20"]=n(a,h=>h.tint(20)),e["primary-color-deprecated-t-50"]=n(a,h=>h.tint(50)),e["primary-color-deprecated-f-12"]=n(a,h=>h.setAlpha(.12*h.getAlpha()));const l=new wn(c[0]);e["primary-color-active-deprecated-f-30"]=n(l,h=>h.setAlpha(.3*h.getAlpha())),e["primary-color-active-deprecated-d-02"]=n(l,h=>h.darken(2))}return t.successColor&&o(t.successColor,"success"),t.warningColor&&o(t.warningColor,"warning"),t.errorColor&&o(t.errorColor,"error"),t.infoColor&&o(t.infoColor,"info"),`\n  :root {\n    ${Object.keys(e).map(a=>`--${i}-${a}: ${e[a]};`).join("\n")}\n  }\n  `.trim()}(i,t);H1()?function Mu(i,t,e={}){const n=Wa(e);if(!Ua.has(n)){const a=F1("",e),{parentNode:c}=a;Ua.set(n,c),c.removeChild(a)}const o=function R1(i,t={}){const e=Wa(t);return Array.from(Ua.get(e)?.children||[]).find(n=>"STYLE"===n.tagName&&n.getAttribute(B1(t))===i)}(t,e);if(o)return e.csp?.nonce&&o.nonce!==e.csp?.nonce&&(o.nonce=e.csp?.nonce),o.innerHTML!==i&&(o.innerHTML=i),o;const r=F1(i,e);r?.setAttribute(B1(e),t)}(e,`${Dd}-dynamic-theme`):(0,Ai.ZK)("NzConfigService: SSR do not support dynamic theme with css variables.")}const o4=function(i){return void 0!==i};let nt=(()=>{class i{constructor(e){this.configUpdated$=new H.x,this.config=e||{},this.config.theme&&n4(this.getConfig().prefixCls?.prefixCls||"ant",this.config.theme)}getConfig(){return this.config}getConfigForComponent(e){return this.config[e]}getConfigChangeEventForComponent(e){return this.configUpdated$.pipe((0,Y.h)(n=>n===e),(0,ki.h)(void 0))}set(e,n){this.config[e]={...this.config[e],...n},"theme"===e&&this.config.theme&&n4(this.getConfig().prefixCls?.prefixCls||"ant",this.config.theme),this.configUpdated$.next(e)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(kd,8))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function pe(){return function(t,e,n){const o=`$$__zorroConfigDecorator__${e}`;return Object.defineProperty(t,o,{configurable:!0,writable:!0,enumerable:!1}),{get(){const r=n?.get?n.get.bind(this)():this[o],a=(this.propertyAssignCounter?.[e]||0)>1,c=this.nzConfigService.getConfigForComponent(this._nzModuleName)?.[e];return a&&o4(r)?r:o4(c)?c:r},set(r){this.propertyAssignCounter=this.propertyAssignCounter||{},this.propertyAssignCounter[e]=(this.propertyAssignCounter[e]||0)+1,n?.set?n.set.bind(this)(r):this[o]=r},configurable:!0,enumerable:!0}}}const Pd=[{name:"bars",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z" /></svg>'},{name:"calendar",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z" /></svg>'},{name:"caret-up",theme:"fill",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z" /></svg>'},{name:"caret-up",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z" /></svg>'},{name:"caret-down",theme:"fill",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z" /></svg>'},{name:"caret-down",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z" /></svg>'},{name:"check-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z" /></svg>'},{name:"check-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z" /><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /></svg>'},{name:"check",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z" /></svg>'},{name:"clock-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z" /></svg>'},{name:"close-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z" /><path d="M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /></svg>'},{name:"close-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z" /></svg>'},{name:"close",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z" /></svg>'},j1,$1,{name:"double-left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z" /></svg>'},{name:"double-right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z" /></svg>'},Y1,{name:"edit",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z" /></svg>'},{name:"ellipsis",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z" /></svg>'},{name:"exclamation-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z" /></svg>'},{name:"exclamation-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z" /></svg>'},{name:"eye",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z" /></svg>'},{name:"file",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M854.6 288.7c6 6 9.4 14.1 9.4 22.6V928c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32h424.7c8.5 0 16.7 3.4 22.7 9.4l215.2 215.3zM790.2 326L602 137.8V326h188.2z" /></svg>'},{name:"file",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z" /></svg>'},{name:"filter",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z" /></svg>'},{name:"info-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z" /></svg>'},{name:"info-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z" /></svg>'},{name:"left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z" /></svg>'},{name:"loading",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z" /></svg>'},{name:"paper-clip",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z" /></svg>'},{name:"question-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z" /></svg>'},{name:"right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z" /></svg>'},{name:"rotate-right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><defs><style /></defs><path d="M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z" /><path d="M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z" /></svg>'},{name:"rotate-left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><defs><style /></defs><path d="M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z" /><path d="M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z" /></svg>'},G1,{name:"search",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z" /></svg>'},G1,{name:"upload",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z" /></svg>'},q1,Z1,{name:"swap-right",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z" /></svg>'},{name:"zoom-in",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z" /></svg>'},{name:"zoom-out",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z" /></svg>'}],r4=new s.OlP("nz_icons"),a4=(new s.OlP("nz_icon_default_twotone_color"),"#1890ff");let c4=(()=>{class i extends S1{constructor(e,n,o,r,a,c,l){super(e,a,c,n,[...Pd,...l||[]]),this.nzConfigService=o,this.platform=r,this.configUpdated$=new H.x,this.iconfontCache=new Set,this.subscription=null,this.onConfigChange(),this.configDefaultTwotoneColor(),this.configDefaultTheme()}get _disableDynamicLoading(){return!this.platform.isBrowser}ngOnDestroy(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}normalizeSvgElement(e){e.getAttribute("viewBox")||this._renderer.setAttribute(e,"viewBox","0 0 1024 1024"),(!e.getAttribute("width")||!e.getAttribute("height"))&&(this._renderer.setAttribute(e,"width","1em"),this._renderer.setAttribute(e,"height","1em")),e.getAttribute("fill")||this._renderer.setAttribute(e,"fill","currentColor")}fetchFromIconfont(e){const{scriptUrl:n}=e;if(this._document&&!this.iconfontCache.has(n)){const o=this._renderer.createElement("script");this._renderer.setAttribute(o,"src",n),this._renderer.setAttribute(o,"data-namespace",n.replace(/^(https?|http):/g,"")),this._renderer.appendChild(this._document.body,o),this.iconfontCache.add(n)}}createIconfontIcon(e){return this._createSVGElementFromString(`<svg><use xlink:href="${e}"></svg>`)}onConfigChange(){this.subscription=this.nzConfigService.getConfigChangeEventForComponent("icon").subscribe(()=>{this.configDefaultTwotoneColor(),this.configDefaultTheme(),this.configUpdated$.next()})}configDefaultTheme(){const e=this.getConfig();this.defaultTheme=e.nzTheme||"outline"}configDefaultTwotoneColor(){const n=this.getConfig().nzTwotoneColor||a4;let o=a4;n&&(n.startsWith("#")?o=n:(0,Ai.ZK)("Twotone color must be a hex color!")),this.twoToneColor={primaryColor:o}}getConfig(){return this.nzConfigService.getConfigForComponent("icon")||{}}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(s.FYo),s.LFG(wi.H7),s.LFG(nt),s.LFG(Ce),s.LFG(Ha.jN,8),s.LFG(M.K0,8),s.LFG(r4,8))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const l4=new s.OlP("nz_icons_patch");let h4=(()=>{class i{constructor(e,n){this.extraIcons=e,this.rootIconService=n,this.patched=!1}doPatch(){this.patched||(this.extraIcons.forEach(e=>this.rootIconService.addIcon(e)),this.patched=!0)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(l4,2),s.LFG(c4))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),De=(()=>{class i extends lu{constructor(e,n,o,r,a,c){super(r,o,a),this.ngZone=e,this.changeDetectorRef=n,this.iconService=r,this.renderer=a,this.cacheClassName=null,this.nzRotate=0,this.spin=!1,this.destroy$=new H.x,c&&c.doPatch(),this.el=o.nativeElement}set nzSpin(e){this.spin=e}set nzType(e){this.type=e}set nzTheme(e){this.theme=e}set nzTwotoneColor(e){this.twoToneColor=e}set nzIconfont(e){this.iconfont=e}ngOnChanges(e){const{nzType:n,nzTwotoneColor:o,nzSpin:r,nzTheme:a,nzRotate:c}=e;n||o||r||a?this.changeIcon2():c?this.handleRotate(this.el.firstChild):this._setSVGElement(this.iconService.createIconfontIcon(`#${this.iconfont}`))}ngOnInit(){this.renderer.setAttribute(this.el,"class",`anticon ${this.el.className}`.trim())}ngAfterContentChecked(){if(!this.type){const e=this.el.children;let n=e.length;if(!this.type&&e.length)for(;n--;){const o=e[n];"svg"===o.tagName.toLowerCase()&&this.iconService.normalizeSvgElement(o)}}}ngOnDestroy(){this.destroy$.next()}changeIcon2(){this.setClassName(),this.ngZone.runOutsideAngular(()=>{(0,l1.D)(this._changeIcon()).pipe(N(this.destroy$)).subscribe({next:e=>{this.ngZone.run(()=>{this.changeDetectorRef.detectChanges(),e&&(this.setSVGData(e),this.handleSpin(e),this.handleRotate(e))})},error:Ai.ZK})})}handleSpin(e){this.spin||"loading"===this.type?this.renderer.addClass(e,"anticon-spin"):this.renderer.removeClass(e,"anticon-spin")}handleRotate(e){this.nzRotate?this.renderer.setAttribute(e,"style",`transform: rotate(${this.nzRotate}deg)`):this.renderer.removeAttribute(e,"style")}setClassName(){this.cacheClassName&&this.renderer.removeClass(this.el,this.cacheClassName),this.cacheClassName=`anticon-${this.type}`,this.renderer.addClass(this.el,this.cacheClassName)}setSVGData(e){this.renderer.setAttribute(e,"data-icon",this.type),this.renderer.setAttribute(e,"aria-hidden","true")}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.R0b),s.Y36(s.sBO),s.Y36(s.SBq),s.Y36(c4),s.Y36(s.Qsj),s.Y36(h4,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","nz-icon",""]],hostVars:2,hostBindings:function(e,n){2&e&&s.ekj("anticon",!0)},inputs:{nzSpin:"nzSpin",nzRotate:"nzRotate",nzType:"nzType",nzTheme:"nzTheme",nzTwotoneColor:"nzTwotoneColor",nzIconfont:"nzIconfont"},exportAs:["nzIcon"],features:[s.qOj,s.TTD]}),(0,T.gn)([R()],i.prototype,"nzSpin",null),i})(),at=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[{provide:r4,useValue:e}]}}static forChild(e){return{ngModule:i,providers:[h4,{provide:l4,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[ft]}),i})();function Vd(i,t){if(1&i&&s._UZ(0,"span",1),2&i){const e=s.oxw();s.Q6J("nzType",e.iconType)}}let Ja=(()=>{class i{constructor(){this.formStatusChanges=new oe(1)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),sr=(()=>{class i{constructor(){this.noFormStatus=new te.X(!1)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();const Ld={error:"close-circle-fill",validating:"loading",success:"check-circle-fill",warning:"exclamation-circle-fill"};let Qa=(()=>{class i{constructor(e){this.cdr=e,this.status="",this.iconType=null}ngOnChanges(e){this.updateIcon()}updateIcon(){this.iconType=this.status?Ld[this.status]:null,this.cdr.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.sBO))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-form-item-feedback-icon"]],hostAttrs:[1,"ant-form-item-feedback-icon"],hostVars:8,hostBindings:function(e,n){2&e&&s.ekj("ant-form-item-feedback-icon-error","error"===n.status)("ant-form-item-feedback-icon-warning","warning"===n.status)("ant-form-item-feedback-icon-success","success"===n.status)("ant-form-item-feedback-icon-validating","validating"===n.status)},inputs:{status:"status"},exportAs:["nzFormFeedbackIcon"],features:[s.TTD],decls:1,vars:1,consts:[["nz-icon","",3,"nzType",4,"ngIf"],["nz-icon","",3,"nzType"]],template:function(e,n){1&e&&s.YNc(0,Vd,1,1,"span",0),2&e&&s.Q6J("ngIf",n.iconType)},dependencies:[M.O5,De],encapsulation:2,changeDetection:0}),i})(),u4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[M.ez,at]}),i})();var ne=j(433);const Hd=new s.OlP("cdk-dir-doc",{providedIn:"root",factory:function Bd(){return(0,s.f3M)(M.K0)}}),Fd=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function d4(i){const t=i?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?Fd.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}let ge=(()=>{class i{constructor(e){this.value="ltr",this.change=new s.vpe,e&&(this.value=d4((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Hd,8))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Rd=(()=>{class i{constructor(){this._dir="ltr",this._isInitialized=!1,this.change=new s.vpe}get dir(){return this._dir}set dir(e){const n=this._dir;this._dir=d4(e),this._rawDir=e,n!==this._dir&&this._isInitialized&&this.change.emit(this._dir)}get value(){return this.dir}ngAfterContentInit(){this._isInitialized=!0}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=s.lG2({type:i,selectors:[["","dir",""]],hostVars:1,hostBindings:function(e,n){2&e&&s.uIk("dir",n._rawDir)},inputs:{dir:"dir"},outputs:{change:"dirChange"},exportAs:["dir"],features:[s._Bn([{provide:ge,useExisting:i}])]}),i})(),we=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})();var zt=j(727);function jo(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}class nf extends zt.w0{constructor(t,e){super()}schedule(t,e=0){return this}}const hr={setInterval(i,t,...e){const{delegate:n}=hr;return n?.setInterval?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){const{delegate:t}=hr;return(t?.clearInterval||clearInterval)(i)},delegate:void 0};var sf=j(8737);class Xa extends nf{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var n;if(this.closed)return this;this.state=t;const o=this.id,r=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(r,o,e)),this.pending=!0,this.delay=e,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return hr.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;null!=e&&hr.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let o,n=!1;try{this.work(t)}catch(r){n=!0,o=r||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,sf.P)(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}class $o{constructor(t,e=$o.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}$o.now=wt.now;class Ka extends $o{constructor(t,e=$o.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const ur=new Ka(Xa),rf=ur;function dr(i,t=ur){return(0,Et.e)((e,n)=>{let o=null,r=null,a=null;const c=()=>{if(o){o.unsubscribe(),o=null;const h=r;r=null,n.next(h)}};function l(){const h=a+i,u=t.now();if(u<h)return o=this.schedule(void 0,h-u),void n.add(o);c()}e.subscribe((0,mt.x)(n,h=>{r=h,a=t.now(),o||(o=t.schedule(l,i),n.add(o))},()=>{c(),n.complete()},void 0,()=>{r=o=null}))})}function ec(i){return(0,Y.h)((t,e)=>i<=e)}let af=(()=>{class i{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),tc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[af]}),i})();var ct=j(9841),p4=j(7272);let nc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})();const g4=new Set;let Di,m4=(()=>{class i{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):lf}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function cf(i){if(!g4.has(i))try{Di||(Di=document.createElement("style"),Di.setAttribute("type","text/css"),document.head.appendChild(Di)),Di.sheet&&(Di.sheet.insertRule(`@media ${i} {body{ }}`,0),g4.add(i))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Ce))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function lf(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let hf=(()=>{class i{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new H.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return v4(Ks(e)).some(o=>this._registerQuery(o).mql.matches)}observe(e){const o=v4(Ks(e)).map(a=>this._registerQuery(a).observable);let r=(0,ct.a)(o);return r=(0,p4.z)(r.pipe((0,Ft.q)(1)),r.pipe(ec(1),dr(0))),r.pipe((0,U.U)(a=>{const c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:h})=>{c.matches=c.matches||l,c.breakpoints[h]=l}),c}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const n=this._mediaMatcher.matchMedia(e),r={observable:new rn.y(a=>{const c=l=>this._zone.run(()=>a.next(l));return n.addListener(c),()=>{n.removeListener(c)}}).pipe((0,Q.O)(n),(0,U.U)(({matches:a})=>({query:e,matches:a})),N(this._destroySubject)),mql:n};return this._queries.set(e,r),r}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(m4),s.LFG(s.R0b))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function v4(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}let gf=(()=>{class i{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function vf(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const n=function mf(i){try{return i.frameElement}catch{return null}}(function Mf(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(e));if(n&&(-1===C4(n)||!this.isVisible(n)))return!1;let o=e.nodeName.toLowerCase(),r=C4(e);return e.hasAttribute("contenteditable")?-1!==r:!("iframe"===o||"object"===o||this._platform.WEBKIT&&this._platform.IOS&&!function xf(i){let t=i.nodeName.toLowerCase(),e="input"===t&&i.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===o?!!e.hasAttribute("controls")&&-1!==r:"video"===o?-1!==r&&(null!==r||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,n){return function wf(i){return!function bf(i){return function Cf(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function zf(i){let t=i.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(i)||function yf(i){return function _f(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||y4(i))}(e)&&!this.isDisabled(e)&&(n?.ignoreVisibility||this.isVisible(e))}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Ce))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function y4(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let t=i.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function C4(i){if(!y4(i))return null;const t=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class Sf{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,n,o,r=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return n?.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=0;n<e.length;n++){const o=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(o)return o}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=e.length-1;n>=0;n--){const o=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(o)return o}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe((0,Ft.q)(1)).subscribe(t)}}let _4=(()=>{class i{constructor(e,n,o){this._checker=e,this._ngZone=n,this._document=o}create(e,n=!1){return new Sf(e,this._checker,this._ngZone,this._document,n)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(gf),s.LFG(s.R0b),s.LFG(M.K0))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Af=new s.OlP("cdk-input-modality-detector-options"),Ef={ignoreKeys:[18,17,224,91,16]},Ii=r1({passive:!0,capture:!0});let Nf=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(e,n,o,r){this._platform=e,this._mostRecentTarget=null,this._modality=new te.X(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Wn(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(function Tf(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}(a)?"keyboard":"mouse"),this._mostRecentTarget=Wn(a))},this._onTouchstart=a=>{!function Of(i){const t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}(a)?(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Wn(a)):this._modality.next("keyboard")},this._options={...Ef,...r},this.modalityDetected=this._modality.pipe(ec(1)),this.modalityChanged=this.modalityDetected.pipe(Le()),e.isBrowser&&n.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,Ii),o.addEventListener("mousedown",this._onMousedown,Ii),o.addEventListener("touchstart",this._onTouchstart,Ii)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ii),document.removeEventListener("mousedown",this._onMousedown,Ii),document.removeEventListener("touchstart",this._onTouchstart,Ii))}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Ce),s.LFG(s.R0b),s.LFG(M.K0),s.LFG(Af,8))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Df=new s.OlP("cdk-focus-monitor-default-options"),fr=r1({passive:!0,capture:!0});let Yo=(()=>{class i{constructor(e,n,o,r,a){this._ngZone=e,this._platform=n,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new H.x,this._rootNodeFocusAndBlurListener=c=>{for(let h=Wn(c);h;h=h.parentElement)"focus"===c.type?this._onFocus(c,h):this._onBlur(c,h)},this._document=r,this._detectionMode=a?.detectionMode||0}monitor(e,n=!1){const o=Ni(e);if(!this._platform.isBrowser||1!==o.nodeType)return(0,Bt.of)(null);const r=function N8(i){if(function E8(){if(null==Oa){const i=typeof document<"u"?document.head:null;Oa=!(!i||!i.createShadowRoot&&!i.attachShadow)}return Oa}()){const t=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return n&&(a.checkChildren=!0),a.subject;const c={checkChildren:n,subject:new H.x,rootNode:r};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(e){const n=Ni(e),o=this._elementInfo.get(n);o&&(o.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(o))}focusVia(e,n,o){const r=Ni(e);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([c,l])=>this._originChanged(c,n,l)):(this._setOrigin(n),"function"==typeof r.focus&&r.focus(o))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused","touch"===n),e.classList.toggle("cdk-keyboard-focused","keyboard"===n),e.classList.toggle("cdk-mouse-focused","mouse"===n),e.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,n){const o=this._elementInfo.get(n),r=Wn(e);!o||!o.checkChildren&&n!==r||this._originChanged(n,this._getFocusOrigin(r),o)}_onBlur(e,n){const o=this._elementInfo.get(n);!o||o.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(o,null))}_emitOrigin(e,n){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const n=e.rootNode,o=this._rootNodeFocusListenerCount.get(n)||0;o||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,fr),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,fr)}),this._rootNodeFocusListenerCount.set(n,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(N(this._stopInputModalityDetector)).subscribe(r=>{this._setOrigin(r,!0)}))}_removeGlobalListeners(e){const n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const o=this._rootNodeFocusListenerCount.get(n);o>1?this._rootNodeFocusListenerCount.set(n,o-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,fr),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,fr),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,o){this._setClasses(e,n),this._emitOrigin(o,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){const n=[];return this._elementInfo.forEach((o,r)=>{(r===e||o.checkChildren&&r.contains(e))&&n.push([r,o])}),n}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:n,mostRecentModality:o}=this._inputModalityDetector;if("mouse"!==o||!n||n===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const r=e.labels;if(r)for(let a=0;a<r.length;a++)if(r[a].contains(n))return!0;return!1}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(s.R0b),s.LFG(Ce),s.LFG(Nf),s.LFG(M.K0,8),s.LFG(Df,8))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const w4="cdk-high-contrast-black-on-white",M4="cdk-high-contrast-white-on-black",ic="cdk-high-contrast-active";let Pf=(()=>{class i{constructor(e,n){this._platform=e,this._document=n,this._breakpointSubscription=(0,s.f3M)(hf).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const n=this._document.defaultView||window,o=n&&n.getComputedStyle?n.getComputedStyle(e):null,r=(o&&o.backgroundColor||"").replace(/ /g,"");switch(e.remove(),r){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(ic,w4,M4),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?e.add(ic,w4):2===n&&e.add(ic,M4)}}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Ce),s.LFG(M.K0))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),oc=(()=>{class i{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Pf))},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[tc]}),i})(),Be=(()=>{class i{constructor(e,n){this.viewContainer=e,this.templateRef=n,this.embeddedViewRef=null,this.context=new Vf,this.nzStringTemplateOutletContext=null,this.nzStringTemplateOutlet=null}static ngTemplateContextGuard(e,n){return!0}recreateView(){this.viewContainer.clear();const e=this.nzStringTemplateOutlet instanceof s.Rgc;this.embeddedViewRef=this.viewContainer.createEmbeddedView(e?this.nzStringTemplateOutlet:this.templateRef,e?this.nzStringTemplateOutletContext:this.context)}updateContext(){const n=this.nzStringTemplateOutlet instanceof s.Rgc?this.nzStringTemplateOutletContext:this.context,o=this.embeddedViewRef.context;if(n)for(const r of Object.keys(n))o[r]=n[r]}ngOnChanges(e){const{nzStringTemplateOutletContext:n,nzStringTemplateOutlet:o}=e;o&&(this.context.$implicit=o.currentValue),(()=>{let c=!1;return o&&(c=!!o.firstChange||(o.previousValue instanceof s.Rgc||o.currentValue instanceof s.Rgc)),n&&(u=>{const d=Object.keys(u.previousValue||{}),f=Object.keys(u.currentValue||{});if(d.length===f.length){for(const p of f)if(-1===d.indexOf(p))return!0;return!1}return!0})(n)||c})()?this.recreateView():this.updateContext()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.s_b),s.Y36(s.Rgc))},i.\u0275dir=s.lG2({type:i,selectors:[["","nzStringTemplateOutlet",""]],inputs:{nzStringTemplateOutletContext:"nzStringTemplateOutletContext",nzStringTemplateOutlet:"nzStringTemplateOutlet"},exportAs:["nzStringTemplateOutlet"],features:[s.TTD]}),i})();class Vf{}let St=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[M.ez]}),i})();const Lf=["nz-input-group-slot",""];function Hf(i,t){if(1&i&&s._UZ(0,"span",2),2&i){const e=s.oxw();s.Q6J("nzType",e.icon)}}function Bf(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Oqu(e.template)}}const S4=["*"];function Ff(i,t){if(1&i&&s._UZ(0,"span",7),2&i){const e=s.oxw(2);s.Q6J("icon",e.nzAddOnBeforeIcon)("template",e.nzAddOnBefore)}}function Rf(i,t){}function jf(i,t){if(1&i&&(s.TgZ(0,"span",8),s.YNc(1,Rf,0,0,"ng-template",9),s.qZA()),2&i){const e=s.oxw(2),n=s.MAs(4);s.ekj("ant-input-affix-wrapper-disabled",e.disabled)("ant-input-affix-wrapper-sm",e.isSmall)("ant-input-affix-wrapper-lg",e.isLarge)("ant-input-affix-wrapper-focused",e.focused),s.Q6J("ngClass",e.affixInGroupStatusCls),s.xp6(1),s.Q6J("ngTemplateOutlet",n)}}function $f(i,t){if(1&i&&s._UZ(0,"span",7),2&i){const e=s.oxw(2);s.Q6J("icon",e.nzAddOnAfterIcon)("template",e.nzAddOnAfter)}}function Yf(i,t){if(1&i&&(s.TgZ(0,"span",4),s.YNc(1,Ff,1,2,"span",5),s.YNc(2,jf,2,10,"span",6),s.YNc(3,$f,1,2,"span",5),s.qZA()),2&i){const e=s.oxw(),n=s.MAs(6);s.xp6(1),s.Q6J("ngIf",e.nzAddOnBefore||e.nzAddOnBeforeIcon),s.xp6(1),s.Q6J("ngIf",e.isAffix||e.hasFeedback)("ngIfElse",n),s.xp6(1),s.Q6J("ngIf",e.nzAddOnAfter||e.nzAddOnAfterIcon)}}function Gf(i,t){}function Zf(i,t){if(1&i&&s.YNc(0,Gf,0,0,"ng-template",9),2&i){s.oxw(2);const e=s.MAs(4);s.Q6J("ngTemplateOutlet",e)}}function qf(i,t){if(1&i&&s.YNc(0,Zf,1,1,"ng-template",10),2&i){const e=s.oxw(),n=s.MAs(6);s.Q6J("ngIf",e.isAffix)("ngIfElse",n)}}function Wf(i,t){if(1&i&&s._UZ(0,"span",13),2&i){const e=s.oxw(2);s.Q6J("icon",e.nzPrefixIcon)("template",e.nzPrefix)}}function Uf(i,t){}function Jf(i,t){if(1&i&&s._UZ(0,"nz-form-item-feedback-icon",16),2&i){const e=s.oxw(3);s.Q6J("status",e.status)}}function Qf(i,t){if(1&i&&(s.TgZ(0,"span",14),s.YNc(1,Jf,1,1,"nz-form-item-feedback-icon",15),s.qZA()),2&i){const e=s.oxw(2);s.Q6J("icon",e.nzSuffixIcon)("template",e.nzSuffix),s.xp6(1),s.Q6J("ngIf",e.isFeedback)}}function Xf(i,t){if(1&i&&(s.YNc(0,Wf,1,2,"span",11),s.YNc(1,Uf,0,0,"ng-template",9),s.YNc(2,Qf,2,3,"span",12)),2&i){const e=s.oxw(),n=s.MAs(6);s.Q6J("ngIf",e.nzPrefix||e.nzPrefixIcon),s.xp6(1),s.Q6J("ngTemplateOutlet",n),s.xp6(1),s.Q6J("ngIf",e.nzSuffix||e.nzSuffixIcon||e.isFeedback)}}function Kf(i,t){if(1&i&&(s.TgZ(0,"span",18),s._UZ(1,"nz-form-item-feedback-icon",16),s.qZA()),2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("status",e.status)}}function ep(i,t){if(1&i&&(s.Hsn(0),s.YNc(1,Kf,2,1,"span",17)),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",!e.isAddOn&&!e.isAffix&&e.isFeedback)}}let Pi=(()=>{class i{constructor(e,n,o,r,a,c,l){this.ngControl=e,this.renderer=n,this.elementRef=o,this.hostView=r,this.directionality=a,this.nzFormStatusService=c,this.nzFormNoStatusService=l,this.nzBorderless=!1,this.nzSize="default",this.nzStatus="",this._disabled=!1,this.disabled$=new H.x,this.dir="ltr",this.prefixCls="ant-input",this.status="",this.statusCls={},this.hasFeedback=!1,this.feedbackRef=null,this.components=[],this.destroy$=new H.x}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=null!=e&&"false"!=`${e}`}ngOnInit(){this.nzFormStatusService?.formStatusChanges.pipe(Le((e,n)=>e.status===n.status&&e.hasFeedback===n.hasFeedback),N(this.destroy$)).subscribe(({status:e,hasFeedback:n})=>{this.setStatusStyles(e,n)}),this.ngControl&&this.ngControl.statusChanges?.pipe((0,Y.h)(()=>null!==this.ngControl.disabled),N(this.destroy$)).subscribe(()=>{this.disabled$.next(this.ngControl.disabled)}),this.dir=this.directionality.value,this.directionality.change?.pipe(N(this.destroy$)).subscribe(e=>{this.dir=e})}ngOnChanges(e){const{disabled:n,nzStatus:o}=e;n&&this.disabled$.next(this.disabled),o&&this.setStatusStyles(this.nzStatus,this.hasFeedback)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setStatusStyles(e,n){this.status=e,this.hasFeedback=n,this.renderFeedbackIcon(),this.statusCls=Ho(this.prefixCls,e,n),Object.keys(this.statusCls).forEach(o=>{this.statusCls[o]?this.renderer.addClass(this.elementRef.nativeElement,o):this.renderer.removeClass(this.elementRef.nativeElement,o)})}renderFeedbackIcon(){if(!this.status||!this.hasFeedback||this.nzFormNoStatusService)return this.hostView.clear(),void(this.feedbackRef=null);this.feedbackRef=this.feedbackRef||this.hostView.createComponent(Qa),this.feedbackRef.location.nativeElement.classList.add("ant-input-suffix"),this.feedbackRef.instance.status=this.status,this.feedbackRef.instance.updateIcon()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(ne.a5,10),s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36(s.s_b),s.Y36(ge,8),s.Y36(Ja,8),s.Y36(sr,8))},i.\u0275dir=s.lG2({type:i,selectors:[["input","nz-input",""],["textarea","nz-input",""]],hostAttrs:[1,"ant-input"],hostVars:11,hostBindings:function(e,n){2&e&&(s.uIk("disabled",n.disabled||null),s.ekj("ant-input-disabled",n.disabled)("ant-input-borderless",n.nzBorderless)("ant-input-lg","large"===n.nzSize)("ant-input-sm","small"===n.nzSize)("ant-input-rtl","rtl"===n.dir))},inputs:{nzBorderless:"nzBorderless",nzSize:"nzSize",nzStatus:"nzStatus",disabled:"disabled"},exportAs:["nzInput"],features:[s.TTD]}),(0,T.gn)([R()],i.prototype,"nzBorderless",void 0),i})(),tp=(()=>{class i{constructor(){this.icon=null,this.type=null,this.template=null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["","nz-input-group-slot",""]],hostVars:6,hostBindings:function(e,n){2&e&&s.ekj("ant-input-group-addon","addon"===n.type)("ant-input-prefix","prefix"===n.type)("ant-input-suffix","suffix"===n.type)},inputs:{icon:"icon",type:"type",template:"template"},attrs:Lf,ngContentSelectors:S4,decls:3,vars:2,consts:[["nz-icon","",3,"nzType",4,"ngIf"],[4,"nzStringTemplateOutlet"],["nz-icon","",3,"nzType"]],template:function(e,n){1&e&&(s.F$t(),s.YNc(0,Hf,1,1,"span",0),s.YNc(1,Bf,2,1,"ng-container",1),s.Hsn(2)),2&e&&(s.Q6J("ngIf",n.icon),s.xp6(1),s.Q6J("nzStringTemplateOutlet",n.template))},dependencies:[M.O5,De,Be],encapsulation:2,changeDetection:0}),i})(),np=(()=>{class i{constructor(e){this.elementRef=e}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq))},i.\u0275dir=s.lG2({type:i,selectors:[["nz-input-group","nzSuffix",""],["nz-input-group","nzPrefix",""]]}),i})(),ip=(()=>{class i{constructor(e,n,o,r,a,c,l){this.focusMonitor=e,this.elementRef=n,this.renderer=o,this.cdr=r,this.directionality=a,this.nzFormStatusService=c,this.nzFormNoStatusService=l,this.nzAddOnBeforeIcon=null,this.nzAddOnAfterIcon=null,this.nzPrefixIcon=null,this.nzSuffixIcon=null,this.nzStatus="",this.nzSize="default",this.nzSearch=!1,this.nzCompact=!1,this.isLarge=!1,this.isSmall=!1,this.isAffix=!1,this.isAddOn=!1,this.isFeedback=!1,this.focused=!1,this.disabled=!1,this.dir="ltr",this.prefixCls="ant-input",this.affixStatusCls={},this.groupStatusCls={},this.affixInGroupStatusCls={},this.status="",this.hasFeedback=!1,this.destroy$=new H.x}updateChildrenInputSize(){this.listOfNzInputDirective&&this.listOfNzInputDirective.forEach(e=>e.nzSize=this.nzSize)}ngOnInit(){this.nzFormStatusService?.formStatusChanges.pipe(Le((e,n)=>e.status===n.status&&e.hasFeedback===n.hasFeedback),N(this.destroy$)).subscribe(({status:e,hasFeedback:n})=>{this.setStatusStyles(e,n)}),this.focusMonitor.monitor(this.elementRef,!0).pipe(N(this.destroy$)).subscribe(e=>{this.focused=!!e,this.cdr.markForCheck()}),this.dir=this.directionality.value,this.directionality.change?.pipe(N(this.destroy$)).subscribe(e=>{this.dir=e})}ngAfterContentInit(){this.updateChildrenInputSize();const e=this.listOfNzInputDirective.changes.pipe((0,Q.O)(this.listOfNzInputDirective));e.pipe((0,se.w)(n=>(0,ze.T)(e,...n.map(o=>o.disabled$))),(0,re.z)(()=>e),(0,U.U)(n=>n.some(o=>o.disabled)),N(this.destroy$)).subscribe(n=>{this.disabled=n,this.cdr.markForCheck()})}ngOnChanges(e){const{nzSize:n,nzSuffix:o,nzPrefix:r,nzPrefixIcon:a,nzSuffixIcon:c,nzAddOnAfter:l,nzAddOnBefore:h,nzAddOnAfterIcon:u,nzAddOnBeforeIcon:d,nzStatus:f}=e;n&&(this.updateChildrenInputSize(),this.isLarge="large"===this.nzSize,this.isSmall="small"===this.nzSize),(o||r||a||c)&&(this.isAffix=!!(this.nzSuffix||this.nzPrefix||this.nzPrefixIcon||this.nzSuffixIcon)),(l||h||u||d)&&(this.isAddOn=!!(this.nzAddOnAfter||this.nzAddOnBefore||this.nzAddOnAfterIcon||this.nzAddOnBeforeIcon),this.nzFormNoStatusService?.noFormStatus?.next(this.isAddOn)),f&&this.setStatusStyles(this.nzStatus,this.hasFeedback)}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef),this.destroy$.next(),this.destroy$.complete()}setStatusStyles(e,n){this.status=e,this.hasFeedback=n,this.isFeedback=!!e&&n,this.isAffix=!!(this.nzSuffix||this.nzPrefix||this.nzPrefixIcon||this.nzSuffixIcon)||!this.isAddOn&&n,this.affixInGroupStatusCls=this.isAffix||this.isFeedback?this.affixStatusCls=Ho(`${this.prefixCls}-affix-wrapper`,e,n):{},this.cdr.markForCheck(),this.affixStatusCls=Ho(`${this.prefixCls}-affix-wrapper`,this.isAddOn?"":e,!this.isAddOn&&n),this.groupStatusCls=Ho(`${this.prefixCls}-group-wrapper`,this.isAddOn?e:"",!!this.isAddOn&&n);const r={...this.affixStatusCls,...this.groupStatusCls};Object.keys(r).forEach(a=>{r[a]?this.renderer.addClass(this.elementRef.nativeElement,a):this.renderer.removeClass(this.elementRef.nativeElement,a)})}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Yo),s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(s.sBO),s.Y36(ge,8),s.Y36(Ja,8),s.Y36(sr,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-input-group"]],contentQueries:function(e,n,o){if(1&e&&s.Suo(o,Pi,4),2&e){let r;s.iGM(r=s.CRH())&&(n.listOfNzInputDirective=r)}},hostVars:40,hostBindings:function(e,n){2&e&&s.ekj("ant-input-group-compact",n.nzCompact)("ant-input-search-enter-button",n.nzSearch)("ant-input-search",n.nzSearch)("ant-input-search-rtl","rtl"===n.dir)("ant-input-search-sm",n.nzSearch&&n.isSmall)("ant-input-search-large",n.nzSearch&&n.isLarge)("ant-input-group-wrapper",n.isAddOn)("ant-input-group-wrapper-rtl","rtl"===n.dir)("ant-input-group-wrapper-lg",n.isAddOn&&n.isLarge)("ant-input-group-wrapper-sm",n.isAddOn&&n.isSmall)("ant-input-affix-wrapper",n.isAffix&&!n.isAddOn)("ant-input-affix-wrapper-rtl","rtl"===n.dir)("ant-input-affix-wrapper-focused",n.isAffix&&n.focused)("ant-input-affix-wrapper-disabled",n.isAffix&&n.disabled)("ant-input-affix-wrapper-lg",n.isAffix&&!n.isAddOn&&n.isLarge)("ant-input-affix-wrapper-sm",n.isAffix&&!n.isAddOn&&n.isSmall)("ant-input-group",!n.isAffix&&!n.isAddOn)("ant-input-group-rtl","rtl"===n.dir)("ant-input-group-lg",!n.isAffix&&!n.isAddOn&&n.isLarge)("ant-input-group-sm",!n.isAffix&&!n.isAddOn&&n.isSmall)},inputs:{nzAddOnBeforeIcon:"nzAddOnBeforeIcon",nzAddOnAfterIcon:"nzAddOnAfterIcon",nzPrefixIcon:"nzPrefixIcon",nzSuffixIcon:"nzSuffixIcon",nzAddOnBefore:"nzAddOnBefore",nzAddOnAfter:"nzAddOnAfter",nzPrefix:"nzPrefix",nzStatus:"nzStatus",nzSuffix:"nzSuffix",nzSize:"nzSize",nzSearch:"nzSearch",nzCompact:"nzCompact"},exportAs:["nzInputGroup"],features:[s._Bn([sr]),s.TTD],ngContentSelectors:S4,decls:7,vars:2,consts:[["class","ant-input-wrapper ant-input-group",4,"ngIf","ngIfElse"],["noAddOnTemplate",""],["affixTemplate",""],["contentTemplate",""],[1,"ant-input-wrapper","ant-input-group"],["nz-input-group-slot","","type","addon",3,"icon","template",4,"ngIf"],["class","ant-input-affix-wrapper",3,"ant-input-affix-wrapper-disabled","ant-input-affix-wrapper-sm","ant-input-affix-wrapper-lg","ant-input-affix-wrapper-focused","ngClass",4,"ngIf","ngIfElse"],["nz-input-group-slot","","type","addon",3,"icon","template"],[1,"ant-input-affix-wrapper",3,"ngClass"],[3,"ngTemplateOutlet"],[3,"ngIf","ngIfElse"],["nz-input-group-slot","","type","prefix",3,"icon","template",4,"ngIf"],["nz-input-group-slot","","type","suffix",3,"icon","template",4,"ngIf"],["nz-input-group-slot","","type","prefix",3,"icon","template"],["nz-input-group-slot","","type","suffix",3,"icon","template"],[3,"status",4,"ngIf"],[3,"status"],["nz-input-group-slot","","type","suffix",4,"ngIf"],["nz-input-group-slot","","type","suffix"]],template:function(e,n){if(1&e&&(s.F$t(),s.YNc(0,Yf,4,4,"span",0),s.YNc(1,qf,1,2,"ng-template",null,1,s.W1O),s.YNc(3,Xf,3,3,"ng-template",null,2,s.W1O),s.YNc(5,ep,2,1,"ng-template",null,3,s.W1O)),2&e){const o=s.MAs(2);s.Q6J("ngIf",n.isAddOn)("ngIfElse",o)}},dependencies:[M.mk,M.O5,M.tP,Qa,tp],encapsulation:2,changeDetection:0}),(0,T.gn)([R()],i.prototype,"nzSearch",void 0),(0,T.gn)([R()],i.prototype,"nzCompact",void 0),i})(),sc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,at,ft,St,u4]}),i})(),op=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-input"]],decls:1,vars:0,consts:[["type","text","nz-input",""]],template:function(e,n){1&e&&s._UZ(0,"input",0)},dependencies:[Pi],styles:["input[_ngcontent-%COMP%]{width:100%;height:100%}"]}),i})(),sp=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-time"]],decls:2,vars:0,template:function(e,n){1&e&&(s.TgZ(0,"p"),s._uU(1,"time works!"),s.qZA())}}),i})();var rp=j(1144),ap=j(3268);const cp=["addListener","removeListener"],lp=["addEventListener","removeEventListener"],hp=["on","off"];function Me(i,t,e,n){if((0,cn.m)(e)&&(n=e,e=void 0),n)return Me(i,t,e).pipe((0,ap.Z)(n));const[o,r]=function fp(i){return(0,cn.m)(i.addEventListener)&&(0,cn.m)(i.removeEventListener)}(i)?lp.map(a=>c=>i[a](t,c,e)):function up(i){return(0,cn.m)(i.addListener)&&(0,cn.m)(i.removeListener)}(i)?cp.map(T4(i,t)):function dp(i){return(0,cn.m)(i.on)&&(0,cn.m)(i.off)}(i)?hp.map(T4(i,t)):[];if(!o&&(0,rp.z)(i))return(0,re.z)(a=>Me(a,t,e))((0,Cn.Xf)(i));if(!o)throw new TypeError("Invalid event target");return new rn.y(a=>{const c=(...l)=>a.next(1<l.length?l:l[0]);return o(c),()=>r(c)})}function T4(i,t){return e=>n=>i[e](t,n)}class pp{constructor(t,e,n,o){this.triggerElement=t,this.ngZone=e,this.insertExtraNode=n,this.platformId=o,this.waveTransitionDuration=400,this.styleForPseudo=null,this.extraNode=null,this.lastTime=0,this.onClick=r=>{!this.triggerElement||!this.triggerElement.getAttribute||this.triggerElement.getAttribute("disabled")||"INPUT"===r.target.tagName||this.triggerElement.className.indexOf("disabled")>=0||this.fadeOutWave()},this.platform=new Ce(this.platformId),this.clickHandler=this.onClick.bind(this),this.bindTriggerEvent()}get waveAttributeName(){return this.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"}bindTriggerEvent(){this.platform.isBrowser&&this.ngZone.runOutsideAngular(()=>{this.removeTriggerEvent(),this.triggerElement&&this.triggerElement.addEventListener("click",this.clickHandler,!0)})}removeTriggerEvent(){this.triggerElement&&this.triggerElement.removeEventListener("click",this.clickHandler,!0)}removeStyleAndExtraNode(){this.styleForPseudo&&document.body.contains(this.styleForPseudo)&&(document.body.removeChild(this.styleForPseudo),this.styleForPseudo=null),this.insertExtraNode&&this.triggerElement.contains(this.extraNode)&&this.triggerElement.removeChild(this.extraNode)}destroy(){this.removeTriggerEvent(),this.removeStyleAndExtraNode()}fadeOutWave(){const t=this.triggerElement,e=this.getWaveColor(t);t.setAttribute(this.waveAttributeName,"true"),!(Date.now()<this.lastTime+this.waveTransitionDuration)&&(this.isValidColor(e)&&(this.styleForPseudo||(this.styleForPseudo=document.createElement("style")),this.styleForPseudo.innerHTML=`\n      [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n        --antd-wave-shadow-color: ${e};\n      }`,document.body.appendChild(this.styleForPseudo)),this.insertExtraNode&&(this.extraNode||(this.extraNode=document.createElement("div")),this.extraNode.className="ant-click-animating-node",t.appendChild(this.extraNode)),this.lastTime=Date.now(),this.runTimeoutOutsideZone(()=>{t.removeAttribute(this.waveAttributeName),this.removeStyleAndExtraNode()},this.waveTransitionDuration))}isValidColor(t){return!!t&&"#ffffff"!==t&&"rgb(255, 255, 255)"!==t&&this.isNotGrey(t)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(t)&&"transparent"!==t}isNotGrey(t){const e=t.match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return!(e&&e[1]&&e[2]&&e[3]&&e[1]===e[2]&&e[2]===e[3])}getWaveColor(t){const e=getComputedStyle(t);return e.getPropertyValue("border-top-color")||e.getPropertyValue("border-color")||e.getPropertyValue("background-color")}runTimeoutOutsideZone(t,e){this.ngZone.runOutsideAngular(()=>setTimeout(t,e))}}const gp={disabled:!1},mp=new s.OlP("nz-wave-global-options",{providedIn:"root",factory:function vp(){return gp}});let Go=(()=>{class i{constructor(e,n,o,r,a){this.ngZone=e,this.elementRef=n,this.config=o,this.animationType=r,this.platformId=a,this.nzWaveExtraNode=!1,this.waveDisabled=!1,this.waveDisabled=this.isConfigDisabled()}get disabled(){return this.waveDisabled}get rendererRef(){return this.waveRenderer}isConfigDisabled(){let e=!1;return this.config&&"boolean"==typeof this.config.disabled&&(e=this.config.disabled),"NoopAnimations"===this.animationType&&(e=!0),e}ngOnDestroy(){this.waveRenderer&&this.waveRenderer.destroy()}ngOnInit(){this.renderWaveIfEnabled()}renderWaveIfEnabled(){!this.waveDisabled&&this.elementRef.nativeElement&&(this.waveRenderer=new pp(this.elementRef.nativeElement,this.ngZone,this.nzWaveExtraNode,this.platformId))}disable(){this.waveDisabled=!0,this.waveRenderer&&(this.waveRenderer.removeTriggerEvent(),this.waveRenderer.removeStyleAndExtraNode())}enable(){this.waveDisabled=this.isConfigDisabled()||!1,this.waveRenderer&&this.waveRenderer.bindTriggerEvent()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.R0b),s.Y36(s.SBq),s.Y36(mp,8),s.Y36(s.QbO,8),s.Y36(s.Lbi))},i.\u0275dir=s.lG2({type:i,selectors:[["","nz-wave",""],["button","nz-button","",3,"nzType","link",3,"nzType","text"]],inputs:{nzWaveExtraNode:"nzWaveExtraNode"},exportAs:["nzWave"]}),i})(),rc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[ft]}),i})();const zp=["switchElement"];function bp(i,t){1&i&&s._UZ(0,"span",8)}function yp(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw(2);s.xp6(1),s.Oqu(e.nzCheckedChildren)}}function Cp(i,t){if(1&i&&(s.ynx(0),s.YNc(1,yp,2,1,"ng-container",9),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("nzStringTemplateOutlet",e.nzCheckedChildren)}}function _p(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw(2);s.xp6(1),s.Oqu(e.nzUnCheckedChildren)}}function xp(i,t){if(1&i&&s.YNc(0,_p,2,1,"ng-container",9),2&i){const e=s.oxw();s.Q6J("nzStringTemplateOutlet",e.nzUnCheckedChildren)}}let Mp=(()=>{class i{constructor(e,n,o,r,a,c){this.nzConfigService=e,this.host=n,this.ngZone=o,this.cdr=r,this.focusMonitor=a,this.directionality=c,this._nzModuleName="switch",this.isChecked=!1,this.onChange=()=>{},this.onTouched=()=>{},this.nzLoading=!1,this.nzDisabled=!1,this.nzControl=!1,this.nzCheckedChildren=null,this.nzUnCheckedChildren=null,this.nzSize="default",this.nzId=null,this.dir="ltr",this.destroy$=new H.x,this.isNzDisableFirstChange=!0}updateValue(e){this.isChecked!==e&&(this.isChecked=e,this.onChange(this.isChecked))}focus(){this.focusMonitor.focusVia(this.switchElement.nativeElement,"keyboard")}blur(){this.switchElement.nativeElement.blur()}ngOnInit(){this.directionality.change.pipe(N(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value,this.ngZone.runOutsideAngular(()=>{Me(this.host.nativeElement,"click").pipe(N(this.destroy$)).subscribe(e=>{e.preventDefault(),!(this.nzControl||this.nzDisabled||this.nzLoading)&&this.ngZone.run(()=>{this.updateValue(!this.isChecked),this.cdr.markForCheck()})}),Me(this.switchElement.nativeElement,"keydown").pipe(N(this.destroy$)).subscribe(e=>{if(this.nzControl||this.nzDisabled||this.nzLoading)return;const{keyCode:n}=e;37!==n&&39!==n&&32!==n&&13!==n||(e.preventDefault(),this.ngZone.run(()=>{37===n?this.updateValue(!1):39===n?this.updateValue(!0):(32===n||13===n)&&this.updateValue(!this.isChecked),this.cdr.markForCheck()}))})})}ngAfterViewInit(){this.focusMonitor.monitor(this.switchElement.nativeElement,!0).pipe(N(this.destroy$)).subscribe(e=>{e||Promise.resolve().then(()=>this.onTouched())})}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.switchElement.nativeElement),this.destroy$.next(),this.destroy$.complete()}writeValue(e){this.isChecked=e,this.cdr.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.nzDisabled=this.isNzDisableFirstChange&&this.nzDisabled||e,this.isNzDisableFirstChange=!1,this.cdr.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(nt),s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(s.sBO),s.Y36(Yo),s.Y36(ge,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-switch"]],viewQuery:function(e,n){if(1&e&&s.Gf(zp,7),2&e){let o;s.iGM(o=s.CRH())&&(n.switchElement=o.first)}},inputs:{nzLoading:"nzLoading",nzDisabled:"nzDisabled",nzControl:"nzControl",nzCheckedChildren:"nzCheckedChildren",nzUnCheckedChildren:"nzUnCheckedChildren",nzSize:"nzSize",nzId:"nzId"},exportAs:["nzSwitch"],features:[s._Bn([{provide:ne.JU,useExisting:(0,s.Gpc)(()=>i),multi:!0}])],decls:9,vars:16,consts:[["nz-wave","","type","button",1,"ant-switch",3,"disabled","nzWaveExtraNode"],["switchElement",""],[1,"ant-switch-handle"],["nz-icon","","nzType","loading","class","ant-switch-loading-icon",4,"ngIf"],[1,"ant-switch-inner"],[4,"ngIf","ngIfElse"],["uncheckTemplate",""],[1,"ant-click-animating-node"],["nz-icon","","nzType","loading",1,"ant-switch-loading-icon"],[4,"nzStringTemplateOutlet"]],template:function(e,n){if(1&e&&(s.TgZ(0,"button",0,1)(2,"span",2),s.YNc(3,bp,1,0,"span",3),s.qZA(),s.TgZ(4,"span",4),s.YNc(5,Cp,2,1,"ng-container",5),s.YNc(6,xp,1,1,"ng-template",null,6,s.W1O),s.qZA(),s._UZ(8,"div",7),s.qZA()),2&e){const o=s.MAs(7);s.ekj("ant-switch-checked",n.isChecked)("ant-switch-loading",n.nzLoading)("ant-switch-disabled",n.nzDisabled)("ant-switch-small","small"===n.nzSize)("ant-switch-rtl","rtl"===n.dir),s.Q6J("disabled",n.nzDisabled)("nzWaveExtraNode",!0),s.uIk("id",n.nzId),s.xp6(3),s.Q6J("ngIf",n.nzLoading),s.xp6(2),s.Q6J("ngIf",n.isChecked)("ngIfElse",o)}},dependencies:[M.O5,Go,De,Be],encapsulation:2,changeDetection:0}),(0,T.gn)([R()],i.prototype,"nzLoading",void 0),(0,T.gn)([R()],i.prototype,"nzDisabled",void 0),(0,T.gn)([R()],i.prototype,"nzControl",void 0),(0,T.gn)([pe()],i.prototype,"nzSize",void 0),i})(),Sp=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,rc,at,St]}),i})(),Tp=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-switch"]],decls:1,vars:0,template:function(e,n){1&e&&s._UZ(0,"nz-switch")},dependencies:[Mp]}),i})();function Op(i,t){if(1&i&&(s.ynx(0),s._UZ(1,"span",8),s.BQk()),2&i){const e=s.oxw(3);s.xp6(1),s.Q6J("nzType",e.icon)}}function Ap(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=t.$implicit,n=s.oxw(4);s.xp6(1),s.hij(" ",e(n.nzPercent)," ")}}const Ep=function(i){return{$implicit:i}};function Np(i,t){if(1&i&&s.YNc(0,Ap,2,1,"ng-container",9),2&i){const e=s.oxw(3);s.Q6J("nzStringTemplateOutlet",e.formatter)("nzStringTemplateOutletContext",s.VKq(2,Ep,e.nzPercent))}}function kp(i,t){if(1&i&&(s.TgZ(0,"span",5),s.YNc(1,Op,2,1,"ng-container",6),s.YNc(2,Np,1,4,"ng-template",null,7,s.W1O),s.qZA()),2&i){const e=s.MAs(3),n=s.oxw(2);s.xp6(1),s.Q6J("ngIf",("exception"===n.status||"success"===n.status)&&!n.nzFormat)("ngIfElse",e)}}function Dp(i,t){if(1&i&&s.YNc(0,kp,4,2,"span",4),2&i){const e=s.oxw();s.Q6J("ngIf",e.nzShowInfo)}}function Ip(i,t){if(1&i&&s._UZ(0,"div",17),2&i){const e=s.oxw(4);s.Udp("width",e.nzSuccessPercent,"%")("border-radius","round"===e.nzStrokeLinecap?"100px":"0")("height",e.strokeWidth,"px")}}function Pp(i,t){if(1&i&&(s.TgZ(0,"div",13)(1,"div",14),s._UZ(2,"div",15),s.YNc(3,Ip,1,6,"div",16),s.qZA()()),2&i){const e=s.oxw(3);s.xp6(2),s.Udp("width",e.nzPercent,"%")("border-radius","round"===e.nzStrokeLinecap?"100px":"0")("background",e.isGradient?null:e.nzStrokeColor)("background-image",e.isGradient?e.lineGradient:null)("height",e.strokeWidth,"px"),s.xp6(1),s.Q6J("ngIf",e.nzSuccessPercent||0===e.nzSuccessPercent)}}function Vp(i,t){}function Lp(i,t){if(1&i&&(s.ynx(0),s.YNc(1,Pp,4,11,"div",11),s.YNc(2,Vp,0,0,"ng-template",12),s.BQk()),2&i){const e=s.oxw(2),n=s.MAs(1);s.xp6(1),s.Q6J("ngIf",!e.isSteps),s.xp6(1),s.Q6J("ngTemplateOutlet",n)}}function Hp(i,t){1&i&&s._UZ(0,"div",20),2&i&&s.Q6J("ngStyle",t.$implicit)}function Bp(i,t){}function Fp(i,t){if(1&i&&(s.TgZ(0,"div",18),s.YNc(1,Hp,1,1,"div",19),s.YNc(2,Bp,0,0,"ng-template",12),s.qZA()),2&i){const e=s.oxw(2),n=s.MAs(1);s.xp6(1),s.Q6J("ngForOf",e.steps),s.xp6(1),s.Q6J("ngTemplateOutlet",n)}}function Rp(i,t){if(1&i&&(s.TgZ(0,"div"),s.YNc(1,Lp,3,2,"ng-container",2),s.YNc(2,Fp,3,2,"div",10),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",!e.isSteps),s.xp6(1),s.Q6J("ngIf",e.isSteps)}}function jp(i,t){if(1&i&&(s.O4$(),s._UZ(0,"stop")),2&i){const e=t.$implicit;s.uIk("offset",e.offset)("stop-color",e.color)}}function $p(i,t){if(1&i&&(s.O4$(),s.TgZ(0,"defs")(1,"linearGradient",24),s.YNc(2,jp,1,2,"stop",25),s.qZA()()),2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("id","gradient-"+e.gradientId),s.xp6(1),s.Q6J("ngForOf",e.circleGradient)}}function Yp(i,t){if(1&i&&(s.O4$(),s._UZ(0,"path",26)),2&i){const e=t.$implicit,n=s.oxw(2);s.Q6J("ngStyle",e.strokePathStyle),s.uIk("d",n.pathString)("stroke-linecap",n.nzStrokeLinecap)("stroke",e.stroke)("stroke-width",n.nzPercent?n.strokeWidth:0)}}function Gp(i,t){1&i&&s.O4$()}function Zp(i,t){if(1&i&&(s.TgZ(0,"div",14),s.O4$(),s.TgZ(1,"svg",21),s.YNc(2,$p,3,2,"defs",2),s._UZ(3,"path",22),s.YNc(4,Yp,1,5,"path",23),s.qZA(),s.YNc(5,Gp,0,0,"ng-template",12),s.qZA()),2&i){const e=s.oxw(),n=s.MAs(1);s.Udp("width",e.nzWidth,"px")("height",e.nzWidth,"px")("font-size",.15*e.nzWidth+6,"px"),s.ekj("ant-progress-circle-gradient",e.isGradient),s.xp6(2),s.Q6J("ngIf",e.isGradient),s.xp6(1),s.Q6J("ngStyle",e.trailPathStyle),s.uIk("stroke-width",e.strokeWidth)("d",e.pathString),s.xp6(1),s.Q6J("ngForOf",e.progressCirclePath)("ngForTrackBy",e.trackByFn),s.xp6(1),s.Q6J("ngTemplateOutlet",n)}}const O4=i=>{let t=[];return Object.keys(i).forEach(e=>{const n=i[e],o=function qp(i){return+i.replace("%","")}(e);isNaN(o)||t.push({key:o,value:n})}),t=t.sort((e,n)=>e.key-n.key),t};let Jp=0;const A4="progress",Qp=new Map([["success","check"],["exception","close"]]),Xp=new Map([["normal","#108ee9"],["exception","#ff5500"],["success","#87d068"]]),Kp=i=>`${i}%`;let e5=(()=>{class i{constructor(e,n,o){this.cdr=e,this.nzConfigService=n,this.directionality=o,this._nzModuleName=A4,this.nzShowInfo=!0,this.nzWidth=132,this.nzStrokeColor=void 0,this.nzSize="default",this.nzPercent=0,this.nzStrokeWidth=void 0,this.nzGapDegree=void 0,this.nzType="line",this.nzGapPosition="top",this.nzStrokeLinecap="round",this.nzSteps=0,this.steps=[],this.lineGradient=null,this.isGradient=!1,this.isSteps=!1,this.gradientId=Jp++,this.progressCirclePath=[],this.trailPathStyle=null,this.dir="ltr",this.trackByFn=r=>`${r}`,this.cachedStatus="normal",this.inferredStatus="normal",this.destroy$=new H.x}get formatter(){return this.nzFormat||Kp}get status(){return this.nzStatus||this.inferredStatus}get strokeWidth(){return this.nzStrokeWidth||("line"===this.nzType&&"small"!==this.nzSize?8:6)}get isCircleStyle(){return"circle"===this.nzType||"dashboard"===this.nzType}ngOnChanges(e){const{nzSteps:n,nzGapPosition:o,nzStrokeLinecap:r,nzStrokeColor:a,nzGapDegree:c,nzType:l,nzStatus:h,nzPercent:u,nzSuccessPercent:d,nzStrokeWidth:f}=e;h&&(this.cachedStatus=this.nzStatus||this.cachedStatus),(u||d)&&(parseInt(this.nzPercent.toString(),10)>=100?(Qn(this.nzSuccessPercent)&&this.nzSuccessPercent>=100||void 0===this.nzSuccessPercent)&&(this.inferredStatus="success"):this.inferredStatus=this.cachedStatus),(h||u||d||a)&&this.updateIcon(),a&&this.setStrokeColor(),(o||r||c||l||u||a||a)&&this.getCirclePaths(),(u||n||f)&&(this.isSteps=this.nzSteps>0,this.isSteps&&this.getSteps())}ngOnInit(){this.nzConfigService.getConfigChangeEventForComponent(A4).pipe(N(this.destroy$)).subscribe(()=>{this.updateIcon(),this.setStrokeColor(),this.getCirclePaths()}),this.directionality.change?.pipe(N(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateIcon(){const e=Qp.get(this.status);this.icon=e?e+(this.isCircleStyle?"-o":"-circle-fill"):""}getSteps(){const e=Math.floor(this.nzSteps*(this.nzPercent/100)),n="small"===this.nzSize?2:14,o=[];for(let r=0;r<this.nzSteps;r++){let a;r<=e-1&&(a=this.nzStrokeColor),o.push({backgroundColor:`${a}`,width:`${n}px`,height:`${this.strokeWidth}px`})}this.steps=o}getCirclePaths(){if(!this.isCircleStyle)return;const e=Qn(this.nzSuccessPercent)?[this.nzSuccessPercent,this.nzPercent]:[this.nzPercent],n=50-this.strokeWidth/2,r=2*Math.PI*n,a=this.nzGapDegree||("circle"===this.nzType?0:75);let c=0,l=-n,h=0,u=-2*n;switch(this.nzGapPosition||("circle"===this.nzType?"top":"bottom")){case"left":c=-n,l=0,h=2*n,u=0;break;case"right":c=n,l=0,h=-2*n,u=0;break;case"bottom":l=n,u=2*n}this.pathString=`M 50,50 m ${c},${l}\n       a ${n},${n} 0 1 1 ${h},${-u}\n       a ${n},${n} 0 1 1 ${-h},${u}`,this.trailPathStyle={strokeDasharray:`${r-a}px ${r}px`,strokeDashoffset:`-${a/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"},this.progressCirclePath=e.map((d,f)=>{const p=2===e.length&&0===f;return{stroke:this.isGradient&&!p?`url(#gradient-${this.gradientId})`:null,strokePathStyle:{stroke:this.isGradient?null:p?Xp.get("success"):this.nzStrokeColor,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s",strokeDasharray:`${(d||0)/100*(r-a)}px ${r}px`,strokeDashoffset:`-${a/2}px`}}}).reverse()}setStrokeColor(){const e=this.nzStrokeColor,n=this.isGradient=!!e&&"string"!=typeof e;n&&!this.isCircleStyle?this.lineGradient=(i=>{const{from:t="#1890ff",to:e="#1890ff",direction:n="to right",...o}=i;return 0!==Object.keys(o).length?`linear-gradient(${n}, ${O4(o).map(({key:a,value:c})=>`${c} ${a}%`).join(", ")})`:`linear-gradient(${n}, ${t}, ${e})`})(e):n&&this.isCircleStyle?this.circleGradient=(i=>O4(this.nzStrokeColor).map(({key:t,value:e})=>({offset:`${t}%`,color:e})))():(this.lineGradient=null,this.circleGradient=[])}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.sBO),s.Y36(nt),s.Y36(ge,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-progress"]],inputs:{nzShowInfo:"nzShowInfo",nzWidth:"nzWidth",nzStrokeColor:"nzStrokeColor",nzSize:"nzSize",nzFormat:"nzFormat",nzSuccessPercent:"nzSuccessPercent",nzPercent:"nzPercent",nzStrokeWidth:"nzStrokeWidth",nzGapDegree:"nzGapDegree",nzStatus:"nzStatus",nzType:"nzType",nzGapPosition:"nzGapPosition",nzStrokeLinecap:"nzStrokeLinecap",nzSteps:"nzSteps"},exportAs:["nzProgress"],features:[s.TTD],decls:5,vars:17,consts:[["progressInfoTemplate",""],[3,"ngClass"],[4,"ngIf"],["class","ant-progress-inner",3,"width","height","fontSize","ant-progress-circle-gradient",4,"ngIf"],["class","ant-progress-text",4,"ngIf"],[1,"ant-progress-text"],[4,"ngIf","ngIfElse"],["formatTemplate",""],["nz-icon","",3,"nzType"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["class","ant-progress-steps-outer",4,"ngIf"],["class","ant-progress-outer",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"ant-progress-outer"],[1,"ant-progress-inner"],[1,"ant-progress-bg"],["class","ant-progress-success-bg",3,"width","border-radius","height",4,"ngIf"],[1,"ant-progress-success-bg"],[1,"ant-progress-steps-outer"],["class","ant-progress-steps-item",3,"ngStyle",4,"ngFor","ngForOf"],[1,"ant-progress-steps-item",3,"ngStyle"],["viewBox","0 0 100 100",1,"ant-progress-circle"],["stroke","#f3f3f3","fill-opacity","0",1,"ant-progress-circle-trail",3,"ngStyle"],["class","ant-progress-circle-path","fill-opacity","0",3,"ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],["x1","100%","y1","0%","x2","0%","y2","0%",3,"id"],[4,"ngFor","ngForOf"],["fill-opacity","0",1,"ant-progress-circle-path",3,"ngStyle"]],template:function(e,n){1&e&&(s.YNc(0,Dp,1,1,"ng-template",null,0,s.W1O),s.TgZ(2,"div",1),s.YNc(3,Rp,3,2,"div",2),s.YNc(4,Zp,6,15,"div",3),s.qZA()),2&e&&(s.xp6(2),s.ekj("ant-progress-line","line"===n.nzType)("ant-progress-small","small"===n.nzSize)("ant-progress-default","default"===n.nzSize)("ant-progress-show-info",n.nzShowInfo)("ant-progress-circle",n.isCircleStyle)("ant-progress-steps",n.isSteps)("ant-progress-rtl","rtl"===n.dir),s.Q6J("ngClass","ant-progress ant-progress-status-"+n.status),s.xp6(1),s.Q6J("ngIf","line"===n.nzType),s.xp6(1),s.Q6J("ngIf",n.isCircleStyle))},dependencies:[M.mk,M.sg,M.O5,M.tP,M.PC,De,Be],encapsulation:2,changeDetection:0}),(0,T.gn)([pe()],i.prototype,"nzShowInfo",void 0),(0,T.gn)([pe()],i.prototype,"nzStrokeColor",void 0),(0,T.gn)([pe()],i.prototype,"nzSize",void 0),(0,T.gn)([vt()],i.prototype,"nzSuccessPercent",void 0),(0,T.gn)([vt()],i.prototype,"nzPercent",void 0),(0,T.gn)([pe(),vt()],i.prototype,"nzStrokeWidth",void 0),(0,T.gn)([pe(),vt()],i.prototype,"nzGapDegree",void 0),(0,T.gn)([pe()],i.prototype,"nzGapPosition",void 0),(0,T.gn)([pe()],i.prototype,"nzStrokeLinecap",void 0),(0,T.gn)([vt()],i.prototype,"nzSteps",void 0),i})(),t5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,at,St]}),i})(),n5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-progress"]],decls:1,vars:0,template:function(e,n){1&e&&s._UZ(0,"nz-progress")},dependencies:[e5]}),i})();const Zo={schedule(i){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:n}=Zo;n&&(t=n.requestAnimationFrame,e=n.cancelAnimationFrame);const o=t(r=>{e=void 0,i(r)});return new zt.w0(()=>e?.(o))},requestAnimationFrame(...i){const{delegate:t}=Zo;return(t?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:t}=Zo;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0},E4=new class s5 extends Ka{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let o;t=t||n.shift();do{if(o=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,o){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw o}}}(class o5 extends Xa{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=Zo.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,n=0){var o;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:r}=t;null!=e&&(null===(o=r[r.length-1])||void 0===o?void 0:o.id)!==e&&(Zo.cancelAnimationFrame(e),t._scheduled=void 0)}});let ac,r5=1;const pr={};function N4(i){return i in pr&&(delete pr[i],!0)}const a5={setImmediate(i){const t=r5++;return pr[t]=!0,ac||(ac=Promise.resolve()),ac.then(()=>N4(t)&&i()),t},clearImmediate(i){N4(i)}},{setImmediate:c5,clearImmediate:l5}=a5,gr={setImmediate(...i){const{delegate:t}=gr;return(t?.setImmediate||c5)(...i)},clearImmediate(i){const{delegate:t}=gr;return(t?.clearImmediate||l5)(i)},delegate:void 0},cc=new class u5 extends Ka{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let o;t=t||n.shift();do{if(o=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,o){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw o}}}(class h5 extends Xa{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=gr.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,n=0){var o;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:r}=t;null!=e&&(null===(o=r[r.length-1])||void 0===o?void 0:o.id)!==e&&(gr.clearImmediate(e),t._scheduled=void 0)}});var f5=j(3532);function lc(i=0,t,e=rf){let n=-1;return null!=t&&((0,f5.K)(t)?e=t:n=t),new rn.y(o=>{let r=function p5(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;r<0&&(r=0);let a=0;return e.schedule(function(){o.closed||(o.next(a++),0<=n?this.schedule(void 0,n):o.complete())},r)})}function Xn(i,t=ur){return function d5(i){return(0,Et.e)((t,e)=>{let n=!1,o=null,r=null,a=!1;const c=()=>{if(r?.unsubscribe(),r=null,n){n=!1;const h=o;o=null,e.next(h)}a&&e.complete()},l=()=>{r=null,a&&e.complete()};t.subscribe((0,mt.x)(e,h=>{n=!0,o=h,r||(0,Cn.Xf)(i(h)).subscribe(r=(0,mt.x)(e,c,l))},()=>{a=!0,(!n||!r||r.closed)&&e.complete()}))})}(()=>lc(i,t))}var v5=j(4033);class z5{}class y5 extends z5{constructor(t){super(),this._data=t}connect(){return Ba(this._data)?this._data:(0,Bt.of)(this._data)}disconnect(){}}class C5{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(t,e,n,o,r){t.forEachOperation((a,c,l)=>{let h,u;null==a.previousIndex?(h=this._insertView(()=>n(a,c,l),l,e,o(a)),u=h?1:0):null==l?(this._detachAndCacheView(c,e),u=3):(h=this._moveView(c,l,e,o(a)),u=2),r&&r({context:h?.context,operation:u,record:a})})}detach(){for(const t of this._viewCache)t.destroy();this._viewCache=[]}_insertView(t,e,n,o){const r=this._insertViewFromCache(e,n);if(r)return void(r.context.$implicit=o);const a=t();return n.createEmbeddedView(a.templateRef,a.context,a.index)}_detachAndCacheView(t,e){const n=e.detach(t);this._maybeCacheView(n,e)}_moveView(t,e,n,o){const r=n.get(t);return n.move(r,e),r.context.$implicit=o,r}_maybeCacheView(t,e){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(t);else{const n=e.indexOf(t);-1===n?t.destroy():e.remove(n)}}_insertViewFromCache(t,e){const n=this._viewCache.pop();return n&&e.insert(n,t),n||null}}const k4=new s.OlP("_ViewRepeater"),_5=["contentWrapper"],x5=["*"],D4=new s.OlP("VIRTUAL_SCROLL_STRATEGY");class w5{constructor(t,e,n){this._scrolledIndexChange=new H.x,this.scrolledIndexChange=this._scrolledIndexChange.pipe(Le()),this._viewport=null,this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=n}attach(t){this._viewport=t,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(t,e,n){this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=n,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(t,e){this._viewport&&this._viewport.scrollToOffset(t*this._itemSize,e)}_updateTotalContentSize(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const t=this._viewport.getRenderedRange(),e={start:t.start,end:t.end},n=this._viewport.getViewportSize(),o=this._viewport.getDataLength();let r=this._viewport.measureScrollOffset(),a=this._itemSize>0?r/this._itemSize:0;if(e.end>o){const l=Math.ceil(n/this._itemSize),h=Math.max(0,Math.min(a,o-l));a!=h&&(a=h,r=h*this._itemSize,e.start=Math.floor(a)),e.end=Math.max(0,Math.min(o,e.start+l))}const c=r-e.start*this._itemSize;if(c<this._minBufferPx&&0!=e.start){const l=Math.ceil((this._maxBufferPx-c)/this._itemSize);e.start=Math.max(0,e.start-l),e.end=Math.min(o,Math.ceil(a+(n+this._minBufferPx)/this._itemSize))}else{const l=e.end*this._itemSize-(r+n);if(l<this._minBufferPx&&e.end!=o){const h=Math.ceil((this._maxBufferPx-l)/this._itemSize);h>0&&(e.end=Math.min(o,e.end+h),e.start=Math.max(0,Math.floor(a-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(e),this._viewport.setRenderedContentOffset(this._itemSize*e.start),this._scrolledIndexChange.next(Math.floor(a))}}function M5(i){return i._scrollStrategy}let I4=(()=>{class i{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new w5(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=Ei(e)}get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=Ei(e)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=Ei(e)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=s.lG2({type:i,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},standalone:!0,features:[s._Bn([{provide:D4,useFactory:M5,deps:[(0,s.Gpc)(()=>i)]}]),s.TTD]}),i})(),mr=(()=>{class i{constructor(e,n,o){this._ngZone=e,this._platform=n,this._scrolled=new H.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new rn.y(n=>{this._globalSubscription||this._addGlobalListener();const o=e>0?this._scrolled.pipe(Xn(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Bt.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){const o=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe((0,Y.h)(r=>!r||o.indexOf(r)>-1))}getAncestorScrollContainers(e){const n=[];return this.scrollContainers.forEach((o,r)=>{this._scrollableContainsElement(r,e)&&n.push(r)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let o=Ni(n),r=e.getElementRef().nativeElement;do{if(o==r)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Me(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(s.R0b),s.LFG(Ce),s.LFG(M.K0,8))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),P4=(()=>{class i{constructor(e,n,o,r){this.elementRef=e,this.scrollDispatcher=n,this.ngZone=o,this.dir=r,this._destroyed=new H.x,this._elementScrolled=new rn.y(a=>this.ngZone.runOutsideAngular(()=>Me(this.elementRef.nativeElement,"scroll").pipe(N(this._destroyed)).subscribe(a)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const n=this.elementRef.nativeElement,o=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=o?e.end:e.start),null==e.right&&(e.right=o?e.start:e.end),null!=e.bottom&&(e.top=n.scrollHeight-n.clientHeight-e.bottom),o&&0!=Lo()?(null!=e.left&&(e.right=n.scrollWidth-n.clientWidth-e.left),2==Lo()?e.left=e.right:1==Lo()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=n.scrollWidth-n.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const n=this.elementRef.nativeElement;a1()?n.scrollTo(e):(null!=e.top&&(n.scrollTop=e.top),null!=e.left&&(n.scrollLeft=e.left))}measureScrollOffset(e){const n="left",o="right",r=this.elementRef.nativeElement;if("top"==e)return r.scrollTop;if("bottom"==e)return r.scrollHeight-r.clientHeight-r.scrollTop;const a=this.dir&&"rtl"==this.dir.value;return"start"==e?e=a?o:n:"end"==e&&(e=a?n:o),a&&2==Lo()?e==n?r.scrollWidth-r.clientWidth-r.scrollLeft:r.scrollLeft:a&&1==Lo()?e==n?r.scrollLeft+r.scrollWidth-r.clientWidth:-r.scrollLeft:e==n?r.scrollLeft:r.scrollWidth-r.clientWidth-r.scrollLeft}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(mr),s.Y36(s.R0b),s.Y36(ge,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),i})(),vr=(()=>{class i{constructor(e,n,o){this._platform=e,this._change=new H.x,this._changeListener=r=>{this._change.next(r)},this._document=o,n.runOutsideAngular(()=>{if(e.isBrowser){const r=this._getWindow();r.addEventListener("resize",this._changeListener),r.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:o}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+n,height:o,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,n=this._getWindow(),o=e.documentElement,r=o.getBoundingClientRect();return{top:-r.top||e.body.scrollTop||n.scrollY||o.scrollTop||0,left:-r.left||e.body.scrollLeft||n.scrollX||o.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(Xn(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Ce),s.LFG(s.R0b),s.LFG(M.K0,8))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const V4=new s.OlP("VIRTUAL_SCROLLABLE");let O5=(()=>{class i extends P4{constructor(e,n,o,r){super(e,n,o,r)}measureViewportSize(e){const n=this.elementRef.nativeElement;return"horizontal"===e?n.clientWidth:n.clientHeight}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(mr),s.Y36(s.R0b),s.Y36(ge,8))},i.\u0275dir=s.lG2({type:i,features:[s.qOj]}),i})();const E5=typeof requestAnimationFrame<"u"?E4:cc;let Kn=(()=>{class i extends O5{get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=Jn(e)}constructor(e,n,o,r,a,c,l,h){super(e,c,o,a),this.elementRef=e,this._changeDetectorRef=n,this._scrollStrategy=r,this.scrollable=h,this._platform=(0,s.f3M)(Ce),this._detachedSubject=new H.x,this._renderedRangeSubject=new H.x,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new rn.y(u=>this._scrollStrategy.scrolledIndexChange.subscribe(d=>Promise.resolve().then(()=>this.ngZone.run(()=>u.next(d))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=zt.w0.EMPTY,this._viewportChanges=l.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe((0,Q.O)(null),Xn(0,E5)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(N(this._detachedSubject)).subscribe(n=>{const o=n.length;o!==this._dataLength&&(this._dataLength=o,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(e){return this.getElementRef().nativeElement.getBoundingClientRect()[e]}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function A5(i,t){return i.start==t.start&&i.end==t.end})(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,n="to-start"){e=this.appendOnly&&"to-start"===n?0:e;const r="horizontal"==this.orientation,a=r?"X":"Y";let l=`translate${a}(${Number((r&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e,"to-end"===n&&(l+=` translate${a}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=l&&(this._renderedContentTransform=l,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,n="auto"){const o={behavior:n};"horizontal"===this.orientation?o.start=e:o.top=e,this.scrollable.scrollTo(o)}scrollToIndex(e,n="auto"){this._scrollStrategy.scrollToIndex(e,n)}measureScrollOffset(e){let n;return n=this.scrollable==this?o=>super.measureScrollOffset(o):o=>this.scrollable.measureScrollOffset(o),Math.max(0,n(e??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(e){let n;const o="left",r="right",a="rtl"==this.dir?.value;n="start"==e?a?r:o:"end"==e?a?o:r:e||("horizontal"===this.orientation?"left":"top");const c=this.scrollable.measureBoundingClientRectWithScrollOffset(n);return this.elementRef.nativeElement.getBoundingClientRect()[n]-c}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const n of e)n()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(s.R0b),s.Y36(D4,8),s.Y36(ge,8),s.Y36(mr),s.Y36(vr),s.Y36(V4,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,n){if(1&e&&s.Gf(_5,7),2&e){let o;s.iGM(o=s.CRH())&&(n._contentWrapper=o.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,n){2&e&&s.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===n.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==n.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[s._Bn([{provide:P4,useFactory:(t,e)=>t||e,deps:[[new s.FiY,new s.tBr(V4)],i]}]),s.qOj,s.jDz],ngContentSelectors:x5,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,n){1&e&&(s.F$t(),s.TgZ(0,"div",0,1),s.Hsn(2),s.qZA(),s._UZ(3,"div",2)),2&e&&(s.xp6(3),s.Udp("width",n._totalContentWidth)("height",n._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),i})();function L4(i,t,e){if(!e.getBoundingClientRect)return 0;const o=e.getBoundingClientRect();return"horizontal"===i?"start"===t?o.left:o.right:"start"===t?o.top:o.bottom}let H4=(()=>{class i{get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(e){this._cdkVirtualForOf=e,function b5(i){return i&&"function"==typeof i.connect&&!(i instanceof v5.c)}(e)?this._dataSourceChanges.next(e):this._dataSourceChanges.next(new y5(Ba(e)?e:Array.from(e||[])))}get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(e){this._needsUpdate=!0,this._cdkVirtualForTrackBy=e?(n,o)=>e(n+(this._renderedRange?this._renderedRange.start:0),o):void 0}set cdkVirtualForTemplate(e){e&&(this._needsUpdate=!0,this._template=e)}get cdkVirtualForTemplateCacheSize(){return this._viewRepeater.viewCacheSize}set cdkVirtualForTemplateCacheSize(e){this._viewRepeater.viewCacheSize=Ei(e)}constructor(e,n,o,r,a,c){this._viewContainerRef=e,this._template=n,this._differs=o,this._viewRepeater=r,this._viewport=a,this.viewChange=new H.x,this._dataSourceChanges=new H.x,this.dataStream=this._dataSourceChanges.pipe((0,Q.O)(null),function g5(){return(0,Et.e)((i,t)=>{let e,n=!1;i.subscribe((0,mt.x)(t,o=>{const r=e;e=o,n&&t.next([r,o]),n=!0}))})}(),(0,se.w)(([l,h])=>this._changeDataSource(l,h)),function m5(i,t,e){let n,o=!1;return i&&"object"==typeof i?({bufferSize:n=1/0,windowTime:t=1/0,refCount:o=!1,scheduler:e}=i):n=i??1/0,(0,C1.B)({connector:()=>new oe(n,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}(1)),this._differ=null,this._needsUpdate=!1,this._destroyed=new H.x,this.dataStream.subscribe(l=>{this._data=l,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(N(this._destroyed)).subscribe(l=>{this._renderedRange=l,this.viewChange.observers.length&&c.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}measureRangeSize(e,n){if(e.start>=e.end)return 0;const o=e.start-this._renderedRange.start,r=e.end-e.start;let a,c;for(let l=0;l<r;l++){const h=this._viewContainerRef.get(l+o);if(h&&h.rootNodes.length){a=c=h.rootNodes[0];break}}for(let l=r-1;l>-1;l--){const h=this._viewContainerRef.get(l+o);if(h&&h.rootNodes.length){c=h.rootNodes[h.rootNodes.length-1];break}}return a&&c?L4(n,"end",c)-L4(n,"start",a):0}ngDoCheck(){if(this._differ&&this._needsUpdate){const e=this._differ.diff(this._renderedItems);e?this._applyChanges(e):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}_onRenderedDataChange(){this._renderedRange&&(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create((e,n)=>this.cdkVirtualForTrackBy?this.cdkVirtualForTrackBy(e,n):n)),this._needsUpdate=!0)}_changeDataSource(e,n){return e&&e.disconnect(this),this._needsUpdate=!0,n?n.connect(this):(0,Bt.of)()}_updateContext(){const e=this._data.length;let n=this._viewContainerRef.length;for(;n--;){const o=this._viewContainerRef.get(n);o.context.index=this._renderedRange.start+n,o.context.count=e,this._updateComputedContextProperties(o.context),o.detectChanges()}}_applyChanges(e){this._viewRepeater.applyChanges(e,this._viewContainerRef,(r,a,c)=>this._getEmbeddedViewArgs(r,c),r=>r.item),e.forEachIdentityChange(r=>{this._viewContainerRef.get(r.currentIndex).context.$implicit=r.item});const n=this._data.length;let o=this._viewContainerRef.length;for(;o--;){const r=this._viewContainerRef.get(o);r.context.index=this._renderedRange.start+o,r.context.count=n,this._updateComputedContextProperties(r.context)}}_updateComputedContextProperties(e){e.first=0===e.index,e.last=e.index===e.count-1,e.even=e.index%2==0,e.odd=!e.even}_getEmbeddedViewArgs(e,n){return{templateRef:this._template,context:{$implicit:e.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index:n}}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(s.ZZ4),s.Y36(k4),s.Y36(Kn,4),s.Y36(s.R0b))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},standalone:!0,features:[s._Bn([{provide:k4,useClass:C5}])]}),i})(),hc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})(),zr=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,hc,Kn,we,hc]}),i})(),pt=(()=>{class i{constructor(e,n){this.elementRef=e,this.renderer=n,this.hidden=null,this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","")}setHiddenAttribute(){this.hidden?this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","string"==typeof this.hidden?this.hidden:""):this.renderer.removeAttribute(this.elementRef.nativeElement,"hidden")}ngOnChanges(){this.setHiddenAttribute()}ngAfterViewInit(){this.setHiddenAttribute()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.Qsj))},i.\u0275dir=s.lG2({type:i,selectors:[["","nz-button",""],["nz-button-group"],["","nz-icon",""],["","nz-menu-item",""],["","nz-submenu",""],["nz-select-top-control"],["nz-select-placeholder"],["nz-input-group"]],inputs:{hidden:"hidden"},features:[s.TTD]}),i})(),uc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[ft]}),i})();const N5=["nz-button",""];function k5(i,t){1&i&&s._UZ(0,"span",1)}const D5=["*"];let qo=(()=>{class i{constructor(e,n,o,r,a,c){this.ngZone=e,this.elementRef=n,this.cdr=o,this.renderer=r,this.nzConfigService=a,this.directionality=c,this._nzModuleName="button",this.nzBlock=!1,this.nzGhost=!1,this.nzSearch=!1,this.nzLoading=!1,this.nzDanger=!1,this.disabled=!1,this.tabIndex=null,this.nzType=null,this.nzShape=null,this.nzSize="default",this.dir="ltr",this.destroy$=new H.x,this.loading$=new H.x,this.nzConfigService.getConfigChangeEventForComponent("button").pipe(N(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}insertSpan(e,n){e.forEach(o=>{if("#text"===o.nodeName){const r=n.createElement("span"),a=n.parentNode(o);n.insertBefore(a,r,o),n.appendChild(r,o)}})}assertIconOnly(e,n){const o=Array.from(e.childNodes),r=o.filter(h=>{const u=Array.from(h.childNodes||[]);return"SPAN"===h.nodeName&&u.length>0&&u.every(d=>"svg"===d.nodeName)}).length,a=o.every(h=>"#text"!==h.nodeName);o.filter(h=>{const u=Array.from(h.childNodes||[]);return!("SPAN"===h.nodeName&&u.length>0&&u.every(d=>"svg"===d.nodeName))}).every(h=>"SPAN"!==h.nodeName)&&a&&r>=1&&n.addClass(e,"ant-btn-icon-only")}ngOnInit(){this.directionality.change?.pipe(N(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value,this.ngZone.runOutsideAngular(()=>{Me(this.elementRef.nativeElement,"click",{capture:!0}).pipe(N(this.destroy$)).subscribe(e=>{(this.disabled&&"A"===e.target?.tagName||this.nzLoading)&&(e.preventDefault(),e.stopImmediatePropagation())})})}ngOnChanges(e){const{nzLoading:n}=e;n&&this.loading$.next(this.nzLoading)}ngAfterViewInit(){this.assertIconOnly(this.elementRef.nativeElement,this.renderer),this.insertSpan(this.elementRef.nativeElement.childNodes,this.renderer)}ngAfterContentInit(){this.loading$.pipe((0,Q.O)(this.nzLoading),(0,Y.h)(()=>!!this.nzIconDirectiveElement),N(this.destroy$)).subscribe(e=>{const n=this.nzIconDirectiveElement.nativeElement;e?this.renderer.setStyle(n,"display","none"):this.renderer.removeStyle(n,"display")})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.R0b),s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(s.Qsj),s.Y36(nt),s.Y36(ge,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["button","nz-button",""],["a","nz-button",""]],contentQueries:function(e,n,o){if(1&e&&s.Suo(o,De,5,s.SBq),2&e){let r;s.iGM(r=s.CRH())&&(n.nzIconDirectiveElement=r.first)}},hostAttrs:[1,"ant-btn"],hostVars:30,hostBindings:function(e,n){2&e&&(s.uIk("tabindex",n.disabled?-1:null===n.tabIndex?null:n.tabIndex)("disabled",n.disabled||null),s.ekj("ant-btn-primary","primary"===n.nzType)("ant-btn-dashed","dashed"===n.nzType)("ant-btn-link","link"===n.nzType)("ant-btn-text","text"===n.nzType)("ant-btn-circle","circle"===n.nzShape)("ant-btn-round","round"===n.nzShape)("ant-btn-lg","large"===n.nzSize)("ant-btn-sm","small"===n.nzSize)("ant-btn-dangerous",n.nzDanger)("ant-btn-loading",n.nzLoading)("ant-btn-background-ghost",n.nzGhost)("ant-btn-block",n.nzBlock)("ant-input-search-button",n.nzSearch)("ant-btn-rtl","rtl"===n.dir))},inputs:{nzBlock:"nzBlock",nzGhost:"nzGhost",nzSearch:"nzSearch",nzLoading:"nzLoading",nzDanger:"nzDanger",disabled:"disabled",tabIndex:"tabIndex",nzType:"nzType",nzShape:"nzShape",nzSize:"nzSize"},exportAs:["nzButton"],features:[s.TTD],attrs:N5,ngContentSelectors:D5,decls:2,vars:1,consts:[["nz-icon","","nzType","loading",4,"ngIf"],["nz-icon","","nzType","loading"]],template:function(e,n){1&e&&(s.F$t(),s.YNc(0,k5,1,0,"span",0),s.Hsn(1)),2&e&&s.Q6J("ngIf",n.nzLoading)},dependencies:[M.O5,De,pt],encapsulation:2,changeDetection:0}),(0,T.gn)([R()],i.prototype,"nzBlock",void 0),(0,T.gn)([R()],i.prototype,"nzGhost",void 0),(0,T.gn)([R()],i.prototype,"nzSearch",void 0),(0,T.gn)([R()],i.prototype,"nzLoading",void 0),(0,T.gn)([R()],i.prototype,"nzDanger",void 0),(0,T.gn)([R()],i.prototype,"disabled",void 0),(0,T.gn)([pe()],i.prototype,"nzSize",void 0),i})(),Vi=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,rc,at,uc,uc,rc]}),i})(),F4=(()=>{class i{create(e){return typeof ResizeObserver>"u"?null:new ResizeObserver(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),dc=(()=>{class i{constructor(e){this.nzResizeObserverFactory=e,this.observedElements=new Map}ngOnDestroy(){this.observedElements.forEach((e,n)=>this.cleanupObserver(n))}observe(e){const n=Ni(e);return new rn.y(o=>{const a=this.observeElement(n).subscribe(o);return()=>{a.unsubscribe(),this.unobserveElement(n)}})}observeElement(e){if(this.observedElements.has(e))this.observedElements.get(e).count++;else{const n=new H.x,o=this.nzResizeObserverFactory.create(r=>n.next(r));o&&o.observe(e),this.observedElements.set(e,{observer:o,stream:n,count:1})}return this.observedElements.get(e).stream}unobserveElement(e){this.observedElements.has(e)&&(this.observedElements.get(e).count--,this.observedElements.get(e).count||this.cleanupObserver(e))}cleanupObserver(e){if(this.observedElements.has(e)){const{observer:n,stream:o}=this.observedElements.get(e);n&&n.disconnect(),o.complete(),this.observedElements.delete(e)}}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(F4))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),I5=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[F4]}),i})(),fc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,ne.u5,oc]}),i})();class pc{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Wo extends pc{constructor(t,e,n,o,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=o,this.projectableNodes=r}}class Uo extends pc{constructor(t,e,n,o){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n,this.injector=o}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class P5 extends pc{constructor(t){super(),this.element=t instanceof s.SBq?t.nativeElement:t}}class gc{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Wo?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Uo?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof P5?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class V5 extends gc{constructor(t,e,n,o,r){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=o,this.attachDomPortal=a=>{const c=a.element,l=this._document.createComment("dom-portal");c.parentNode.insertBefore(l,c),this.outletElement.appendChild(c),this._attachedPortal=a,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(c,l)})},this._document=r}attachComponentPortal(t){const n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let o;return t.viewContainerRef?(o=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>o.destroy())):(o=n.create(t.injector||this._defaultInjector||s.zs3.NULL),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(o.hostView),o.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(o)),this._attachedPortal=t,o}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(o=>this.outletElement.appendChild(o)),n.detectChanges(),this.setDisposeFn(()=>{let o=e.indexOf(n);-1!==o&&e.remove(o)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Jo=(()=>{class i extends gc{constructor(e,n,o){super(),this._componentFactoryResolver=e,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new s.vpe,this.attachDomPortal=r=>{const a=r.element,c=this._document.createComment("dom-portal");r.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=r,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const n=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),a=n.createComponent(r,n.length,e.injector||n.injector,e.projectableNodes||void 0);return n!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=e,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(e){e.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s._Vd),s.Y36(s.s_b),s.Y36(M.K0))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[s.qOj]}),i})(),mc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})();j(515);var H5=j(2529);const R4=a1();class B5{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=He(-this._previousScrollPosition.left),t.style.top=He(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,n=t.style,o=this._document.body.style,r=n.scrollBehavior||"",a=o.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),R4&&(n.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),R4&&(n.scrollBehavior=r,o.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}}class F5{constructor(t,e,n,o){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=o,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0).pipe((0,Y.h)(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class j4{enable(){}disable(){}attach(){}}function vc(i,t){return t.some(e=>i.bottom<e.top||i.top>e.bottom||i.right<e.left||i.left>e.right)}function $4(i,t){return t.some(e=>i.top<e.top||i.bottom>e.bottom||i.left<e.left||i.right>e.right)}class R5{constructor(t,e,n,o){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=o,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:o}=this._viewportRuler.getViewportSize();vc(e,[{width:n,height:o,bottom:o,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let j5=(()=>{class i{constructor(e,n,o,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=o,this.noop=()=>new j4,this.close=a=>new F5(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new B5(this._viewportRuler,this._document),this.reposition=a=>new R5(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=r}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(mr),s.LFG(vr),s.LFG(s.R0b),s.LFG(M.K0))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class zc{constructor(t){if(this.scrollStrategy=new j4,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class Se{constructor(t,e,n,o,r){this.offsetX=n,this.offsetY=o,this.panelClass=r,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class $5{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let Y4=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(M.K0))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Y5=(()=>{class i extends Y4{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=o=>{const r=this._attachedOverlays;for(let a=r.length-1;a>-1;a--)if(r[a]._keydownEvents.observers.length>0){const c=r[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(o)):c.next(o);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(M.K0),s.LFG(s.R0b,8))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),G5=(()=>{class i extends Y4{constructor(e,n,o){super(e),this._platform=n,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=r=>{this._pointerDownEventTarget=Wn(r)},this._clickListener=r=>{const a=Wn(r),c="click"===r.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let h=l.length-1;h>-1;h--){const u=l[h];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(a)||u.overlayElement.contains(c))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r)}}}add(e){if(super.add(e),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(M.K0),s.LFG(Ce),s.LFG(s.R0b,8))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),G4=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||c1()){const o=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let r=0;r<o.length;r++)o[r].remove()}const n=this._document.createElement("div");n.classList.add(e),c1()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(M.K0),s.LFG(Ce))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class br{constructor(t,e,n,o,r,a,c,l,h,u=!1){this._portalOutlet=t,this._host=e,this._pane=n,this._config=o,this._ngZone=r,this._keyboardDispatcher=a,this._document=c,this._location=l,this._outsideClickDispatcher=h,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new H.x,this._attachments=new H.x,this._detachments=new H.x,this._locationChanges=zt.w0.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new H.x,this._outsidePointerEvents=new H.x,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Ft.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=He(this._config.width),t.height=He(this._config.height),t.minWidth=He(this._config.minWidth),t.minHeight=He(this._config.minHeight),t.maxWidth=He(this._config.maxWidth),t.maxHeight=He(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,n){const o=Ks(e||[]).filter(r=>!!r);o.length&&(n?t.classList.add(...o):t.classList.remove(...o))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(N((0,ze.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Z4="cdk-overlay-connected-position-bounding-box",Z5=/([A-Za-z%]+)$/;class q5{get positions(){return this._preferredPositions}constructor(t,e,n,o,r){this._viewportRuler=e,this._document=n,this._platform=o,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new H.x,this._resizeSubscription=zt.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._validatePositions(),t.hostElement.classList.add(Z4),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,o=this._containerRect,r=[];let a;for(let c of this._preferredPositions){let l=this._getOriginPoint(t,o,c),h=this._getOverlayPoint(l,e,c),u=this._getOverlayFit(h,e,n,c);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(c,l);this._canFitWithFlexibleDimensions(u,h,n)?r.push({position:c,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,c)}):(!a||a.overlayFit.visibleArea<u.visibleArea)&&(a={overlayFit:u,overlayPoint:h,originPoint:l,position:c,overlayRect:e})}if(r.length){let c=null,l=-1;for(const h of r){const u=h.boundingBoxRect.width*h.boundingBoxRect.height*(h.position.weight||1);u>l&&(l=u,c=h)}return this._isPushed=!1,void this._applyPosition(c.position,c.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ei(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Z4),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let o,r;if("center"==n.originX)o=t.left+t.width/2;else{const a=this._isRtl()?t.right:t.left,c=this._isRtl()?t.left:t.right;o="start"==n.originX?a:c}return e.left<0&&(o-=e.left),r="center"==n.originY?t.top+t.height/2:"top"==n.originY?t.top:t.bottom,e.top<0&&(r-=e.top),{x:o,y:r}}_getOverlayPoint(t,e,n){let o,r;return o="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,r="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+o,y:t.y+r}}_getOverlayFit(t,e,n,o){const r=W4(e);let{x:a,y:c}=t,l=this._getOffset(o,"x"),h=this._getOffset(o,"y");l&&(a+=l),h&&(c+=h);let f=0-c,p=c+r.height-n.height,g=this._subtractOverflows(r.width,0-a,a+r.width-n.width),m=this._subtractOverflows(r.height,f,p),v=g*m;return{visibleArea:v,isCompletelyWithinViewport:r.width*r.height===v,fitsInViewportVertically:m===r.height,fitsInViewportHorizontally:g==r.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const o=n.bottom-e.y,r=n.right-e.x,a=q4(this._overlayRef.getConfig().minHeight),c=q4(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=a&&a<=o)&&(t.fitsInViewportHorizontally||null!=c&&c<=r)}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const o=W4(e),r=this._viewportRect,a=Math.max(t.x+o.width-r.width,0),c=Math.max(t.y+o.height-r.height,0),l=Math.max(r.top-n.top-t.y,0),h=Math.max(r.left-n.left-t.x,0);let u=0,d=0;return u=o.width<=r.width?h||-a:t.x<this._viewportMargin?r.left-n.left-t.x:0,d=o.height<=r.height?l||-c:t.y<this._viewportMargin?r.top-n.top-t.y:0,this._previousPushAmount={x:u,y:d},{x:t.x+u,y:t.y+d}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const n=this._getScrollVisibility(),o=new $5(t,n);this._positionChanges.next(o)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,o=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let r=0;r<e.length;r++)e[r].style.transformOrigin=`${n} ${o}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,o=this._isRtl();let r,a,c,u,d,f;if("top"===e.overlayY)a=t.y,r=n.height-a+this._viewportMargin;else if("bottom"===e.overlayY)c=n.height-t.y+2*this._viewportMargin,r=n.height-c+this._viewportMargin;else{const p=Math.min(n.bottom-t.y+n.top,t.y),g=this._lastBoundingBoxSize.height;r=2*p,a=t.y-p,r>g&&!this._isInitialRender&&!this._growAfterOpen&&(a=t.y-g/2)}if("end"===e.overlayX&&!o||"start"===e.overlayX&&o)f=n.width-t.x+this._viewportMargin,u=t.x-this._viewportMargin;else if("start"===e.overlayX&&!o||"end"===e.overlayX&&o)d=t.x,u=n.right-t.x;else{const p=Math.min(n.right-t.x+n.left,t.x),g=this._lastBoundingBoxSize.width;u=2*p,d=t.x-p,u>g&&!this._isInitialRender&&!this._growAfterOpen&&(d=t.x-g/2)}return{top:a,left:d,bottom:c,right:f,width:u,height:r}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{const r=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;o.height=He(n.height),o.top=He(n.top),o.bottom=He(n.bottom),o.width=He(n.width),o.left=He(n.left),o.right=He(n.right),o.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",o.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",r&&(o.maxHeight=He(r)),a&&(o.maxWidth=He(a))}this._lastBoundingBoxSize=n,ei(this._boundingBox.style,o)}_resetBoundingBoxStyles(){ei(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ei(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},o=this._hasExactPosition(),r=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(o){const u=this._viewportRuler.getViewportScrollPosition();ei(n,this._getExactOverlayY(e,t,u)),ei(n,this._getExactOverlayX(e,t,u))}else n.position="static";let c="",l=this._getOffset(e,"x"),h=this._getOffset(e,"y");l&&(c+=`translateX(${l}px) `),h&&(c+=`translateY(${h}px)`),n.transform=c.trim(),a.maxHeight&&(o?n.maxHeight=He(a.maxHeight):r&&(n.maxHeight="")),a.maxWidth&&(o?n.maxWidth=He(a.maxWidth):r&&(n.maxWidth="")),ei(this._pane.style,n)}_getExactOverlayY(t,e,n){let o={top:"",bottom:""},r=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n)),"bottom"===t.overlayY?o.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":o.top=He(r.y),o}_getExactOverlayX(t,e,n){let a,o={left:"",right:""},r=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n)),a=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===a?o.right=this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)+"px":o.left=He(r.x),o}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:$4(t,n),isOriginOutsideView:vc(t,n),isOverlayClipped:$4(e,n),isOverlayOutsideView:vc(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,o)=>n-Math.max(o,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Ks(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof s.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function ei(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function q4(i){if("number"!=typeof i&&null!=i){const[t,e]=i.split(Z5);return e&&"px"!==e?null:parseFloat(t)}return i||null}function W4(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const U4="cdk-global-overlay-wrapper";class W5{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(U4),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:o,height:r,maxWidth:a,maxHeight:c}=n,l=!("100%"!==o&&"100vw"!==o||a&&"100%"!==a&&"100vw"!==a),h=!("100%"!==r&&"100vh"!==r||c&&"100%"!==c&&"100vh"!==c),u=this._xPosition,d=this._xOffset,f="rtl"===this._overlayRef.getConfig().direction;let p="",g="",m="";l?m="flex-start":"center"===u?(m="center",f?g=d:p=d):f?"left"===u||"end"===u?(m="flex-end",p=d):("right"===u||"start"===u)&&(m="flex-start",g=d):"left"===u||"start"===u?(m="flex-start",p=d):("right"===u||"end"===u)&&(m="flex-end",g=d),t.position=this._cssPosition,t.marginLeft=l?"0":p,t.marginTop=h?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":g,e.justifyContent=m,e.alignItems=h?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(U4),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let U5=(()=>{class i{constructor(e,n,o,r){this._viewportRuler=e,this._document=n,this._platform=o,this._overlayContainer=r}global(){return new W5}flexibleConnectedTo(e){return new q5(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(vr),s.LFG(M.K0),s.LFG(Ce),s.LFG(G4))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),J5=0,Li=(()=>{class i{constructor(e,n,o,r,a,c,l,h,u,d,f,p){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=o,this._positionBuilder=r,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=h,this._directionality=u,this._location=d,this._outsideClickDispatcher=f,this._animationsModuleType=p}create(e){const n=this._createHostElement(),o=this._createPaneElement(n),r=this._createPortalOutlet(o),a=new zc(e);return a.direction=a.direction||this._directionality.value,new br(r,n,o,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const n=this._document.createElement("div");return n.id="cdk-overlay-"+J5++,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(s.z2F)),new V5(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(j5),s.LFG(G4),s.LFG(s._Vd),s.LFG(U5),s.LFG(Y5),s.LFG(s.zs3),s.LFG(s.R0b),s.LFG(M.K0),s.LFG(ge),s.LFG(M.Ye),s.LFG(G5),s.LFG(s.QbO,8))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Q5=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],J4=new s.OlP("cdk-connected-overlay-scroll-strategy");let Hi=(()=>{class i{constructor(e){this.elementRef=e}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0}),i})(),Qo=(()=>{class i{get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Jn(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=Jn(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=Jn(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=Jn(e)}get push(){return this._push}set push(e){this._push=Jn(e)}constructor(e,n,o,r,a){this._overlay=e,this._dir=a,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=zt.w0.EMPTY,this._attachSubscription=zt.w0.EMPTY,this._detachSubscription=zt.w0.EMPTY,this._positionSubscription=zt.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new s.vpe,this.positionChange=new s.vpe,this.attach=new s.vpe,this.detach=new s.vpe,this.overlayKeydown=new s.vpe,this.overlayOutsideClick=new s.vpe,this._templatePortal=new Uo(n,o),this._scrollStrategyFactory=r,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Q5);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),27===n.keyCode&&!this.disableClose&&!jo(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{this.overlayOutsideClick.next(n)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),n=new zc({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(n.width=this.width),(this.height||0===this.height)&&(n.height=this.height),(this.minWidth||0===this.minWidth)&&(n.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(e){const n=this.positions.map(o=>({originX:o.originX,originY:o.originY,overlayX:o.overlayX,overlayY:o.overlayY,offsetX:o.offsetX||this.offsetX,offsetY:o.offsetY||this.offsetY,panelClass:o.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof Hi?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe((0,H5.o)(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Li),s.Y36(s.Rgc),s.Y36(s.s_b),s.Y36(J4),s.Y36(ge,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[s.TTD]}),i})();const K5={provide:J4,deps:[Li],useFactory:function X5(i){return()=>i.scrollStrategies.reposition()}};let Xo=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[Li,K5],imports:[we,mc,zr,zr]}),i})();var e7=j(153);const bc=()=>{};let Q4=(()=>{class i{constructor(e,n){this.ngZone=e,this.rendererFactory2=n,this.resizeSource$=new H.x,this.listeners=0,this.disposeHandle=bc,this.handler=()=>{this.ngZone.run(()=>{this.resizeSource$.next()})},this.renderer=this.rendererFactory2.createRenderer(null,null)}ngOnDestroy(){this.handler=bc}subscribe(){return this.registerListener(),this.resizeSource$.pipe(Xn(16),(0,y1.x)(()=>this.unregisterListener()))}unsubscribe(){this.unregisterListener()}registerListener(){0===this.listeners&&this.ngZone.runOutsideAngular(()=>{this.disposeHandle=this.renderer.listen("window","resize",this.handler)}),this.listeners+=1}unregisterListener(){this.listeners-=1,0===this.listeners&&(this.disposeHandle(),this.disposeHandle=bc)}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(s.R0b),s.LFG(s.FYo))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const t7=new Map;let n7=(()=>{class i{constructor(){this._singletonRegistry=new Map}get singletonRegistry(){return e7.N.isTestMode?t7:this._singletonRegistry}registerSingletonWithKey(e,n){const o=this.singletonRegistry.has(e),r=o?this.singletonRegistry.get(e):this.withNewTarget(n);o||this.singletonRegistry.set(e,r)}getSingletonWithKey(e){return this.singletonRegistry.has(e)?this.singletonRegistry.get(e).target:null}withNewTarget(e){return{target:e}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Ko=(()=>{return(i=Ko||(Ko={})).xxl="xxl",i.xl="xl",i.lg="lg",i.md="md",i.sm="sm",i.xs="xs",Ko;var i})();const X4={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};let o7=(()=>{class i{constructor(e,n){this.resizeService=e,this.mediaMatcher=n,this.destroy$=new H.x,this.resizeService.subscribe().pipe(N(this.destroy$)).subscribe(()=>{})}ngOnDestroy(){this.destroy$.next()}subscribe(e,n){if(n){const o=()=>this.matchMedia(e,!0);return this.resizeService.subscribe().pipe((0,U.U)(o),(0,Q.O)(o()),Le((r,a)=>r[0]===a[0]),(0,U.U)(r=>r[1]))}{const o=()=>this.matchMedia(e);return this.resizeService.subscribe().pipe((0,U.U)(o),(0,Q.O)(o()),Le())}}matchMedia(e,n){let o=Ko.md;const r={};return Object.keys(e).map(a=>{const c=a,l=this.mediaMatcher.matchMedia(X4[c]).matches;r[a]=l,l&&(o=c)}),n?[o,r]:o}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Q4),s.LFG(m4))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Mn=(()=>{class i extends H.x{ngOnDestroy(){this.next(),this.complete()}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=s.n5z(i)))(n||i)}}(),i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();const ce={top:new Se({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"}),topCenter:new Se({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"}),topLeft:new Se({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),topRight:new Se({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"}),right:new Se({originX:"end",originY:"center"},{overlayX:"start",overlayY:"center"}),rightTop:new Se({originX:"end",originY:"top"},{overlayX:"start",overlayY:"top"}),rightBottom:new Se({originX:"end",originY:"bottom"},{overlayX:"start",overlayY:"bottom"}),bottom:new Se({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"}),bottomCenter:new Se({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"}),bottomLeft:new Se({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),bottomRight:new Se({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"}),left:new Se({originX:"start",originY:"center"},{overlayX:"end",overlayY:"center"}),leftTop:new Se({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"}),leftBottom:new Se({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"bottom"})},K4=[ce.top,ce.right,ce.bottom,ce.left];function yr(i){for(const t in ce)if(i.connectionPair.originX===ce[t].originX&&i.connectionPair.originY===ce[t].originY&&i.connectionPair.overlayX===ce[t].overlayX&&i.connectionPair.overlayY===ce[t].overlayY)return t}new Se({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"bottom"}),new Se({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"bottom"}),new Se({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"top"}),new Se({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"},void 0,2),new Se({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"},void 0,-2),new Se({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"},void 0,2),new Se({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"},void 0,-2);let e2=(()=>{class i{constructor(e,n){this.cdkConnectedOverlay=e,this.nzDestroyService=n,this.nzArrowPointAtCenter=!1,this.cdkConnectedOverlay.backdropClass="nz-overlay-transparent-backdrop",this.cdkConnectedOverlay.positionChange.pipe(N(this.nzDestroyService)).subscribe(o=>{this.nzArrowPointAtCenter&&this.updateArrowPosition(o)})}updateArrowPosition(e){const n=this.getOriginRect(),o=yr(e);let r=0,a=0;"topLeft"===o||"bottomLeft"===o?r=n.width/2-14:"topRight"===o||"bottomRight"===o?r=-(n.width/2-14):"leftTop"===o||"rightTop"===o?a=n.height/2-10:("leftBottom"===o||"rightBottom"===o)&&(a=-(n.height/2-10)),(this.cdkConnectedOverlay.offsetX!==r||this.cdkConnectedOverlay.offsetY!==a)&&(this.cdkConnectedOverlay.offsetY=a,this.cdkConnectedOverlay.offsetX=r,this.cdkConnectedOverlay.overlayRef.updatePosition())}getFlexibleConnectedPositionStrategyOrigin(){return this.cdkConnectedOverlay.origin instanceof Hi?this.cdkConnectedOverlay.origin.elementRef:this.cdkConnectedOverlay.origin}getOriginRect(){const e=this.getFlexibleConnectedPositionStrategyOrigin();if(e instanceof s.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const n=e.width||0,o=e.height||0;return{top:e.y,bottom:e.y+o,left:e.x,right:e.x+n,height:o,width:n}}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Qo),s.Y36(Mn))},i.\u0275dir=s.lG2({type:i,selectors:[["","cdkConnectedOverlay","","nzConnectedOverlay",""]],inputs:{nzArrowPointAtCenter:"nzArrowPointAtCenter"},exportAs:["nzConnectedOverlay"],features:[s._Bn([Mn])]}),(0,T.gn)([R()],i.prototype,"nzArrowPointAtCenter",void 0),i})(),yc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})();const t2="nz-animate-disabled";let Nt=(()=>{class i{constructor(e,n,o){this.element=e,this.renderer=n,this.animationType=o,this.nzNoAnimation=!1}ngOnChanges(){this.updateClass()}ngAfterViewInit(){this.updateClass()}updateClass(){const e=Ni(this.element);e&&(this.nzNoAnimation||"NoopAnimations"===this.animationType?this.renderer.addClass(e,t2):this.renderer.removeClass(e,t2))}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(s.QbO,8))},i.\u0275dir=s.lG2({type:i,selectors:[["","nzNoAnimation",""]],inputs:{nzNoAnimation:"nzNoAnimation"},exportAs:["nzNoAnimation"],features:[s.TTD]}),(0,T.gn)([R()],i.prototype,"nzNoAnimation",void 0),i})(),es=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[M.ez]}),i})();var A=j(7340);let Tt=(()=>{class i{}return i.SLOW="0.3s",i.BASE="0.2s",i.FAST="0.1s",i})(),lt=(()=>{class i{}return i.EASE_BASE_OUT="cubic-bezier(0.7, 0.3, 0.1, 1)",i.EASE_BASE_IN="cubic-bezier(0.9, 0, 0.3, 0.7)",i.EASE_OUT="cubic-bezier(0.215, 0.61, 0.355, 1)",i.EASE_IN="cubic-bezier(0.55, 0.055, 0.675, 0.19)",i.EASE_IN_OUT="cubic-bezier(0.645, 0.045, 0.355, 1)",i.EASE_OUT_BACK="cubic-bezier(0.12, 0.4, 0.29, 1.46)",i.EASE_IN_BACK="cubic-bezier(0.71, -0.46, 0.88, 0.6)",i.EASE_IN_OUT_BACK="cubic-bezier(0.71, -0.46, 0.29, 1.46)",i.EASE_OUT_CIRC="cubic-bezier(0.08, 0.82, 0.17, 1)",i.EASE_IN_CIRC="cubic-bezier(0.6, 0.04, 0.98, 0.34)",i.EASE_IN_OUT_CIRC="cubic-bezier(0.78, 0.14, 0.15, 0.86)",i.EASE_OUT_QUINT="cubic-bezier(0.23, 1, 0.32, 1)",i.EASE_IN_QUINT="cubic-bezier(0.755, 0.05, 0.855, 0.06)",i.EASE_IN_OUT_QUINT="cubic-bezier(0.86, 0, 0.07, 1)",i})();(0,A.X$)("collapseMotion",[(0,A.SB)("expanded",(0,A.oB)({height:"*"})),(0,A.SB)("collapsed",(0,A.oB)({height:0,overflow:"hidden"})),(0,A.SB)("hidden",(0,A.oB)({height:0,overflow:"hidden",borderTopWidth:"0"})),(0,A.eR)("expanded => collapsed",(0,A.jt)(`150ms ${lt.EASE_IN_OUT}`)),(0,A.eR)("expanded => hidden",(0,A.jt)(`150ms ${lt.EASE_IN_OUT}`)),(0,A.eR)("collapsed => expanded",(0,A.jt)(`150ms ${lt.EASE_IN_OUT}`)),(0,A.eR)("hidden => expanded",(0,A.jt)(`150ms ${lt.EASE_IN_OUT}`))]),(0,A.X$)("treeCollapseMotion",[(0,A.eR)("* => *",[(0,A.IO)("nz-tree-node:leave,nz-tree-builtin-node:leave",[(0,A.oB)({overflow:"hidden"}),(0,A.EY)(0,[(0,A.jt)(`150ms ${lt.EASE_IN_OUT}`,(0,A.oB)({height:0,opacity:0,"padding-bottom":0}))])],{optional:!0}),(0,A.IO)("nz-tree-node:enter,nz-tree-builtin-node:enter",[(0,A.oB)({overflow:"hidden",height:0,opacity:0,"padding-bottom":0}),(0,A.EY)(0,[(0,A.jt)(`150ms ${lt.EASE_IN_OUT}`,(0,A.oB)({overflow:"hidden",height:"*",opacity:"*","padding-bottom":"*"}))])],{optional:!0})])]),(0,A.X$)("fadeMotion",[(0,A.eR)(":enter",[(0,A.oB)({opacity:0}),(0,A.jt)(`${Tt.BASE}`,(0,A.oB)({opacity:1}))]),(0,A.eR)(":leave",[(0,A.oB)({opacity:1}),(0,A.jt)(`${Tt.BASE}`,(0,A.oB)({opacity:0}))])]),(0,A.X$)("helpMotion",[(0,A.eR)(":enter",[(0,A.oB)({opacity:0,transform:"translateY(-5px)"}),(0,A.jt)(`${Tt.SLOW} ${lt.EASE_IN_OUT}`,(0,A.oB)({opacity:1,transform:"translateY(0)"}))]),(0,A.eR)(":leave",[(0,A.oB)({opacity:1,transform:"translateY(0)"}),(0,A.jt)(`${Tt.SLOW} ${lt.EASE_IN_OUT}`,(0,A.oB)({opacity:0,transform:"translateY(-5px)"}))])]);const r7=(0,A.X$)("moveUpMotion",[(0,A.eR)("* => enter",[(0,A.oB)({transformOrigin:"0 0",transform:"translateY(-100%)",opacity:0}),(0,A.jt)(`${Tt.BASE}`,(0,A.oB)({transformOrigin:"0 0",transform:"translateY(0%)",opacity:1}))]),(0,A.eR)("* => leave",[(0,A.oB)({transformOrigin:"0 0",transform:"translateY(0%)",opacity:1}),(0,A.jt)(`${Tt.BASE}`,(0,A.oB)({transformOrigin:"0 0",transform:"translateY(-100%)",opacity:0}))])]),a7=((0,A.X$)("notificationMotion",[(0,A.SB)("enterRight",(0,A.oB)({opacity:1,transform:"translateX(0)"})),(0,A.eR)("* => enterRight",[(0,A.oB)({opacity:0,transform:"translateX(5%)"}),(0,A.jt)("100ms linear")]),(0,A.SB)("enterLeft",(0,A.oB)({opacity:1,transform:"translateX(0)"})),(0,A.eR)("* => enterLeft",[(0,A.oB)({opacity:0,transform:"translateX(-5%)"}),(0,A.jt)("100ms linear")]),(0,A.SB)("enterTop",(0,A.oB)({opacity:1,transform:"translateY(0)"})),(0,A.eR)("* => enterTop",[(0,A.oB)({opacity:0,transform:"translateY(-5%)"}),(0,A.jt)("100ms linear")]),(0,A.SB)("enterBottom",(0,A.oB)({opacity:1,transform:"translateY(0)"})),(0,A.eR)("* => enterBottom",[(0,A.oB)({opacity:0,transform:"translateY(5%)"}),(0,A.jt)("100ms linear")]),(0,A.SB)("leave",(0,A.oB)({opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"})),(0,A.eR)("* => leave",[(0,A.oB)({opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"}),(0,A.jt)("100ms linear")])]),`${Tt.BASE} ${lt.EASE_OUT_QUINT}`),c7=`${Tt.BASE} ${lt.EASE_IN_QUINT}`,Cc=(0,A.X$)("slideMotion",[(0,A.SB)("void",(0,A.oB)({opacity:0,transform:"scaleY(0.8)"})),(0,A.SB)("enter",(0,A.oB)({opacity:1,transform:"scaleY(1)"})),(0,A.eR)("void => *",[(0,A.jt)(a7)]),(0,A.eR)("* => void",[(0,A.jt)(c7)])]),n2=((0,A.X$)("slideAlertMotion",[(0,A.eR)(":leave",[(0,A.oB)({opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"}),(0,A.jt)(`${Tt.SLOW} ${lt.EASE_IN_OUT_CIRC}`,(0,A.oB)({opacity:0,transform:"scaleY(0)",transformOrigin:"0% 0%"}))])]),(0,A.X$)("zoomBigMotion",[(0,A.eR)("void => active",[(0,A.oB)({opacity:0,transform:"scale(0.8)"}),(0,A.jt)(`${Tt.BASE} ${lt.EASE_OUT_CIRC}`,(0,A.oB)({opacity:1,transform:"scale(1)"}))]),(0,A.eR)("active => void",[(0,A.oB)({opacity:1,transform:"scale(1)"}),(0,A.jt)(`${Tt.BASE} ${lt.EASE_IN_OUT_CIRC}`,(0,A.oB)({opacity:0,transform:"scale(0.8)"}))])]));(0,A.X$)("zoomBadgeMotion",[(0,A.eR)(":enter",[(0,A.oB)({opacity:0,transform:"scale(0) translate(50%, -50%)"}),(0,A.jt)(`${Tt.SLOW} ${lt.EASE_OUT_BACK}`,(0,A.oB)({opacity:1,transform:"scale(1) translate(50%, -50%)"}))]),(0,A.eR)(":leave",[(0,A.oB)({opacity:1,transform:"scale(1) translate(50%, -50%)"}),(0,A.jt)(`${Tt.SLOW} ${lt.EASE_IN_BACK}`,(0,A.oB)({opacity:0,transform:"scale(0) translate(50%, -50%)"}))])]),(0,A.X$)("thumbMotion",[(0,A.SB)("from",(0,A.oB)({transform:"translateX({{ transform }}px)",width:"{{ width }}px"}),{params:{transform:0,width:0}}),(0,A.SB)("to",(0,A.oB)({transform:"translateX({{ transform }}px)",width:"{{ width }}px"}),{params:{transform:100,width:0}}),(0,A.eR)("from => to",(0,A.jt)(`300ms ${lt.EASE_IN_OUT}`))]),new s.OlP("NzIsInDropDownMenuToken"),new s.OlP("NzMenuServiceLocalToken");let wc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,ft,Xo,at,es,St]}),i})(),j7=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})(),r2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,Xo,Vi,wc,at,es,ft,yc,j7,St,wc]}),i})();new Se({originX:"start",originY:"top"},{overlayX:"start",overlayY:"top"}),new Se({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),new Se({originX:"start",originY:"top"},{overlayX:"end",overlayY:"bottom"}),new Se({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"});var hn=j(1811);function Y7(i,t){if(1&i&&(s.ynx(0),s._UZ(1,"img",5),s.BQk()),2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("src",e.nzNotFoundImage,s.LSH)("alt",e.isContentString?e.nzNotFoundContent:"empty")}}function G7(i,t){if(1&i&&(s.ynx(0),s.YNc(1,Y7,2,2,"ng-container",4),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("nzStringTemplateOutlet",e.nzNotFoundImage)}}function Z7(i,t){1&i&&s._UZ(0,"nz-empty-default")}function q7(i,t){1&i&&s._UZ(0,"nz-empty-simple")}function W7(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw(2);s.xp6(1),s.hij(" ",e.isContentString?e.nzNotFoundContent:e.locale.description," ")}}function U7(i,t){if(1&i&&(s.TgZ(0,"p",6),s.YNc(1,W7,2,1,"ng-container",4),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("nzStringTemplateOutlet",e.nzNotFoundContent)}}function J7(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw(2);s.xp6(1),s.hij(" ",e.nzNotFoundFooter," ")}}function Q7(i,t){if(1&i&&(s.TgZ(0,"div",7),s.YNc(1,J7,2,1,"ng-container",4),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("nzStringTemplateOutlet",e.nzNotFoundFooter)}}function X7(i,t){1&i&&s._UZ(0,"nz-empty",6),2&i&&s.Q6J("nzNotFoundImage","simple")}function K7(i,t){1&i&&s._UZ(0,"nz-empty",7),2&i&&s.Q6J("nzNotFoundImage","simple")}function eg(i,t){1&i&&s._UZ(0,"nz-empty")}function tg(i,t){if(1&i&&(s.ynx(0,2),s.YNc(1,X7,1,1,"nz-empty",3),s.YNc(2,K7,1,1,"nz-empty",4),s.YNc(3,eg,1,0,"nz-empty",5),s.BQk()),2&i){const e=s.oxw();s.Q6J("ngSwitch",e.size),s.xp6(1),s.Q6J("ngSwitchCase","normal"),s.xp6(1),s.Q6J("ngSwitchCase","small")}}function ng(i,t){}function ig(i,t){if(1&i&&s.YNc(0,ng,0,0,"ng-template",8),2&i){const e=s.oxw(2);s.Q6J("cdkPortalOutlet",e.contentPortal)}}function og(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw(2);s.xp6(1),s.hij(" ",e.content," ")}}function sg(i,t){if(1&i&&(s.ynx(0),s.YNc(1,ig,1,1,null,1),s.YNc(2,og,2,1,"ng-container",1),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf","string"!==e.contentType),s.xp6(1),s.Q6J("ngIf","string"===e.contentType)}}const rg=new s.OlP("nz-empty-component-name");let ag=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-empty-default"]],exportAs:["nzEmptyDefault"],decls:12,vars:0,consts:[["width","184","height","152","viewBox","0 0 184 152","xmlns","http://www.w3.org/2000/svg",1,"ant-empty-img-default"],["fill","none","fill-rule","evenodd"],["transform","translate(24 31.67)"],["cx","67.797","cy","106.89","rx","67.797","ry","12.668",1,"ant-empty-img-default-ellipse"],["d","M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",1,"ant-empty-img-default-path-1"],["d","M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z","transform","translate(13.56)",1,"ant-empty-img-default-path-2"],["d","M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",1,"ant-empty-img-default-path-3"],["d","M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",1,"ant-empty-img-default-path-4"],["d","M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",1,"ant-empty-img-default-path-5"],["transform","translate(149.65 15.383)",1,"ant-empty-img-default-g"],["cx","20.654","cy","3.167","rx","2.849","ry","2.815"],["d","M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"]],template:function(e,n){1&e&&(s.O4$(),s.TgZ(0,"svg",0)(1,"g",1)(2,"g",2),s._UZ(3,"ellipse",3)(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7),s.qZA(),s._UZ(8,"path",8),s.TgZ(9,"g",9),s._UZ(10,"ellipse",10)(11,"path",11),s.qZA()()())},encapsulation:2,changeDetection:0}),i})(),cg=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-empty-simple"]],exportAs:["nzEmptySimple"],decls:6,vars:0,consts:[["width","64","height","41","viewBox","0 0 64 41","xmlns","http://www.w3.org/2000/svg",1,"ant-empty-img-simple"],["transform","translate(0 1)","fill","none","fill-rule","evenodd"],["cx","32","cy","33","rx","32","ry","7",1,"ant-empty-img-simple-ellipse"],["fill-rule","nonzero",1,"ant-empty-img-simple-g"],["d","M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"],["d","M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",1,"ant-empty-img-simple-path"]],template:function(e,n){1&e&&(s.O4$(),s.TgZ(0,"svg",0)(1,"g",1),s._UZ(2,"ellipse",2),s.TgZ(3,"g",3),s._UZ(4,"path",4)(5,"path",5),s.qZA()()())},encapsulation:2,changeDetection:0}),i})();const lg=["default","simple"];let hg=(()=>{class i{constructor(e,n){this.i18n=e,this.cdr=n,this.nzNotFoundImage="default",this.isContentString=!1,this.isImageBuildIn=!0,this.destroy$=new H.x}ngOnChanges(e){const{nzNotFoundContent:n,nzNotFoundImage:o}=e;if(n&&(this.isContentString="string"==typeof n.currentValue),o){const r=o.currentValue||"default";this.isImageBuildIn=lg.findIndex(a=>a===r)>-1}}ngOnInit(){this.i18n.localeChange.pipe(N(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Empty"),this.cdr.markForCheck()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(hn.wi),s.Y36(s.sBO))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-empty"]],hostAttrs:[1,"ant-empty"],inputs:{nzNotFoundImage:"nzNotFoundImage",nzNotFoundContent:"nzNotFoundContent",nzNotFoundFooter:"nzNotFoundFooter"},exportAs:["nzEmpty"],features:[s.TTD],decls:6,vars:5,consts:[[1,"ant-empty-image"],[4,"ngIf"],["class","ant-empty-description",4,"ngIf"],["class","ant-empty-footer",4,"ngIf"],[4,"nzStringTemplateOutlet"],[3,"src","alt"],[1,"ant-empty-description"],[1,"ant-empty-footer"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.YNc(1,G7,2,1,"ng-container",1),s.YNc(2,Z7,1,0,"nz-empty-default",1),s.YNc(3,q7,1,0,"nz-empty-simple",1),s.qZA(),s.YNc(4,U7,2,1,"p",2),s.YNc(5,Q7,2,1,"div",3)),2&e&&(s.xp6(1),s.Q6J("ngIf",!n.isImageBuildIn),s.xp6(1),s.Q6J("ngIf",n.isImageBuildIn&&"simple"!==n.nzNotFoundImage),s.xp6(1),s.Q6J("ngIf",n.isImageBuildIn&&"simple"===n.nzNotFoundImage),s.xp6(1),s.Q6J("ngIf",null!==n.nzNotFoundContent),s.xp6(1),s.Q6J("ngIf",n.nzNotFoundFooter))},dependencies:[M.O5,Be,ag,cg],encapsulation:2,changeDetection:0}),i})(),a2=(()=>{class i{constructor(e,n,o,r){this.configService=e,this.viewContainerRef=n,this.cdr=o,this.injector=r,this.contentType="string",this.size="",this.destroy$=new H.x}ngOnChanges(e){e.nzComponentName&&(this.size=function ug(i){switch(i){case"table":case"list":return"normal";case"select":case"tree-select":case"cascader":case"transfer":return"small";default:return""}}(e.nzComponentName.currentValue)),e.specificContent&&!e.specificContent.isFirstChange()&&(this.content=e.specificContent.currentValue,this.renderEmpty())}ngOnInit(){this.subscribeDefaultEmptyContentChange()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}renderEmpty(){const e=this.content;if("string"==typeof e)this.contentType="string";else if(e instanceof s.Rgc){const n={$implicit:this.nzComponentName};this.contentType="template",this.contentPortal=new Uo(e,this.viewContainerRef,n)}else if(e instanceof s.DyG){const n=s.zs3.create({parent:this.injector,providers:[{provide:rg,useValue:this.nzComponentName}]});this.contentType="component",this.contentPortal=new Wo(e,this.viewContainerRef,n)}else this.contentType="string",this.contentPortal=void 0;this.cdr.detectChanges()}subscribeDefaultEmptyContentChange(){this.configService.getConfigChangeEventForComponent("empty").pipe((0,Q.O)(!0),N(this.destroy$)).subscribe(()=>{this.content=this.specificContent||this.getUserDefaultEmptyContent(),this.renderEmpty()})}getUserDefaultEmptyContent(){return(this.configService.getConfigForComponent("empty")||{}).nzDefaultEmptyContent}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(nt),s.Y36(s.s_b),s.Y36(s.sBO),s.Y36(s.zs3))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-embed-empty"]],inputs:{nzComponentName:"nzComponentName",specificContent:"specificContent"},exportAs:["nzEmbedEmpty"],features:[s.TTD],decls:2,vars:2,consts:[[3,"ngSwitch",4,"ngIf"],[4,"ngIf"],[3,"ngSwitch"],["class","ant-empty-normal",3,"nzNotFoundImage",4,"ngSwitchCase"],["class","ant-empty-small",3,"nzNotFoundImage",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"ant-empty-normal",3,"nzNotFoundImage"],[1,"ant-empty-small",3,"nzNotFoundImage"],[3,"cdkPortalOutlet"]],template:function(e,n){1&e&&(s.YNc(0,tg,4,3,"ng-container",0),s.YNc(1,sg,3,2,"ng-container",1)),2&e&&(s.Q6J("ngIf",!n.content&&null!==n.specificContent),s.xp6(1),s.Q6J("ngIf",n.content))},dependencies:[M.O5,M.RF,M.n9,M.ED,Jo,hg],encapsulation:2,changeDetection:0}),i})(),c2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,mc,St,hn.YI]}),i})();var dg=j(3269);const l2=["moz","ms","webkit"];function h2(i){if(typeof window>"u")return null;if(window.cancelAnimationFrame)return window.cancelAnimationFrame(i);const t=l2.filter(e=>`${e}CancelAnimationFrame`in window||`${e}CancelRequestAnimationFrame`in window)[0];return t?(window[`${t}CancelAnimationFrame`]||window[`${t}CancelRequestAnimationFrame`]).call(this,i):clearTimeout(i)}const ts=function gg(){if(typeof window>"u")return()=>0;if(window.requestAnimationFrame)return window.requestAnimationFrame.bind(window);const i=l2.filter(t=>`${t}RequestAnimationFrame`in window)[0];return i?window[`${i}RequestAnimationFrame`]:function pg(){let i=0;return function(t){const e=(new Date).getTime(),n=Math.max(0,16-(e-i)),o=setTimeout(()=>{t(e+n)},n);return i=e+n,o}}()}(),u2=["*"];function mg(i,t){}function vg(i,t){if(1&i&&s.YNc(0,mg,0,0,"ng-template",4),2&i){const e=s.oxw();s.Q6J("ngTemplateOutlet",e.template)}}function zg(i,t){if(1&i&&s._uU(0),2&i){const e=s.oxw();s.Oqu(e.label)}}function bg(i,t){1&i&&s._UZ(0,"span",7)}function yg(i,t){if(1&i&&(s.TgZ(0,"div",5),s.YNc(1,bg,1,0,"span",6),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",!e.icon)("ngIfElse",e.icon)}}function Cg(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Oqu(e.nzLabel)}}function _g(i,t){if(1&i&&(s.TgZ(0,"div",4),s._UZ(1,"nz-embed-empty",5),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("specificContent",e.notFoundContent)}}function xg(i,t){if(1&i&&s._UZ(0,"nz-option-item-group",9),2&i){const e=s.oxw().$implicit;s.Q6J("nzLabel",e.groupLabel)}}function wg(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"nz-option-item",10),s.NdJ("itemHover",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onItemHover(o))})("itemClick",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onItemClick(o))}),s.qZA()}if(2&i){const e=s.oxw().$implicit,n=s.oxw();s.Q6J("icon",n.menuItemSelectedIcon)("customContent",e.nzCustomContent)("template",e.template)("grouped",!!e.groupLabel)("disabled",e.nzDisabled)("showState","tags"===n.mode||"multiple"===n.mode)("label",e.nzLabel)("compareWith",n.compareWith)("activatedValue",n.activatedValue)("listOfSelectedValue",n.listOfSelectedValue)("value",e.nzValue)}}function Mg(i,t){1&i&&(s.ynx(0,6),s.YNc(1,xg,1,1,"nz-option-item-group",7),s.YNc(2,wg,1,11,"nz-option-item",8),s.BQk()),2&i&&(s.Q6J("ngSwitch",t.$implicit.type),s.xp6(1),s.Q6J("ngSwitchCase","group"),s.xp6(1),s.Q6J("ngSwitchCase","item"))}function Sg(i,t){}function Tg(i,t){1&i&&s.Hsn(0)}const Og=["inputElement"],Ag=["mirrorElement"];function Eg(i,t){1&i&&s._UZ(0,"span",3,4)}function Ng(i,t){if(1&i&&(s.TgZ(0,"div",4),s._uU(1),s.qZA()),2&i){const e=s.oxw(2);s.xp6(1),s.Oqu(e.label)}}function kg(i,t){if(1&i&&s._uU(0),2&i){const e=s.oxw(2);s.Oqu(e.label)}}function Dg(i,t){if(1&i&&(s.ynx(0),s.YNc(1,Ng,2,1,"div",2),s.YNc(2,kg,1,1,"ng-template",null,3,s.W1O),s.BQk()),2&i){const e=s.MAs(3),n=s.oxw();s.xp6(1),s.Q6J("ngIf",n.deletable)("ngIfElse",e)}}function Ig(i,t){1&i&&s._UZ(0,"span",7)}function Pg(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"span",5),s.NdJ("click",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onDelete(o))}),s.YNc(1,Ig,1,0,"span",6),s.qZA()}if(2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",!e.removeIcon)("ngIfElse",e.removeIcon)}}const Vg=function(i){return{$implicit:i}};function Lg(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.hij(" ",e.placeholder," ")}}function Hg(i,t){if(1&i&&s._UZ(0,"nz-select-item",6),2&i){const e=s.oxw(2);s.Q6J("deletable",!1)("disabled",!1)("removeIcon",e.removeIcon)("label",e.listOfTopItem[0].nzLabel)("contentTemplateOutlet",e.customTemplate)("contentTemplateOutletContext",e.listOfTopItem[0])}}function Bg(i,t){if(1&i){const e=s.EpF();s.ynx(0),s.TgZ(1,"nz-select-search",4),s.NdJ("isComposingChange",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.isComposingChange(o))})("valueChange",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onInputValueChange(o))}),s.qZA(),s.YNc(2,Hg,1,6,"nz-select-item",5),s.BQk()}if(2&i){const e=s.oxw();s.xp6(1),s.Q6J("nzId",e.nzId)("disabled",e.disabled)("value",e.inputValue)("showInput",e.showSearch)("mirrorSync",!1)("autofocus",e.autofocus)("focusTrigger",e.open),s.xp6(1),s.Q6J("ngIf",e.isShowSingleLabel)}}function Fg(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"nz-select-item",9),s.NdJ("delete",function(){const r=s.CHM(e).$implicit,a=s.oxw(2);return s.KtG(a.onDeleteItem(r.contentTemplateOutletContext))}),s.qZA()}if(2&i){const e=t.$implicit,n=s.oxw(2);s.Q6J("removeIcon",n.removeIcon)("label",e.nzLabel)("disabled",e.nzDisabled||n.disabled)("contentTemplateOutlet",e.contentTemplateOutlet)("deletable",!0)("contentTemplateOutletContext",e.contentTemplateOutletContext)}}function Rg(i,t){if(1&i){const e=s.EpF();s.ynx(0),s.YNc(1,Fg,1,6,"nz-select-item",7),s.TgZ(2,"nz-select-search",8),s.NdJ("isComposingChange",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.isComposingChange(o))})("valueChange",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onInputValueChange(o))}),s.qZA(),s.BQk()}if(2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.listOfSlicedItem)("ngForTrackBy",e.trackValue),s.xp6(1),s.Q6J("nzId",e.nzId)("disabled",e.disabled)("value",e.inputValue)("autofocus",e.autofocus)("showInput",!0)("mirrorSync",!0)("focusTrigger",e.open)}}function jg(i,t){if(1&i&&s._UZ(0,"nz-select-placeholder",10),2&i){const e=s.oxw();s.Q6J("placeholder",e.placeHolder)}}function $g(i,t){1&i&&s._UZ(0,"span",1)}function Yg(i,t){1&i&&s._UZ(0,"span",3)}function Gg(i,t){1&i&&s._UZ(0,"span",8)}function Zg(i,t){1&i&&s._UZ(0,"span",9)}function qg(i,t){if(1&i&&(s.ynx(0),s.YNc(1,Gg,1,0,"span",6),s.YNc(2,Zg,1,0,"span",7),s.BQk()),2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("ngIf",!e.search),s.xp6(1),s.Q6J("ngIf",e.search)}}function Wg(i,t){if(1&i&&s._UZ(0,"span",11),2&i){const e=s.oxw().$implicit;s.Q6J("nzType",e)}}function Ug(i,t){if(1&i&&(s.ynx(0),s.YNc(1,Wg,1,1,"span",10),s.BQk()),2&i){const e=t.$implicit;s.xp6(1),s.Q6J("ngIf",e)}}function Jg(i,t){if(1&i&&s.YNc(0,Ug,2,1,"ng-container",2),2&i){const e=s.oxw(2);s.Q6J("nzStringTemplateOutlet",e.suffixIcon)}}function Qg(i,t){if(1&i&&(s.YNc(0,qg,3,2,"ng-container",4),s.YNc(1,Jg,1,1,"ng-template",null,5,s.W1O)),2&i){const e=s.MAs(2),n=s.oxw();s.Q6J("ngIf",n.showArrow&&!n.suffixIcon)("ngIfElse",e)}}function Xg(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Oqu(e.feedbackIcon)}}function Kg(i,t){if(1&i&&s._UZ(0,"nz-form-item-feedback-icon",8),2&i){const e=s.oxw(3);s.Q6J("status",e.status)}}function em(i,t){if(1&i&&s.YNc(0,Kg,1,1,"nz-form-item-feedback-icon",7),2&i){const e=s.oxw(2);s.Q6J("ngIf",e.hasFeedback&&!!e.status)}}function tm(i,t){if(1&i&&(s.TgZ(0,"nz-select-arrow",5),s.YNc(1,em,1,1,"ng-template",null,6,s.W1O),s.qZA()),2&i){const e=s.MAs(2),n=s.oxw();s.Q6J("showArrow",n.nzShowArrow)("loading",n.nzLoading)("search",n.nzOpen&&n.nzShowSearch)("suffixIcon",n.nzSuffixIcon)("feedbackIcon",e)}}function nm(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"nz-select-clear",9),s.NdJ("clear",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.onClearSelection())}),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("clearIcon",e.nzClearIcon)}}function im(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"nz-option-container",10),s.NdJ("keydown",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onKeyDown(o))})("itemClick",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onItemClick(o))})("scrollToBottom",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.nzScrollToBottom.emit())}),s.qZA()}if(2&i){const e=s.oxw();s.ekj("ant-select-dropdown-placement-bottomLeft","bottomLeft"===e.dropDownPosition)("ant-select-dropdown-placement-topLeft","topLeft"===e.dropDownPosition)("ant-select-dropdown-placement-bottomRight","bottomRight"===e.dropDownPosition)("ant-select-dropdown-placement-topRight","topRight"===e.dropDownPosition),s.Q6J("ngStyle",e.nzDropdownStyle)("itemSize",e.nzOptionHeightPx)("maxItemLength",e.nzOptionOverflowSize)("matchWidth",e.nzDropdownMatchSelectWidth)("@slideMotion","enter")("@.disabled",!(null==e.noAnimation||!e.noAnimation.nzNoAnimation))("nzNoAnimation",null==e.noAnimation?null:e.noAnimation.nzNoAnimation)("listOfContainerItem",e.listOfContainerItem)("menuItemSelectedIcon",e.nzMenuItemSelectedIcon)("notFoundContent",e.nzNotFoundContent)("activatedValue",e.activatedValue)("listOfSelectedValue",e.listOfValue)("dropdownRender",e.nzDropdownRender)("compareWith",e.compareWith)("mode",e.nzMode)}}let Mc=(()=>{class i{constructor(){this.nzLabel=null,this.changes=new H.x}ngOnChanges(){this.changes.next()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-option-group"]],inputs:{nzLabel:"nzLabel"},exportAs:["nzOptionGroup"],features:[s.TTD],ngContentSelectors:u2,decls:1,vars:0,template:function(e,n){1&e&&(s.F$t(),s.Hsn(0))},encapsulation:2,changeDetection:0}),i})(),om=(()=>{class i{constructor(e,n,o){this.elementRef=e,this.ngZone=n,this.destroy$=o,this.selected=!1,this.activated=!1,this.grouped=!1,this.customContent=!1,this.template=null,this.disabled=!1,this.showState=!1,this.label=null,this.value=null,this.activatedValue=null,this.listOfSelectedValue=[],this.icon=null,this.itemClick=new s.vpe,this.itemHover=new s.vpe}ngOnChanges(e){const{value:n,activatedValue:o,listOfSelectedValue:r}=e;(n||r)&&(this.selected=this.listOfSelectedValue.some(a=>this.compareWith(a,this.value))),(n||o)&&(this.activated=this.compareWith(this.activatedValue,this.value))}ngOnInit(){this.ngZone.runOutsideAngular(()=>{Me(this.elementRef.nativeElement,"click").pipe(N(this.destroy$)).subscribe(()=>{this.disabled||this.ngZone.run(()=>this.itemClick.emit(this.value))}),Me(this.elementRef.nativeElement,"mouseenter").pipe(N(this.destroy$)).subscribe(()=>{this.disabled||this.ngZone.run(()=>this.itemHover.emit(this.value))})})}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(Mn))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-option-item"]],hostAttrs:[1,"ant-select-item","ant-select-item-option"],hostVars:9,hostBindings:function(e,n){2&e&&(s.uIk("title",n.label),s.ekj("ant-select-item-option-grouped",n.grouped)("ant-select-item-option-selected",n.selected&&!n.disabled)("ant-select-item-option-disabled",n.disabled)("ant-select-item-option-active",n.activated&&!n.disabled))},inputs:{grouped:"grouped",customContent:"customContent",template:"template",disabled:"disabled",showState:"showState",label:"label",value:"value",activatedValue:"activatedValue",listOfSelectedValue:"listOfSelectedValue",icon:"icon",compareWith:"compareWith"},outputs:{itemClick:"itemClick",itemHover:"itemHover"},features:[s._Bn([Mn]),s.TTD],decls:5,vars:3,consts:[[1,"ant-select-item-option-content"],[3,"ngIf","ngIfElse"],["noCustomContent",""],["class","ant-select-item-option-state","style","user-select: none","unselectable","on",4,"ngIf"],[3,"ngTemplateOutlet"],["unselectable","on",1,"ant-select-item-option-state",2,"user-select","none"],["nz-icon","","nzType","check","class","ant-select-selected-icon",4,"ngIf","ngIfElse"],["nz-icon","","nzType","check",1,"ant-select-selected-icon"]],template:function(e,n){if(1&e&&(s.TgZ(0,"div",0),s.YNc(1,vg,1,1,"ng-template",1),s.YNc(2,zg,1,1,"ng-template",null,2,s.W1O),s.qZA(),s.YNc(4,yg,2,2,"div",3)),2&e){const o=s.MAs(3);s.xp6(1),s.Q6J("ngIf",n.customContent)("ngIfElse",o),s.xp6(3),s.Q6J("ngIf",n.showState&&n.selected)}},dependencies:[M.O5,M.tP,De,pt],encapsulation:2,changeDetection:0}),i})(),sm=(()=>{class i{constructor(){this.nzLabel=null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-option-item-group"]],hostAttrs:[1,"ant-select-item","ant-select-item-group"],inputs:{nzLabel:"nzLabel"},decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"]],template:function(e,n){1&e&&s.YNc(0,Cg,2,1,"ng-container",0),2&e&&s.Q6J("nzStringTemplateOutlet",n.nzLabel)},dependencies:[Be],encapsulation:2,changeDetection:0}),i})(),rm=(()=>{class i{constructor(){this.notFoundContent=void 0,this.menuItemSelectedIcon=null,this.dropdownRender=null,this.activatedValue=null,this.listOfSelectedValue=[],this.mode="default",this.matchWidth=!0,this.itemSize=32,this.maxItemLength=8,this.listOfContainerItem=[],this.itemClick=new s.vpe,this.scrollToBottom=new s.vpe,this.scrolledIndex=0}onItemClick(e){this.itemClick.emit(e)}onItemHover(e){this.activatedValue=e}trackValue(e,n){return n.key}onScrolledIndexChange(e){this.scrolledIndex=e,e===this.listOfContainerItem.length-this.maxItemLength&&this.scrollToBottom.emit()}scrollToActivatedValue(){const e=this.listOfContainerItem.findIndex(n=>this.compareWith(n.key,this.activatedValue));(e<this.scrolledIndex||e>=this.scrolledIndex+this.maxItemLength)&&this.cdkVirtualScrollViewport.scrollToIndex(e||0)}ngOnChanges(e){const{listOfContainerItem:n,activatedValue:o}=e;(n||o)&&this.scrollToActivatedValue()}ngAfterViewInit(){setTimeout(()=>this.scrollToActivatedValue())}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-option-container"]],viewQuery:function(e,n){if(1&e&&s.Gf(Kn,7),2&e){let o;s.iGM(o=s.CRH())&&(n.cdkVirtualScrollViewport=o.first)}},hostAttrs:[1,"ant-select-dropdown"],inputs:{notFoundContent:"notFoundContent",menuItemSelectedIcon:"menuItemSelectedIcon",dropdownRender:"dropdownRender",activatedValue:"activatedValue",listOfSelectedValue:"listOfSelectedValue",compareWith:"compareWith",mode:"mode",matchWidth:"matchWidth",itemSize:"itemSize",maxItemLength:"maxItemLength",listOfContainerItem:"listOfContainerItem"},outputs:{itemClick:"itemClick",scrollToBottom:"scrollToBottom"},exportAs:["nzOptionContainer"],features:[s.TTD],decls:5,vars:14,consts:[["class","ant-select-item-empty",4,"ngIf"],[3,"itemSize","maxBufferPx","minBufferPx","scrolledIndexChange"],["cdkVirtualFor","",3,"cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],[3,"ngTemplateOutlet"],[1,"ant-select-item-empty"],["nzComponentName","select",3,"specificContent"],[3,"ngSwitch"],[3,"nzLabel",4,"ngSwitchCase"],[3,"icon","customContent","template","grouped","disabled","showState","label","compareWith","activatedValue","listOfSelectedValue","value","itemHover","itemClick",4,"ngSwitchCase"],[3,"nzLabel"],[3,"icon","customContent","template","grouped","disabled","showState","label","compareWith","activatedValue","listOfSelectedValue","value","itemHover","itemClick"]],template:function(e,n){1&e&&(s.TgZ(0,"div"),s.YNc(1,_g,2,1,"div",0),s.TgZ(2,"cdk-virtual-scroll-viewport",1),s.NdJ("scrolledIndexChange",function(r){return n.onScrolledIndexChange(r)}),s.YNc(3,Mg,3,3,"ng-template",2),s.qZA(),s.YNc(4,Sg,0,0,"ng-template",3),s.qZA()),2&e&&(s.xp6(1),s.Q6J("ngIf",0===n.listOfContainerItem.length),s.xp6(1),s.Udp("height",n.listOfContainerItem.length*n.itemSize,"px")("max-height",n.itemSize*n.maxItemLength,"px"),s.ekj("full-width",!n.matchWidth),s.Q6J("itemSize",n.itemSize)("maxBufferPx",n.itemSize*n.maxItemLength)("minBufferPx",n.itemSize*n.maxItemLength),s.xp6(1),s.Q6J("cdkVirtualForOf",n.listOfContainerItem)("cdkVirtualForTrackBy",n.trackValue)("cdkVirtualForTemplateCacheSize",0),s.xp6(1),s.Q6J("ngTemplateOutlet",n.dropdownRender))},dependencies:[M.O5,M.tP,M.RF,M.n9,I4,H4,Kn,a2,om,sm],encapsulation:2,changeDetection:0}),i})(),d2=(()=>{class i{constructor(e,n){this.nzOptionGroupComponent=e,this.destroy$=n,this.changes=new H.x,this.groupLabel=null,this.nzLabel=null,this.nzValue=null,this.nzDisabled=!1,this.nzHide=!1,this.nzCustomContent=!1}ngOnInit(){this.nzOptionGroupComponent&&this.nzOptionGroupComponent.changes.pipe((0,Q.O)(!0),N(this.destroy$)).subscribe(()=>{this.groupLabel=this.nzOptionGroupComponent.nzLabel})}ngOnChanges(){this.changes.next()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Mc,8),s.Y36(Mn))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-option"]],viewQuery:function(e,n){if(1&e&&s.Gf(s.Rgc,7),2&e){let o;s.iGM(o=s.CRH())&&(n.template=o.first)}},inputs:{nzLabel:"nzLabel",nzValue:"nzValue",nzDisabled:"nzDisabled",nzHide:"nzHide",nzCustomContent:"nzCustomContent"},exportAs:["nzOption"],features:[s._Bn([Mn]),s.TTD],ngContentSelectors:u2,decls:1,vars:0,template:function(e,n){1&e&&(s.F$t(),s.YNc(0,Tg,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),(0,T.gn)([R()],i.prototype,"nzDisabled",void 0),(0,T.gn)([R()],i.prototype,"nzHide",void 0),(0,T.gn)([R()],i.prototype,"nzCustomContent",void 0),i})(),f2=(()=>{class i{constructor(e,n,o){this.elementRef=e,this.renderer=n,this.focusMonitor=o,this.nzId=null,this.disabled=!1,this.mirrorSync=!1,this.showInput=!0,this.focusTrigger=!1,this.value="",this.autofocus=!1,this.valueChange=new s.vpe,this.isComposingChange=new s.vpe}setCompositionState(e){this.isComposingChange.next(e)}onValueChange(e){this.value=e,this.valueChange.next(e),this.mirrorSync&&this.syncMirrorWidth()}clearInputValue(){this.inputElement.nativeElement.value="",this.onValueChange("")}syncMirrorWidth(){const e=this.mirrorElement.nativeElement,n=this.elementRef.nativeElement,o=this.inputElement.nativeElement;this.renderer.removeStyle(n,"width"),this.renderer.setProperty(e,"textContent",`${o.value}\xa0`),this.renderer.setStyle(n,"width",`${e.scrollWidth}px`)}focus(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}blur(){this.inputElement.nativeElement.blur()}ngOnChanges(e){const n=this.inputElement.nativeElement,{focusTrigger:o,showInput:r}=e;r&&(this.showInput?this.renderer.removeAttribute(n,"readonly"):this.renderer.setAttribute(n,"readonly","readonly")),o&&!0===o.currentValue&&!1===o.previousValue&&n.focus()}ngAfterViewInit(){this.mirrorSync&&this.syncMirrorWidth(),this.autofocus&&this.focus()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(Yo))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-select-search"]],viewQuery:function(e,n){if(1&e&&(s.Gf(Og,7),s.Gf(Ag,5)),2&e){let o;s.iGM(o=s.CRH())&&(n.inputElement=o.first),s.iGM(o=s.CRH())&&(n.mirrorElement=o.first)}},hostAttrs:[1,"ant-select-selection-search"],inputs:{nzId:"nzId",disabled:"disabled",mirrorSync:"mirrorSync",showInput:"showInput",focusTrigger:"focusTrigger",value:"value",autofocus:"autofocus"},outputs:{valueChange:"valueChange",isComposingChange:"isComposingChange"},features:[s._Bn([{provide:ne.ve,useValue:!1}]),s.TTD],decls:3,vars:7,consts:[["autocomplete","off",1,"ant-select-selection-search-input",3,"ngModel","disabled","ngModelChange","compositionstart","compositionend"],["inputElement",""],["class","ant-select-selection-search-mirror",4,"ngIf"],[1,"ant-select-selection-search-mirror"],["mirrorElement",""]],template:function(e,n){1&e&&(s.TgZ(0,"input",0,1),s.NdJ("ngModelChange",function(r){return n.onValueChange(r)})("compositionstart",function(){return n.setCompositionState(!0)})("compositionend",function(){return n.setCompositionState(!1)}),s.qZA(),s.YNc(2,Eg,2,0,"span",2)),2&e&&(s.Udp("opacity",n.showInput?null:0),s.Q6J("ngModel",n.value)("disabled",n.disabled),s.uIk("id",n.nzId)("autofocus",n.autofocus?"autofocus":null),s.xp6(2),s.Q6J("ngIf",n.mirrorSync))},dependencies:[M.O5,ne.Fj,ne.JJ,ne.On],encapsulation:2,changeDetection:0}),i})(),am=(()=>{class i{constructor(){this.disabled=!1,this.label=null,this.deletable=!1,this.removeIcon=null,this.contentTemplateOutletContext=null,this.contentTemplateOutlet=null,this.delete=new s.vpe}onDelete(e){e.preventDefault(),e.stopPropagation(),this.disabled||this.delete.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-select-item"]],hostAttrs:[1,"ant-select-selection-item"],hostVars:3,hostBindings:function(e,n){2&e&&(s.uIk("title",n.label),s.ekj("ant-select-selection-item-disabled",n.disabled))},inputs:{disabled:"disabled",label:"label",deletable:"deletable",removeIcon:"removeIcon",contentTemplateOutletContext:"contentTemplateOutletContext",contentTemplateOutlet:"contentTemplateOutlet"},outputs:{delete:"delete"},decls:2,vars:5,consts:[[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["class","ant-select-selection-item-remove",3,"click",4,"ngIf"],["class","ant-select-selection-item-content",4,"ngIf","ngIfElse"],["labelTemplate",""],[1,"ant-select-selection-item-content"],[1,"ant-select-selection-item-remove",3,"click"],["nz-icon","","nzType","close",4,"ngIf","ngIfElse"],["nz-icon","","nzType","close"]],template:function(e,n){1&e&&(s.YNc(0,Dg,4,2,"ng-container",0),s.YNc(1,Pg,2,2,"span",1)),2&e&&(s.Q6J("nzStringTemplateOutlet",n.contentTemplateOutlet)("nzStringTemplateOutletContext",s.VKq(3,Vg,n.contentTemplateOutletContext)),s.xp6(1),s.Q6J("ngIf",n.deletable&&!n.disabled))},dependencies:[M.O5,De,Be,pt],encapsulation:2,changeDetection:0}),i})(),cm=(()=>{class i{constructor(){this.placeholder=null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-select-placeholder"]],hostAttrs:[1,"ant-select-selection-placeholder"],inputs:{placeholder:"placeholder"},decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"]],template:function(e,n){1&e&&s.YNc(0,Lg,2,1,"ng-container",0),2&e&&s.Q6J("nzStringTemplateOutlet",n.placeholder)},dependencies:[Be],encapsulation:2,changeDetection:0}),i})(),Sc=(()=>{class i{constructor(e,n,o){this.elementRef=e,this.ngZone=n,this.noAnimation=o,this.nzId=null,this.showSearch=!1,this.placeHolder=null,this.open=!1,this.maxTagCount=1/0,this.autofocus=!1,this.disabled=!1,this.mode="default",this.customTemplate=null,this.maxTagPlaceholder=null,this.removeIcon=null,this.listOfTopItem=[],this.tokenSeparators=[],this.tokenize=new s.vpe,this.inputValueChange=new s.vpe,this.deleteItem=new s.vpe,this.listOfSlicedItem=[],this.isShowPlaceholder=!0,this.isShowSingleLabel=!1,this.isComposing=!1,this.inputValue=null,this.destroy$=new H.x}updateTemplateVariable(){const e=0===this.listOfTopItem.length;this.isShowPlaceholder=e&&!this.isComposing&&!this.inputValue,this.isShowSingleLabel=!e&&!this.isComposing&&!this.inputValue}isComposingChange(e){this.isComposing=e,this.updateTemplateVariable()}onInputValueChange(e){e!==this.inputValue&&(this.inputValue=e,this.updateTemplateVariable(),this.inputValueChange.emit(e),this.tokenSeparate(e,this.tokenSeparators))}tokenSeparate(e,n){if(e&&e.length&&n.length&&"default"!==this.mode&&((a,c)=>{for(let l=0;l<c.length;++l)if(a.lastIndexOf(c[l])>0)return!0;return!1})(e,n)){const a=((a,c)=>{const l=new RegExp(`[${c.join()}]`),h=a.split(l).filter(u=>u);return[...new Set(h)]})(e,n);this.tokenize.next(a)}}clearInputValue(){this.nzSelectSearchComponent&&this.nzSelectSearchComponent.clearInputValue()}focus(){this.nzSelectSearchComponent&&this.nzSelectSearchComponent.focus()}blur(){this.nzSelectSearchComponent&&this.nzSelectSearchComponent.blur()}trackValue(e,n){return n.nzValue}onDeleteItem(e){!this.disabled&&!e.nzDisabled&&this.deleteItem.next(e)}ngOnChanges(e){const{listOfTopItem:n,maxTagCount:o,customTemplate:r,maxTagPlaceholder:a}=e;if(n&&this.updateTemplateVariable(),n||o||r||a){const c=this.listOfTopItem.slice(0,this.maxTagCount).map(l=>({nzLabel:l.nzLabel,nzValue:l.nzValue,nzDisabled:l.nzDisabled,contentTemplateOutlet:this.customTemplate,contentTemplateOutletContext:l}));if(this.listOfTopItem.length>this.maxTagCount){const l=`+ ${this.listOfTopItem.length-this.maxTagCount} ...`,h=this.listOfTopItem.map(d=>d.nzValue),u={nzLabel:l,nzValue:"$$__nz_exceeded_item",nzDisabled:!0,contentTemplateOutlet:this.maxTagPlaceholder,contentTemplateOutletContext:h.slice(this.maxTagCount)};c.push(u)}this.listOfSlicedItem=c}}ngOnInit(){this.ngZone.runOutsideAngular(()=>{Me(this.elementRef.nativeElement,"click").pipe(N(this.destroy$)).subscribe(e=>{e.target!==this.nzSelectSearchComponent.inputElement.nativeElement&&this.nzSelectSearchComponent.focus()}),Me(this.elementRef.nativeElement,"keydown").pipe(N(this.destroy$)).subscribe(e=>{e.target instanceof HTMLInputElement&&8===e.keyCode&&"default"!==this.mode&&!e.target.value&&this.listOfTopItem.length>0&&(e.preventDefault(),this.ngZone.run(()=>this.onDeleteItem(this.listOfTopItem[this.listOfTopItem.length-1])))})})}ngOnDestroy(){this.destroy$.next()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(Nt,9))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-select-top-control"]],viewQuery:function(e,n){if(1&e&&s.Gf(f2,5),2&e){let o;s.iGM(o=s.CRH())&&(n.nzSelectSearchComponent=o.first)}},hostAttrs:[1,"ant-select-selector"],inputs:{nzId:"nzId",showSearch:"showSearch",placeHolder:"placeHolder",open:"open",maxTagCount:"maxTagCount",autofocus:"autofocus",disabled:"disabled",mode:"mode",customTemplate:"customTemplate",maxTagPlaceholder:"maxTagPlaceholder",removeIcon:"removeIcon",listOfTopItem:"listOfTopItem",tokenSeparators:"tokenSeparators"},outputs:{tokenize:"tokenize",inputValueChange:"inputValueChange",deleteItem:"deleteItem"},exportAs:["nzSelectTopControl"],features:[s.TTD],decls:4,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"placeholder",4,"ngIf"],[3,"nzId","disabled","value","showInput","mirrorSync","autofocus","focusTrigger","isComposingChange","valueChange"],[3,"deletable","disabled","removeIcon","label","contentTemplateOutlet","contentTemplateOutletContext",4,"ngIf"],[3,"deletable","disabled","removeIcon","label","contentTemplateOutlet","contentTemplateOutletContext"],[3,"removeIcon","label","disabled","contentTemplateOutlet","deletable","contentTemplateOutletContext","delete",4,"ngFor","ngForOf","ngForTrackBy"],[3,"nzId","disabled","value","autofocus","showInput","mirrorSync","focusTrigger","isComposingChange","valueChange"],[3,"removeIcon","label","disabled","contentTemplateOutlet","deletable","contentTemplateOutletContext","delete"],[3,"placeholder"]],template:function(e,n){1&e&&(s.ynx(0,0),s.YNc(1,Bg,3,8,"ng-container",1),s.YNc(2,Rg,3,9,"ng-container",2),s.BQk(),s.YNc(3,jg,1,1,"nz-select-placeholder",3)),2&e&&(s.Q6J("ngSwitch",n.mode),s.xp6(1),s.Q6J("ngSwitchCase","default"),s.xp6(2),s.Q6J("ngIf",n.isShowPlaceholder))},dependencies:[M.sg,M.O5,M.RF,M.n9,M.ED,pt,f2,am,cm],encapsulation:2,changeDetection:0}),i})(),lm=(()=>{class i{constructor(){this.clearIcon=null,this.clear=new s.vpe}onClick(e){e.preventDefault(),e.stopPropagation(),this.clear.emit(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-select-clear"]],hostAttrs:[1,"ant-select-clear"],hostBindings:function(e,n){1&e&&s.NdJ("click",function(r){return n.onClick(r)})},inputs:{clearIcon:"clearIcon"},outputs:{clear:"clear"},decls:1,vars:2,consts:[["nz-icon","","nzType","close-circle","nzTheme","fill","class","ant-select-close-icon",4,"ngIf","ngIfElse"],["nz-icon","","nzType","close-circle","nzTheme","fill",1,"ant-select-close-icon"]],template:function(e,n){1&e&&s.YNc(0,$g,1,0,"span",0),2&e&&s.Q6J("ngIf",!n.clearIcon)("ngIfElse",n.clearIcon)},dependencies:[M.O5,De,pt],encapsulation:2,changeDetection:0}),i})(),hm=(()=>{class i{constructor(){this.loading=!1,this.search=!1,this.showArrow=!1,this.suffixIcon=null,this.feedbackIcon=null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-select-arrow"]],hostAttrs:[1,"ant-select-arrow"],hostVars:2,hostBindings:function(e,n){2&e&&s.ekj("ant-select-arrow-loading",n.loading)},inputs:{loading:"loading",search:"search",showArrow:"showArrow",suffixIcon:"suffixIcon",feedbackIcon:"feedbackIcon"},decls:4,vars:3,consts:[["nz-icon","","nzType","loading",4,"ngIf","ngIfElse"],["defaultArrow",""],[4,"nzStringTemplateOutlet"],["nz-icon","","nzType","loading"],[4,"ngIf","ngIfElse"],["suffixTemplate",""],["nz-icon","","nzType","down",4,"ngIf"],["nz-icon","","nzType","search",4,"ngIf"],["nz-icon","","nzType","down"],["nz-icon","","nzType","search"],["nz-icon","",3,"nzType",4,"ngIf"],["nz-icon","",3,"nzType"]],template:function(e,n){if(1&e&&(s.YNc(0,Yg,1,0,"span",0),s.YNc(1,Qg,3,2,"ng-template",null,1,s.W1O),s.YNc(3,Xg,2,1,"ng-container",2)),2&e){const o=s.MAs(2);s.Q6J("ngIf",n.loading)("ngIfElse",o),s.xp6(3),s.Q6J("nzStringTemplateOutlet",n.feedbackIcon)}},dependencies:[M.O5,De,Be,pt],encapsulation:2,changeDetection:0}),i})();const um=(i,t)=>!(!t||!t.nzLabel)&&t.nzLabel.toString().toLowerCase().indexOf(i.toLowerCase())>-1;let fm=(()=>{class i{constructor(e,n,o,r,a,c,l,h,u,d,f,p){this.ngZone=e,this.destroy$=n,this.nzConfigService=o,this.cdr=r,this.host=a,this.renderer=c,this.platform=l,this.focusMonitor=h,this.directionality=u,this.noAnimation=d,this.nzFormStatusService=f,this.nzFormNoStatusService=p,this._nzModuleName="select",this.nzId=null,this.nzSize="default",this.nzStatus="",this.nzOptionHeightPx=32,this.nzOptionOverflowSize=8,this.nzDropdownClassName=null,this.nzDropdownMatchSelectWidth=!0,this.nzDropdownStyle=null,this.nzNotFoundContent=void 0,this.nzPlaceHolder=null,this.nzPlacement=null,this.nzMaxTagCount=1/0,this.nzDropdownRender=null,this.nzCustomTemplate=null,this.nzSuffixIcon=null,this.nzClearIcon=null,this.nzRemoveIcon=null,this.nzMenuItemSelectedIcon=null,this.nzTokenSeparators=[],this.nzMaxTagPlaceholder=null,this.nzMaxMultipleCount=1/0,this.nzMode="default",this.nzFilterOption=um,this.compareWith=(g,m)=>g===m,this.nzAllowClear=!1,this.nzBorderless=!1,this.nzShowSearch=!1,this.nzLoading=!1,this.nzAutoFocus=!1,this.nzAutoClearSearchValue=!0,this.nzServerSearch=!1,this.nzDisabled=!1,this.nzOpen=!1,this.nzSelectOnTab=!1,this.nzBackdrop=!1,this.nzOptions=[],this.nzOnSearch=new s.vpe,this.nzScrollToBottom=new s.vpe,this.nzOpenChange=new s.vpe,this.nzBlur=new s.vpe,this.nzFocus=new s.vpe,this.listOfValue$=new te.X([]),this.listOfTemplateItem$=new te.X([]),this.listOfTagAndTemplateItem=[],this.searchValue="",this.isReactiveDriven=!1,this.requestId=-1,this.isNzDisableFirstChange=!0,this.onChange=()=>{},this.onTouched=()=>{},this.dropDownPosition="bottomLeft",this.triggerWidth=null,this.listOfContainerItem=[],this.listOfTopItem=[],this.activatedValue=null,this.listOfValue=[],this.focused=!1,this.dir="ltr",this.positions=[],this.prefixCls="ant-select",this.statusCls={},this.status="",this.hasFeedback=!1}set nzShowArrow(e){this._nzShowArrow=e}get nzShowArrow(){return void 0===this._nzShowArrow?"default"===this.nzMode:this._nzShowArrow}generateTagItem(e){return{nzValue:e,nzLabel:e,type:"item"}}onItemClick(e){if(this.activatedValue=e,"default"===this.nzMode)(0===this.listOfValue.length||!this.compareWith(this.listOfValue[0],e))&&this.updateListOfValue([e]),this.setOpenState(!1);else{const n=this.listOfValue.findIndex(o=>this.compareWith(o,e));if(-1!==n){const o=this.listOfValue.filter((r,a)=>a!==n);this.updateListOfValue(o)}else if(this.listOfValue.length<this.nzMaxMultipleCount){const o=[...this.listOfValue,e];this.updateListOfValue(o)}this.focus(),this.nzAutoClearSearchValue&&this.clearInput()}}onItemDelete(e){const n=this.listOfValue.filter(o=>!this.compareWith(o,e.nzValue));this.updateListOfValue(n),this.clearInput()}updateListOfContainerItem(){let e=this.listOfTagAndTemplateItem.filter(r=>!r.nzHide).filter(r=>!(!this.nzServerSearch&&this.searchValue)||this.nzFilterOption(this.searchValue,r));if("tags"===this.nzMode&&this.searchValue){const r=this.listOfTagAndTemplateItem.find(a=>a.nzLabel===this.searchValue);if(r)this.activatedValue=r.nzValue;else{const a=this.generateTagItem(this.searchValue);e=[a,...e],this.activatedValue=a.nzValue}}const n=e.find(r=>r.nzLabel===this.searchValue)||e.find(r=>this.compareWith(r.nzValue,this.activatedValue))||e.find(r=>this.compareWith(r.nzValue,this.listOfValue[0]))||e[0];this.activatedValue=n&&n.nzValue||null;let o=[];this.isReactiveDriven?o=[...new Set(this.nzOptions.filter(r=>r.groupLabel).map(r=>r.groupLabel))]:this.listOfNzOptionGroupComponent&&(o=this.listOfNzOptionGroupComponent.map(r=>r.nzLabel)),o.forEach(r=>{const a=e.findIndex(c=>r===c.groupLabel);a>-1&&e.splice(a,0,{groupLabel:r,type:"group",key:r})}),this.listOfContainerItem=[...e],this.updateCdkConnectedOverlayPositions()}clearInput(){this.nzSelectTopControlComponent.clearInputValue()}updateListOfValue(e){const o=((r,a)=>"default"===this.nzMode?r.length>0?r[0]:null:r)(e);this.value!==o&&(this.listOfValue=e,this.listOfValue$.next(e),this.value=o,this.onChange(this.value))}onTokenSeparate(e){const n=this.listOfTagAndTemplateItem.filter(o=>-1!==e.findIndex(r=>r===o.nzLabel)).map(o=>o.nzValue).filter(o=>-1===this.listOfValue.findIndex(r=>this.compareWith(r,o)));if("multiple"===this.nzMode)this.updateListOfValue([...this.listOfValue,...n]);else if("tags"===this.nzMode){const o=e.filter(r=>-1===this.listOfTagAndTemplateItem.findIndex(a=>a.nzLabel===r));this.updateListOfValue([...this.listOfValue,...n,...o])}this.clearInput()}onKeyDown(e){if(this.nzDisabled)return;const n=this.listOfContainerItem.filter(r=>"item"===r.type).filter(r=>!r.nzDisabled),o=n.findIndex(r=>this.compareWith(r.nzValue,this.activatedValue));switch(e.keyCode){case 38:e.preventDefault(),this.nzOpen&&n.length>0&&(this.activatedValue=n[o>0?o-1:n.length-1].nzValue);break;case 40:e.preventDefault(),this.nzOpen&&n.length>0?this.activatedValue=n[o<n.length-1?o+1:0].nzValue:this.setOpenState(!0);break;case 13:e.preventDefault(),this.nzOpen?Qn(this.activatedValue)&&-1!==o&&this.onItemClick(this.activatedValue):this.setOpenState(!0);break;case 32:this.nzOpen||(this.setOpenState(!0),e.preventDefault());break;case 9:this.nzSelectOnTab?this.nzOpen&&(e.preventDefault(),Qn(this.activatedValue)&&this.onItemClick(this.activatedValue)):this.setOpenState(!1);break;case 27:break;default:this.nzOpen||this.setOpenState(!0)}}setOpenState(e){this.nzOpen!==e&&(this.nzOpen=e,this.nzOpenChange.emit(e),this.onOpenChange(),this.cdr.markForCheck())}onOpenChange(){this.updateCdkConnectedOverlayStatus(),this.clearInput()}onInputValueChange(e){this.searchValue=e,this.updateListOfContainerItem(),this.nzOnSearch.emit(e),this.updateCdkConnectedOverlayPositions()}onClearSelection(){this.updateListOfValue([])}onClickOutside(e){this.host.nativeElement.contains(e.target)||this.setOpenState(!1)}focus(){this.nzSelectTopControlComponent.focus()}blur(){this.nzSelectTopControlComponent.blur()}onPositionChange(e){const n=yr(e);this.dropDownPosition=n}updateCdkConnectedOverlayStatus(){if(this.platform.isBrowser&&this.originElement.nativeElement){const e=this.triggerWidth;h2(this.requestId),this.requestId=ts(()=>{this.triggerWidth=this.originElement.nativeElement.getBoundingClientRect().width,e!==this.triggerWidth&&this.cdr.detectChanges()})}}updateCdkConnectedOverlayPositions(){ts(()=>{this.cdkConnectedOverlay?.overlayRef?.updatePosition()})}writeValue(e){if(this.value!==e){this.value=e;const o=((r,a)=>null==r?[]:"default"===this.nzMode?[r]:r)(e);this.listOfValue=o,this.listOfValue$.next(o),this.cdr.markForCheck()}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.nzDisabled=this.isNzDisableFirstChange&&this.nzDisabled||e,this.isNzDisableFirstChange=!1,this.nzDisabled&&this.setOpenState(!1),this.cdr.markForCheck()}ngOnChanges(e){const{nzOpen:n,nzDisabled:o,nzOptions:r,nzStatus:a,nzPlacement:c}=e;if(n&&this.onOpenChange(),o&&this.nzDisabled&&this.setOpenState(!1),r){this.isReactiveDriven=!0;const h=(this.nzOptions||[]).map(u=>({template:u.label instanceof s.Rgc?u.label:null,nzLabel:"string"==typeof u.label||"number"==typeof u.label?u.label:null,nzValue:u.value,nzDisabled:u.disabled||!1,nzHide:u.hide||!1,nzCustomContent:u.label instanceof s.Rgc,groupLabel:u.groupLabel||null,type:"item",key:u.value}));this.listOfTemplateItem$.next(h)}if(a&&this.setStatusStyles(this.nzStatus,this.hasFeedback),c){const{currentValue:l}=c;this.dropDownPosition=l;const h=["bottomLeft","topLeft","bottomRight","topRight"];this.positions=l&&h.includes(l)?[ce[l]]:h.map(u=>ce[u])}}ngOnInit(){this.nzFormStatusService?.formStatusChanges.pipe(Le((e,n)=>e.status===n.status&&e.hasFeedback===n.hasFeedback),function fg(...i){const t=(0,dg.jO)(i);return(0,Et.e)((e,n)=>{const o=i.length,r=new Array(o);let a=i.map(()=>!1),c=!1;for(let l=0;l<o;l++)(0,Cn.Xf)(i[l]).subscribe((0,mt.x)(n,h=>{r[l]=h,!c&&!a[l]&&(a[l]=!0,(c=a.every(Si.y))&&(a=null))},Ti.Z));e.subscribe((0,mt.x)(n,l=>{if(c){const h=[l,...r];n.next(t?t(...h):h)}}))})}(this.nzFormNoStatusService?this.nzFormNoStatusService.noFormStatus:(0,Bt.of)(!1)),(0,U.U)(([{status:e,hasFeedback:n},o])=>({status:o?"":e,hasFeedback:n})),N(this.destroy$)).subscribe(({status:e,hasFeedback:n})=>{this.setStatusStyles(e,n)}),this.focusMonitor.monitor(this.host,!0).pipe(N(this.destroy$)).subscribe(e=>{e?(this.focused=!0,this.cdr.markForCheck(),this.nzFocus.emit()):(this.focused=!1,this.cdr.markForCheck(),this.nzBlur.emit(),Promise.resolve().then(()=>{this.onTouched()}))}),(0,ct.a)([this.listOfValue$,this.listOfTemplateItem$]).pipe(N(this.destroy$)).subscribe(([e,n])=>{const o=e.filter(()=>"tags"===this.nzMode).filter(r=>-1===n.findIndex(a=>this.compareWith(a.nzValue,r))).map(r=>this.listOfTopItem.find(a=>this.compareWith(a.nzValue,r))||this.generateTagItem(r));this.listOfTagAndTemplateItem=[...n,...o],this.listOfTopItem=this.listOfValue.map(r=>[...this.listOfTagAndTemplateItem,...this.listOfTopItem].find(a=>this.compareWith(r,a.nzValue))).filter(r=>!!r),this.updateListOfContainerItem()}),this.directionality.change?.pipe(N(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.nzConfigService.getConfigChangeEventForComponent("select").pipe(N(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()}),this.dir=this.directionality.value,this.ngZone.runOutsideAngular(()=>Me(this.host.nativeElement,"click").pipe(N(this.destroy$)).subscribe(()=>{this.nzOpen&&this.nzShowSearch||this.nzDisabled||this.ngZone.run(()=>this.setOpenState(!this.nzOpen))})),this.cdkConnectedOverlay.overlayKeydown.pipe(N(this.destroy$)).subscribe(e=>{27===e.keyCode&&this.setOpenState(!1)})}ngAfterContentInit(){this.isReactiveDriven||(0,ze.T)(this.listOfNzOptionGroupComponent.changes,this.listOfNzOptionComponent.changes).pipe((0,Q.O)(!0),(0,se.w)(()=>(0,ze.T)(this.listOfNzOptionComponent.changes,this.listOfNzOptionGroupComponent.changes,...this.listOfNzOptionComponent.map(e=>e.changes),...this.listOfNzOptionGroupComponent.map(e=>e.changes)).pipe((0,Q.O)(!0))),N(this.destroy$)).subscribe(()=>{const e=this.listOfNzOptionComponent.toArray().map(n=>{const{template:o,nzLabel:r,nzValue:a,nzDisabled:c,nzHide:l,nzCustomContent:h,groupLabel:u}=n;return{template:o,nzLabel:r,nzValue:a,nzDisabled:c,nzHide:l,nzCustomContent:h,groupLabel:u,type:"item",key:a}});this.listOfTemplateItem$.next(e),this.cdr.markForCheck()})}ngOnDestroy(){h2(this.requestId),this.focusMonitor.stopMonitoring(this.host)}setStatusStyles(e,n){this.status=e,this.hasFeedback=n,this.cdr.markForCheck(),this.statusCls=Ho(this.prefixCls,e,n),Object.keys(this.statusCls).forEach(o=>{this.statusCls[o]?this.renderer.addClass(this.host.nativeElement,o):this.renderer.removeClass(this.host.nativeElement,o)})}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.R0b),s.Y36(Mn),s.Y36(nt),s.Y36(s.sBO),s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(Ce),s.Y36(Yo),s.Y36(ge,8),s.Y36(Nt,9),s.Y36(Ja,8),s.Y36(sr,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-select"]],contentQueries:function(e,n,o){if(1&e&&(s.Suo(o,d2,5),s.Suo(o,Mc,5)),2&e){let r;s.iGM(r=s.CRH())&&(n.listOfNzOptionComponent=r),s.iGM(r=s.CRH())&&(n.listOfNzOptionGroupComponent=r)}},viewQuery:function(e,n){if(1&e&&(s.Gf(Hi,7,s.SBq),s.Gf(Qo,7),s.Gf(Sc,7),s.Gf(Mc,7,s.SBq),s.Gf(Sc,7,s.SBq)),2&e){let o;s.iGM(o=s.CRH())&&(n.originElement=o.first),s.iGM(o=s.CRH())&&(n.cdkConnectedOverlay=o.first),s.iGM(o=s.CRH())&&(n.nzSelectTopControlComponent=o.first),s.iGM(o=s.CRH())&&(n.nzOptionGroupComponentElement=o.first),s.iGM(o=s.CRH())&&(n.nzSelectTopControlComponentElement=o.first)}},hostAttrs:[1,"ant-select"],hostVars:26,hostBindings:function(e,n){2&e&&s.ekj("ant-select-in-form-item",!!n.nzFormStatusService)("ant-select-lg","large"===n.nzSize)("ant-select-sm","small"===n.nzSize)("ant-select-show-arrow",n.nzShowArrow)("ant-select-disabled",n.nzDisabled)("ant-select-show-search",(n.nzShowSearch||"default"!==n.nzMode)&&!n.nzDisabled)("ant-select-allow-clear",n.nzAllowClear)("ant-select-borderless",n.nzBorderless)("ant-select-open",n.nzOpen)("ant-select-focused",n.nzOpen||n.focused)("ant-select-single","default"===n.nzMode)("ant-select-multiple","default"!==n.nzMode)("ant-select-rtl","rtl"===n.dir)},inputs:{nzId:"nzId",nzSize:"nzSize",nzStatus:"nzStatus",nzOptionHeightPx:"nzOptionHeightPx",nzOptionOverflowSize:"nzOptionOverflowSize",nzDropdownClassName:"nzDropdownClassName",nzDropdownMatchSelectWidth:"nzDropdownMatchSelectWidth",nzDropdownStyle:"nzDropdownStyle",nzNotFoundContent:"nzNotFoundContent",nzPlaceHolder:"nzPlaceHolder",nzPlacement:"nzPlacement",nzMaxTagCount:"nzMaxTagCount",nzDropdownRender:"nzDropdownRender",nzCustomTemplate:"nzCustomTemplate",nzSuffixIcon:"nzSuffixIcon",nzClearIcon:"nzClearIcon",nzRemoveIcon:"nzRemoveIcon",nzMenuItemSelectedIcon:"nzMenuItemSelectedIcon",nzTokenSeparators:"nzTokenSeparators",nzMaxTagPlaceholder:"nzMaxTagPlaceholder",nzMaxMultipleCount:"nzMaxMultipleCount",nzMode:"nzMode",nzFilterOption:"nzFilterOption",compareWith:"compareWith",nzAllowClear:"nzAllowClear",nzBorderless:"nzBorderless",nzShowSearch:"nzShowSearch",nzLoading:"nzLoading",nzAutoFocus:"nzAutoFocus",nzAutoClearSearchValue:"nzAutoClearSearchValue",nzServerSearch:"nzServerSearch",nzDisabled:"nzDisabled",nzOpen:"nzOpen",nzSelectOnTab:"nzSelectOnTab",nzBackdrop:"nzBackdrop",nzOptions:"nzOptions",nzShowArrow:"nzShowArrow"},outputs:{nzOnSearch:"nzOnSearch",nzScrollToBottom:"nzScrollToBottom",nzOpenChange:"nzOpenChange",nzBlur:"nzBlur",nzFocus:"nzFocus"},exportAs:["nzSelect"],features:[s._Bn([Mn,{provide:ne.JU,useExisting:(0,s.Gpc)(()=>i),multi:!0}]),s.TTD],decls:5,vars:25,consts:[["cdkOverlayOrigin","",3,"nzId","open","disabled","mode","nzNoAnimation","maxTagPlaceholder","removeIcon","placeHolder","maxTagCount","customTemplate","tokenSeparators","showSearch","autofocus","listOfTopItem","inputValueChange","tokenize","deleteItem","keydown"],["origin","cdkOverlayOrigin"],[3,"showArrow","loading","search","suffixIcon","feedbackIcon",4,"ngIf"],[3,"clearIcon","clear",4,"ngIf"],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayMinWidth","cdkConnectedOverlayWidth","cdkConnectedOverlayOrigin","cdkConnectedOverlayTransformOriginOn","cdkConnectedOverlayPanelClass","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","overlayOutsideClick","detach","positionChange"],[3,"showArrow","loading","search","suffixIcon","feedbackIcon"],["feedbackIconTpl",""],[3,"status",4,"ngIf"],[3,"status"],[3,"clearIcon","clear"],[3,"ngStyle","itemSize","maxItemLength","matchWidth","nzNoAnimation","listOfContainerItem","menuItemSelectedIcon","notFoundContent","activatedValue","listOfSelectedValue","dropdownRender","compareWith","mode","keydown","itemClick","scrollToBottom"]],template:function(e,n){if(1&e&&(s.TgZ(0,"nz-select-top-control",0,1),s.NdJ("inputValueChange",function(r){return n.onInputValueChange(r)})("tokenize",function(r){return n.onTokenSeparate(r)})("deleteItem",function(r){return n.onItemDelete(r)})("keydown",function(r){return n.onKeyDown(r)}),s.qZA(),s.YNc(2,tm,3,5,"nz-select-arrow",2),s.YNc(3,nm,1,1,"nz-select-clear",3),s.YNc(4,im,1,23,"ng-template",4),s.NdJ("overlayOutsideClick",function(r){return n.onClickOutside(r)})("detach",function(){return n.setOpenState(!1)})("positionChange",function(r){return n.onPositionChange(r)})),2&e){const o=s.MAs(1);s.Q6J("nzId",n.nzId)("open",n.nzOpen)("disabled",n.nzDisabled)("mode",n.nzMode)("@.disabled",!(null==n.noAnimation||!n.noAnimation.nzNoAnimation))("nzNoAnimation",null==n.noAnimation?null:n.noAnimation.nzNoAnimation)("maxTagPlaceholder",n.nzMaxTagPlaceholder)("removeIcon",n.nzRemoveIcon)("placeHolder",n.nzPlaceHolder)("maxTagCount",n.nzMaxTagCount)("customTemplate",n.nzCustomTemplate)("tokenSeparators",n.nzTokenSeparators)("showSearch",n.nzShowSearch)("autofocus",n.nzAutoFocus)("listOfTopItem",n.listOfTopItem),s.xp6(2),s.Q6J("ngIf",n.nzShowArrow||n.hasFeedback&&!!n.status),s.xp6(1),s.Q6J("ngIf",n.nzAllowClear&&!n.nzDisabled&&n.listOfValue.length),s.xp6(1),s.Q6J("cdkConnectedOverlayHasBackdrop",n.nzBackdrop)("cdkConnectedOverlayMinWidth",n.nzDropdownMatchSelectWidth?null:n.triggerWidth)("cdkConnectedOverlayWidth",n.nzDropdownMatchSelectWidth?n.triggerWidth:null)("cdkConnectedOverlayOrigin",o)("cdkConnectedOverlayTransformOriginOn",".ant-select-dropdown")("cdkConnectedOverlayPanelClass",n.nzDropdownClassName)("cdkConnectedOverlayOpen",n.nzOpen)("cdkConnectedOverlayPositions",n.positions)}},dependencies:[M.O5,M.PC,Qo,Hi,e2,Nt,pt,Qa,rm,Sc,lm,hm],encapsulation:2,data:{animation:[Cc]},changeDetection:0}),(0,T.gn)([pe()],i.prototype,"nzSuffixIcon",void 0),(0,T.gn)([R()],i.prototype,"nzAllowClear",void 0),(0,T.gn)([pe(),R()],i.prototype,"nzBorderless",void 0),(0,T.gn)([R()],i.prototype,"nzShowSearch",void 0),(0,T.gn)([R()],i.prototype,"nzLoading",void 0),(0,T.gn)([R()],i.prototype,"nzAutoFocus",void 0),(0,T.gn)([R()],i.prototype,"nzAutoClearSearchValue",void 0),(0,T.gn)([R()],i.prototype,"nzServerSearch",void 0),(0,T.gn)([R()],i.prototype,"nzDisabled",void 0),(0,T.gn)([R()],i.prototype,"nzOpen",void 0),(0,T.gn)([R()],i.prototype,"nzSelectOnTab",void 0),(0,T.gn)([pe(),R()],i.prototype,"nzBackdrop",void 0),i})(),p2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,hn.YI,ne.u5,ft,Xo,at,St,c2,yc,es,uc,u4,zr,oc]}),i})();const pm=["nz-pagination-item",""];function gm(i,t){if(1&i&&(s.TgZ(0,"a"),s._uU(1),s.qZA()),2&i){const e=s.oxw().page;s.xp6(1),s.Oqu(e)}}function mm(i,t){1&i&&s._UZ(0,"span",9)}function vm(i,t){1&i&&s._UZ(0,"span",10)}function zm(i,t){if(1&i&&(s.TgZ(0,"button",6),s.ynx(1,2),s.YNc(2,mm,1,0,"span",7),s.YNc(3,vm,1,0,"span",8),s.BQk(),s.qZA()),2&i){const e=s.oxw(2);s.Q6J("disabled",e.disabled),s.xp6(1),s.Q6J("ngSwitch",e.direction),s.xp6(1),s.Q6J("ngSwitchCase","rtl")}}function bm(i,t){1&i&&s._UZ(0,"span",10)}function ym(i,t){1&i&&s._UZ(0,"span",9)}function Cm(i,t){if(1&i&&(s.TgZ(0,"button",6),s.ynx(1,2),s.YNc(2,bm,1,0,"span",11),s.YNc(3,ym,1,0,"span",12),s.BQk(),s.qZA()),2&i){const e=s.oxw(2);s.Q6J("disabled",e.disabled),s.xp6(1),s.Q6J("ngSwitch",e.direction),s.xp6(1),s.Q6J("ngSwitchCase","rtl")}}function _m(i,t){1&i&&s._UZ(0,"span",20)}function xm(i,t){1&i&&s._UZ(0,"span",21)}function wm(i,t){if(1&i&&(s.ynx(0,2),s.YNc(1,_m,1,0,"span",18),s.YNc(2,xm,1,0,"span",19),s.BQk()),2&i){const e=s.oxw(4);s.Q6J("ngSwitch",e.direction),s.xp6(1),s.Q6J("ngSwitchCase","rtl")}}function Mm(i,t){1&i&&s._UZ(0,"span",21)}function Sm(i,t){1&i&&s._UZ(0,"span",20)}function Tm(i,t){if(1&i&&(s.ynx(0,2),s.YNc(1,Mm,1,0,"span",22),s.YNc(2,Sm,1,0,"span",23),s.BQk()),2&i){const e=s.oxw(4);s.Q6J("ngSwitch",e.direction),s.xp6(1),s.Q6J("ngSwitchCase","rtl")}}function Om(i,t){if(1&i&&(s.TgZ(0,"div",15),s.ynx(1,2),s.YNc(2,wm,3,2,"ng-container",16),s.YNc(3,Tm,3,2,"ng-container",16),s.BQk(),s.TgZ(4,"span",17),s._uU(5,"\u2022\u2022\u2022"),s.qZA()()),2&i){const e=s.oxw(2).$implicit;s.xp6(1),s.Q6J("ngSwitch",e),s.xp6(1),s.Q6J("ngSwitchCase","prev_5"),s.xp6(1),s.Q6J("ngSwitchCase","next_5")}}function Am(i,t){if(1&i&&(s.ynx(0),s.TgZ(1,"a",13),s.YNc(2,Om,6,3,"div",14),s.qZA(),s.BQk()),2&i){const e=s.oxw().$implicit;s.xp6(1),s.Q6J("ngSwitch",e)}}function Em(i,t){1&i&&(s.ynx(0,2),s.YNc(1,gm,2,1,"a",3),s.YNc(2,zm,4,3,"button",4),s.YNc(3,Cm,4,3,"button",4),s.YNc(4,Am,3,1,"ng-container",5),s.BQk()),2&i&&(s.Q6J("ngSwitch",t.$implicit),s.xp6(1),s.Q6J("ngSwitchCase","page"),s.xp6(1),s.Q6J("ngSwitchCase","prev"),s.xp6(1),s.Q6J("ngSwitchCase","next"))}function Nm(i,t){}const km=function(i,t){return{$implicit:i,page:t}},g2=["containerTemplate"];function Dm(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"ul")(1,"li",1),s.NdJ("click",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.prePage())}),s.qZA(),s.TgZ(2,"li",2)(3,"input",3),s.NdJ("keydown.enter",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.jumpToPageViaInput(o))}),s.qZA(),s.TgZ(4,"span",4),s._uU(5,"/"),s.qZA(),s._uU(6),s.qZA(),s.TgZ(7,"li",5),s.NdJ("click",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.nextPage())}),s.qZA()()}if(2&i){const e=s.oxw();s.xp6(1),s.Q6J("disabled",e.isFirstIndex)("direction",e.dir)("itemRender",e.itemRender),s.uIk("title",e.locale.prev_page),s.xp6(1),s.uIk("title",e.pageIndex+"/"+e.lastIndex),s.xp6(1),s.Q6J("disabled",e.disabled)("value",e.pageIndex),s.xp6(3),s.hij(" ",e.lastIndex," "),s.xp6(1),s.Q6J("disabled",e.isLastIndex)("direction",e.dir)("itemRender",e.itemRender),s.uIk("title",null==e.locale?null:e.locale.next_page)}}const Im=["nz-pagination-options",""];function Pm(i,t){if(1&i&&s._UZ(0,"nz-option",4),2&i){const e=t.$implicit;s.Q6J("nzLabel",e.label)("nzValue",e.value)}}function Vm(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"nz-select",2),s.NdJ("ngModelChange",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onPageSizeChange(o))}),s.YNc(1,Pm,1,2,"nz-option",3),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("nzDisabled",e.disabled)("nzSize",e.nzSize)("ngModel",e.pageSize),s.xp6(1),s.Q6J("ngForOf",e.listOfPageSizeOption)("ngForTrackBy",e.trackByOption)}}function Lm(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",5),s._uU(1),s.TgZ(2,"input",6),s.NdJ("keydown.enter",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.jumpToPageViaInput(o))}),s.qZA(),s._uU(3),s.qZA()}if(2&i){const e=s.oxw();s.xp6(1),s.hij(" ",e.locale.jump_to," "),s.xp6(1),s.Q6J("disabled",e.disabled),s.xp6(1),s.hij(" ",e.locale.page," ")}}function Hm(i,t){}const Bm=function(i,t){return{$implicit:i,range:t}};function Fm(i,t){if(1&i&&(s.TgZ(0,"li",4),s.YNc(1,Hm,0,0,"ng-template",5),s.qZA()),2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",e.showTotal)("ngTemplateOutletContext",s.WLB(2,Bm,e.total,e.ranges))}}function Rm(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"li",6),s.NdJ("gotoIndex",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.jumpPage(o))})("diffIndex",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.jumpDiff(o))}),s.qZA()}if(2&i){const e=t.$implicit,n=s.oxw(2);s.Q6J("locale",n.locale)("type",e.type)("index",e.index)("disabled",!!e.disabled)("itemRender",n.itemRender)("active",n.pageIndex===e.index)("direction",n.dir)}}function jm(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"li",7),s.NdJ("pageIndexChange",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onPageIndexChange(o))})("pageSizeChange",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onPageSizeChange(o))}),s.qZA()}if(2&i){const e=s.oxw(2);s.Q6J("total",e.total)("locale",e.locale)("disabled",e.disabled)("nzSize",e.nzSize)("showSizeChanger",e.showSizeChanger)("showQuickJumper",e.showQuickJumper)("pageIndex",e.pageIndex)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions)}}function $m(i,t){if(1&i&&(s.TgZ(0,"ul"),s.YNc(1,Fm,2,5,"li",1),s.YNc(2,Rm,1,7,"li",2),s.YNc(3,jm,1,9,"li",3),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.showTotal),s.xp6(1),s.Q6J("ngForOf",e.listOfPageItem)("ngForTrackBy",e.trackByPageItem),s.xp6(1),s.Q6J("ngIf",e.showQuickJumper||e.showSizeChanger)}}function Ym(i,t){}function Gm(i,t){if(1&i&&(s.ynx(0),s.YNc(1,Ym,0,0,"ng-template",6),s.BQk()),2&i){s.oxw(2);const e=s.MAs(2);s.xp6(1),s.Q6J("ngTemplateOutlet",e.template)}}function Zm(i,t){if(1&i&&(s.ynx(0),s.YNc(1,Gm,2,1,"ng-container",5),s.BQk()),2&i){const e=s.oxw(),n=s.MAs(4);s.xp6(1),s.Q6J("ngIf",e.nzSimple)("ngIfElse",n.template)}}let m2=(()=>{class i{constructor(){this.active=!1,this.index=null,this.disabled=!1,this.direction="ltr",this.type=null,this.itemRender=null,this.diffIndex=new s.vpe,this.gotoIndex=new s.vpe,this.title=null}clickItem(){this.disabled||("page"===this.type?this.gotoIndex.emit(this.index):this.diffIndex.emit({next:1,prev:-1,prev_5:-5,next_5:5}[this.type]))}ngOnChanges(e){const{locale:n,index:o,type:r}=e;(n||o||r)&&(this.title={page:`${this.index}`,next:this.locale?.next_page,prev:this.locale?.prev_page,prev_5:this.locale?.prev_5,next_5:this.locale?.next_5}[this.type])}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["li","nz-pagination-item",""]],hostVars:19,hostBindings:function(e,n){1&e&&s.NdJ("click",function(){return n.clickItem()}),2&e&&(s.uIk("title",n.title),s.ekj("ant-pagination-prev","prev"===n.type)("ant-pagination-next","next"===n.type)("ant-pagination-item","page"===n.type)("ant-pagination-jump-prev","prev_5"===n.type)("ant-pagination-jump-prev-custom-icon","prev_5"===n.type)("ant-pagination-jump-next","next_5"===n.type)("ant-pagination-jump-next-custom-icon","next_5"===n.type)("ant-pagination-disabled",n.disabled)("ant-pagination-item-active",n.active))},inputs:{active:"active",locale:"locale",index:"index",disabled:"disabled",direction:"direction",type:"type",itemRender:"itemRender"},outputs:{diffIndex:"diffIndex",gotoIndex:"gotoIndex"},features:[s.TTD],attrs:pm,decls:3,vars:5,consts:[["renderItemTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],[4,"ngSwitchCase"],["type","button","class","ant-pagination-item-link",3,"disabled",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["type","button",1,"ant-pagination-item-link",3,"disabled"],["nz-icon","","nzType","right",4,"ngSwitchCase"],["nz-icon","","nzType","left",4,"ngSwitchDefault"],["nz-icon","","nzType","right"],["nz-icon","","nzType","left"],["nz-icon","","nzType","left",4,"ngSwitchCase"],["nz-icon","","nzType","right",4,"ngSwitchDefault"],[1,"ant-pagination-item-link",3,"ngSwitch"],["class","ant-pagination-item-container",4,"ngSwitchDefault"],[1,"ant-pagination-item-container"],[3,"ngSwitch",4,"ngSwitchCase"],[1,"ant-pagination-item-ellipsis"],["nz-icon","","nzType","double-right","class","ant-pagination-item-link-icon",4,"ngSwitchCase"],["nz-icon","","nzType","double-left","class","ant-pagination-item-link-icon",4,"ngSwitchDefault"],["nz-icon","","nzType","double-right",1,"ant-pagination-item-link-icon"],["nz-icon","","nzType","double-left",1,"ant-pagination-item-link-icon"],["nz-icon","","nzType","double-left","class","ant-pagination-item-link-icon",4,"ngSwitchCase"],["nz-icon","","nzType","double-right","class","ant-pagination-item-link-icon",4,"ngSwitchDefault"]],template:function(e,n){if(1&e&&(s.YNc(0,Em,5,4,"ng-template",null,0,s.W1O),s.YNc(2,Nm,0,0,"ng-template",1)),2&e){const o=s.MAs(1);s.xp6(2),s.Q6J("ngTemplateOutlet",n.itemRender||o)("ngTemplateOutletContext",s.WLB(2,km,n.type,n.index))}},dependencies:[M.tP,M.RF,M.n9,M.ED,De],encapsulation:2,changeDetection:0}),i})(),qm=(()=>{class i{constructor(e,n,o,r){this.cdr=e,this.renderer=n,this.elementRef=o,this.directionality=r,this.itemRender=null,this.disabled=!1,this.total=0,this.pageIndex=1,this.pageSize=10,this.pageIndexChange=new s.vpe,this.lastIndex=0,this.isFirstIndex=!1,this.isLastIndex=!1,this.dir="ltr",this.destroy$=new H.x,n.removeChild(n.parentNode(o.nativeElement),o.nativeElement)}ngOnInit(){this.directionality.change?.pipe(N(this.destroy$)).subscribe(e=>{this.dir=e,this.updateRtlStyle(),this.cdr.detectChanges()}),this.dir=this.directionality.value,this.updateRtlStyle()}updateRtlStyle(){"rtl"===this.dir?this.renderer.addClass(this.elementRef.nativeElement,"ant-pagination-rtl"):this.renderer.removeClass(this.elementRef.nativeElement,"ant-pagination-rtl")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}jumpToPageViaInput(e){const n=e.target,o=Fa(n.value,this.pageIndex);this.onPageIndexChange(o),n.value=`${this.pageIndex}`}prePage(){this.onPageIndexChange(this.pageIndex-1)}nextPage(){this.onPageIndexChange(this.pageIndex+1)}onPageIndexChange(e){this.pageIndexChange.next(e)}updateBindingValue(){this.lastIndex=Math.ceil(this.total/this.pageSize),this.isFirstIndex=1===this.pageIndex,this.isLastIndex=this.pageIndex===this.lastIndex}ngOnChanges(e){const{pageIndex:n,total:o,pageSize:r}=e;(n||o||r)&&this.updateBindingValue()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.sBO),s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36(ge,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-pagination-simple"]],viewQuery:function(e,n){if(1&e&&s.Gf(g2,7),2&e){let o;s.iGM(o=s.CRH())&&(n.template=o.first)}},inputs:{itemRender:"itemRender",disabled:"disabled",locale:"locale",total:"total",pageIndex:"pageIndex",pageSize:"pageSize"},outputs:{pageIndexChange:"pageIndexChange"},features:[s.TTD],decls:2,vars:0,consts:[["containerTemplate",""],["nz-pagination-item","","type","prev",3,"disabled","direction","itemRender","click"],[1,"ant-pagination-simple-pager"],["size","3",3,"disabled","value","keydown.enter"],[1,"ant-pagination-slash"],["nz-pagination-item","","type","next",3,"disabled","direction","itemRender","click"]],template:function(e,n){1&e&&s.YNc(0,Dm,8,12,"ng-template",null,0,s.W1O)},dependencies:[m2],encapsulation:2,changeDetection:0}),i})(),Wm=(()=>{class i{constructor(){this.nzSize="default",this.disabled=!1,this.showSizeChanger=!1,this.showQuickJumper=!1,this.total=0,this.pageIndex=1,this.pageSize=10,this.pageSizeOptions=[],this.pageIndexChange=new s.vpe,this.pageSizeChange=new s.vpe,this.listOfPageSizeOption=[]}onPageSizeChange(e){this.pageSize!==e&&this.pageSizeChange.next(e)}jumpToPageViaInput(e){const n=e.target,o=Math.floor(Fa(n.value,this.pageIndex));this.pageIndexChange.next(o),n.value=""}trackByOption(e,n){return n.value}ngOnChanges(e){const{pageSize:n,pageSizeOptions:o,locale:r}=e;(n||o||r)&&(this.listOfPageSizeOption=[...new Set([...this.pageSizeOptions,this.pageSize])].map(a=>({value:a,label:`${a} ${this.locale.items_per_page}`})))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["li","nz-pagination-options",""]],hostAttrs:[1,"ant-pagination-options"],inputs:{nzSize:"nzSize",disabled:"disabled",showSizeChanger:"showSizeChanger",showQuickJumper:"showQuickJumper",locale:"locale",total:"total",pageIndex:"pageIndex",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions"},outputs:{pageIndexChange:"pageIndexChange",pageSizeChange:"pageSizeChange"},features:[s.TTD],attrs:Im,decls:2,vars:2,consts:[["class","ant-pagination-options-size-changer",3,"nzDisabled","nzSize","ngModel","ngModelChange",4,"ngIf"],["class","ant-pagination-options-quick-jumper",4,"ngIf"],[1,"ant-pagination-options-size-changer",3,"nzDisabled","nzSize","ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf","ngForTrackBy"],[3,"nzLabel","nzValue"],[1,"ant-pagination-options-quick-jumper"],[3,"disabled","keydown.enter"]],template:function(e,n){1&e&&(s.YNc(0,Vm,2,5,"nz-select",0),s.YNc(1,Lm,4,3,"div",1)),2&e&&(s.Q6J("ngIf",n.showSizeChanger),s.xp6(1),s.Q6J("ngIf",n.showQuickJumper))},dependencies:[M.sg,M.O5,ne.JJ,ne.On,d2,fm],encapsulation:2,changeDetection:0}),i})(),Um=(()=>{class i{constructor(e,n,o,r){this.cdr=e,this.renderer=n,this.elementRef=o,this.directionality=r,this.nzSize="default",this.itemRender=null,this.showTotal=null,this.disabled=!1,this.showSizeChanger=!1,this.showQuickJumper=!1,this.total=0,this.pageIndex=1,this.pageSize=10,this.pageSizeOptions=[10,20,30,40],this.pageIndexChange=new s.vpe,this.pageSizeChange=new s.vpe,this.ranges=[0,0],this.listOfPageItem=[],this.dir="ltr",this.destroy$=new H.x,n.removeChild(n.parentNode(o.nativeElement),o.nativeElement)}ngOnInit(){this.directionality.change?.pipe(N(this.destroy$)).subscribe(e=>{this.dir=e,this.updateRtlStyle(),this.cdr.detectChanges()}),this.dir=this.directionality.value,this.updateRtlStyle()}updateRtlStyle(){"rtl"===this.dir?this.renderer.addClass(this.elementRef.nativeElement,"ant-pagination-rtl"):this.renderer.removeClass(this.elementRef.nativeElement,"ant-pagination-rtl")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}jumpPage(e){this.onPageIndexChange(e)}jumpDiff(e){this.jumpPage(this.pageIndex+e)}trackByPageItem(e,n){return`${n.type}-${n.index}`}onPageIndexChange(e){this.pageIndexChange.next(e)}onPageSizeChange(e){this.pageSizeChange.next(e)}getLastIndex(e,n){return Math.ceil(e/n)}buildIndexes(){const e=this.getLastIndex(this.total,this.pageSize);this.listOfPageItem=this.getListOfPageItem(this.pageIndex,e)}getListOfPageItem(e,n){const r=(a,c)=>{const l=[];for(let h=a;h<=c;h++)l.push({index:h,type:"page"});return l};return a=n<=9?r(1,n):((c,l)=>{let h=[];const u={type:"prev_5"},d={type:"next_5"},f=r(1,1),p=r(n,n);return h=c<5?[...r(2,4===c?6:5),d]:c<l-3?[u,...r(c-2,c+2),d]:[u,...r(c===l-3?l-5:l-4,l-1)],[...f,...h,...p]})(e,n),[{type:"prev",disabled:1===e},...a,{type:"next",disabled:e===n}];var a}ngOnChanges(e){const{pageIndex:n,pageSize:o,total:r}=e;(n||o||r)&&(this.ranges=[(this.pageIndex-1)*this.pageSize+1,Math.min(this.pageIndex*this.pageSize,this.total)],this.buildIndexes())}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.sBO),s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36(ge,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-pagination-default"]],viewQuery:function(e,n){if(1&e&&s.Gf(g2,7),2&e){let o;s.iGM(o=s.CRH())&&(n.template=o.first)}},inputs:{nzSize:"nzSize",itemRender:"itemRender",showTotal:"showTotal",disabled:"disabled",locale:"locale",showSizeChanger:"showSizeChanger",showQuickJumper:"showQuickJumper",total:"total",pageIndex:"pageIndex",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions"},outputs:{pageIndexChange:"pageIndexChange",pageSizeChange:"pageSizeChange"},features:[s.TTD],decls:2,vars:0,consts:[["containerTemplate",""],["class","ant-pagination-total-text",4,"ngIf"],["nz-pagination-item","",3,"locale","type","index","disabled","itemRender","active","direction","gotoIndex","diffIndex",4,"ngFor","ngForOf","ngForTrackBy"],["nz-pagination-options","",3,"total","locale","disabled","nzSize","showSizeChanger","showQuickJumper","pageIndex","pageSize","pageSizeOptions","pageIndexChange","pageSizeChange",4,"ngIf"],[1,"ant-pagination-total-text"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-pagination-item","",3,"locale","type","index","disabled","itemRender","active","direction","gotoIndex","diffIndex"],["nz-pagination-options","",3,"total","locale","disabled","nzSize","showSizeChanger","showQuickJumper","pageIndex","pageSize","pageSizeOptions","pageIndexChange","pageSizeChange"]],template:function(e,n){1&e&&s.YNc(0,$m,4,4,"ng-template",null,0,s.W1O)},dependencies:[M.sg,M.O5,M.tP,Wm,m2],encapsulation:2,changeDetection:0}),i})(),Qm=(()=>{class i{constructor(e,n,o,r,a){this.i18n=e,this.cdr=n,this.breakpointService=o,this.nzConfigService=r,this.directionality=a,this._nzModuleName="pagination",this.nzPageSizeChange=new s.vpe,this.nzPageIndexChange=new s.vpe,this.nzShowTotal=null,this.nzItemRender=null,this.nzSize="default",this.nzPageSizeOptions=[10,20,30,40],this.nzShowSizeChanger=!1,this.nzShowQuickJumper=!1,this.nzSimple=!1,this.nzDisabled=!1,this.nzResponsive=!1,this.nzHideOnSinglePage=!1,this.nzTotal=0,this.nzPageIndex=1,this.nzPageSize=10,this.showPagination=!0,this.size="default",this.dir="ltr",this.destroy$=new H.x,this.total$=new oe(1)}validatePageIndex(e,n){return e>n?n:e<1?1:e}onPageIndexChange(e){const n=this.getLastIndex(this.nzTotal,this.nzPageSize),o=this.validatePageIndex(e,n);o!==this.nzPageIndex&&!this.nzDisabled&&(this.nzPageIndex=o,this.nzPageIndexChange.emit(this.nzPageIndex))}onPageSizeChange(e){this.nzPageSize=e,this.nzPageSizeChange.emit(e);const n=this.getLastIndex(this.nzTotal,this.nzPageSize);this.nzPageIndex>n&&this.onPageIndexChange(n)}onTotalChange(e){const n=this.getLastIndex(e,this.nzPageSize);this.nzPageIndex>n&&Promise.resolve().then(()=>{this.onPageIndexChange(n),this.cdr.markForCheck()})}getLastIndex(e,n){return Math.ceil(e/n)}ngOnInit(){this.i18n.localeChange.pipe(N(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Pagination"),this.cdr.markForCheck()}),this.total$.pipe(N(this.destroy$)).subscribe(e=>{this.onTotalChange(e)}),this.breakpointService.subscribe(X4).pipe(N(this.destroy$)).subscribe(e=>{this.nzResponsive&&(this.size=e===Ko.xs?"small":"default",this.cdr.markForCheck())}),this.directionality.change?.pipe(N(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnChanges(e){const{nzHideOnSinglePage:n,nzTotal:o,nzPageSize:r,nzSize:a}=e;o&&this.total$.next(this.nzTotal),(n||o||r)&&(this.showPagination=this.nzHideOnSinglePage&&this.nzTotal>this.nzPageSize||this.nzTotal>0&&!this.nzHideOnSinglePage),a&&(this.size=a.currentValue)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(hn.wi),s.Y36(s.sBO),s.Y36(o7),s.Y36(nt),s.Y36(ge,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-pagination"]],hostAttrs:[1,"ant-pagination"],hostVars:8,hostBindings:function(e,n){2&e&&s.ekj("ant-pagination-simple",n.nzSimple)("ant-pagination-disabled",n.nzDisabled)("mini",!n.nzSimple&&"small"===n.size)("ant-pagination-rtl","rtl"===n.dir)},inputs:{nzShowTotal:"nzShowTotal",nzItemRender:"nzItemRender",nzSize:"nzSize",nzPageSizeOptions:"nzPageSizeOptions",nzShowSizeChanger:"nzShowSizeChanger",nzShowQuickJumper:"nzShowQuickJumper",nzSimple:"nzSimple",nzDisabled:"nzDisabled",nzResponsive:"nzResponsive",nzHideOnSinglePage:"nzHideOnSinglePage",nzTotal:"nzTotal",nzPageIndex:"nzPageIndex",nzPageSize:"nzPageSize"},outputs:{nzPageSizeChange:"nzPageSizeChange",nzPageIndexChange:"nzPageIndexChange"},exportAs:["nzPagination"],features:[s.TTD],decls:5,vars:18,consts:[[4,"ngIf"],[3,"disabled","itemRender","locale","pageSize","total","pageIndex","pageIndexChange"],["simplePagination",""],[3,"nzSize","itemRender","showTotal","disabled","locale","showSizeChanger","showQuickJumper","total","pageIndex","pageSize","pageSizeOptions","pageIndexChange","pageSizeChange"],["defaultPagination",""],[4,"ngIf","ngIfElse"],[3,"ngTemplateOutlet"]],template:function(e,n){1&e&&(s.YNc(0,Zm,2,2,"ng-container",0),s.TgZ(1,"nz-pagination-simple",1,2),s.NdJ("pageIndexChange",function(r){return n.onPageIndexChange(r)}),s.qZA(),s.TgZ(3,"nz-pagination-default",3,4),s.NdJ("pageIndexChange",function(r){return n.onPageIndexChange(r)})("pageSizeChange",function(r){return n.onPageSizeChange(r)}),s.qZA()),2&e&&(s.Q6J("ngIf",n.showPagination),s.xp6(1),s.Q6J("disabled",n.nzDisabled)("itemRender",n.nzItemRender)("locale",n.locale)("pageSize",n.nzPageSize)("total",n.nzTotal)("pageIndex",n.nzPageIndex),s.xp6(2),s.Q6J("nzSize",n.size)("itemRender",n.nzItemRender)("showTotal",n.nzShowTotal)("disabled",n.nzDisabled)("locale",n.locale)("showSizeChanger",n.nzShowSizeChanger)("showQuickJumper",n.nzShowQuickJumper)("total",n.nzTotal)("pageIndex",n.nzPageIndex)("pageSize",n.nzPageSize)("pageSizeOptions",n.nzPageSizeOptions))},dependencies:[M.O5,M.tP,qm,Um],encapsulation:2,changeDetection:0}),(0,T.gn)([pe()],i.prototype,"nzSize",void 0),(0,T.gn)([pe()],i.prototype,"nzPageSizeOptions",void 0),(0,T.gn)([pe(),R()],i.prototype,"nzShowSizeChanger",void 0),(0,T.gn)([pe(),R()],i.prototype,"nzShowQuickJumper",void 0),(0,T.gn)([pe(),R()],i.prototype,"nzSimple",void 0),(0,T.gn)([R()],i.prototype,"nzDisabled",void 0),(0,T.gn)([R()],i.prototype,"nzResponsive",void 0),(0,T.gn)([R()],i.prototype,"nzHideOnSinglePage",void 0),(0,T.gn)([vt()],i.prototype,"nzTotal",void 0),(0,T.gn)([vt()],i.prototype,"nzPageIndex",void 0),(0,T.gn)([vt()],i.prototype,"nzPageSize",void 0),i})(),Xm=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,ne.u5,p2,hn.YI,at]}),i})(),Km=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,ne.u5]}),i})();function t9(i,t){1&i&&(s.TgZ(0,"span",3),s._UZ(1,"i",4)(2,"i",4)(3,"i",4)(4,"i",4),s.qZA())}function n9(i,t){}function o9(i,t){if(1&i&&(s.TgZ(0,"div",8),s._uU(1),s.qZA()),2&i){const e=s.oxw(2);s.xp6(1),s.Oqu(e.nzTip)}}function s9(i,t){if(1&i&&(s.TgZ(0,"div")(1,"div",5),s.YNc(2,n9,0,0,"ng-template",6),s.YNc(3,o9,2,1,"div",7),s.qZA()()),2&i){const e=s.oxw(),n=s.MAs(1);s.xp6(1),s.ekj("ant-spin-rtl","rtl"===e.dir)("ant-spin-spinning",e.isLoading)("ant-spin-lg","large"===e.nzSize)("ant-spin-sm","small"===e.nzSize)("ant-spin-show-text",e.nzTip),s.xp6(1),s.Q6J("ngTemplateOutlet",e.nzIndicator||n),s.xp6(1),s.Q6J("ngIf",e.nzTip)}}function r9(i,t){if(1&i&&(s.TgZ(0,"div",9),s.Hsn(1),s.qZA()),2&i){const e=s.oxw();s.ekj("ant-spin-blur",e.isLoading)}}const a9=["*"];let c9=(()=>{class i{constructor(e,n,o){this.nzConfigService=e,this.cdr=n,this.directionality=o,this._nzModuleName="spin",this.nzIndicator=null,this.nzSize="default",this.nzTip=null,this.nzDelay=0,this.nzSimple=!1,this.nzSpinning=!0,this.destroy$=new H.x,this.spinning$=new te.X(this.nzSpinning),this.delay$=new oe(1),this.isLoading=!1,this.dir="ltr"}ngOnInit(){this.delay$.pipe((0,Q.O)(this.nzDelay),Le(),(0,se.w)(n=>0===n?this.spinning$:this.spinning$.pipe(function e9(i){return(0,Et.e)((t,e)=>{let n=!1,o=null,r=null;const a=()=>{if(r?.unsubscribe(),r=null,n){n=!1;const c=o;o=null,e.next(c)}};t.subscribe((0,mt.x)(e,c=>{r?.unsubscribe(),n=!0,o=c,r=(0,mt.x)(e,a,Ti.Z),(0,Cn.Xf)(i(c)).subscribe(r)},()=>{a(),e.complete()},void 0,()=>{o=r=null}))})}(o=>lc(o?n:0)))),N(this.destroy$)).subscribe(n=>{this.isLoading=n,this.cdr.markForCheck()}),this.nzConfigService.getConfigChangeEventForComponent("spin").pipe(N(this.destroy$)).subscribe(()=>this.cdr.markForCheck()),this.directionality.change?.pipe(N(this.destroy$)).subscribe(n=>{this.dir=n,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(e){const{nzSpinning:n,nzDelay:o}=e;n&&this.spinning$.next(this.nzSpinning),o&&this.delay$.next(this.nzDelay)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(nt),s.Y36(s.sBO),s.Y36(ge,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-spin"]],hostVars:2,hostBindings:function(e,n){2&e&&s.ekj("ant-spin-nested-loading",!n.nzSimple)},inputs:{nzIndicator:"nzIndicator",nzSize:"nzSize",nzTip:"nzTip",nzDelay:"nzDelay",nzSimple:"nzSimple",nzSpinning:"nzSpinning"},exportAs:["nzSpin"],features:[s.TTD],ngContentSelectors:a9,decls:4,vars:2,consts:[["defaultTemplate",""],[4,"ngIf"],["class","ant-spin-container",3,"ant-spin-blur",4,"ngIf"],[1,"ant-spin-dot","ant-spin-dot-spin"],[1,"ant-spin-dot-item"],[1,"ant-spin"],[3,"ngTemplateOutlet"],["class","ant-spin-text",4,"ngIf"],[1,"ant-spin-text"],[1,"ant-spin-container"]],template:function(e,n){1&e&&(s.F$t(),s.YNc(0,t9,5,0,"ng-template",null,0,s.W1O),s.YNc(2,s9,4,12,"div",1),s.YNc(3,r9,2,2,"div",2)),2&e&&(s.xp6(2),s.Q6J("ngIf",n.isLoading),s.xp6(1),s.Q6J("ngIf",!n.nzSimple))},dependencies:[M.O5,M.tP],encapsulation:2}),(0,T.gn)([pe()],i.prototype,"nzIndicator",void 0),(0,T.gn)([vt()],i.prototype,"nzDelay",void 0),(0,T.gn)([R()],i.prototype,"nzSimple",void 0),(0,T.gn)([R()],i.prototype,"nzSpinning",void 0),i})(),l9=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,tc]}),i})();function z2(i,t){return t?e=>(0,p4.z)(t.pipe((0,Ft.q)(1),function h9(){return(0,Et.e)((i,t)=>{i.subscribe((0,mt.x)(t,Ti.Z))})}()),e.pipe(z2(i))):(0,re.z)((e,n)=>(0,Cn.Xf)(i(e,n)).pipe((0,Ft.q)(1),(0,ki.h)(e)))}function _r(i,t=ur){const e=lc(i,t);return z2(()=>e)}const xr=["*"],m9=["nz-table-content",""];function v9(i,t){if(1&i&&s._UZ(0,"col"),2&i){const e=t.$implicit;s.Udp("width",e)("min-width",e)}}function z9(i,t){}function b9(i,t){if(1&i&&(s.TgZ(0,"thead",3),s.YNc(1,z9,0,0,"ng-template",2),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.theadTemplate)}}function y9(i,t){}const b2=["tdElement"],C9=["nz-table-fixed-row",""];function _9(i,t){}function x9(i,t){if(1&i&&(s.TgZ(0,"div",4),s.ALo(1,"async"),s.YNc(2,_9,0,0,"ng-template",5),s.qZA()),2&i){const e=s.oxw(),n=s.MAs(5);s.Udp("width",s.lcZ(1,3,e.hostWidth$),"px"),s.xp6(2),s.Q6J("ngTemplateOutlet",n)}}function w9(i,t){1&i&&s.Hsn(0)}const M9=["nz-table-measure-row",""];function S9(i,t){1&i&&s._UZ(0,"td",1,2)}function T9(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"tr",3),s.NdJ("listOfAutoWidth",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onListOfAutoWidthChange(o))}),s.qZA()}if(2&i){const e=s.oxw().ngIf;s.Q6J("listOfMeasureColumn",e)}}function O9(i,t){if(1&i&&(s.ynx(0),s.YNc(1,T9,1,1,"tr",2),s.BQk()),2&i){const e=t.ngIf,n=s.oxw();s.xp6(1),s.Q6J("ngIf",n.isInsideTable&&e.length)}}function A9(i,t){if(1&i&&(s.TgZ(0,"tr",4),s._UZ(1,"nz-embed-empty",5),s.ALo(2,"async"),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("specificContent",s.lcZ(2,1,e.noResult$))}}const E9=["tableHeaderElement"],N9=["tableBodyElement"];function k9(i,t){if(1&i&&(s.TgZ(0,"div",7,8),s._UZ(2,"table",9),s.qZA()),2&i){const e=s.oxw(2);s.Q6J("ngStyle",e.bodyStyleMap),s.xp6(2),s.Q6J("scrollX",e.scrollX)("listOfColWidth",e.listOfColWidth)("contentTemplate",e.contentTemplate)}}function D9(i,t){}const I9=function(i,t){return{$implicit:i,index:t}};function P9(i,t){if(1&i&&(s.ynx(0),s.YNc(1,D9,0,0,"ng-template",13),s.BQk()),2&i){const e=t.$implicit,n=t.index,o=s.oxw(3);s.xp6(1),s.Q6J("ngTemplateOutlet",o.virtualTemplate)("ngTemplateOutletContext",s.WLB(2,I9,e,n))}}function V9(i,t){if(1&i&&(s.TgZ(0,"cdk-virtual-scroll-viewport",10,8)(2,"table",11)(3,"tbody"),s.YNc(4,P9,2,5,"ng-container",12),s.qZA()()()),2&i){const e=s.oxw(2);s.Udp("height",e.data.length?e.scrollY:e.noDateVirtualHeight),s.Q6J("itemSize",e.virtualItemSize)("maxBufferPx",e.virtualMaxBufferPx)("minBufferPx",e.virtualMinBufferPx),s.xp6(2),s.Q6J("scrollX",e.scrollX)("listOfColWidth",e.listOfColWidth),s.xp6(2),s.Q6J("cdkVirtualForOf",e.data)("cdkVirtualForTrackBy",e.virtualForTrackBy)}}function L9(i,t){if(1&i&&(s.ynx(0),s.TgZ(1,"div",2,3),s._UZ(3,"table",4),s.qZA(),s.YNc(4,k9,3,4,"div",5),s.YNc(5,V9,5,9,"cdk-virtual-scroll-viewport",6),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngStyle",e.headerStyleMap),s.xp6(2),s.Q6J("scrollX",e.scrollX)("listOfColWidth",e.listOfColWidth)("theadTemplate",e.theadTemplate),s.xp6(1),s.Q6J("ngIf",!e.virtualTemplate),s.xp6(1),s.Q6J("ngIf",e.virtualTemplate)}}function H9(i,t){if(1&i&&(s.TgZ(0,"div",14,8),s._UZ(2,"table",15),s.qZA()),2&i){const e=s.oxw();s.Q6J("ngStyle",e.bodyStyleMap),s.xp6(2),s.Q6J("scrollX",e.scrollX)("listOfColWidth",e.listOfColWidth)("theadTemplate",e.theadTemplate)("contentTemplate",e.contentTemplate)}}function B9(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Oqu(e.title)}}function F9(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Oqu(e.footer)}}function R9(i,t){}function j9(i,t){if(1&i&&(s.ynx(0),s.YNc(1,R9,0,0,"ng-template",10),s.BQk()),2&i){s.oxw();const e=s.MAs(11);s.xp6(1),s.Q6J("ngTemplateOutlet",e)}}function $9(i,t){if(1&i&&s._UZ(0,"nz-table-title-footer",11),2&i){const e=s.oxw();s.Q6J("title",e.nzTitle)}}function Y9(i,t){if(1&i&&s._UZ(0,"nz-table-inner-scroll",12),2&i){const e=s.oxw(),n=s.MAs(13),o=s.MAs(3);s.Q6J("data",e.data)("scrollX",e.scrollX)("scrollY",e.scrollY)("contentTemplate",n)("listOfColWidth",e.listOfAutoColWidth)("theadTemplate",e.theadTemplate)("verticalScrollBarWidth",e.verticalScrollBarWidth)("virtualTemplate",e.nzVirtualScrollDirective?e.nzVirtualScrollDirective.templateRef:null)("virtualItemSize",e.nzVirtualItemSize)("virtualMaxBufferPx",e.nzVirtualMaxBufferPx)("virtualMinBufferPx",e.nzVirtualMinBufferPx)("tableMainElement",o)("virtualForTrackBy",e.nzVirtualForTrackBy)}}function G9(i,t){if(1&i&&s._UZ(0,"nz-table-inner-default",13),2&i){const e=s.oxw(),n=s.MAs(13);s.Q6J("tableLayout",e.nzTableLayout)("listOfColWidth",e.listOfManualColWidth)("theadTemplate",e.theadTemplate)("contentTemplate",n)}}function Z9(i,t){if(1&i&&s._UZ(0,"nz-table-title-footer",14),2&i){const e=s.oxw();s.Q6J("footer",e.nzFooter)}}function q9(i,t){}function W9(i,t){if(1&i&&(s.ynx(0),s.YNc(1,q9,0,0,"ng-template",10),s.BQk()),2&i){s.oxw();const e=s.MAs(11);s.xp6(1),s.Q6J("ngTemplateOutlet",e)}}function U9(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"nz-pagination",16),s.NdJ("nzPageSizeChange",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onPageSizeChange(o))})("nzPageIndexChange",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onPageIndexChange(o))}),s.qZA()}if(2&i){const e=s.oxw(2);s.Q6J("hidden",!e.showPagination)("nzShowSizeChanger",e.nzShowSizeChanger)("nzPageSizeOptions",e.nzPageSizeOptions)("nzItemRender",e.nzItemRender)("nzShowQuickJumper",e.nzShowQuickJumper)("nzHideOnSinglePage",e.nzHideOnSinglePage)("nzShowTotal",e.nzShowTotal)("nzSize","small"===e.nzPaginationType?"small":"default"===e.nzSize?"default":"small")("nzPageSize",e.nzPageSize)("nzTotal",e.nzTotal)("nzSimple",e.nzSimple)("nzPageIndex",e.nzPageIndex)}}function J9(i,t){if(1&i&&s.YNc(0,U9,1,12,"nz-pagination",15),2&i){const e=s.oxw();s.Q6J("ngIf",e.nzShowPagination&&e.data.length)}}function Q9(i,t){1&i&&s.Hsn(0)}let K9=(()=>{class i{constructor(e,n){this.renderer=e,this.elementRef=n,this.nzRight=!1,this.nzLeft=!1,this.colspan=null,this.colSpan=null,this.changes$=new H.x,this.isAutoLeft=!1,this.isAutoRight=!1,this.isFixedLeft=!1,this.isFixedRight=!1,this.isFixed=!1}setAutoLeftWidth(e){this.renderer.setStyle(this.elementRef.nativeElement,"left",e)}setAutoRightWidth(e){this.renderer.setStyle(this.elementRef.nativeElement,"right",e)}setIsFirstRight(e){this.setFixClass(e,"ant-table-cell-fix-right-first")}setIsLastLeft(e){this.setFixClass(e,"ant-table-cell-fix-left-last")}setFixClass(e,n){this.renderer.removeClass(this.elementRef.nativeElement,n),e&&this.renderer.addClass(this.elementRef.nativeElement,n)}ngOnChanges(){this.setIsFirstRight(!1),this.setIsLastLeft(!1),this.isAutoLeft=""===this.nzLeft||!0===this.nzLeft,this.isAutoRight=""===this.nzRight||!0===this.nzRight,this.isFixedLeft=!1!==this.nzLeft,this.isFixedRight=!1!==this.nzRight,this.isFixed=this.isFixedLeft||this.isFixedRight;const e=n=>"string"==typeof n&&""!==n?n:null;this.setAutoLeftWidth(e(this.nzLeft)),this.setAutoRightWidth(e(this.nzRight)),this.changes$.next()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.Qsj),s.Y36(s.SBq))},i.\u0275dir=s.lG2({type:i,selectors:[["td","nzRight",""],["th","nzRight",""],["td","nzLeft",""],["th","nzLeft",""]],hostVars:6,hostBindings:function(e,n){2&e&&(s.Udp("position",n.isFixed?"sticky":null),s.ekj("ant-table-cell-fix-right",n.isFixedRight)("ant-table-cell-fix-left",n.isFixedLeft))},inputs:{nzRight:"nzRight",nzLeft:"nzLeft",colspan:"colspan",colSpan:"colSpan"},features:[s.TTD]}),i})(),Bi=(()=>{class i{constructor(){this.theadTemplate$=new oe(1),this.hasFixLeft$=new oe(1),this.hasFixRight$=new oe(1),this.hostWidth$=new oe(1),this.columnCount$=new oe(1),this.showEmpty$=new oe(1),this.noResult$=new oe(1),this.listOfThWidthConfigPx$=new te.X([]),this.tableWidthConfigPx$=new te.X([]),this.manualWidthConfigPx$=(0,ct.a)([this.tableWidthConfigPx$,this.listOfThWidthConfigPx$]).pipe((0,U.U)(([e,n])=>e.length?e:n)),this.listOfAutoWidthPx$=new oe(1),this.listOfListOfThWidthPx$=(0,ze.T)(this.manualWidthConfigPx$,(0,ct.a)([this.listOfAutoWidthPx$,this.manualWidthConfigPx$]).pipe((0,U.U)(([e,n])=>e.length===n.length?e.map((o,r)=>"0px"===o?n[r]||null:n[r]||o):n))),this.listOfMeasureColumn$=new oe(1),this.listOfListOfThWidth$=this.listOfAutoWidthPx$.pipe((0,U.U)(e=>e.map(n=>parseInt(n,10)))),this.enableAutoMeasure$=new oe(1)}setTheadTemplate(e){this.theadTemplate$.next(e)}setHasFixLeft(e){this.hasFixLeft$.next(e)}setHasFixRight(e){this.hasFixRight$.next(e)}setTableWidthConfig(e){this.tableWidthConfigPx$.next(e)}setListOfTh(e){let n=0;e.forEach(r=>{n+=r.colspan&&+r.colspan||r.colSpan&&+r.colSpan||1});const o=e.map(r=>r.nzWidth);this.columnCount$.next(n),this.listOfThWidthConfigPx$.next(o)}setListOfMeasureColumn(e){const n=[];e.forEach(o=>{const r=o.colspan&&+o.colspan||o.colSpan&&+o.colSpan||1;for(let a=0;a<r;a++)n.push(`measure_key_${a}`)}),this.listOfMeasureColumn$.next(n)}setListOfAutoWidth(e){this.listOfAutoWidthPx$.next(e.map(n=>`${n}px`))}setShowEmpty(e){this.showEmpty$.next(e)}setNoResult(e){this.noResult$.next(e)}setScroll(e,n){const o=!(!e&&!n);o||this.setListOfAutoWidth([]),this.enableAutoMeasure$.next(o)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),ev=(()=>{class i{constructor(e){this.isInsideTable=!1,this.isInsideTable=!!e}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Bi,8))},i.\u0275dir=s.lG2({type:i,selectors:[["th",9,"nz-disable-th",3,"mat-cell",""],["td",9,"nz-disable-td",3,"mat-cell",""]],hostVars:2,hostBindings:function(e,n){2&e&&s.ekj("ant-table-cell",n.isInsideTable)}}),i})(),y2=(()=>{class i{constructor(e,n){this.renderer=e,this.elementRef=n,this.changes$=new H.x,this.nzWidth=null,this.colspan=null,this.colSpan=null,this.rowspan=null,this.rowSpan=null}ngOnChanges(e){const{nzWidth:n,colspan:o,rowspan:r,colSpan:a,rowSpan:c}=e;if(o||a){const l=this.colspan||this.colSpan;er(l)?this.renderer.removeAttribute(this.elementRef.nativeElement,"colspan"):this.renderer.setAttribute(this.elementRef.nativeElement,"colspan",`${l}`)}if(r||c){const l=this.rowspan||this.rowSpan;er(l)?this.renderer.removeAttribute(this.elementRef.nativeElement,"rowspan"):this.renderer.setAttribute(this.elementRef.nativeElement,"rowspan",`${l}`)}(n||o)&&this.changes$.next()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.Qsj),s.Y36(s.SBq))},i.\u0275dir=s.lG2({type:i,selectors:[["th"]],inputs:{nzWidth:"nzWidth",colspan:"colspan",colSpan:"colSpan",rowspan:"rowspan",rowSpan:"rowSpan"},features:[s.TTD]}),i})(),C2=(()=>{class i{constructor(){this.tableLayout="auto",this.theadTemplate=null,this.contentTemplate=null,this.listOfColWidth=[],this.scrollX=null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["table","nz-table-content",""]],hostVars:8,hostBindings:function(e,n){2&e&&(s.Udp("table-layout",n.tableLayout)("width",n.scrollX)("min-width",n.scrollX?"100%":null),s.ekj("ant-table-fixed",n.scrollX))},inputs:{tableLayout:"tableLayout",theadTemplate:"theadTemplate",contentTemplate:"contentTemplate",listOfColWidth:"listOfColWidth",scrollX:"scrollX"},attrs:m9,ngContentSelectors:xr,decls:4,vars:3,consts:[[3,"width","minWidth",4,"ngFor","ngForOf"],["class","ant-table-thead",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"ant-table-thead"]],template:function(e,n){1&e&&(s.F$t(),s.YNc(0,v9,1,4,"col",0),s.YNc(1,b9,2,1,"thead",1),s.YNc(2,y9,0,0,"ng-template",2),s.Hsn(3)),2&e&&(s.Q6J("ngForOf",n.listOfColWidth),s.xp6(1),s.Q6J("ngIf",n.theadTemplate),s.xp6(1),s.Q6J("ngTemplateOutlet",n.contentTemplate))},dependencies:[M.sg,M.O5,M.tP],encapsulation:2,changeDetection:0}),i})(),tv=(()=>{class i{constructor(e,n){this.nzTableStyleService=e,this.renderer=n,this.hostWidth$=new te.X(null),this.enableAutoMeasure$=new te.X(!1),this.destroy$=new H.x}ngOnInit(){if(this.nzTableStyleService){const{enableAutoMeasure$:e,hostWidth$:n}=this.nzTableStyleService;e.pipe(N(this.destroy$)).subscribe(this.enableAutoMeasure$),n.pipe(N(this.destroy$)).subscribe(this.hostWidth$)}}ngAfterViewInit(){this.nzTableStyleService.columnCount$.pipe(N(this.destroy$)).subscribe(e=>{this.renderer.setAttribute(this.tdElement.nativeElement,"colspan",`${e}`)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Bi),s.Y36(s.Qsj))},i.\u0275cmp=s.Xpm({type:i,selectors:[["tr","nz-table-fixed-row",""],["tr","nzExpand",""]],viewQuery:function(e,n){if(1&e&&s.Gf(b2,7),2&e){let o;s.iGM(o=s.CRH())&&(n.tdElement=o.first)}},attrs:C9,ngContentSelectors:xr,decls:6,vars:4,consts:[[1,"nz-disable-td","ant-table-cell"],["tdElement",""],["class","ant-table-expanded-row-fixed","style","position: sticky; left: 0px; overflow: hidden;",3,"width",4,"ngIf","ngIfElse"],["contentTemplate",""],[1,"ant-table-expanded-row-fixed",2,"position","sticky","left","0px","overflow","hidden"],[3,"ngTemplateOutlet"]],template:function(e,n){if(1&e&&(s.F$t(),s.TgZ(0,"td",0,1),s.YNc(2,x9,3,5,"div",2),s.ALo(3,"async"),s.qZA(),s.YNc(4,w9,1,0,"ng-template",null,3,s.W1O)),2&e){const o=s.MAs(5);s.xp6(2),s.Q6J("ngIf",s.lcZ(3,2,n.enableAutoMeasure$))("ngIfElse",o)}},dependencies:[M.O5,M.tP,M.Ov],encapsulation:2,changeDetection:0}),i})(),nv=(()=>{class i{constructor(){this.tableLayout="auto",this.listOfColWidth=[],this.theadTemplate=null,this.contentTemplate=null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-table-inner-default"]],hostAttrs:[1,"ant-table-container"],inputs:{tableLayout:"tableLayout",listOfColWidth:"listOfColWidth",theadTemplate:"theadTemplate",contentTemplate:"contentTemplate"},decls:2,vars:4,consts:[[1,"ant-table-content"],["nz-table-content","",3,"contentTemplate","tableLayout","listOfColWidth","theadTemplate"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s._UZ(1,"table",1),s.qZA()),2&e&&(s.xp6(1),s.Q6J("contentTemplate",n.contentTemplate)("tableLayout",n.tableLayout)("listOfColWidth",n.listOfColWidth)("theadTemplate",n.theadTemplate))},dependencies:[C2],encapsulation:2,changeDetection:0}),i})(),iv=(()=>{class i{constructor(e,n){this.nzResizeObserver=e,this.ngZone=n,this.listOfMeasureColumn=[],this.listOfAutoWidth=new s.vpe,this.destroy$=new H.x}trackByFunc(e,n){return n}ngAfterViewInit(){this.listOfTdElement.changes.pipe((0,Q.O)(this.listOfTdElement)).pipe((0,se.w)(e=>(0,ct.a)(e.toArray().map(n=>this.nzResizeObserver.observe(n).pipe((0,U.U)(([o])=>{const{width:r}=o.target.getBoundingClientRect();return Math.floor(r)}))))),dr(16),N(this.destroy$)).subscribe(e=>{this.ngZone instanceof s.R0b&&s.R0b.isInAngularZone()?this.listOfAutoWidth.next(e):this.ngZone.run(()=>this.listOfAutoWidth.next(e))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(dc),s.Y36(s.R0b))},i.\u0275cmp=s.Xpm({type:i,selectors:[["tr","nz-table-measure-row",""]],viewQuery:function(e,n){if(1&e&&s.Gf(b2,5),2&e){let o;s.iGM(o=s.CRH())&&(n.listOfTdElement=o)}},hostAttrs:[1,"ant-table-measure-now"],inputs:{listOfMeasureColumn:"listOfMeasureColumn"},outputs:{listOfAutoWidth:"listOfAutoWidth"},attrs:M9,decls:1,vars:2,consts:[["class","nz-disable-td","style","padding: 0px; border: 0px; height: 0px;",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nz-disable-td",2,"padding","0px","border","0px","height","0px"],["tdElement",""]],template:function(e,n){1&e&&s.YNc(0,S9,2,0,"td",0),2&e&&s.Q6J("ngForOf",n.listOfMeasureColumn)("ngForTrackBy",n.trackByFunc)},dependencies:[M.sg],encapsulation:2,changeDetection:0}),i})(),ov=(()=>{class i{constructor(e){if(this.nzTableStyleService=e,this.isInsideTable=!1,this.showEmpty$=new te.X(!1),this.noResult$=new te.X(void 0),this.listOfMeasureColumn$=new te.X([]),this.destroy$=new H.x,this.isInsideTable=!!this.nzTableStyleService,this.nzTableStyleService){const{showEmpty$:n,noResult$:o,listOfMeasureColumn$:r}=this.nzTableStyleService;o.pipe(N(this.destroy$)).subscribe(this.noResult$),r.pipe(N(this.destroy$)).subscribe(this.listOfMeasureColumn$),n.pipe(N(this.destroy$)).subscribe(this.showEmpty$)}}onListOfAutoWidthChange(e){this.nzTableStyleService.setListOfAutoWidth(e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Bi,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["tbody"]],hostVars:2,hostBindings:function(e,n){2&e&&s.ekj("ant-table-tbody",n.isInsideTable)},ngContentSelectors:xr,decls:5,vars:6,consts:[[4,"ngIf"],["class","ant-table-placeholder","nz-table-fixed-row","",4,"ngIf"],["nz-table-measure-row","",3,"listOfMeasureColumn","listOfAutoWidth",4,"ngIf"],["nz-table-measure-row","",3,"listOfMeasureColumn","listOfAutoWidth"],["nz-table-fixed-row","",1,"ant-table-placeholder"],["nzComponentName","table",3,"specificContent"]],template:function(e,n){1&e&&(s.F$t(),s.YNc(0,O9,2,1,"ng-container",0),s.ALo(1,"async"),s.Hsn(2),s.YNc(3,A9,3,3,"tr",1),s.ALo(4,"async")),2&e&&(s.Q6J("ngIf",s.lcZ(1,2,n.listOfMeasureColumn$)),s.xp6(3),s.Q6J("ngIf",s.lcZ(4,4,n.showEmpty$)))},dependencies:[M.O5,a2,iv,tv,M.Ov],encapsulation:2,changeDetection:0}),i})(),_2=(()=>{class i{constructor(e,n,o,r){this.renderer=e,this.ngZone=n,this.platform=o,this.resizeService=r,this.data=[],this.scrollX=null,this.scrollY=null,this.contentTemplate=null,this.widthConfig=[],this.listOfColWidth=[],this.theadTemplate=null,this.virtualTemplate=null,this.virtualItemSize=0,this.virtualMaxBufferPx=200,this.virtualMinBufferPx=100,this.virtualForTrackBy=a=>a,this.headerStyleMap={},this.bodyStyleMap={},this.verticalScrollBarWidth=0,this.noDateVirtualHeight="182px",this.data$=new H.x,this.scroll$=new H.x,this.destroy$=new H.x}setScrollPositionClassName(e=!1){const{scrollWidth:n,scrollLeft:o,clientWidth:r}=this.tableBodyElement.nativeElement,a="ant-table-ping-left",c="ant-table-ping-right";n===r&&0!==n||e?(this.renderer.removeClass(this.tableMainElement,a),this.renderer.removeClass(this.tableMainElement,c)):0===o?(this.renderer.removeClass(this.tableMainElement,a),this.renderer.addClass(this.tableMainElement,c)):n===o+r?(this.renderer.removeClass(this.tableMainElement,c),this.renderer.addClass(this.tableMainElement,a)):(this.renderer.addClass(this.tableMainElement,a),this.renderer.addClass(this.tableMainElement,c))}ngOnChanges(e){const{scrollX:n,scrollY:o,data:r}=e;(n||o)&&(this.headerStyleMap={overflowX:"hidden",overflowY:this.scrollY&&0!==this.verticalScrollBarWidth?"scroll":"hidden"},this.bodyStyleMap={overflowY:this.scrollY?"scroll":"hidden",overflowX:this.scrollX?"auto":null,maxHeight:this.scrollY},this.ngZone.runOutsideAngular(()=>this.scroll$.next())),r&&this.ngZone.runOutsideAngular(()=>this.data$.next())}ngAfterViewInit(){this.platform.isBrowser&&this.ngZone.runOutsideAngular(()=>{const e=this.scroll$.pipe((0,Q.O)(null),_r(0),(0,se.w)(()=>Me(this.tableBodyElement.nativeElement,"scroll").pipe((0,Q.O)(!0))),N(this.destroy$)),n=this.resizeService.subscribe().pipe(N(this.destroy$)),o=this.data$.pipe(N(this.destroy$));(0,ze.T)(e,n,o,this.scroll$).pipe((0,Q.O)(!0),_r(0),N(this.destroy$)).subscribe(()=>this.setScrollPositionClassName()),e.pipe((0,Y.h)(()=>!!this.scrollY)).subscribe(()=>this.tableHeaderElement.nativeElement.scrollLeft=this.tableBodyElement.nativeElement.scrollLeft)})}ngOnDestroy(){this.setScrollPositionClassName(!0),this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.Qsj),s.Y36(s.R0b),s.Y36(Ce),s.Y36(Q4))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-table-inner-scroll"]],viewQuery:function(e,n){if(1&e&&(s.Gf(E9,5,s.SBq),s.Gf(N9,5,s.SBq),s.Gf(Kn,5,Kn)),2&e){let o;s.iGM(o=s.CRH())&&(n.tableHeaderElement=o.first),s.iGM(o=s.CRH())&&(n.tableBodyElement=o.first),s.iGM(o=s.CRH())&&(n.cdkVirtualScrollViewport=o.first)}},hostAttrs:[1,"ant-table-container"],inputs:{data:"data",scrollX:"scrollX",scrollY:"scrollY",contentTemplate:"contentTemplate",widthConfig:"widthConfig",listOfColWidth:"listOfColWidth",theadTemplate:"theadTemplate",virtualTemplate:"virtualTemplate",virtualItemSize:"virtualItemSize",virtualMaxBufferPx:"virtualMaxBufferPx",virtualMinBufferPx:"virtualMinBufferPx",tableMainElement:"tableMainElement",virtualForTrackBy:"virtualForTrackBy",verticalScrollBarWidth:"verticalScrollBarWidth"},features:[s.TTD],decls:2,vars:2,consts:[[4,"ngIf"],["class","ant-table-content",3,"ngStyle",4,"ngIf"],[1,"ant-table-header","nz-table-hide-scrollbar",3,"ngStyle"],["tableHeaderElement",""],["nz-table-content","","tableLayout","fixed",3,"scrollX","listOfColWidth","theadTemplate"],["class","ant-table-body",3,"ngStyle",4,"ngIf"],[3,"itemSize","maxBufferPx","minBufferPx","height",4,"ngIf"],[1,"ant-table-body",3,"ngStyle"],["tableBodyElement",""],["nz-table-content","","tableLayout","fixed",3,"scrollX","listOfColWidth","contentTemplate"],[3,"itemSize","maxBufferPx","minBufferPx"],["nz-table-content","","tableLayout","fixed",3,"scrollX","listOfColWidth"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-table-content",3,"ngStyle"],["nz-table-content","","tableLayout","fixed",3,"scrollX","listOfColWidth","theadTemplate","contentTemplate"]],template:function(e,n){1&e&&(s.YNc(0,L9,6,6,"ng-container",0),s.YNc(1,H9,3,5,"div",1)),2&e&&(s.Q6J("ngIf",n.scrollY),s.xp6(1),s.Q6J("ngIf",!n.scrollY))},dependencies:[M.O5,M.tP,M.PC,I4,H4,Kn,ov,C2],encapsulation:2,changeDetection:0}),i})(),sv=(()=>{class i{constructor(e){this.templateRef=e}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.Rgc))},i.\u0275dir=s.lG2({type:i,selectors:[["","nz-virtual-scroll",""]],exportAs:["nzVirtualScroll"]}),i})(),x2=(()=>{class i{constructor(){this.destroy$=new H.x,this.pageIndex$=new te.X(1),this.frontPagination$=new te.X(!0),this.pageSize$=new te.X(10),this.listOfData$=new te.X([]),this.pageIndexDistinct$=this.pageIndex$.pipe(Le()),this.pageSizeDistinct$=this.pageSize$.pipe(Le()),this.listOfCalcOperator$=new te.X([]),this.queryParams$=(0,ct.a)([this.pageIndexDistinct$,this.pageSizeDistinct$,this.listOfCalcOperator$]).pipe(dr(0),ec(1),(0,U.U)(([e,n,o])=>({pageIndex:e,pageSize:n,sort:o.filter(r=>r.sortFn).map(r=>({key:r.key,value:r.sortOrder})),filter:o.filter(r=>r.filterFn).map(r=>({key:r.key,value:r.filterValue}))}))),this.listOfDataAfterCalc$=(0,ct.a)([this.listOfData$,this.listOfCalcOperator$]).pipe((0,U.U)(([e,n])=>{let o=[...e];const r=n.filter(c=>{const{filterValue:l,filterFn:h}=c;return!(null==l||Array.isArray(l)&&0===l.length)&&"function"==typeof h});for(const c of r){const{filterFn:l,filterValue:h}=c;o=o.filter(u=>l(h,u))}const a=n.filter(c=>null!==c.sortOrder&&"function"==typeof c.sortFn).sort((c,l)=>+l.sortPriority-+c.sortPriority);return n.length&&o.sort((c,l)=>{for(const h of a){const{sortFn:u,sortOrder:d}=h;if(u&&d){const f=u(c,l,d);if(0!==f)return"ascend"===d?f:-f}}return 0}),o})),this.listOfFrontEndCurrentPageData$=(0,ct.a)([this.pageIndexDistinct$,this.pageSizeDistinct$,this.listOfDataAfterCalc$]).pipe(N(this.destroy$),(0,Y.h)(e=>{const[n,o,r]=e;return n<=(Math.ceil(r.length/o)||1)}),(0,U.U)(([e,n,o])=>o.slice((e-1)*n,e*n))),this.listOfCurrentPageData$=this.frontPagination$.pipe((0,se.w)(e=>e?this.listOfFrontEndCurrentPageData$:this.listOfDataAfterCalc$)),this.total$=this.frontPagination$.pipe((0,se.w)(e=>e?this.listOfDataAfterCalc$:this.listOfData$),(0,U.U)(e=>e.length),Le())}updatePageSize(e){this.pageSize$.next(e)}updateFrontPagination(e){this.frontPagination$.next(e)}updatePageIndex(e){this.pageIndex$.next(e)}updateListOfData(e){this.listOfData$.next(e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),rv=(()=>{class i{constructor(){this.title=null,this.footer=null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-table-title-footer"]],hostVars:4,hostBindings:function(e,n){2&e&&s.ekj("ant-table-title",null!==n.title)("ant-table-footer",null!==n.footer)},inputs:{title:"title",footer:"footer"},decls:2,vars:2,consts:[[4,"nzStringTemplateOutlet"]],template:function(e,n){1&e&&(s.YNc(0,B9,2,1,"ng-container",0),s.YNc(1,F9,2,1,"ng-container",0)),2&e&&(s.Q6J("nzStringTemplateOutlet",n.title),s.xp6(1),s.Q6J("nzStringTemplateOutlet",n.footer))},dependencies:[Be],encapsulation:2,changeDetection:0}),i})(),av=(()=>{class i{constructor(e,n,o,r,a,c,l){this.elementRef=e,this.nzResizeObserver=n,this.nzConfigService=o,this.cdr=r,this.nzTableStyleService=a,this.nzTableDataService=c,this.directionality=l,this._nzModuleName="table",this.nzTableLayout="auto",this.nzShowTotal=null,this.nzItemRender=null,this.nzTitle=null,this.nzFooter=null,this.nzNoResult=void 0,this.nzPageSizeOptions=[10,20,30,40,50],this.nzVirtualItemSize=0,this.nzVirtualMaxBufferPx=200,this.nzVirtualMinBufferPx=100,this.nzVirtualForTrackBy=h=>h,this.nzLoadingDelay=0,this.nzPageIndex=1,this.nzPageSize=10,this.nzTotal=0,this.nzWidthConfig=[],this.nzData=[],this.nzPaginationPosition="bottom",this.nzScroll={x:null,y:null},this.nzPaginationType="default",this.nzFrontPagination=!0,this.nzTemplateMode=!1,this.nzShowPagination=!0,this.nzLoading=!1,this.nzOuterBordered=!1,this.nzLoadingIndicator=null,this.nzBordered=!1,this.nzSize="default",this.nzShowSizeChanger=!1,this.nzHideOnSinglePage=!1,this.nzShowQuickJumper=!1,this.nzSimple=!1,this.nzPageSizeChange=new s.vpe,this.nzPageIndexChange=new s.vpe,this.nzQueryParams=new s.vpe,this.nzCurrentPageDataChange=new s.vpe,this.data=[],this.scrollX=null,this.scrollY=null,this.theadTemplate=null,this.listOfAutoColWidth=[],this.listOfManualColWidth=[],this.hasFixLeft=!1,this.hasFixRight=!1,this.showPagination=!0,this.destroy$=new H.x,this.templateMode$=new te.X(!1),this.dir="ltr",this.verticalScrollBarWidth=0,this.nzConfigService.getConfigChangeEventForComponent("table").pipe(N(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}onPageSizeChange(e){this.nzTableDataService.updatePageSize(e)}onPageIndexChange(e){this.nzTableDataService.updatePageIndex(e)}ngOnInit(){const{pageIndexDistinct$:e,pageSizeDistinct$:n,listOfCurrentPageData$:o,total$:r,queryParams$:a}=this.nzTableDataService,{theadTemplate$:c,hasFixLeft$:l,hasFixRight$:h}=this.nzTableStyleService;this.dir=this.directionality.value,this.directionality.change?.pipe(N(this.destroy$)).subscribe(u=>{this.dir=u,this.cdr.detectChanges()}),a.pipe(N(this.destroy$)).subscribe(this.nzQueryParams),e.pipe(N(this.destroy$)).subscribe(u=>{u!==this.nzPageIndex&&(this.nzPageIndex=u,this.nzPageIndexChange.next(u))}),n.pipe(N(this.destroy$)).subscribe(u=>{u!==this.nzPageSize&&(this.nzPageSize=u,this.nzPageSizeChange.next(u))}),r.pipe(N(this.destroy$),(0,Y.h)(()=>this.nzFrontPagination)).subscribe(u=>{u!==this.nzTotal&&(this.nzTotal=u,this.cdr.markForCheck())}),o.pipe(N(this.destroy$)).subscribe(u=>{this.data=u,this.nzCurrentPageDataChange.next(u),this.cdr.markForCheck()}),c.pipe(N(this.destroy$)).subscribe(u=>{this.theadTemplate=u,this.cdr.markForCheck()}),l.pipe(N(this.destroy$)).subscribe(u=>{this.hasFixLeft=u,this.cdr.markForCheck()}),h.pipe(N(this.destroy$)).subscribe(u=>{this.hasFixRight=u,this.cdr.markForCheck()}),(0,ct.a)([r,this.templateMode$]).pipe((0,U.U)(([u,d])=>0===u&&!d),N(this.destroy$)).subscribe(u=>{this.nzTableStyleService.setShowEmpty(u)}),this.verticalScrollBarWidth=function _u(i="vertical",t="ant"){if(typeof document>"u"||typeof window>"u")return 0;const e="vertical"===i;if(e&&Za)return Za;if(!e&&qa)return qa;const n=document.createElement("div");Object.keys(L1).forEach(r=>{n.style[r]=L1[r]}),n.className=`${t}-hide-scrollbar scroll-div-append-to-body`,e?n.style.overflowY="scroll":n.style.overflowX="scroll",document.body.appendChild(n);let o=0;return e?(o=n.offsetWidth-n.clientWidth,Za=o):(o=n.offsetHeight-n.clientHeight,qa=o),document.body.removeChild(n),o}("vertical"),this.nzTableStyleService.listOfListOfThWidthPx$.pipe(N(this.destroy$)).subscribe(u=>{this.listOfAutoColWidth=u,this.cdr.markForCheck()}),this.nzTableStyleService.manualWidthConfigPx$.pipe(N(this.destroy$)).subscribe(u=>{this.listOfManualColWidth=u,this.cdr.markForCheck()})}ngOnChanges(e){const{nzScroll:n,nzPageIndex:o,nzPageSize:r,nzFrontPagination:a,nzData:c,nzWidthConfig:l,nzNoResult:h,nzTemplateMode:u}=e;o&&this.nzTableDataService.updatePageIndex(this.nzPageIndex),r&&this.nzTableDataService.updatePageSize(this.nzPageSize),c&&(this.nzData=this.nzData||[],this.nzTableDataService.updateListOfData(this.nzData)),a&&this.nzTableDataService.updateFrontPagination(this.nzFrontPagination),n&&this.setScrollOnChanges(),l&&this.nzTableStyleService.setTableWidthConfig(this.nzWidthConfig),u&&this.templateMode$.next(this.nzTemplateMode),h&&this.nzTableStyleService.setNoResult(this.nzNoResult),this.updateShowPagination()}ngAfterViewInit(){this.nzResizeObserver.observe(this.elementRef).pipe((0,U.U)(([e])=>{const{width:n}=e.target.getBoundingClientRect();return Math.floor(n-(this.scrollY?this.verticalScrollBarWidth:0))}),N(this.destroy$)).subscribe(this.nzTableStyleService.hostWidth$),this.nzTableInnerScrollComponent&&this.nzTableInnerScrollComponent.cdkVirtualScrollViewport&&(this.cdkVirtualScrollViewport=this.nzTableInnerScrollComponent.cdkVirtualScrollViewport)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setScrollOnChanges(){this.scrollX=this.nzScroll&&this.nzScroll.x||null,this.scrollY=this.nzScroll&&this.nzScroll.y||null,this.nzTableStyleService.setScroll(this.scrollX,this.scrollY)}updateShowPagination(){this.showPagination=this.nzHideOnSinglePage&&this.nzData.length>this.nzPageSize||this.nzData.length>0&&!this.nzHideOnSinglePage||!this.nzFrontPagination&&this.nzTotal>this.nzPageSize}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(dc),s.Y36(nt),s.Y36(s.sBO),s.Y36(Bi),s.Y36(x2),s.Y36(ge,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-table"]],contentQueries:function(e,n,o){if(1&e&&s.Suo(o,sv,5),2&e){let r;s.iGM(r=s.CRH())&&(n.nzVirtualScrollDirective=r.first)}},viewQuery:function(e,n){if(1&e&&s.Gf(_2,5),2&e){let o;s.iGM(o=s.CRH())&&(n.nzTableInnerScrollComponent=o.first)}},hostAttrs:[1,"ant-table-wrapper"],hostVars:2,hostBindings:function(e,n){2&e&&s.ekj("ant-table-wrapper-rtl","rtl"===n.dir)},inputs:{nzTableLayout:"nzTableLayout",nzShowTotal:"nzShowTotal",nzItemRender:"nzItemRender",nzTitle:"nzTitle",nzFooter:"nzFooter",nzNoResult:"nzNoResult",nzPageSizeOptions:"nzPageSizeOptions",nzVirtualItemSize:"nzVirtualItemSize",nzVirtualMaxBufferPx:"nzVirtualMaxBufferPx",nzVirtualMinBufferPx:"nzVirtualMinBufferPx",nzVirtualForTrackBy:"nzVirtualForTrackBy",nzLoadingDelay:"nzLoadingDelay",nzPageIndex:"nzPageIndex",nzPageSize:"nzPageSize",nzTotal:"nzTotal",nzWidthConfig:"nzWidthConfig",nzData:"nzData",nzPaginationPosition:"nzPaginationPosition",nzScroll:"nzScroll",nzPaginationType:"nzPaginationType",nzFrontPagination:"nzFrontPagination",nzTemplateMode:"nzTemplateMode",nzShowPagination:"nzShowPagination",nzLoading:"nzLoading",nzOuterBordered:"nzOuterBordered",nzLoadingIndicator:"nzLoadingIndicator",nzBordered:"nzBordered",nzSize:"nzSize",nzShowSizeChanger:"nzShowSizeChanger",nzHideOnSinglePage:"nzHideOnSinglePage",nzShowQuickJumper:"nzShowQuickJumper",nzSimple:"nzSimple"},outputs:{nzPageSizeChange:"nzPageSizeChange",nzPageIndexChange:"nzPageIndexChange",nzQueryParams:"nzQueryParams",nzCurrentPageDataChange:"nzCurrentPageDataChange"},exportAs:["nzTable"],features:[s._Bn([Bi,x2]),s.TTD],ngContentSelectors:xr,decls:14,vars:27,consts:[[3,"nzDelay","nzSpinning","nzIndicator"],[4,"ngIf"],[1,"ant-table"],["tableMainElement",""],[3,"title",4,"ngIf"],[3,"data","scrollX","scrollY","contentTemplate","listOfColWidth","theadTemplate","verticalScrollBarWidth","virtualTemplate","virtualItemSize","virtualMaxBufferPx","virtualMinBufferPx","tableMainElement","virtualForTrackBy",4,"ngIf","ngIfElse"],["defaultTemplate",""],[3,"footer",4,"ngIf"],["paginationTemplate",""],["contentTemplate",""],[3,"ngTemplateOutlet"],[3,"title"],[3,"data","scrollX","scrollY","contentTemplate","listOfColWidth","theadTemplate","verticalScrollBarWidth","virtualTemplate","virtualItemSize","virtualMaxBufferPx","virtualMinBufferPx","tableMainElement","virtualForTrackBy"],[3,"tableLayout","listOfColWidth","theadTemplate","contentTemplate"],[3,"footer"],["class","ant-table-pagination ant-table-pagination-right",3,"hidden","nzShowSizeChanger","nzPageSizeOptions","nzItemRender","nzShowQuickJumper","nzHideOnSinglePage","nzShowTotal","nzSize","nzPageSize","nzTotal","nzSimple","nzPageIndex","nzPageSizeChange","nzPageIndexChange",4,"ngIf"],[1,"ant-table-pagination","ant-table-pagination-right",3,"hidden","nzShowSizeChanger","nzPageSizeOptions","nzItemRender","nzShowQuickJumper","nzHideOnSinglePage","nzShowTotal","nzSize","nzPageSize","nzTotal","nzSimple","nzPageIndex","nzPageSizeChange","nzPageIndexChange"]],template:function(e,n){if(1&e&&(s.F$t(),s.TgZ(0,"nz-spin",0),s.YNc(1,j9,2,1,"ng-container",1),s.TgZ(2,"div",2,3),s.YNc(4,$9,1,1,"nz-table-title-footer",4),s.YNc(5,Y9,1,13,"nz-table-inner-scroll",5),s.YNc(6,G9,1,4,"ng-template",null,6,s.W1O),s.YNc(8,Z9,1,1,"nz-table-title-footer",7),s.qZA(),s.YNc(9,W9,2,1,"ng-container",1),s.qZA(),s.YNc(10,J9,1,1,"ng-template",null,8,s.W1O),s.YNc(12,Q9,1,0,"ng-template",null,9,s.W1O)),2&e){const o=s.MAs(7);s.Q6J("nzDelay",n.nzLoadingDelay)("nzSpinning",n.nzLoading)("nzIndicator",n.nzLoadingIndicator),s.xp6(1),s.Q6J("ngIf","both"===n.nzPaginationPosition||"top"===n.nzPaginationPosition),s.xp6(1),s.ekj("ant-table-rtl","rtl"===n.dir)("ant-table-fixed-header",n.nzData.length&&n.scrollY)("ant-table-fixed-column",n.scrollX)("ant-table-has-fix-left",n.hasFixLeft)("ant-table-has-fix-right",n.hasFixRight)("ant-table-bordered",n.nzBordered)("nz-table-out-bordered",n.nzOuterBordered&&!n.nzBordered)("ant-table-middle","middle"===n.nzSize)("ant-table-small","small"===n.nzSize),s.xp6(2),s.Q6J("ngIf",n.nzTitle),s.xp6(1),s.Q6J("ngIf",n.scrollY||n.scrollX)("ngIfElse",o),s.xp6(3),s.Q6J("ngIf",n.nzFooter),s.xp6(1),s.Q6J("ngIf","both"===n.nzPaginationPosition||"bottom"===n.nzPaginationPosition)}},dependencies:[M.O5,M.tP,Qm,c9,rv,nv,_2],encapsulation:2,changeDetection:0}),(0,T.gn)([R()],i.prototype,"nzFrontPagination",void 0),(0,T.gn)([R()],i.prototype,"nzTemplateMode",void 0),(0,T.gn)([R()],i.prototype,"nzShowPagination",void 0),(0,T.gn)([R()],i.prototype,"nzLoading",void 0),(0,T.gn)([R()],i.prototype,"nzOuterBordered",void 0),(0,T.gn)([pe()],i.prototype,"nzLoadingIndicator",void 0),(0,T.gn)([pe(),R()],i.prototype,"nzBordered",void 0),(0,T.gn)([pe()],i.prototype,"nzSize",void 0),(0,T.gn)([pe(),R()],i.prototype,"nzShowSizeChanger",void 0),(0,T.gn)([pe(),R()],i.prototype,"nzHideOnSinglePage",void 0),(0,T.gn)([pe(),R()],i.prototype,"nzShowQuickJumper",void 0),(0,T.gn)([pe(),R()],i.prototype,"nzSimple",void 0),i})(),cv=(()=>{class i{constructor(e){this.nzTableStyleService=e,this.destroy$=new H.x,this.listOfFixedColumns$=new oe(1),this.listOfColumns$=new oe(1),this.listOfFixedColumnsChanges$=this.listOfFixedColumns$.pipe((0,se.w)(n=>(0,ze.T)(this.listOfFixedColumns$,...n.map(o=>o.changes$)).pipe((0,re.z)(()=>this.listOfFixedColumns$))),N(this.destroy$)),this.listOfFixedLeftColumnChanges$=this.listOfFixedColumnsChanges$.pipe((0,U.U)(n=>n.filter(o=>!1!==o.nzLeft))),this.listOfFixedRightColumnChanges$=this.listOfFixedColumnsChanges$.pipe((0,U.U)(n=>n.filter(o=>!1!==o.nzRight))),this.listOfColumnsChanges$=this.listOfColumns$.pipe((0,se.w)(n=>(0,ze.T)(this.listOfColumns$,...n.map(o=>o.changes$)).pipe((0,re.z)(()=>this.listOfColumns$))),N(this.destroy$)),this.isInsideTable=!1,this.isInsideTable=!!e}ngAfterContentInit(){this.nzTableStyleService&&(this.listOfCellFixedDirective.changes.pipe((0,Q.O)(this.listOfCellFixedDirective),N(this.destroy$)).subscribe(this.listOfFixedColumns$),this.listOfNzThDirective.changes.pipe((0,Q.O)(this.listOfNzThDirective),N(this.destroy$)).subscribe(this.listOfColumns$),this.listOfFixedLeftColumnChanges$.subscribe(e=>{e.forEach(n=>n.setIsLastLeft(n===e[e.length-1]))}),this.listOfFixedRightColumnChanges$.subscribe(e=>{e.forEach(n=>n.setIsFirstRight(n===e[0]))}),(0,ct.a)([this.nzTableStyleService.listOfListOfThWidth$,this.listOfFixedLeftColumnChanges$]).pipe(N(this.destroy$)).subscribe(([e,n])=>{n.forEach((o,r)=>{if(o.isAutoLeft){const c=n.slice(0,r).reduce((h,u)=>h+(u.colspan||u.colSpan||1),0),l=e.slice(0,c).reduce((h,u)=>h+u,0);o.setAutoLeftWidth(`${l}px`)}})}),(0,ct.a)([this.nzTableStyleService.listOfListOfThWidth$,this.listOfFixedRightColumnChanges$]).pipe(N(this.destroy$)).subscribe(([e,n])=>{n.forEach((o,r)=>{const a=n[n.length-r-1];if(a.isAutoRight){const l=n.slice(n.length-r,n.length).reduce((u,d)=>u+(d.colspan||d.colSpan||1),0),h=e.slice(e.length-l,e.length).reduce((u,d)=>u+d,0);a.setAutoRightWidth(`${h}px`)}})}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Bi,8))},i.\u0275dir=s.lG2({type:i,selectors:[["tr",3,"mat-row","",3,"mat-header-row","",3,"nz-table-measure-row","",3,"nzExpand","",3,"nz-table-fixed-row",""]],contentQueries:function(e,n,o){if(1&e&&(s.Suo(o,y2,4),s.Suo(o,K9,4)),2&e){let r;s.iGM(r=s.CRH())&&(n.listOfNzThDirective=r),s.iGM(r=s.CRH())&&(n.listOfCellFixedDirective=r)}},hostVars:2,hostBindings:function(e,n){2&e&&s.ekj("ant-table-row",n.isInsideTable)}}),i})(),lv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,wc,ne.u5,St,Km,fc,r2,Vi,M.ez,ft,Xm,I5,l9,hn.YI,at,c2,zr]}),i})(),hv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-table"]],decls:11,vars:0,template:function(e,n){1&e&&(s.TgZ(0,"nz-table")(1,"tr")(2,"th"),s._uU(3,"A"),s.qZA(),s.TgZ(4,"th"),s._uU(5,"B"),s.qZA()(),s.TgZ(6,"tr")(7,"td"),s._uU(8,"1"),s.qZA(),s.TgZ(9,"td"),s._uU(10,"2"),s.qZA()()())},dependencies:[av,ev,y2,cv],styles:["nz-table[_ngcontent-%COMP%]{width:100%;height:100%}"]}),i})();function M2(...i){const t=i.length;if(0===t)throw new Error("list of properties cannot be empty.");return(0,U.U)(e=>{let n=e;for(let o=0;o<t;o++){const r=n?.[i[o]];if(!(typeof r<"u"))return;n=r}return n})}const uv=["overlay"];function dv(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw(2);s.xp6(1),s.Oqu(e.nzTitle)}}function fv(i,t){if(1&i&&(s.TgZ(0,"div",2)(1,"div",3)(2,"div",4),s._UZ(3,"span",5),s.qZA(),s.TgZ(4,"div",6),s.YNc(5,dv,2,1,"ng-container",7),s.qZA()()()),2&i){const e=s.oxw();s.ekj("ant-tooltip-rtl","rtl"===e.dir),s.Q6J("ngClass",e._classMap)("ngStyle",e.nzOverlayStyle)("@.disabled",!(null==e.noAnimation||!e.noAnimation.nzNoAnimation))("nzNoAnimation",null==e.noAnimation?null:e.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),s.xp6(3),s.Q6J("ngStyle",e._contentStyleMap),s.xp6(1),s.Q6J("ngStyle",e._contentStyleMap),s.xp6(1),s.Q6J("nzStringTemplateOutlet",e.nzTitle)("nzStringTemplateOutletContext",e.nzTitleContext)}}let pv=(()=>{class i{constructor(e,n,o,r,a,c){this.elementRef=e,this.hostView=n,this.resolver=o,this.renderer=r,this.noAnimation=a,this.nzConfigService=c,this.visibleChange=new s.vpe,this.internalVisible=!1,this.destroy$=new H.x,this.triggerDisposables=[]}get _title(){return this.title||this.directiveTitle||null}get _content(){return this.content||this.directiveContent||null}get _trigger(){return typeof this.trigger<"u"?this.trigger:"hover"}get _placement(){const e=this.placement;return Array.isArray(e)&&e.length>0?e:"string"==typeof e&&e?[e]:["top"]}get _visible(){return(typeof this.visible<"u"?this.visible:this.internalVisible)||!1}get _mouseEnterDelay(){return this.mouseEnterDelay||.15}get _mouseLeaveDelay(){return this.mouseLeaveDelay||.1}get _overlayClassName(){return this.overlayClassName||null}get _overlayStyle(){return this.overlayStyle||null}getProxyPropertyMap(){return{noAnimation:["noAnimation",()=>!!this.noAnimation]}}ngOnChanges(e){const{trigger:n}=e;n&&!n.isFirstChange()&&this.registerTriggers(),this.component&&this.updatePropertiesByChanges(e)}ngAfterViewInit(){this.createComponent(),this.registerTriggers()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.clearTogglingTimer(),this.removeTriggerListeners()}show(){this.component?.show()}hide(){this.component?.hide()}updatePosition(){this.component&&this.component.updatePosition()}createComponent(){const e=this.componentRef;this.component=e.instance,this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),e.location.nativeElement),this.component.setOverlayOrigin(this.origin||this.elementRef),this.initProperties();const n=this.component.nzVisibleChange.pipe(Le());n.pipe(N(this.destroy$)).subscribe(o=>{this.internalVisible=o,this.visibleChange.emit(o)}),n.pipe((0,Y.h)(o=>o),_r(0,cc),(0,Y.h)(()=>Boolean(this.component?.overlay?.overlayRef)),N(this.destroy$)).subscribe(()=>{this.component?.updatePosition()})}registerTriggers(){const e=this.elementRef.nativeElement,n=this.trigger;if(this.removeTriggerListeners(),"hover"===n){let o;this.triggerDisposables.push(this.renderer.listen(e,"mouseenter",()=>{this.delayEnterLeave(!0,!0,this._mouseEnterDelay)})),this.triggerDisposables.push(this.renderer.listen(e,"mouseleave",()=>{this.delayEnterLeave(!0,!1,this._mouseLeaveDelay),this.component?.overlay.overlayRef&&!o&&(o=this.component.overlay.overlayRef.overlayElement,this.triggerDisposables.push(this.renderer.listen(o,"mouseenter",()=>{this.delayEnterLeave(!1,!0,this._mouseEnterDelay)})),this.triggerDisposables.push(this.renderer.listen(o,"mouseleave",()=>{this.delayEnterLeave(!1,!1,this._mouseLeaveDelay)})))}))}else"focus"===n?(this.triggerDisposables.push(this.renderer.listen(e,"focusin",()=>this.show())),this.triggerDisposables.push(this.renderer.listen(e,"focusout",()=>this.hide()))):"click"===n&&this.triggerDisposables.push(this.renderer.listen(e,"click",o=>{o.preventDefault(),this.show()}))}updatePropertiesByChanges(e){this.updatePropertiesByKeys(Object.keys(e))}updatePropertiesByKeys(e){const n={title:["nzTitle",()=>this._title],directiveTitle:["nzTitle",()=>this._title],content:["nzContent",()=>this._content],directiveContent:["nzContent",()=>this._content],trigger:["nzTrigger",()=>this._trigger],placement:["nzPlacement",()=>this._placement],visible:["nzVisible",()=>this._visible],mouseEnterDelay:["nzMouseEnterDelay",()=>this._mouseEnterDelay],mouseLeaveDelay:["nzMouseLeaveDelay",()=>this._mouseLeaveDelay],overlayClassName:["nzOverlayClassName",()=>this._overlayClassName],overlayStyle:["nzOverlayStyle",()=>this._overlayStyle],arrowPointAtCenter:["nzArrowPointAtCenter",()=>this.arrowPointAtCenter],...this.getProxyPropertyMap()};(e||Object.keys(n).filter(o=>!o.startsWith("directive"))).forEach(o=>{if(n[o]){const[r,a]=n[o];this.updateComponentValue(r,a())}}),this.component?.updateByDirective()}initProperties(){this.updatePropertiesByKeys()}updateComponentValue(e,n){typeof n<"u"&&(this.component[e]=n)}delayEnterLeave(e,n,o=-1){this.delayTimer?this.clearTogglingTimer():o>0?this.delayTimer=setTimeout(()=>{this.delayTimer=void 0,n?this.show():this.hide()},1e3*o):n&&e?this.show():this.hide()}removeTriggerListeners(){this.triggerDisposables.forEach(e=>e()),this.triggerDisposables.length=0}clearTogglingTimer(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.s_b),s.Y36(s._Vd),s.Y36(s.Qsj),s.Y36(Nt),s.Y36(nt))},i.\u0275dir=s.lG2({type:i,features:[s.TTD]}),i})(),gv=(()=>{class i{constructor(e,n,o){this.cdr=e,this.directionality=n,this.noAnimation=o,this.nzTitle=null,this.nzContent=null,this.nzArrowPointAtCenter=!1,this.nzOverlayStyle={},this.nzBackdrop=!1,this.nzVisibleChange=new H.x,this._visible=!1,this._trigger="hover",this.preferredPlacement="top",this.dir="ltr",this._classMap={},this._prefix="ant-tooltip",this._positions=[...K4],this.destroy$=new H.x}set nzVisible(e){const n=O1(e);this._visible!==n&&(this._visible=n,this.nzVisibleChange.next(n))}get nzVisible(){return this._visible}set nzTrigger(e){this._trigger=e}get nzTrigger(){return this._trigger}set nzPlacement(e){const n=e.map(o=>ce[o]);this._positions=[...n,...K4]}ngOnInit(){this.directionality.change?.pipe(N(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.nzVisibleChange.complete(),this.destroy$.next(),this.destroy$.complete()}show(){this.nzVisible||(this.isEmpty()||(this.nzVisible=!0,this.nzVisibleChange.next(!0),this.cdr.detectChanges()),this.origin&&this.overlay&&this.overlay.overlayRef&&"rtl"===this.overlay.overlayRef.getDirection()&&this.overlay.overlayRef.setDirection("ltr"))}hide(){this.nzVisible&&(this.nzVisible=!1,this.nzVisibleChange.next(!1),this.cdr.detectChanges())}updateByDirective(){this.updateStyles(),this.cdr.detectChanges(),Promise.resolve().then(()=>{this.updatePosition(),this.updateVisibilityByTitle()})}updatePosition(){this.origin&&this.overlay&&this.overlay.overlayRef&&this.overlay.overlayRef.updatePosition()}onPositionChange(e){this.preferredPlacement=yr(e),this.updateStyles(),this.cdr.detectChanges()}setOverlayOrigin(e){this.origin=e,this.cdr.markForCheck()}onClickOutside(e){!this.origin.nativeElement.contains(e.target)&&null!==this.nzTrigger&&this.hide()}updateVisibilityByTitle(){this.isEmpty()&&this.hide()}updateStyles(){this._classMap={[this.nzOverlayClassName]:!0,[`${this._prefix}-placement-${this.preferredPlacement}`]:!0}}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.sBO),s.Y36(ge,8),s.Y36(Nt))},i.\u0275dir=s.lG2({type:i,viewQuery:function(e,n){if(1&e&&s.Gf(uv,5),2&e){let o;s.iGM(o=s.CRH())&&(n.overlay=o.first)}}}),i})(),S2=(()=>{class i extends pv{constructor(e,n,o,r,a){super(e,n,o,r,a),this.titleContext=null,this.trigger="hover",this.placement="top",this.visibleChange=new s.vpe,this.componentRef=this.hostView.createComponent(vv)}getProxyPropertyMap(){return{...super.getProxyPropertyMap(),nzTooltipColor:["nzColor",()=>this.nzTooltipColor],nzTooltipTitleContext:["nzTitleContext",()=>this.titleContext]}}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.s_b),s.Y36(s._Vd),s.Y36(s.Qsj),s.Y36(Nt,9))},i.\u0275dir=s.lG2({type:i,selectors:[["","nz-tooltip",""]],hostVars:2,hostBindings:function(e,n){2&e&&s.ekj("ant-tooltip-open",n.visible)},inputs:{title:["nzTooltipTitle","title"],titleContext:["nzTooltipTitleContext","titleContext"],directiveTitle:["nz-tooltip","directiveTitle"],trigger:["nzTooltipTrigger","trigger"],placement:["nzTooltipPlacement","placement"],origin:["nzTooltipOrigin","origin"],visible:["nzTooltipVisible","visible"],mouseEnterDelay:["nzTooltipMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:["nzTooltipMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:["nzTooltipOverlayClassName","overlayClassName"],overlayStyle:["nzTooltipOverlayStyle","overlayStyle"],arrowPointAtCenter:["nzTooltipArrowPointAtCenter","arrowPointAtCenter"],nzTooltipColor:"nzTooltipColor"},outputs:{visibleChange:"nzTooltipVisibleChange"},exportAs:["nzTooltip"],features:[s.qOj]}),(0,T.gn)([R()],i.prototype,"arrowPointAtCenter",void 0),i})(),vv=(()=>{class i extends gv{constructor(e,n,o){super(e,n,o),this.nzTitle=null,this.nzTitleContext=null,this._contentStyleMap={}}isEmpty(){return function mv(i){return!(i instanceof s.Rgc||""!==i&&Qn(i))}(this.nzTitle)}updateStyles(){const e=this.nzColor&&function Sd(i){return-1!==Md.indexOf(i)}(this.nzColor);this._classMap={[this.nzOverlayClassName]:!0,[`${this._prefix}-placement-${this.preferredPlacement}`]:!0,[`${this._prefix}-${this.nzColor}`]:e},this._contentStyleMap={backgroundColor:this.nzColor&&!e?this.nzColor:null}}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.sBO),s.Y36(ge,8),s.Y36(Nt,9))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-tooltip"]],exportAs:["nzTooltipComponent"],features:[s.qOj],decls:2,vars:5,consts:[["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayPush","nzArrowPointAtCenter","overlayOutsideClick","detach","positionChange"],["overlay","cdkConnectedOverlay"],[1,"ant-tooltip",3,"ngClass","ngStyle","nzNoAnimation"],[1,"ant-tooltip-content"],[1,"ant-tooltip-arrow"],[1,"ant-tooltip-arrow-content",3,"ngStyle"],[1,"ant-tooltip-inner",3,"ngStyle"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"]],template:function(e,n){1&e&&(s.YNc(0,fv,6,11,"ng-template",0,1,s.W1O),s.NdJ("overlayOutsideClick",function(r){return n.onClickOutside(r)})("detach",function(){return n.hide()})("positionChange",function(r){return n.onPositionChange(r)})),2&e&&s.Q6J("cdkConnectedOverlayOrigin",n.origin)("cdkConnectedOverlayOpen",n._visible)("cdkConnectedOverlayPositions",n._positions)("cdkConnectedOverlayPush",!0)("nzArrowPointAtCenter",n.nzArrowPointAtCenter)},dependencies:[M.mk,M.PC,Qo,Be,e2,Nt],encapsulation:2,data:{animation:[n2]},changeDetection:0}),i})(),T2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,Xo,St,yc,es]}),i})();const zv=["handle"];function bv(i,t){if(1&i&&s._UZ(0,"span",2),2&i){const e=t.$implicit;s.ekj("ant-slider-dot-active",e.active),s.Q6J("ngStyle",e.style)}}function yv(i,t){if(1&i&&s._UZ(0,"span",2),2&i){const e=t.$implicit;s.ekj("ant-slider-mark-active",e.active),s.Q6J("ngStyle",e.style)("innerHTML",e.label,s.oJD)}}const Cv=["slider"];function _v(i,t){if(1&i&&s._UZ(0,"nz-slider-step",6),2&i){const e=s.oxw();s.Q6J("vertical",e.nzVertical)("min",e.nzMin)("max",e.nzMax)("lowerBound",e.bounds.lower)("upperBound",e.bounds.upper)("marksArray",e.marksArray)("included",e.nzIncluded)("reverse",e.nzReverse)}}function xv(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"nz-slider-handle",7),s.NdJ("focusin",function(){const r=s.CHM(e).index,a=s.oxw();return s.KtG(a.onHandleFocusIn(r))}),s.qZA()}if(2&i){const e=t.$implicit,n=s.oxw();s.Q6J("vertical",n.nzVertical)("reverse",n.nzReverse)("offset",e.offset)("value",e.value)("active",e.active)("tooltipFormatter",n.nzTipFormatter)("tooltipVisible",n.nzTooltipVisible)("tooltipPlacement",n.nzTooltipPlacement)("dir",n.dir)}}function wv(i,t){if(1&i&&s._UZ(0,"nz-slider-marks",6),2&i){const e=s.oxw();s.Q6J("vertical",e.nzVertical)("min",e.nzMin)("max",e.nzMax)("lowerBound",e.bounds.lower)("upperBound",e.bounds.upper)("marksArray",e.marksArray)("included",e.nzIncluded)("reverse",e.nzReverse)}}let Tc=(()=>{class i{constructor(){this.isDragging=!1}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),O2=(()=>{class i{constructor(e,n){this.sliderService=e,this.cdr=n,this.tooltipVisible="default",this.active=!1,this.dir="ltr",this.style={},this.enterHandle=()=>{this.sliderService.isDragging||(this.toggleTooltip(!0),this.updateTooltipPosition(),this.cdr.detectChanges())},this.leaveHandle=()=>{this.sliderService.isDragging||(this.toggleTooltip(!1),this.cdr.detectChanges())}}ngOnChanges(e){const{offset:n,value:o,active:r,tooltipVisible:a,reverse:c,dir:l}=e;(n||c||l)&&this.updateStyle(),o&&(this.updateTooltipTitle(),this.updateTooltipPosition()),r&&this.toggleTooltip(!!r.currentValue),"always"===a?.currentValue&&Promise.resolve().then(()=>this.toggleTooltip(!0,!0))}focus(){this.handleEl?.nativeElement.focus()}toggleTooltip(e,n=!1){!n&&("default"!==this.tooltipVisible||!this.tooltip)||(e?this.tooltip?.show():this.tooltip?.hide())}updateTooltipTitle(){this.tooltipTitle=this.tooltipFormatter?this.tooltipFormatter(this.value):`${this.value}`}updateTooltipPosition(){this.tooltip&&Promise.resolve().then(()=>this.tooltip?.updatePosition())}updateStyle(){const n=this.reverse,r=this.vertical?{[n?"top":"bottom"]:`${this.offset}%`,[n?"bottom":"top"]:"auto",transform:n?null:"translateY(+50%)"}:{...this.getHorizontalStylePosition(),transform:`translateX(${n?"rtl"===this.dir?"-":"+":"rtl"===this.dir?"+":"-"}50%)`};this.style=r,this.cdr.markForCheck()}getHorizontalStylePosition(){let e=this.reverse?"auto":`${this.offset}%`,n=this.reverse?`${this.offset}%`:"auto";if("rtl"===this.dir){const o=e;e=n,n=o}return{left:e,right:n}}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Tc),s.Y36(s.sBO))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-slider-handle"]],viewQuery:function(e,n){if(1&e&&(s.Gf(zv,5),s.Gf(S2,5)),2&e){let o;s.iGM(o=s.CRH())&&(n.handleEl=o.first),s.iGM(o=s.CRH())&&(n.tooltip=o.first)}},hostBindings:function(e,n){1&e&&s.NdJ("mouseenter",function(){return n.enterHandle()})("mouseleave",function(){return n.leaveHandle()})},inputs:{vertical:"vertical",reverse:"reverse",offset:"offset",value:"value",tooltipVisible:"tooltipVisible",tooltipPlacement:"tooltipPlacement",tooltipFormatter:"tooltipFormatter",active:"active",dir:"dir"},exportAs:["nzSliderHandle"],features:[s.TTD],decls:2,vars:4,consts:[["tabindex","0","nz-tooltip","",1,"ant-slider-handle",3,"ngStyle","nzTooltipTitle","nzTooltipTrigger","nzTooltipPlacement"],["handle",""]],template:function(e,n){1&e&&s._UZ(0,"div",0,1),2&e&&s.Q6J("ngStyle",n.style)("nzTooltipTitle",null===n.tooltipFormatter||"never"===n.tooltipVisible?null:n.tooltipTitle)("nzTooltipTrigger",null)("nzTooltipPlacement",n.tooltipPlacement)},dependencies:[M.PC,S2],encapsulation:2,changeDetection:0}),(0,T.gn)([R()],i.prototype,"active",void 0),i})(),Mv=(()=>{class i{constructor(){this.offset=0,this.reverse=!1,this.dir="ltr",this.length=0,this.vertical=!1,this.included=!1,this.style={}}ngOnChanges(){const n=this.reverse,o=this.included?"visible":"hidden",a=this.length,c=this.vertical?{[n?"top":"bottom"]:`${this.offset}%`,[n?"bottom":"top"]:"auto",height:`${a}%`,visibility:o}:{...this.getHorizontalStylePosition(),width:`${a}%`,visibility:o};this.style=c}getHorizontalStylePosition(){let e=this.reverse?"auto":`${this.offset}%`,n=this.reverse?`${this.offset}%`:"auto";if("rtl"===this.dir){const o=e;e=n,n=o}return{left:e,right:n}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-slider-track"]],inputs:{offset:"offset",reverse:"reverse",dir:"dir",length:"length",vertical:"vertical",included:"included"},exportAs:["nzSliderTrack"],features:[s.TTD],decls:1,vars:1,consts:[[1,"ant-slider-track",3,"ngStyle"]],template:function(e,n){1&e&&s._UZ(0,"div",0),2&e&&s.Q6J("ngStyle",n.style)},dependencies:[M.PC],encapsulation:2,changeDetection:0}),(0,T.gn)([vt()],i.prototype,"offset",void 0),(0,T.gn)([R()],i.prototype,"reverse",void 0),(0,T.gn)([vt()],i.prototype,"length",void 0),(0,T.gn)([R()],i.prototype,"vertical",void 0),(0,T.gn)([R()],i.prototype,"included",void 0),i})(),Sv=(()=>{class i{constructor(){this.lowerBound=null,this.upperBound=null,this.marksArray=[],this.vertical=!1,this.included=!1,this.steps=[]}ngOnChanges(e){const{marksArray:n,lowerBound:o,upperBound:r,reverse:a}=e;(n||a)&&this.buildSteps(),(n||o||r||a)&&this.togglePointActive()}trackById(e,n){return n.value}buildSteps(){const e=this.vertical?"bottom":"left";this.steps=this.marksArray.map(n=>{const{value:o,config:r}=n;let a=n.offset;return this.reverse&&(a=(this.max-o)/(this.max-this.min)*100),{value:o,offset:a,config:r,active:!1,style:{[e]:`${a}%`}}})}togglePointActive(){this.steps&&null!==this.lowerBound&&null!==this.upperBound&&this.steps.forEach(e=>{const n=e.value;e.active=!this.included&&n===this.upperBound||this.included&&n<=this.upperBound&&n>=this.lowerBound})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-slider-step"]],inputs:{lowerBound:"lowerBound",upperBound:"upperBound",marksArray:"marksArray",min:"min",max:"max",vertical:"vertical",included:"included",reverse:"reverse"},exportAs:["nzSliderStep"],features:[s.TTD],decls:2,vars:2,consts:[[1,"ant-slider-step"],["class","ant-slider-dot",3,"ant-slider-dot-active","ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ant-slider-dot",3,"ngStyle"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.YNc(1,bv,1,3,"span",1),s.qZA()),2&e&&(s.xp6(1),s.Q6J("ngForOf",n.steps)("ngForTrackBy",n.trackById))},dependencies:[M.sg,M.PC],encapsulation:2,changeDetection:0}),(0,T.gn)([R()],i.prototype,"vertical",void 0),(0,T.gn)([R()],i.prototype,"included",void 0),i})(),Tv=(()=>{class i{constructor(){this.lowerBound=null,this.upperBound=null,this.marksArray=[],this.vertical=!1,this.included=!1,this.marks=[]}ngOnChanges(e){const{marksArray:n,lowerBound:o,upperBound:r,reverse:a}=e;(n||a)&&this.buildMarks(),(n||o||r||a)&&this.togglePointActive()}trackById(e,n){return n.value}buildMarks(){const e=this.max-this.min;this.marks=this.marksArray.map(n=>{const{value:o,offset:r,config:a}=n,c=this.getMarkStyles(o,e,a);return{label:A2(a)?a.label:a,offset:r,style:c,value:o,config:a,active:!1}})}getMarkStyles(e,n,o){let r;const a=this.reverse?this.max+this.min-e:e;return r=this.vertical?{marginBottom:"-50%",bottom:(a-this.min)/n*100+"%"}:{transform:"translate3d(-50%, 0, 0)",left:(a-this.min)/n*100+"%"},A2(o)&&o.style&&(r={...r,...o.style}),r}togglePointActive(){this.marks&&null!==this.lowerBound&&null!==this.upperBound&&this.marks.forEach(e=>{const n=e.value;e.active=!this.included&&n===this.upperBound||this.included&&n<=this.upperBound&&n>=this.lowerBound})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-slider-marks"]],inputs:{lowerBound:"lowerBound",upperBound:"upperBound",marksArray:"marksArray",min:"min",max:"max",vertical:"vertical",included:"included",reverse:"reverse"},exportAs:["nzSliderMarks"],features:[s.TTD],decls:2,vars:2,consts:[[1,"ant-slider-mark"],["class","ant-slider-mark-text",3,"ant-slider-mark-active","ngStyle","innerHTML",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ant-slider-mark-text",3,"ngStyle","innerHTML"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.YNc(1,yv,1,4,"span",1),s.qZA()),2&e&&(s.xp6(1),s.Q6J("ngForOf",n.marks)("ngForTrackBy",n.trackById))},dependencies:[M.sg,M.PC],encapsulation:2,changeDetection:0}),(0,T.gn)([R()],i.prototype,"vertical",void 0),(0,T.gn)([R()],i.prototype,"included",void 0),i})();function A2(i){return"string"!=typeof i}let Ov=(()=>{class i{constructor(e,n,o,r){this.sliderService=e,this.cdr=n,this.platform=o,this.directionality=r,this.nzDisabled=!1,this.nzDots=!1,this.nzIncluded=!0,this.nzRange=!1,this.nzVertical=!1,this.nzReverse=!1,this.nzMarks=null,this.nzMax=100,this.nzMin=0,this.nzStep=1,this.nzTooltipVisible="default",this.nzTooltipPlacement="top",this.nzOnAfterChange=new s.vpe,this.value=null,this.cacheSliderStart=null,this.cacheSliderLength=null,this.activeValueIndex=void 0,this.track={offset:null,length:null},this.handles=[],this.marksArray=null,this.bounds={lower:null,upper:null},this.dir="ltr",this.destroy$=new H.x,this.isNzDisableFirstChange=!0}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe(N(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges(),this.updateTrackAndHandles(),this.onValueChange(this.getValue(!0))}),this.handles=E2(this.nzRange?2:1),this.marksArray=this.nzMarks?this.generateMarkItems(this.nzMarks):null,this.bindDraggingHandlers(),this.toggleDragDisabled(this.nzDisabled),null===this.getValue()&&this.setValue(this.formatValue(null))}ngOnChanges(e){const{nzDisabled:n,nzMarks:o,nzRange:r}=e;n&&!n.firstChange?this.toggleDragDisabled(n.currentValue):o&&!o.firstChange?this.marksArray=this.nzMarks?this.generateMarkItems(this.nzMarks):null:r&&!r.firstChange&&(this.handles=E2(r.currentValue?2:1),this.setValue(this.formatValue(null)))}ngOnDestroy(){this.unsubscribeDrag(),this.destroy$.next(),this.destroy$.complete()}writeValue(e){this.setValue(e,!0)}onValueChange(e){}onTouched(){}registerOnChange(e){this.onValueChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.nzDisabled=this.isNzDisableFirstChange&&this.nzDisabled||e,this.isNzDisableFirstChange=!1,this.toggleDragDisabled(e),this.cdr.markForCheck()}onKeyDown(e){if(this.nzDisabled)return;const n=e.keyCode,r=37===n||40===n;if(39!==n&&38!==n&&!r)return;e.preventDefault();let a=(r?-this.nzStep:this.nzStep)*(this.nzReverse?-1:1);a="rtl"===this.dir?-1*a:a,this.setActiveValue(tr(this.nzRange?this.value[this.activeValueIndex]+a:this.value+a,this.nzMin,this.nzMax)),this.nzOnAfterChange.emit(this.getValue(!0))}onHandleFocusIn(e){this.activeValueIndex=e}setValue(e,n=!1){n?(this.value=this.formatValue(e),this.updateTrackAndHandles()):function kv(i,t){return typeof i==typeof t&&(bt(i)&&bt(t)?function hu(i,t){if(!i||!t||i.length!==t.length)return!1;const e=i.length;for(let n=0;n<e;n++)if(i[n]!==t[n])return!1;return!0}(i,t):i===t)}(this.value,e)||(this.value=e,this.updateTrackAndHandles(),this.onValueChange(this.getValue(!0)))}getValue(e=!1){return e&&this.value&&bt(this.value)?[...this.value].sort((n,o)=>n-o):this.value}getValueToOffset(e){let n=e;return typeof n>"u"&&(n=this.getValue(!0)),bt(n)?n.map(o=>this.valueToOffset(o)):this.valueToOffset(n)}setActiveValueIndex(e){const n=this.getValue();if(bt(n)){let r,o=null,a=-1;n.forEach((c,l)=>{r=Math.abs(e-c),(null===o||r<o)&&(o=r,a=l)}),this.activeValueIndex=a,this.handlerComponents.toArray()[a].focus()}else this.handlerComponents.toArray()[0].focus()}setActiveValue(e){if(bt(this.value)){const n=[...this.value];n[this.activeValueIndex]=e,this.setValue(n)}else this.setValue(e)}updateTrackAndHandles(){const e=this.getValue(),n=this.getValueToOffset(e),o=this.getValue(!0),r=this.getValueToOffset(o),a=bt(o)?o:[0,o],c=bt(r)?[r[0],r[1]-r[0]]:[0,r];this.handles.forEach((l,h)=>{l.offset=bt(n)?n[h]:n,l.value=bt(e)?e[h]:e||0}),[this.bounds.lower,this.bounds.upper]=a,[this.track.offset,this.track.length]=c,this.cdr.markForCheck()}onDragStart(e){this.toggleDragMoving(!0),this.cacheSliderProperty(),this.setActiveValueIndex(this.getLogicalValue(e)),this.setActiveValue(this.getLogicalValue(e)),this.showHandleTooltip(this.nzRange?this.activeValueIndex:0)}onDragMove(e){this.setActiveValue(this.getLogicalValue(e)),this.cdr.markForCheck()}getLogicalValue(e){return this.nzReverse?this.nzVertical||"rtl"!==this.dir?this.nzMax-e+this.nzMin:e:this.nzVertical||"rtl"!==this.dir?e:this.nzMax-e+this.nzMin}onDragEnd(){this.nzOnAfterChange.emit(this.getValue(!0)),this.toggleDragMoving(!1),this.cacheSliderProperty(!0),this.hideAllHandleTooltip(),this.cdr.markForCheck()}bindDraggingHandlers(){if(!this.platform.isBrowser)return;const e=this.slider.nativeElement,n=this.nzVertical?"pageY":"pageX",o={start:"mousedown",move:"mousemove",end:"mouseup",pluckKey:[n]},r={start:"touchstart",move:"touchmove",end:"touchend",pluckKey:["touches","0",n],filter:a=>a instanceof TouchEvent};[o,r].forEach(a=>{const{start:c,move:l,end:h,pluckKey:u,filter:d=(()=>!0)}=a;a.startPlucked$=Me(e,c).pipe((0,Y.h)(d),(0,Js.b)(E1),M2(...u),(0,U.U)(f=>this.findClosestValue(f))),a.end$=Me(document,h),a.moveResolved$=Me(document,l).pipe((0,Y.h)(d),(0,Js.b)(E1),M2(...u),Le(),(0,U.U)(f=>this.findClosestValue(f)),Le(),N(a.end$))}),this.dragStart$=(0,ze.T)(o.startPlucked$,r.startPlucked$),this.dragMove$=(0,ze.T)(o.moveResolved$,r.moveResolved$),this.dragEnd$=(0,ze.T)(o.end$,r.end$)}subscribeDrag(e=["start","move","end"]){-1!==e.indexOf("start")&&this.dragStart$&&!this.dragStart_&&(this.dragStart_=this.dragStart$.subscribe(this.onDragStart.bind(this))),-1!==e.indexOf("move")&&this.dragMove$&&!this.dragMove_&&(this.dragMove_=this.dragMove$.subscribe(this.onDragMove.bind(this))),-1!==e.indexOf("end")&&this.dragEnd$&&!this.dragEnd_&&(this.dragEnd_=this.dragEnd$.subscribe(this.onDragEnd.bind(this)))}unsubscribeDrag(e=["start","move","end"]){-1!==e.indexOf("start")&&this.dragStart_&&(this.dragStart_.unsubscribe(),this.dragStart_=null),-1!==e.indexOf("move")&&this.dragMove_&&(this.dragMove_.unsubscribe(),this.dragMove_=null),-1!==e.indexOf("end")&&this.dragEnd_&&(this.dragEnd_.unsubscribe(),this.dragEnd_=null)}toggleDragMoving(e){const n=["move","end"];e?(this.sliderService.isDragging=!0,this.subscribeDrag(n)):(this.sliderService.isDragging=!1,this.unsubscribeDrag(n))}toggleDragDisabled(e){e?this.unsubscribeDrag():this.subscribeDrag(["start"])}findClosestValue(e){const r=tr((e-this.getSliderStartPosition())/this.getSliderLength(),0,1),a=(this.nzMax-this.nzMin)*(this.nzVertical?1-r:r)+this.nzMin,c=null===this.nzMarks?[]:Object.keys(this.nzMarks).map(parseFloat).sort((u,d)=>u-d);if(0!==this.nzStep&&!this.nzDots){const u=Math.round(a/this.nzStep)*this.nzStep;c.push(u)}const l=c.map(u=>Math.abs(a-u)),h=c[l.indexOf(Math.min(...l))];return 0===this.nzStep?h:parseFloat(h.toFixed(function pu(i){const t=i.toString(),e=t.indexOf(".");return e>=0?t.length-e-1:0}(this.nzStep)))}valueToOffset(e){return function fu(i,t,e){return(e-i)/(t-i)*100}(this.nzMin,this.nzMax,e)}getSliderStartPosition(){if(null!==this.cacheSliderStart)return this.cacheSliderStart;const e=N1(this.slider.nativeElement);return this.nzVertical?e.top:e.left}getSliderLength(){if(null!==this.cacheSliderLength)return this.cacheSliderLength;const e=this.slider.nativeElement;return this.nzVertical?e.clientHeight:e.clientWidth}cacheSliderProperty(e=!1){this.cacheSliderStart=e?null:this.getSliderStartPosition(),this.cacheSliderLength=e?null:this.getSliderLength()}formatValue(e){return er(e)?this.nzRange?[this.nzMin,this.nzMax]:this.nzMin:function Ev(i,t){return!(!bt(i)&&isNaN(i)||bt(i)&&i.some(e=>isNaN(e)))&&function Nv(i,t=!1){if(bt(i)!==t)throw function Av(){return new Error('The "nzRange" can\'t match the "ngModel"\'s type, please check these properties: "nzRange", "ngModel", "nzDefaultValue".')}();return!0}(i,t)}(e,this.nzRange)?bt(e)?e.map(n=>tr(n,this.nzMin,this.nzMax)):tr(e,this.nzMin,this.nzMax):this.nzDefaultValue?this.nzDefaultValue:this.nzRange?[this.nzMin,this.nzMax]:this.nzMin}showHandleTooltip(e=0){this.handles.forEach((n,o)=>{n.active=o===e})}hideAllHandleTooltip(){this.handles.forEach(e=>e.active=!1)}generateMarkItems(e){const n=[];for(const o in e)if(e.hasOwnProperty(o)){const r=e[o],a="number"==typeof o?o:parseFloat(o);a>=this.nzMin&&a<=this.nzMax&&n.push({value:a,offset:this.valueToOffset(a),config:r})}return n.length?n:null}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Tc),s.Y36(s.sBO),s.Y36(Ce),s.Y36(ge,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-slider"]],viewQuery:function(e,n){if(1&e&&(s.Gf(Cv,7),s.Gf(O2,5)),2&e){let o;s.iGM(o=s.CRH())&&(n.slider=o.first),s.iGM(o=s.CRH())&&(n.handlerComponents=o)}},hostBindings:function(e,n){1&e&&s.NdJ("keydown",function(r){return n.onKeyDown(r)})},inputs:{nzDisabled:"nzDisabled",nzDots:"nzDots",nzIncluded:"nzIncluded",nzRange:"nzRange",nzVertical:"nzVertical",nzReverse:"nzReverse",nzDefaultValue:"nzDefaultValue",nzMarks:"nzMarks",nzMax:"nzMax",nzMin:"nzMin",nzStep:"nzStep",nzTooltipVisible:"nzTooltipVisible",nzTooltipPlacement:"nzTooltipPlacement",nzTipFormatter:"nzTipFormatter"},outputs:{nzOnAfterChange:"nzOnAfterChange"},exportAs:["nzSlider"],features:[s._Bn([{provide:ne.JU,useExisting:(0,s.Gpc)(()=>i),multi:!0},Tc]),s.TTD],decls:7,vars:17,consts:[[1,"ant-slider"],["slider",""],[1,"ant-slider-rail"],[3,"vertical","included","offset","length","reverse","dir"],[3,"vertical","min","max","lowerBound","upperBound","marksArray","included","reverse",4,"ngIf"],[3,"vertical","reverse","offset","value","active","tooltipFormatter","tooltipVisible","tooltipPlacement","dir","focusin",4,"ngFor","ngForOf"],[3,"vertical","min","max","lowerBound","upperBound","marksArray","included","reverse"],[3,"vertical","reverse","offset","value","active","tooltipFormatter","tooltipVisible","tooltipPlacement","dir","focusin"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0,1),s._UZ(2,"div",2)(3,"nz-slider-track",3),s.YNc(4,_v,1,8,"nz-slider-step",4),s.YNc(5,xv,1,9,"nz-slider-handle",5),s.YNc(6,wv,1,8,"nz-slider-marks",4),s.qZA()),2&e&&(s.ekj("ant-slider-rtl","rtl"===n.dir)("ant-slider-disabled",n.nzDisabled)("ant-slider-vertical",n.nzVertical)("ant-slider-with-marks",n.marksArray),s.xp6(3),s.Q6J("vertical",n.nzVertical)("included",n.nzIncluded)("offset",n.track.offset)("length",n.track.length)("reverse",n.nzReverse)("dir",n.dir),s.xp6(1),s.Q6J("ngIf",n.marksArray),s.xp6(1),s.Q6J("ngForOf",n.handles),s.xp6(1),s.Q6J("ngIf",n.marksArray))},dependencies:[Rd,M.sg,M.O5,Mv,O2,Sv,Tv],encapsulation:2,changeDetection:0}),(0,T.gn)([R()],i.prototype,"nzDisabled",void 0),(0,T.gn)([R()],i.prototype,"nzDots",void 0),(0,T.gn)([R()],i.prototype,"nzIncluded",void 0),(0,T.gn)([R()],i.prototype,"nzRange",void 0),(0,T.gn)([R()],i.prototype,"nzVertical",void 0),(0,T.gn)([R()],i.prototype,"nzReverse",void 0),(0,T.gn)([vt()],i.prototype,"nzMax",void 0),(0,T.gn)([vt()],i.prototype,"nzMin",void 0),(0,T.gn)([vt()],i.prototype,"nzStep",void 0),i})();function bt(i){return i instanceof Array&&2===i.length}function E2(i){return Array(i).fill(0).map(()=>({offset:null,value:null,active:!1}))}let Dv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,ft,T2]}),i})(),Iv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-slider"]],decls:1,vars:0,template:function(e,n){1&e&&s._UZ(0,"nz-slider")},dependencies:[Ov]}),i})(),Pv=(()=>{class i{constructor(){this.text="\u6309\u94ae"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-button"]],inputs:{text:"text"},decls:2,vars:1,consts:[["type","button","nz-button",""]],template:function(e,n){1&e&&(s.TgZ(0,"button",0),s._uU(1),s.qZA()),2&e&&(s.xp6(1),s.Oqu(n.text))},dependencies:[qo,pt,Go],styles:["button[_ngcontent-%COMP%]{width:100%;height:100%}"]}),i})();const N2=["pipe1","pipe2","pipe3","pipe4","pipe5","pipe6","pipe7","pipe8","pipe9","pipe10","pipe11","device1","device2","device3","device4","device5","device6","device7","device8","device9","device10","device11"],k2=[];for(let i=0;i<N2.length;i++){const t=N2[i];k2.push({name:"",id:`pipe${i}`,icon:`/app/scada/assets/industry/${t}.svg`,type:"shape",extends:{inherit:"image"},meta:{width:80,height:80,imageUrl:`/app/scada/assets/industry/${t}.svg`},properties:[]})}const Vv={name:"\u5de5\u4e1a\u7ec4\u4ef6",nameEn:"industry",components:k2},ni={x:35,y:-2},D2=`rotate(-30 ${ni.x} ${ni.y})`,I2=`rotate(-12 ${ni.x} ${ni.y})`,Oc=["capacitor"];for(let i=1;i<21;i++)Oc.push(`electric${i}`);const Ac=[];for(let i=0;i<Oc.length;i++){const t=Oc[i];Ac.push({name:"",id:`electric${i}`,icon:`/app/scada/assets/electric/${t}.svg`,type:"shape",extends:{inherit:"image"},meta:{width:50,height:50,imageUrl:`/app/scada/assets/electric/${t}.svg`},properties:[]})}Ac.push({name:"",id:"electric-switch",icon:"/app/scada/assets/electric/switch.svg",type:"shape",extends:{inherit:"rect"},meta:{width:120,height:130,data:{value:!0},markup:[{tagName:"g",selector:"left-group",children:[{tagName:"rect",selector:"left",groupSelector:"line",attrs:{x:0,y:0}},{tagName:"circle",selector:"lco",groupSelector:"co",attrs:{cx:30}},{tagName:"circle",selector:"lci",groupSelector:"ci",attrs:{cx:30}}]},{tagName:"rect",selector:"switch",groupSelector:"line"},{tagName:"g",selector:"right-group",children:[{tagName:"rect",selector:"right",groupSelector:"line",attrs:{x:70,y:0}},{tagName:"circle",selector:"rco",groupSelector:"co",attrs:{cx:70}},{tagName:"circle",selector:"rci",groupSelector:"ci",attrs:{cx:70}}]}],attrs:{line:{width:30,height:2,fill:"#000",stroke:"#000"},co:{r:8,fill:"#000"},ci:{r:4,fill:"#fff"},switch:{...ni,width:35,transform:D2}}},properties:[]});var V2=[{name:"\u57fa\u7840\u7ec4\u4ef6",nameEn:"base",components:[Ta,Ys,Gs,Ue,{name:"\u4e09\u89d2\u5f62",id:"path",icon:"/app/scada/assets/triangle.svg",type:"shape",meta:{width:100,height:40,path:"M20.5 18.5H4.5L12.5 5.5L20.5 18.5Z"},properties:[]},{name:"\u6587\u672c",id:"text-block",icon:"/app/scada/assets/text.svg",type:"shape",meta:{width:100,height:40,text:"text",attrs:{rect:{fill:"none",stroke:"none",strokeWidth:2},label:{fill:"#333",color:"#444",contenteditable:!0}}},properties:[{name:"\u6587\u672c",path:"attrs/label/text",type:"text"},{name:"\u5b57\u4f53\u989c\u8272",path:"attrs/label/fill",type:"color"},{name:"\u586b\u5145",path:"attrs/rect/fill",type:"color"},{name:"\u8fb9\u6846\u989c\u8272",path:"attrs/rect/stroke",type:"color"},{name:"\u8fb9\u6846\u5bbd\u5ea6",path:"attrs/rect/strokeWidth",type:"stroke"}]},{name:"\u56fe\u7247",id:"image",icon:"/app/scada/assets/image.svg",type:"shape",meta:{width:100,height:80,imageUrl:"/assets/image.svg"},properties:[{name:"\u56fe\u7247",path:"attrs/image/xlink:href",type:"text"}]},{name:"\u6309\u94ae",id:"button",icon:"/app/scada/assets/button.svg",type:"angular",content:Pv},{name:"\u8f93\u5165\u6846",id:"input",icon:"/app/scada/assets/input.svg",type:"angular",content:op},{name:"\u8868\u683c",id:"table",icon:"/app/scada/assets/table.svg",type:"angular",content:hv},{name:"\u65f6\u95f4",id:"time",icon:"/app/scada/assets/time.svg",type:"angular",content:sp},{name:"\u5f00\u5173",id:"switch",icon:"/app/scada/assets/switch.svg",type:"angular",content:Tp},{name:"\u6ed1\u5757",id:"slider",icon:"/app/scada/assets/slider.svg",type:"angular",content:Iv},{name:"\u8fdb\u5ea6\u6761",id:"progress",icon:"/app/scada/assets/progress.svg",type:"angular",content:n5}]},{name:"\u56fe\u8868\u7ec4\u4ef6",nameEn:"chart",components:[{name:"\u67f1\u72b6\u56fe",id:"chart-bar",icon:"/app/scada/assets/chart-bar.svg",type:"angular"},{name:"\u66f2\u7ebf\u56fe",id:"chart-line",icon:"/app/scada/assets/chart-line.svg",type:"angular"},{name:"\u4eea\u8868\u76d8",id:"chart-gauge",icon:"/app/scada/assets/chart-gauge.svg",type:"angular"}]},Vv,{name:"\u7535\u529b\u7ec4\u4ef6",nameEn:"electric",components:Ac}];function L2(i,t,e,n,o,r,a){try{var c=i[r](a),l=c.value}catch(h){return void e(h)}c.done?t(l):Promise.resolve(l).then(n,o)}var Hv=j(9770);class it{transform(t,e=0,n="B",o){if(!(D1(t)&&D1(e)&&e%1==0&&e>=0))return t;let r=t,a=n;for(;"B"!==a;)r*=1024,a=it.formats[a].prev;if(o){const l=I1(it.calculateResult(it.formats[o],r),e);return it.formatResult(l,o)}for(const c in it.formats)if(it.formats.hasOwnProperty(c)){const l=it.formats[c];if(r<l.max){const h=I1(it.calculateResult(l,r),e);return it.formatResult(h,c)}}}static formatResult(t,e){return`${t} ${e}`}static calculateResult(t,e){const n=t.prev?it.formats[t.prev]:void 0;return n?e/n.max:e}}it.formats={B:{max:1024},kB:{max:Math.pow(1024,2),prev:"B"},KB:{max:Math.pow(1024,2),prev:"B"},MB:{max:Math.pow(1024,3),prev:"kB"},GB:{max:Math.pow(1024,4),prev:"MB"},TB:{max:Number.MAX_SAFE_INTEGER,prev:"GB"}},it.\u0275fac=function(t){return new(t||it)},it.\u0275pipe=s.Yjl({name:"nzBytes",type:it,pure:!0});let Ec=(()=>{class i{transform(e,n="px"){let l="px";return["cm","mm","Q","in","pc","pt","px","em","ex","ch","rem","1h","vw","vh","vmin","vmax","%"].some(h=>h===n)&&(l=n),"number"==typeof e?`${e}${l}`:`${e}`}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=s.Yjl({name:"nzToCssUnit",type:i,pure:!0}),i})(),H2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[M.ez]}),i})();const Fv=["nz-modal-close",""];function Rv(i,t){if(1&i&&(s.ynx(0),s._UZ(1,"span",2),s.BQk()),2&i){const e=t.$implicit;s.xp6(1),s.Q6J("nzType",e)}}const B2=["modalElement"];function jv(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",16),s.NdJ("click",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.onCloseClick())}),s.qZA()}}function $v(i,t){if(1&i&&(s.ynx(0),s._UZ(1,"span",17),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("innerHTML",e.config.nzTitle,s.oJD)}}function Yv(i,t){}function Gv(i,t){if(1&i&&s._UZ(0,"div",17),2&i){const e=s.oxw();s.Q6J("innerHTML",e.config.nzContent,s.oJD)}}function Zv(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",18),s.NdJ("click",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.onCancel())}),s._uU(1),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("nzLoading",!!e.config.nzCancelLoading)("disabled",e.config.nzCancelDisabled),s.uIk("cdkFocusInitial","cancel"===e.config.nzAutofocus||null),s.xp6(1),s.hij(" ",e.config.nzCancelText||e.locale.cancelText," ")}}function qv(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",19),s.NdJ("click",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.onOk())}),s._uU(1),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("nzType",e.config.nzOkType)("nzLoading",!!e.config.nzOkLoading)("disabled",e.config.nzOkDisabled)("nzDanger",e.config.nzOkDanger),s.uIk("cdkFocusInitial","ok"===e.config.nzAutofocus||null),s.xp6(1),s.hij(" ",e.config.nzOkText||e.locale.okText," ")}}const Wv=["nz-modal-footer",""];function Uv(i,t){if(1&i&&s._UZ(0,"div",5),2&i){const e=s.oxw(3);s.Q6J("innerHTML",e.config.nzFooter,s.oJD)}}function Jv(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",7),s.NdJ("click",function(){const r=s.CHM(e).$implicit,a=s.oxw(4);return s.KtG(a.onButtonClick(r))}),s._uU(1),s.qZA()}if(2&i){const e=t.$implicit,n=s.oxw(4);s.Q6J("hidden",!n.getButtonCallableProp(e,"show"))("nzLoading",n.getButtonCallableProp(e,"loading"))("disabled",n.getButtonCallableProp(e,"disabled"))("nzType",e.type)("nzDanger",e.danger)("nzShape",e.shape)("nzSize",e.size)("nzGhost",e.ghost),s.xp6(1),s.hij(" ",e.label," ")}}function Qv(i,t){if(1&i&&(s.ynx(0),s.YNc(1,Jv,2,9,"button",6),s.BQk()),2&i){const e=s.oxw(3);s.xp6(1),s.Q6J("ngForOf",e.buttons)}}function Xv(i,t){if(1&i&&(s.ynx(0),s.YNc(1,Uv,1,1,"div",3),s.YNc(2,Qv,2,1,"ng-container",4),s.BQk()),2&i){const e=s.oxw(2);s.xp6(1),s.Q6J("ngIf",!e.buttonsFooter),s.xp6(1),s.Q6J("ngIf",e.buttonsFooter)}}const Kv=function(i,t){return{$implicit:i,modalRef:t}};function ez(i,t){if(1&i&&(s.ynx(0),s.YNc(1,Xv,3,2,"ng-container",2),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("nzStringTemplateOutlet",e.config.nzFooter)("nzStringTemplateOutletContext",s.WLB(2,Kv,e.config.nzComponentParams,e.modalRef))}}function tz(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",10),s.NdJ("click",function(){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onCancel())}),s._uU(1),s.qZA()}if(2&i){const e=s.oxw(2);s.Q6J("nzLoading",!!e.config.nzCancelLoading)("disabled",e.config.nzCancelDisabled),s.uIk("cdkFocusInitial","cancel"===e.config.nzAutofocus||null),s.xp6(1),s.hij(" ",e.config.nzCancelText||e.locale.cancelText," ")}}function nz(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",11),s.NdJ("click",function(){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onOk())}),s._uU(1),s.qZA()}if(2&i){const e=s.oxw(2);s.Q6J("nzType",e.config.nzOkType)("nzDanger",e.config.nzOkDanger)("nzLoading",!!e.config.nzOkLoading)("disabled",e.config.nzOkDisabled),s.uIk("cdkFocusInitial","ok"===e.config.nzAutofocus||null),s.xp6(1),s.hij(" ",e.config.nzOkText||e.locale.okText," ")}}function iz(i,t){if(1&i&&(s.YNc(0,tz,2,4,"button",8),s.YNc(1,nz,2,6,"button",9)),2&i){const e=s.oxw();s.Q6J("ngIf",null!==e.config.nzCancelText),s.xp6(1),s.Q6J("ngIf",null!==e.config.nzOkText)}}const oz=["nz-modal-title",""];function sz(i,t){if(1&i&&(s.ynx(0),s._UZ(1,"div",2),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("innerHTML",e.config.nzTitle,s.oJD)}}function rz(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",9),s.NdJ("click",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.onCloseClick())}),s.qZA()}}function az(i,t){1&i&&s._UZ(0,"div",10)}function cz(i,t){}function lz(i,t){if(1&i&&s._UZ(0,"div",11),2&i){const e=s.oxw();s.Q6J("innerHTML",e.config.nzContent,s.oJD)}}function hz(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",12),s.NdJ("cancelTriggered",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.onCloseClick())})("okTriggered",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.onOkClick())}),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("modalRef",e.modalRef)}}const F2=()=>{};class ii{constructor(){this.nzCentered=!1,this.nzClosable=!0,this.nzOkLoading=!1,this.nzOkDisabled=!1,this.nzCancelDisabled=!1,this.nzCancelLoading=!1,this.nzNoAnimation=!1,this.nzAutofocus="auto",this.nzKeyboard=!0,this.nzZIndex=1e3,this.nzWidth=520,this.nzCloseIcon="close",this.nzOkType="primary",this.nzOkDanger=!1,this.nzModalType="default",this.nzOnCancel=F2,this.nzOnOk=F2,this.nzIconType="question-circle"}}const wr="ant-modal-mask",Mr="modal",uz=new s.OlP("NZ_MODAL_DATA"),R2={modalContainer:(0,A.X$)("modalContainer",[(0,A.SB)("void, exit",(0,A.oB)({})),(0,A.SB)("enter",(0,A.oB)({})),(0,A.eR)("* => enter",(0,A.jt)(".24s",(0,A.oB)({}))),(0,A.eR)("* => void, * => exit",(0,A.jt)(".2s",(0,A.oB)({})))])};function ns(i,t,e){return typeof i>"u"?typeof t>"u"?e:t:i}function j2(){throw Error("Attempting to attach modal content after content is already attached")}let $2=(()=>{class i extends gc{constructor(e,n,o,r,a,c,l,h,u,d){super(),this.ngZone=e,this.host=n,this.focusTrapFactory=o,this.cdr=r,this.render=a,this.overlayRef=c,this.nzConfigService=l,this.config=h,this.animationType=d,this.animationStateChanged=new s.vpe,this.containerClick=new s.vpe,this.cancelTriggered=new s.vpe,this.okTriggered=new s.vpe,this.state="enter",this.isStringContent=!1,this.dir="ltr",this.elementFocusedBeforeModalWasOpened=null,this.mouseDown=!1,this.oldMaskStyle=null,this.destroy$=new H.x,this.document=u,this.dir=c.getDirection(),this.isStringContent="string"==typeof h.nzContent,this.nzConfigService.getConfigChangeEventForComponent(Mr).pipe(N(this.destroy$)).subscribe(()=>{this.updateMaskClassname()})}get showMask(){const e=this.nzConfigService.getConfigForComponent(Mr)||{};return!!ns(this.config.nzMask,e.nzMask,!0)}get maskClosable(){const e=this.nzConfigService.getConfigForComponent(Mr)||{};return!!ns(this.config.nzMaskClosable,e.nzMaskClosable,!0)}onContainerClick(e){e.target===e.currentTarget&&!this.mouseDown&&this.showMask&&this.maskClosable&&this.containerClick.emit()}onCloseClick(){this.cancelTriggered.emit()}onOkClick(){this.okTriggered.emit()}attachComponentPortal(e){return this.portalOutlet.hasAttached()&&j2(),this.savePreviouslyFocusedElement(),this.setZIndexForBackdrop(),this.portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this.portalOutlet.hasAttached()&&j2(),this.savePreviouslyFocusedElement(),this.setZIndexForBackdrop(),this.portalOutlet.attachTemplatePortal(e)}attachStringContent(){this.savePreviouslyFocusedElement(),this.setZIndexForBackdrop()}getNativeElement(){return this.host.nativeElement}animationDisabled(){return this.config.nzNoAnimation||"NoopAnimations"===this.animationType}setModalTransformOrigin(){const e=this.modalElementRef.nativeElement;if(this.elementFocusedBeforeModalWasOpened){const n=this.elementFocusedBeforeModalWasOpened.getBoundingClientRect(),o=N1(this.elementFocusedBeforeModalWasOpened);this.render.setStyle(e,"transform-origin",`${o.left+n.width/2-e.offsetLeft}px ${o.top+n.height/2-e.offsetTop}px 0px`)}}savePreviouslyFocusedElement(){this.focusTrap||(this.focusTrap=this.focusTrapFactory.create(this.host.nativeElement)),this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement,this.host.nativeElement.focus&&this.ngZone.runOutsideAngular(()=>ts(()=>this.host.nativeElement.focus())))}trapFocus(){const e=this.host.nativeElement;if(this.config.nzAutofocus)this.focusTrap.focusInitialElementWhenReady();else{const n=this.document.activeElement;n!==e&&!e.contains(n)&&e.focus()}}restoreFocus(){const e=this.elementFocusedBeforeModalWasOpened;if(e&&"function"==typeof e.focus){const n=this.document.activeElement,o=this.host.nativeElement;(!n||n===this.document.body||n===o||o.contains(n))&&e.focus()}this.focusTrap&&this.focusTrap.destroy()}setEnterAnimationClass(){if(this.animationDisabled())return;this.setModalTransformOrigin();const e=this.modalElementRef.nativeElement,n=this.overlayRef.backdropElement;e.classList.add("ant-zoom-enter"),e.classList.add("ant-zoom-enter-active"),n&&(n.classList.add("ant-fade-enter"),n.classList.add("ant-fade-enter-active"))}setExitAnimationClass(){const e=this.modalElementRef.nativeElement;e.classList.add("ant-zoom-leave"),e.classList.add("ant-zoom-leave-active"),this.setMaskExitAnimationClass()}setMaskExitAnimationClass(e=!1){const n=this.overlayRef.backdropElement;if(n){if(this.animationDisabled()||e)return void n.classList.remove(wr);n.classList.add("ant-fade-leave"),n.classList.add("ant-fade-leave-active")}}cleanAnimationClass(){if(this.animationDisabled())return;const e=this.overlayRef.backdropElement,n=this.modalElementRef.nativeElement;e&&(e.classList.remove("ant-fade-enter"),e.classList.remove("ant-fade-enter-active")),n.classList.remove("ant-zoom-enter"),n.classList.remove("ant-zoom-enter-active"),n.classList.remove("ant-zoom-leave"),n.classList.remove("ant-zoom-leave-active")}setZIndexForBackdrop(){const e=this.overlayRef.backdropElement;e&&Qn(this.config.nzZIndex)&&this.render.setStyle(e,"z-index",this.config.nzZIndex)}bindBackdropStyle(){const e=this.overlayRef.backdropElement;if(e&&(this.oldMaskStyle&&(Object.keys(this.oldMaskStyle).forEach(o=>{this.render.removeStyle(e,o)}),this.oldMaskStyle=null),this.setZIndexForBackdrop(),"object"==typeof this.config.nzMaskStyle&&Object.keys(this.config.nzMaskStyle).length)){const n={...this.config.nzMaskStyle};Object.keys(n).forEach(o=>{this.render.setStyle(e,o,n[o])}),this.oldMaskStyle=n}}updateMaskClassname(){const e=this.overlayRef.backdropElement;e&&(this.showMask?e.classList.add(wr):e.classList.remove(wr))}onAnimationDone(e){"enter"===e.toState?this.trapFocus():"exit"===e.toState&&this.restoreFocus(),this.cleanAnimationClass(),this.animationStateChanged.emit(e)}onAnimationStart(e){"enter"===e.toState?(this.setEnterAnimationClass(),this.bindBackdropStyle()):"exit"===e.toState&&this.setExitAnimationClass(),this.animationStateChanged.emit(e)}startExitAnimation(){this.state="exit",this.cdr.markForCheck()}ngOnDestroy(){this.setMaskExitAnimationClass(!0),this.destroy$.next(),this.destroy$.complete()}setupMouseListeners(e){this.ngZone.runOutsideAngular(()=>{Me(this.host.nativeElement,"mouseup").pipe(N(this.destroy$)).subscribe(()=>{this.mouseDown&&setTimeout(()=>{this.mouseDown=!1})}),Me(e.nativeElement,"mousedown").pipe(N(this.destroy$)).subscribe(()=>{this.mouseDown=!0})})}}return i.\u0275fac=function(e){s.$Z()},i.\u0275dir=s.lG2({type:i,features:[s.qOj]}),i})(),Y2=(()=>{class i{constructor(e){this.config=e}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(ii))},i.\u0275cmp=s.Xpm({type:i,selectors:[["button","nz-modal-close",""]],hostAttrs:["aria-label","Close",1,"ant-modal-close"],exportAs:["NzModalCloseBuiltin"],attrs:Fv,decls:2,vars:1,consts:[[1,"ant-modal-close-x"],[4,"nzStringTemplateOutlet"],["nz-icon","",1,"ant-modal-close-icon",3,"nzType"]],template:function(e,n){1&e&&(s.TgZ(0,"span",0),s.YNc(1,Rv,2,1,"ng-container",1),s.qZA()),2&e&&(s.xp6(1),s.Q6J("nzStringTemplateOutlet",n.config.nzCloseIcon))},dependencies:[Be,pt,De],encapsulation:2,changeDetection:0}),i})(),pz=(()=>{class i extends $2{constructor(e,n,o,r,a,c,l,h,u,d,f){super(e,o,r,a,c,l,h,u,d,f),this.i18n=n,this.config=u,this.cancelTriggered=new s.vpe,this.okTriggered=new s.vpe,this.i18n.localeChange.pipe(N(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Modal")})}ngOnInit(){this.setupMouseListeners(this.modalElementRef)}onCancel(){this.cancelTriggered.emit()}onOk(){this.okTriggered.emit()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.R0b),s.Y36(hn.wi),s.Y36(s.SBq),s.Y36(_4),s.Y36(s.sBO),s.Y36(s.Qsj),s.Y36(br),s.Y36(nt),s.Y36(ii),s.Y36(M.K0,8),s.Y36(s.QbO,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-modal-confirm-container"]],viewQuery:function(e,n){if(1&e&&(s.Gf(Jo,7),s.Gf(B2,7)),2&e){let o;s.iGM(o=s.CRH())&&(n.portalOutlet=o.first),s.iGM(o=s.CRH())&&(n.modalElementRef=o.first)}},hostAttrs:["tabindex","-1","role","dialog"],hostVars:10,hostBindings:function(e,n){1&e&&(s.WFA("@modalContainer.start",function(r){return n.onAnimationStart(r)})("@modalContainer.done",function(r){return n.onAnimationDone(r)}),s.NdJ("click",function(r){return n.onContainerClick(r)})),2&e&&(s.d8E("@.disabled",n.config.nzNoAnimation)("@modalContainer",n.state),s.Tol(n.config.nzWrapClassName?"ant-modal-wrap "+n.config.nzWrapClassName:"ant-modal-wrap"),s.Udp("z-index",n.config.nzZIndex),s.ekj("ant-modal-wrap-rtl","rtl"===n.dir)("ant-modal-centered",n.config.nzCentered))},outputs:{cancelTriggered:"cancelTriggered",okTriggered:"okTriggered"},exportAs:["nzModalConfirmContainer"],features:[s.qOj],decls:17,vars:13,consts:[["role","document",1,"ant-modal",3,"ngClass","ngStyle"],["modalElement",""],[1,"ant-modal-content"],["nz-modal-close","",3,"click",4,"ngIf"],[1,"ant-modal-body",3,"ngStyle"],[1,"ant-modal-confirm-body-wrapper"],[1,"ant-modal-confirm-body"],["nz-icon","",3,"nzType"],[1,"ant-modal-confirm-title"],[4,"nzStringTemplateOutlet"],[1,"ant-modal-confirm-content"],["cdkPortalOutlet",""],[3,"innerHTML",4,"ngIf"],[1,"ant-modal-confirm-btns"],["nz-button","",3,"nzLoading","disabled","click",4,"ngIf"],["nz-button","",3,"nzType","nzLoading","disabled","nzDanger","click",4,"ngIf"],["nz-modal-close","",3,"click"],[3,"innerHTML"],["nz-button","",3,"nzLoading","disabled","click"],["nz-button","",3,"nzType","nzLoading","disabled","nzDanger","click"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0,1),s.ALo(2,"nzToCssUnit"),s.TgZ(3,"div",2),s.YNc(4,jv,1,0,"button",3),s.TgZ(5,"div",4)(6,"div",5)(7,"div",6),s._UZ(8,"span",7),s.TgZ(9,"span",8),s.YNc(10,$v,2,1,"ng-container",9),s.qZA(),s.TgZ(11,"div",10),s.YNc(12,Yv,0,0,"ng-template",11),s.YNc(13,Gv,1,1,"div",12),s.qZA()(),s.TgZ(14,"div",13),s.YNc(15,Zv,2,4,"button",14),s.YNc(16,qv,2,6,"button",15),s.qZA()()()()()),2&e&&(s.Udp("width",s.lcZ(2,11,null==n.config?null:n.config.nzWidth)),s.Q6J("ngClass",n.config.nzClassName)("ngStyle",n.config.nzStyle),s.xp6(4),s.Q6J("ngIf",n.config.nzClosable),s.xp6(1),s.Q6J("ngStyle",n.config.nzBodyStyle),s.xp6(3),s.Q6J("nzType",n.config.nzIconType),s.xp6(2),s.Q6J("nzStringTemplateOutlet",n.config.nzTitle),s.xp6(3),s.Q6J("ngIf",n.isStringContent),s.xp6(2),s.Q6J("ngIf",null!==n.config.nzCancelText),s.xp6(1),s.Q6J("ngIf",null!==n.config.nzOkText))},dependencies:[M.mk,M.O5,M.PC,Be,Jo,qo,pt,Go,De,Y2,Ec],encapsulation:2,data:{animation:[R2.modalContainer]}}),i})(),gz=(()=>{class i{constructor(e,n){this.i18n=e,this.config=n,this.buttonsFooter=!1,this.buttons=[],this.cancelTriggered=new s.vpe,this.okTriggered=new s.vpe,this.destroy$=new H.x,Array.isArray(n.nzFooter)&&(this.buttonsFooter=!0,this.buttons=n.nzFooter.map(mz)),this.i18n.localeChange.pipe(N(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Modal")})}onCancel(){this.cancelTriggered.emit()}onOk(){this.okTriggered.emit()}getButtonCallableProp(e,n){const o=e[n],r=this.modalRef.getContentComponent();return"function"==typeof o?o.apply(e,r&&[r]):o}onButtonClick(e){if(!this.getButtonCallableProp(e,"loading")){const o=this.getButtonCallableProp(e,"onClick");e.autoLoading&&ja(o)&&(e.loading=!0,o.then(()=>e.loading=!1).catch(r=>{throw e.loading=!1,r}))}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(hn.wi),s.Y36(ii))},i.\u0275cmp=s.Xpm({type:i,selectors:[["div","nz-modal-footer",""]],hostAttrs:[1,"ant-modal-footer"],inputs:{modalRef:"modalRef"},outputs:{cancelTriggered:"cancelTriggered",okTriggered:"okTriggered"},exportAs:["NzModalFooterBuiltin"],attrs:Wv,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["defaultFooterButtons",""],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[3,"innerHTML",4,"ngIf"],[4,"ngIf"],[3,"innerHTML"],["nz-button","",3,"hidden","nzLoading","disabled","nzType","nzDanger","nzShape","nzSize","nzGhost","click",4,"ngFor","ngForOf"],["nz-button","",3,"hidden","nzLoading","disabled","nzType","nzDanger","nzShape","nzSize","nzGhost","click"],["nz-button","",3,"nzLoading","disabled","click",4,"ngIf"],["nz-button","",3,"nzType","nzDanger","nzLoading","disabled","click",4,"ngIf"],["nz-button","",3,"nzLoading","disabled","click"],["nz-button","",3,"nzType","nzDanger","nzLoading","disabled","click"]],template:function(e,n){if(1&e&&(s.YNc(0,ez,2,5,"ng-container",0),s.YNc(1,iz,2,2,"ng-template",null,1,s.W1O)),2&e){const o=s.MAs(2);s.Q6J("ngIf",n.config.nzFooter)("ngIfElse",o)}},dependencies:[M.sg,M.O5,Be,qo,pt,Go],encapsulation:2}),i})();function mz(i){return{type:null,size:"default",autoLoading:!0,show:!0,loading:!1,disabled:!1,...i}}let vz=(()=>{class i{constructor(e){this.config=e}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(ii))},i.\u0275cmp=s.Xpm({type:i,selectors:[["div","nz-modal-title",""]],hostAttrs:[1,"ant-modal-header"],exportAs:["NzModalTitleBuiltin"],attrs:oz,decls:2,vars:1,consts:[[1,"ant-modal-title"],[4,"nzStringTemplateOutlet"],[3,"innerHTML"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.YNc(1,sz,2,1,"ng-container",1),s.qZA()),2&e&&(s.xp6(1),s.Q6J("nzStringTemplateOutlet",n.config.nzTitle))},dependencies:[Be],encapsulation:2,changeDetection:0}),i})(),zz=(()=>{class i extends $2{constructor(e,n,o,r,a,c,l,h,u,d){super(e,n,o,r,a,c,l,h,u,d),this.config=h}ngOnInit(){this.setupMouseListeners(this.modalElementRef)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.R0b),s.Y36(s.SBq),s.Y36(_4),s.Y36(s.sBO),s.Y36(s.Qsj),s.Y36(br),s.Y36(nt),s.Y36(ii),s.Y36(M.K0,8),s.Y36(s.QbO,8))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-modal-container"]],viewQuery:function(e,n){if(1&e&&(s.Gf(Jo,7),s.Gf(B2,7)),2&e){let o;s.iGM(o=s.CRH())&&(n.portalOutlet=o.first),s.iGM(o=s.CRH())&&(n.modalElementRef=o.first)}},hostAttrs:["tabindex","-1","role","dialog"],hostVars:10,hostBindings:function(e,n){1&e&&(s.WFA("@modalContainer.start",function(r){return n.onAnimationStart(r)})("@modalContainer.done",function(r){return n.onAnimationDone(r)}),s.NdJ("click",function(r){return n.onContainerClick(r)})),2&e&&(s.d8E("@.disabled",n.config.nzNoAnimation)("@modalContainer",n.state),s.Tol(n.config.nzWrapClassName?"ant-modal-wrap "+n.config.nzWrapClassName:"ant-modal-wrap"),s.Udp("z-index",n.config.nzZIndex),s.ekj("ant-modal-wrap-rtl","rtl"===n.dir)("ant-modal-centered",n.config.nzCentered))},exportAs:["nzModalContainer"],features:[s.qOj],decls:10,vars:11,consts:[["role","document",1,"ant-modal",3,"ngClass","ngStyle"],["modalElement",""],[1,"ant-modal-content"],["nz-modal-close","",3,"click",4,"ngIf"],["nz-modal-title","",4,"ngIf"],[1,"ant-modal-body",3,"ngStyle"],["cdkPortalOutlet",""],[3,"innerHTML",4,"ngIf"],["nz-modal-footer","",3,"modalRef","cancelTriggered","okTriggered",4,"ngIf"],["nz-modal-close","",3,"click"],["nz-modal-title",""],[3,"innerHTML"],["nz-modal-footer","",3,"modalRef","cancelTriggered","okTriggered"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0,1),s.ALo(2,"nzToCssUnit"),s.TgZ(3,"div",2),s.YNc(4,rz,1,0,"button",3),s.YNc(5,az,1,0,"div",4),s.TgZ(6,"div",5),s.YNc(7,cz,0,0,"ng-template",6),s.YNc(8,lz,1,1,"div",7),s.qZA(),s.YNc(9,hz,1,1,"div",8),s.qZA()()),2&e&&(s.Udp("width",s.lcZ(2,9,null==n.config?null:n.config.nzWidth)),s.Q6J("ngClass",n.config.nzClassName)("ngStyle",n.config.nzStyle),s.xp6(4),s.Q6J("ngIf",n.config.nzClosable),s.xp6(1),s.Q6J("ngIf",n.config.nzTitle),s.xp6(1),s.Q6J("ngStyle",n.config.nzBodyStyle),s.xp6(2),s.Q6J("ngIf",n.isStringContent),s.xp6(1),s.Q6J("ngIf",null!==n.config.nzFooter))},dependencies:[M.mk,M.O5,M.PC,Jo,Y2,gz,vz,Ec],encapsulation:2,data:{animation:[R2.modalContainer]}}),i})();class G2{constructor(t,e,n){this.overlayRef=t,this.config=e,this.containerInstance=n,this.componentInstance=null,this.state=0,this.afterClose=new H.x,this.afterOpen=new H.x,this.destroy$=new H.x,n.animationStateChanged.pipe((0,Y.h)(o=>"done"===o.phaseName&&"enter"===o.toState),(0,Ft.q)(1)).subscribe(()=>{this.afterOpen.next(),this.afterOpen.complete(),e.nzAfterOpen instanceof s.vpe&&e.nzAfterOpen.emit()}),n.animationStateChanged.pipe((0,Y.h)(o=>"done"===o.phaseName&&"exit"===o.toState),(0,Ft.q)(1)).subscribe(()=>{clearTimeout(this.closeTimeout),this._finishDialogClose()}),n.containerClick.pipe((0,Ft.q)(1),N(this.destroy$)).subscribe(()=>{!this.config.nzCancelLoading&&!this.config.nzOkLoading&&this.trigger("cancel")}),t.keydownEvents().pipe((0,Y.h)(o=>this.config.nzKeyboard&&!this.config.nzCancelLoading&&!this.config.nzOkLoading&&27===o.keyCode&&!jo(o))).subscribe(o=>{o.preventDefault(),this.trigger("cancel")}),n.cancelTriggered.pipe(N(this.destroy$)).subscribe(()=>this.trigger("cancel")),n.okTriggered.pipe(N(this.destroy$)).subscribe(()=>this.trigger("ok")),t.detachments().subscribe(()=>{this.afterClose.next(this.result),this.afterClose.complete(),e.nzAfterClose instanceof s.vpe&&e.nzAfterClose.emit(this.result),this.componentInstance=null,this.overlayRef.dispose()})}getContentComponent(){return this.componentInstance}getElement(){return this.containerInstance.getNativeElement()}destroy(t){this.close(t)}triggerOk(){return this.trigger("ok")}triggerCancel(){return this.trigger("cancel")}close(t){0===this.state&&(this.result=t,this.containerInstance.animationStateChanged.pipe((0,Y.h)(e=>"start"===e.phaseName),(0,Ft.q)(1)).subscribe(e=>{this.overlayRef.detachBackdrop(),this.closeTimeout=setTimeout(()=>{this._finishDialogClose()},e.totalTime+100)}),this.containerInstance.startExitAnimation(),this.state=1)}updateConfig(t){Object.assign(this.config,t),this.containerInstance.bindBackdropStyle(),this.containerInstance.cdr.markForCheck()}getState(){return this.state}getConfig(){return this.config}getBackdropElement(){return this.overlayRef.backdropElement}trigger(t){var e=this;return function Lv(i){return function(){var t=this,e=arguments;return new Promise(function(n,o){var r=i.apply(t,e);function a(l){L2(r,n,o,a,c,"next",l)}function c(l){L2(r,n,o,a,c,"throw",l)}a(void 0)})}}(function*(){if(1===e.state)return;const n={ok:e.config.nzOnOk,cancel:e.config.nzOnCancel}[t],o={ok:"nzOkLoading",cancel:"nzCancelLoading"}[t];if(!e.config[o])if(n instanceof s.vpe)n.emit(e.getContentComponent());else if("function"==typeof n){const a=n(e.getContentComponent());if(ja(a)){e.config[o]=!0;let c=!1;try{c=yield a}finally{e.config[o]=!1,e.closeWhitResult(c)}}else e.closeWhitResult(a)}})()}closeWhitResult(t){!1!==t&&this.close(t)}_finishDialogClose(){this.state=2,this.overlayRef.dispose(),this.destroy$.next()}}let Nc=(()=>{class i{constructor(e,n,o,r,a){this.overlay=e,this.injector=n,this.nzConfigService=o,this.parentModal=r,this.directionality=a,this.openModalsAtThisLevel=[],this.afterAllClosedAtThisLevel=new H.x,this.afterAllClose=(0,Hv.P)(()=>this.openModals.length?this._afterAllClosed:this._afterAllClosed.pipe((0,Q.O)(void 0)))}get openModals(){return this.parentModal?this.parentModal.openModals:this.openModalsAtThisLevel}get _afterAllClosed(){const e=this.parentModal;return e?e._afterAllClosed:this.afterAllClosedAtThisLevel}create(e){return this.open(e.nzContent,e)}closeAll(){this.closeModals(this.openModals)}confirm(e={},n="confirm"){return"nzFooter"in e&&(0,Ai.ZK)('The Confirm-Modal doesn\'t support "nzFooter", this property will be ignored.'),"nzWidth"in e||(e.nzWidth=416),"nzMaskClosable"in e||(e.nzMaskClosable=!1),e.nzModalType="confirm",e.nzClassName=`ant-modal-confirm ant-modal-confirm-${n} ${e.nzClassName||""}`,this.create(e)}info(e={}){return this.confirmFactory(e,"info")}success(e={}){return this.confirmFactory(e,"success")}error(e={}){return this.confirmFactory(e,"error")}warning(e={}){return this.confirmFactory(e,"warning")}open(e,n){const o=function dz(i,t){return{...t,...i}}(n||{},new ii),r=this.createOverlay(o),a=this.attachModalContainer(r,o),c=this.attachModalContent(e,a,r,o);return a.modalRef=c,this.openModals.push(c),c.afterClose.subscribe(()=>this.removeOpenModal(c)),c}removeOpenModal(e){const n=this.openModals.indexOf(e);n>-1&&(this.openModals.splice(n,1),this.openModals.length||this._afterAllClosed.next())}closeModals(e){let n=e.length;for(;n--;)e[n].close(),this.openModals.length||this._afterAllClosed.next()}createOverlay(e){const n=this.nzConfigService.getConfigForComponent(Mr)||{},o=new zc({hasBackdrop:!0,scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.overlay.position().global(),disposeOnNavigation:ns(e.nzCloseOnNavigation,n.nzCloseOnNavigation,!0),direction:ns(e.nzDirection,n.nzDirection,this.directionality.value)});return ns(e.nzMask,n.nzMask,!0)&&(o.backdropClass=wr),this.overlay.create(o)}attachModalContainer(e,n){const r=s.zs3.create({parent:n&&n.nzViewContainerRef&&n.nzViewContainerRef.injector||this.injector,providers:[{provide:br,useValue:e},{provide:ii,useValue:n}]}),c=new Wo("confirm"===n.nzModalType?pz:zz,n.nzViewContainerRef,r);return e.attach(c).instance}attachModalContent(e,n,o,r){const a=new G2(o,r,n);if(e instanceof s.Rgc)n.attachTemplatePortal(new Uo(e,null,{$implicit:r.nzData||r.nzComponentParams,modalRef:a}));else if(Qn(e)&&"string"!=typeof e){const c=this.createInjector(a,r),l=n.attachComponentPortal(new Wo(e,r.nzViewContainerRef,c));(function fz(i,t){Object.assign(i,t)})(l.instance,r.nzComponentParams),a.componentInstance=l.instance}else n.attachStringContent();return a}createInjector(e,n){return s.zs3.create({parent:n&&n.nzViewContainerRef&&n.nzViewContainerRef.injector||this.injector,providers:[{provide:G2,useValue:e},{provide:uz,useValue:n.nzData}]})}confirmFactory(e={},n){return"nzIconType"in e||(e.nzIconType={info:"info-circle",success:"check-circle",error:"close-circle",warning:"exclamation-circle"}[n]),"nzCancelText"in e||(e.nzCancelText=null),this.confirm(e,n)}ngOnDestroy(){this.closeModals(this.openModalsAtThisLevel),this.afterAllClosedAtThisLevel.complete()}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(Li),s.LFG(s.zs3),s.LFG(nt),s.LFG(i,12),s.LFG(ge,8))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})(),bz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[Nc],imports:[M.ez,we,Xo,St,mc,hn.YI,Vi,at,H2,es,H2]}),i})();const yz=function(i){return{close:i}},Cz=["*"];let Z2=(()=>{class i{constructor(){this.open=!0,this.title="\u6807\u9898"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-collapse"]],inputs:{open:"open",title:"title"},ngContentSelectors:Cz,decls:6,vars:5,consts:[[1,"header",3,"click"],["nz-icon","","nzTheme","outline",3,"nzType"],[1,"content",3,"ngClass"],[1,"inner"]],template:function(e,n){1&e&&(s.F$t(),s.TgZ(0,"div",0),s.NdJ("click",function(){return n.open=!n.open}),s._UZ(1,"span",1),s._uU(2),s.qZA(),s.TgZ(3,"div",2)(4,"div",3),s.Hsn(5),s.qZA()()),2&e&&(s.xp6(1),s.Q6J("nzType",n.open?"caret-up":"caret-down"),s.xp6(1),s.hij(" ",n.title,"\n"),s.xp6(1),s.Q6J("ngClass",s.VKq(3,yz,!n.open)))},dependencies:[M.mk,De,pt],styles:[".header[_ngcontent-%COMP%]{border-top:1px solid #a8a8a8;border-bottom:1px solid #a8a8a8;padding:4px;background-color:#f0f0f0;cursor:pointer;font-weight:700;font-size:1.1em}.content[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{padding:4px}.content.close[_ngcontent-%COMP%]{height:0;max-height:0;overflow:hidden}"]}),i})();function _z(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",2),s.NdJ("click",function(){const r=s.CHM(e).$implicit,a=s.oxw();return s.KtG(a.onClick(r))})("dragstart",function(o){const a=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onDragStart(o,a))}),s._UZ(1,"img",3),s.TgZ(2,"div",4),s._uU(3),s.qZA()()}if(2&i){const e=t.$implicit;s.xp6(1),s.Q6J("src",e.icon||"/assets/component.svg",s.LSH),s.xp6(2),s.Oqu(e.name)}}let xz=(()=>{class i{constructor(){this.onDraw=new s.vpe,this.open=!0}onDragStart(e,n){this.onDraw.emit({event:e,component:n})}onClick(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-collection"]],inputs:{data:"data"},outputs:{onDraw:"onDraw"},decls:2,vars:2,consts:[[3,"title"],["class","item",3,"click","dragstart",4,"ngFor","ngForOf"],[1,"item",3,"click","dragstart"],[1,"icon",3,"src"],[1,"name"]],template:function(e,n){1&e&&(s.TgZ(0,"app-collapse",0),s.YNc(1,_z,4,2,"div",1),s.qZA()),2&e&&(s.Q6J("title",n.data.name),s.xp6(1),s.Q6J("ngForOf",n.data.components))},dependencies:[M.sg,Z2],styles:[".item[_ngcontent-%COMP%]{display:inline-block;text-align:center;padding:4px;cursor:pointer}.item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:30px;height:30px}"]}),i})();function wz(i,t){1&i&&s._UZ(0,"span",7)}function Mz(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",8),s.NdJ("click",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.more())}),s._uU(1,"\u66f4\u591a"),s.qZA()}}function Sz(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"app-collection",9),s.NdJ("onDraw",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onDrag.emit(o))}),s.qZA()}2&i&&s.Q6J("data",t.$implicit)}let Tz=(()=>{class i{constructor(e,n){this.modal=e,this.viewContainerRef=n,this.onDrag=new s.vpe,this.onDrawLine=new s.vpe,this.collections=V2}handleClick(){}more(){}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(Nc),s.Y36(s.s_b))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-library"]],outputs:{onDrag:"onDrag",onDrawLine:"onDrawLine"},decls:9,vars:3,consts:[[1,"header"],["nzSearch","",3,"nzSuffix","nzAddOnAfter"],["type","text","nz-input","","placeholder","\u63a7\u4ef6\u540d\u79f0"],["suffixIconSearch",""],["suffixIconButton",""],[1,"collections"],[3,"data","onDraw",4,"ngFor","ngForOf"],["nz-icon","","nzType","search"],["nz-button","",3,"click"],[3,"data","onDraw"]],template:function(e,n){if(1&e&&(s.TgZ(0,"div",0)(1,"nz-input-group",1),s._UZ(2,"input",2),s.qZA(),s.YNc(3,wz,1,0,"ng-template",null,3,s.W1O),s.YNc(5,Mz,2,0,"ng-template",null,4,s.W1O),s.qZA(),s.TgZ(7,"div",5),s.YNc(8,Sz,1,1,"app-collection",6),s.qZA()),2&e){const o=s.MAs(4),r=s.MAs(6);s.xp6(1),s.Q6J("nzSuffix",o)("nzAddOnAfter",r),s.xp6(7),s.Q6J("ngForOf",n.collections)}},dependencies:[M.sg,De,qo,pt,Go,Pi,ip,np,xz],styles:["[_nghost-%COMP%]{height:100%;width:200px;overflow:hidden;-webkit-user-select:none;user-select:none;border-right:1px solid #a8a8a8;position:relative;display:flex;flex-direction:column}.header[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:5px}.collections[_ngcontent-%COMP%]{flex:1;overflow:auto}.more-btn[_ngcontent-%COMP%]{width:100%;text-align:center;position:absolute;bottom:0}"]}),i})();j(5460);class yt{get disposed(){return!0===this._disposed}dispose(){this._disposed=!0}}(yt||(yt={})).dispose=function t(){return(e,n,o)=>{const r=o.value,a=e.__proto__;o.value=function(){this.disposed||(r.call(this),a.dispose.call(this))}}};class q2{constructor(){this.isDisposed=!1,this.items=new Set}get disposed(){return this.isDisposed}dispose(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(t=>{t.dispose()}),this.items.clear())}contains(t){return this.items.has(t)}add(t){this.items.add(t)}remove(t){this.items.delete(t)}clear(){this.items.clear()}}var i;(i=q2||(q2={})).from=function t(e){const n=new i;return e.forEach(o=>{n.add(o)}),n};const Ie=function Oz(i){var t=typeof i;return null!=i&&("object"==t||"function"==t)},W2="object"==typeof global&&global&&global.Object===Object&&global;var Ez="object"==typeof self&&self&&self.Object===Object&&self;const Rt=W2||Ez||Function("return this")(),kc=function(){return Rt.Date.now()};var Dz=/\s/;var Vz=/^\s+/;const Hz=function Lz(i){return i&&i.slice(0,function Iz(i){for(var t=i.length;t--&&Dz.test(i.charAt(t)););return t}(i)+1).replace(Vz,"")},kt=Rt.Symbol;var U2=Object.prototype,Fz=U2.hasOwnProperty,Rz=U2.toString,is=kt?kt.toStringTag:void 0;var Gz=Object.prototype.toString;var J2=kt?kt.toStringTag:void 0;const Tn=function Jz(i){return null==i?void 0===i?"[object Undefined]":"[object Null]":J2&&J2 in Object(i)?function jz(i){var t=Fz.call(i,is),e=i[is];try{i[is]=void 0;var n=!0}catch{}var o=Rz.call(i);return n&&(t?i[is]=e:delete i[is]),o}(i):function Zz(i){return Gz.call(i)}(i)},jt=function Qz(i){return null!=i&&"object"==typeof i};const Wt=function Kz(i){return"symbol"==typeof i||jt(i)&&"[object Symbol]"==Tn(i)};var eb=/^[-+]0x[0-9a-f]+$/i,tb=/^0b[01]+$/i,nb=/^0o[0-7]+$/i,ib=parseInt;const os=function ob(i){if("number"==typeof i)return i;if(Wt(i))return NaN;if(Ie(i)){var t="function"==typeof i.valueOf?i.valueOf():i;i=Ie(t)?t+"":t}if("string"!=typeof i)return 0===i?i:+i;i=Hz(i);var e=tb.test(i);return e||nb.test(i)?ib(i.slice(2),e?2:8):eb.test(i)?NaN:+i};var rb=Math.max,ab=Math.min;const Dc=function cb(i,t,e){var n,o,r,a,c,l,h=0,u=!1,d=!1,f=!0;if("function"!=typeof i)throw new TypeError("Expected a function");function p(w){var O=n,P=o;return n=o=void 0,h=w,a=i.apply(P,O)}function v(w){var O=w-l;return void 0===l||O>=t||O<0||d&&w-h>=r}function b(){var w=kc();if(v(w))return y(w);c=setTimeout(b,function m(w){var E=t-(w-l);return d?ab(E,r-(w-h)):E}(w))}function y(w){return c=void 0,f&&n?p(w):(n=o=void 0,a)}function x(){var w=kc(),O=v(w);if(n=arguments,o=this,l=w,O){if(void 0===c)return function g(w){return h=w,c=setTimeout(b,t),u?p(w):a}(l);if(d)return clearTimeout(c),c=setTimeout(b,t),p(l)}return void 0===c&&(c=setTimeout(b,t)),a}return t=os(t)||0,Ie(e)&&(u=!!e.leading,r=(d="maxWait"in e)?rb(os(e.maxWait)||0,t):r,f="trailing"in e?!!e.trailing:f),x.cancel=function z(){void 0!==c&&clearTimeout(c),h=0,n=l=o=c=void 0},x.flush=function C(){return void 0===c?a:y(kc())},x};function X2(i,t,e){if(e)switch(e.length){case 0:return i.call(t);case 1:return i.call(t,e[0]);case 2:return i.call(t,e[0],e[1]);case 3:return i.call(t,e[0],e[1],e[2]);case 4:return i.call(t,e[0],e[1],e[2],e[3]);case 5:return i.call(t,e[0],e[1],e[2],e[3],e[4]);case 6:return i.call(t,e[0],e[1],e[2],e[3],e[4],e[5]);default:return i.apply(t,e)}return i.call(t)}function Z(i,t,...e){return X2(i,t,e)}function Ic(i){return null!=i&&(i instanceof Promise||function db(i){return"object"==typeof i&&i.then&&"function"==typeof i.then}(i))}function Pc(...i){const t=[];if(i.forEach(n=>{Array.isArray(n)?t.push(...n):t.push(n)}),t.some(n=>Ic(n))){const n=t.map(o=>Ic(o)?o:Promise.resolve(!1!==o));return Promise.all(n).then(o=>o.reduce((r,a)=>!1!==a&&r,!0))}return t.every(n=>!1!==n)}function Vc(i,t){const e=[];for(let n=0;n<i.length;n+=2){const c=X2(i[n],i[n+1],Array.isArray(t)?t:[t]);e.push(c)}return Pc(e)}class pb{constructor(){this.listeners={}}on(t,e,n){return null==e||(this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e,n)),this}once(t,e,n){const o=(...r)=>(this.off(t,o),Vc([e,n],r));return this.on(t,o,this)}off(t,e,n){if(!(t||e||n))return this.listeners={},this;const o=this.listeners;return(t?[t]:Object.keys(o)).forEach(a=>{const c=o[a];if(c){if(!e&&!n)return void delete o[a];for(let l=c.length-2;l>=0;l-=2)e&&c[l]!==e||n&&c[l+1]!==n||c.splice(l,2)}}),this}trigger(t,...e){let n=!0;if("*"!==t){const r=this.listeners[t];null!=r&&(n=Vc([...r],e))}const o=this.listeners["*"];return null!=o?Pc([n,Vc([...o],[t,...e])]):n}emit(t,...e){return this.trigger(t,...e)}}var mb=Object.prototype.hasOwnProperty;const zb=function vb(i,t){return null!=i&&mb.call(i,t)},ht=Array.isArray;var yb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cb=/^\w*$/;const Lc=function _b(i,t){if(ht(i))return!1;var e=typeof i;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=i&&!Wt(i))||Cb.test(i)||!yb.test(i)||null!=t&&i in Object(t)};const Hc=function Tb(i){if(!Ie(i))return!1;var t=Tn(i);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Bc=Rt["__core-js_shared__"];var K2=function(){var i=/[^.]+$/.exec(Bc&&Bc.keys&&Bc.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();var kb=Function.prototype.toString;const oi=function Db(i){if(null!=i){try{return kb.call(i)}catch{}try{return i+""}catch{}}return""};var Pb=/^\[object .+?Constructor\]$/,Fb=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const jb=function Rb(i){return!(!Ie(i)||function Ab(i){return!!K2&&K2 in i}(i))&&(Hc(i)?Fb:Pb).test(oi(i))},si=function Gb(i,t){var e=function $b(i,t){return i?.[t]}(i,t);return jb(e)?e:void 0},ss=si(Object,"create");var Kb=Object.prototype.hasOwnProperty;var iy=Object.prototype.hasOwnProperty;function Ri(i){var t=-1,e=null==i?0:i.length;for(this.clear();++t<e;){var n=i[t];this.set(n[0],n[1])}}Ri.prototype.clear=function qb(){this.__data__=ss?ss(null):{},this.size=0},Ri.prototype.delete=function Ub(i){var t=this.has(i)&&delete this.__data__[i];return this.size-=t?1:0,t},Ri.prototype.get=function ey(i){var t=this.__data__;if(ss){var e=t[i];return"__lodash_hash_undefined__"===e?void 0:e}return Kb.call(t,i)?t[i]:void 0},Ri.prototype.has=function oy(i){var t=this.__data__;return ss?void 0!==t[i]:iy.call(t,i)},Ri.prototype.set=function ay(i,t){var e=this.__data__;return this.size+=this.has(i)?0:1,e[i]=ss&&void 0===t?"__lodash_hash_undefined__":t,this};const e3=Ri,ji=function uy(i,t){return i===t||i!=i&&t!=t},Sr=function dy(i,t){for(var e=i.length;e--;)if(ji(i[e][0],t))return e;return-1};var py=Array.prototype.splice;function $i(i){var t=-1,e=null==i?0:i.length;for(this.clear();++t<e;){var n=i[t];this.set(n[0],n[1])}}$i.prototype.clear=function ly(){this.__data__=[],this.size=0},$i.prototype.delete=function gy(i){var t=this.__data__,e=Sr(t,i);return!(e<0||(e==t.length-1?t.pop():py.call(t,e,1),--this.size,0))},$i.prototype.get=function vy(i){var t=this.__data__,e=Sr(t,i);return e<0?void 0:t[e][1]},$i.prototype.has=function by(i){return Sr(this.__data__,i)>-1},$i.prototype.set=function Cy(i,t){var e=this.__data__,n=Sr(e,i);return n<0?(++this.size,e.push([i,t])):e[n][1]=t,this};const Tr=$i,rs=si(Rt,"Map"),Or=function Oy(i,t){var e=i.__data__;return function Sy(i){var t=typeof i;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==i:null===i}(t)?e["string"==typeof t?"string":"hash"]:e.map};function Yi(i){var t=-1,e=null==i?0:i.length;for(this.clear();++t<e;){var n=i[t];this.set(n[0],n[1])}}Yi.prototype.clear=function wy(){this.size=0,this.__data__={hash:new e3,map:new(rs||Tr),string:new e3}},Yi.prototype.delete=function Ay(i){var t=Or(this,i).delete(i);return this.size-=t?1:0,t},Yi.prototype.get=function Ny(i){return Or(this,i).get(i)},Yi.prototype.has=function Dy(i){return Or(this,i).has(i)},Yi.prototype.set=function Py(i,t){var e=Or(this,i),n=e.size;return e.set(i,t),this.size+=e.size==n?0:1,this};const Ar=Yi;var Ly="Expected a function";function Fc(i,t){if("function"!=typeof i||null!=t&&"function"!=typeof t)throw new TypeError(Ly);var e=function(){var n=arguments,o=t?t.apply(this,n):n[0],r=e.cache;if(r.has(o))return r.get(o);var a=i.apply(this,n);return e.cache=r.set(o,a)||r,a};return e.cache=new(Fc.Cache||Ar),e}Fc.Cache=Ar;const Hy=Fc;var jy=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$y=/\\(\\)?/g,Yy=function Fy(i){var t=Hy(i,function(n){return 500===e.size&&e.clear(),n}),e=t.cache;return t}(function(i){var t=[];return 46===i.charCodeAt(0)&&t.push(""),i.replace(jy,function(e,n,o,r){t.push(o?r.replace($y,"$1"):n||e)}),t});const Gy=Yy,as=function Zy(i,t){for(var e=-1,n=null==i?0:i.length,o=Array(n);++e<n;)o[e]=t(i[e],e,i);return o};var t3=kt?kt.prototype:void 0,n3=t3?t3.toString:void 0;const Wy=function o3(i){if("string"==typeof i)return i;if(ht(i))return as(i,o3)+"";if(Wt(i))return n3?n3.call(i):"";var t=i+"";return"0"==t&&1/i==-Infinity?"-0":t},Gi=function Uy(i){return null==i?"":Wy(i)},Er=function Jy(i,t){return ht(i)?i:Lc(i,t)?[i]:Gy(Gi(i))};const s3=function Xy(i){return jt(i)&&"[object Arguments]"==Tn(i)};var r3=Object.prototype,Ky=r3.hasOwnProperty,eC=r3.propertyIsEnumerable,tC=s3(function(){return arguments}())?s3:function(i){return jt(i)&&Ky.call(i,"callee")&&!eC.call(i,"callee")};const Zi=tC;var iC=/^(?:0|[1-9]\d*)$/;const Nr=function oC(i,t){var e=typeof i;return!!(t=t??9007199254740991)&&("number"==e||"symbol"!=e&&iC.test(i))&&i>-1&&i%1==0&&i<t};const Rc=function rC(i){return"number"==typeof i&&i>-1&&i%1==0&&i<=9007199254740991};const cs=function cC(i){if("string"==typeof i||Wt(i))return i;var t=i+"";return"0"==t&&1/i==-Infinity?"-0":t},a3=function lC(i,t,e){for(var n=-1,o=(t=Er(t,i)).length,r=!1;++n<o;){var a=cs(t[n]);if(!(r=null!=i&&e(i,a)))break;i=i[a]}return r||++n!=o?r:!!(o=null==i?0:i.length)&&Rc(o)&&Nr(a,o)&&(ht(i)||Zi(i))},kr=function hC(i,t){return null!=i&&a3(i,t,zb)},Dr=function uC(i,t){for(var e=0,n=(t=Er(t,i)).length;null!=i&&e<n;)i=i[cs(t[e++])];return e&&e==n?i:void 0};var dC=function(){try{var i=si(Object,"defineProperty");return i({},"",{}),i}catch{}}();const Ir=dC,Pr=function fC(i,t,e){"__proto__"==t&&Ir?Ir(i,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):i[t]=e};var gC=Object.prototype.hasOwnProperty;const jc=function mC(i,t,e){var n=i[t];(!gC.call(i,t)||!ji(n,e)||void 0===e&&!(t in i))&&Pr(i,t,e)},zC=function vC(i,t,e,n){if(!Ie(i))return i;for(var o=-1,r=(t=Er(t,i)).length,a=r-1,c=i;null!=c&&++o<r;){var l=cs(t[o]),h=e;if("__proto__"===l||"constructor"===l||"prototype"===l)return i;if(o!=a){var u=c[l];void 0===(h=n?n(u,l,c):void 0)&&(h=Ie(u)?u:Nr(t[o+1])?[]:{})}jc(c,l,h),c=c[l]}return i},_C=function CC(i,t){return null!=i&&t in Object(i)},c3=function xC(i,t){return null!=i&&a3(i,t,_C)},MC=function wC(i,t){return function bC(i,t,e){for(var n=-1,o=t.length,r={};++n<o;){var a=t[n],c=Dr(i,a);e(c,a)&&zC(r,Er(a,i),c)}return r}(i,t,function(e,n){return c3(i,n)})},$c=function SC(i,t){for(var e=-1,n=t.length,o=i.length;++e<n;)i[o+e]=t[e];return i};var l3=kt?kt.isConcatSpreadable:void 0;const OC=function TC(i){return ht(i)||Zi(i)||!!(l3&&i&&i[l3])},Vr=function h3(i,t,e,n,o){var r=-1,a=i.length;for(e||(e=OC),o||(o=[]);++r<a;){var c=i[r];t>0&&e(c)?t>1?h3(c,t-1,e,n,o):$c(o,c):n||(o[o.length]=c)}return o},EC=function AC(i){return null!=i&&i.length?Vr(i,1):[]},u3=function NC(i,t,e){switch(e.length){case 0:return i.call(t);case 1:return i.call(t,e[0]);case 2:return i.call(t,e[0],e[1]);case 3:return i.call(t,e[0],e[1],e[2])}return i.apply(t,e)};var d3=Math.max;const f3=function kC(i,t,e){return t=d3(void 0===t?i.length-1:t,0),function(){for(var n=arguments,o=-1,r=d3(n.length-t,0),a=Array(r);++o<r;)a[o]=n[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=n[o];return c[t]=e(a),u3(i,this,c)}},IC=function DC(i){return function(){return i}},qi=function PC(i){return i};var VC=Ir?function(i,t){return Ir(i,"toString",{configurable:!0,enumerable:!1,value:IC(t),writable:!0})}:qi,HC=800,BC=16,FC=Date.now,jC=function RC(i){var t=0,e=0;return function(){var n=FC(),o=BC-(n-e);if(e=n,o>0){if(++t>=HC)return arguments[0]}else t=0;return i.apply(void 0,arguments)}}(VC);const p3=jC;var YC=function $C(i){return p3(f3(i,void 0,EC),i+"")}(function(i,t){return null==i?{}:MC(i,t)});const g3=YC;function Wi(i){var t=this.__data__=new Tr(i);this.size=t.size}Wi.prototype.clear=function GC(){this.__data__=new Tr,this.size=0},Wi.prototype.delete=function qC(i){var t=this.__data__,e=t.delete(i);return this.size=t.size,e},Wi.prototype.get=function UC(i){return this.__data__.get(i)},Wi.prototype.has=function QC(i){return this.__data__.has(i)},Wi.prototype.set=function e_(i,t){var e=this.__data__;if(e instanceof Tr){var n=e.__data__;if(!rs||n.length<199)return n.push([i,t]),this.size=++e.size,this;e=this.__data__=new Ar(n)}return e.set(i,t),this.size=e.size,this};const Ui=Wi,Yc=function n_(i,t,e){(void 0!==e&&!ji(i[t],e)||void 0===e&&!(t in i))&&Pr(i,t,e)};var o_=function i_(i){return function(t,e,n){for(var o=-1,r=Object(t),a=n(t),c=a.length;c--;){var l=a[i?c:++o];if(!1===e(r[l],l,r))break}return t}}();const m3=o_;var v3="object"==typeof exports&&exports&&!exports.nodeType&&exports,z3=v3&&"object"==typeof module&&module&&!module.nodeType&&module,b3=z3&&z3.exports===v3?Rt.Buffer:void 0,y3=b3?b3.allocUnsafe:void 0;const C3=function r_(i,t){if(t)return i.slice();var e=i.length,n=y3?y3(e):new i.constructor(e);return i.copy(n),n},Lr=Rt.Uint8Array,Gc=function c_(i){var t=new i.constructor(i.byteLength);return new Lr(t).set(new Lr(i)),t},_3=function l_(i,t){var e=t?Gc(i.buffer):i.buffer;return new i.constructor(e,i.byteOffset,i.length)},x3=function h_(i,t){var e=-1,n=i.length;for(t||(t=Array(n));++e<n;)t[e]=i[e];return t};var w3=Object.create,u_=function(){function i(){}return function(t){if(!Ie(t))return{};if(w3)return w3(t);i.prototype=t;var e=new i;return i.prototype=void 0,e}}();const d_=u_,M3=function f_(i,t){return function(e){return i(t(e))}},Zc=M3(Object.getPrototypeOf,Object);var g_=Object.prototype;const Hr=function m_(i){var t=i&&i.constructor;return i===("function"==typeof t&&t.prototype||g_)},S3=function v_(i){return"function"!=typeof i.constructor||Hr(i)?{}:d_(Zc(i))},ri=function z_(i){return null!=i&&Rc(i.length)&&!Hc(i)},Br=function b_(i){return jt(i)&&ri(i)};var T3="object"==typeof exports&&exports&&!exports.nodeType&&exports,O3=T3&&"object"==typeof module&&module&&!module.nodeType&&module,A3=O3&&O3.exports===T3?Rt.Buffer:void 0;const Ji=(A3?A3.isBuffer:void 0)||function y_(){return!1};var E3=Function.prototype.toString,O_=Object.prototype.hasOwnProperty,A_=E3.call(Object);const Ut=function E_(i){if(!jt(i)||"[object Object]"!=Tn(i))return!1;var t=Zc(i);if(null===t)return!0;var e=O_.call(t,"constructor")&&t.constructor;return"function"==typeof e&&e instanceof e&&E3.call(e)==A_};var Te={};Te["[object Float32Array]"]=Te["[object Float64Array]"]=Te["[object Int8Array]"]=Te["[object Int16Array]"]=Te["[object Int32Array]"]=Te["[object Uint8Array]"]=Te["[object Uint8ClampedArray]"]=Te["[object Uint16Array]"]=Te["[object Uint32Array]"]=!0,Te["[object Arguments]"]=Te["[object Array]"]=Te["[object ArrayBuffer]"]=Te["[object Boolean]"]=Te["[object DataView]"]=Te["[object Date]"]=Te["[object Error]"]=Te["[object Function]"]=Te["[object Map]"]=Te["[object Number]"]=Te["[object Object]"]=Te["[object RegExp]"]=Te["[object Set]"]=Te["[object String]"]=Te["[object WeakMap]"]=!1;const ls=function ix(i){return function(t){return i(t)}};var N3="object"==typeof exports&&exports&&!exports.nodeType&&exports,hs=N3&&"object"==typeof module&&module&&!module.nodeType&&module,qc=hs&&hs.exports===N3&&W2.process;const Qi=function(){try{return hs&&hs.require&&hs.require("util").types||qc&&qc.binding&&qc.binding("util")}catch{}}();var k3=Qi&&Qi.isTypedArray;const Fr=k3?ls(k3):function tx(i){return jt(i)&&Rc(i.length)&&!!Te[Tn(i)]},Wc=function ax(i,t){if(("constructor"!==t||"function"!=typeof i[t])&&"__proto__"!=t)return i[t]},us=function cx(i,t,e,n){var o=!e;e||(e={});for(var r=-1,a=t.length;++r<a;){var c=t[r],l=n?n(e[c],i[c],c,e,i):void 0;void 0===l&&(l=i[c]),o?Pr(e,c,l):jc(e,c,l)}return e};var dx=Object.prototype.hasOwnProperty;const D3=function fx(i,t){var e=ht(i),n=!e&&Zi(i),o=!e&&!n&&Ji(i),r=!e&&!n&&!o&&Fr(i),a=e||n||o||r,c=a?function lx(i,t){for(var e=-1,n=Array(i);++e<i;)n[e]=t(e);return n}(i.length,String):[],l=c.length;for(var h in i)(t||dx.call(i,h))&&(!a||!("length"==h||o&&("offset"==h||"parent"==h)||r&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Nr(h,l)))&&c.push(h);return c};var vx=Object.prototype.hasOwnProperty;const bx=function zx(i){if(!Ie(i))return function px(i){var t=[];if(null!=i)for(var e in Object(i))t.push(e);return t}(i);var t=Hr(i),e=[];for(var n in i)"constructor"==n&&(t||!vx.call(i,n))||e.push(n);return e},Xi=function yx(i){return ri(i)?D3(i,!0):bx(i)},wx=function xx(i,t,e,n,o,r,a){var c=Wc(i,e),l=Wc(t,e),h=a.get(l);if(h)Yc(i,e,h);else{var u=r?r(c,l,e+"",i,t,a):void 0,d=void 0===u;if(d){var f=ht(l),p=!f&&Ji(l),g=!f&&!p&&Fr(l);u=l,f||p||g?ht(c)?u=c:Br(c)?u=x3(c):p?(d=!1,u=C3(l,!0)):g?(d=!1,u=_3(l,!0)):u=[]:Ut(l)||Zi(l)?(u=c,Zi(c)?u=function Cx(i){return us(i,Xi(i))}(c):(!Ie(c)||Hc(c))&&(u=S3(l))):d=!1}d&&(a.set(l,u),o(u,l,n,r,a),a.delete(l)),Yc(i,e,u)}},Uc=function I3(i,t,e,n,o){i!==t&&m3(t,function(r,a){if(o||(o=new Ui),Ie(r))wx(i,t,a,e,I3,n,o);else{var c=n?n(Wc(i,a),r,a+"",i,t,o):void 0;void 0===c&&(c=r),Yc(i,a,c)}},Xi)},Ki=function Mx(i,t){return p3(f3(i,t,qi),i+"")},Rr=function Sx(i,t,e){if(!Ie(e))return!1;var n=typeof t;return!!("number"==n?ri(e)&&Nr(t,e.length):"string"==n&&t in e)&&ji(e[t],i)},P3=function Tx(i){return Ki(function(t,e){var n=-1,o=e.length,r=o>1?e[o-1]:void 0,a=o>2?e[2]:void 0;for(r=i.length>3&&"function"==typeof r?(o--,r):void 0,a&&Rr(e[0],e[1],a)&&(r=o<3?void 0:r,o=1),t=Object(t);++n<o;){var c=e[n];c&&i(t,c,n,r)}return t})};var Ox=P3(function(i,t,e){Uc(i,t,e)});const Pe=Ox;function jr(i){var t=-1,e=null==i?0:i.length;for(this.__data__=new Ar;++t<e;)this.add(i[t])}jr.prototype.add=jr.prototype.push=function Ex(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},jr.prototype.has=function kx(i){return this.__data__.has(i)};const Jc=jr,Px=function Ix(i,t){for(var e=-1,n=null==i?0:i.length;++e<n;)if(t(i[e],e,i))return!0;return!1},Qc=function Vx(i,t){return i.has(t)};const V3=function Bx(i,t,e,n,o,r){var a=1&e,c=i.length,l=t.length;if(c!=l&&!(a&&l>c))return!1;var h=r.get(i),u=r.get(t);if(h&&u)return h==t&&u==i;var d=-1,f=!0,p=2&e?new Jc:void 0;for(r.set(i,t),r.set(t,i);++d<c;){var g=i[d],m=t[d];if(n)var v=a?n(m,g,d,t,i,r):n(g,m,d,i,t,r);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!Px(t,function(b,y){if(!Qc(p,y)&&(g===b||o(g,b,e,n,r)))return p.push(y)})){f=!1;break}}else if(g!==m&&!o(g,m,e,n,r)){f=!1;break}}return r.delete(i),r.delete(t),f},Rx=function Fx(i){var t=-1,e=Array(i.size);return i.forEach(function(n,o){e[++t]=[o,n]}),e},Xc=function jx(i){var t=-1,e=Array(i.size);return i.forEach(function(n){e[++t]=n}),e};var L3=kt?kt.prototype:void 0,Kc=L3?L3.valueOf:void 0;const H3=function ow(i,t,e){var n=t(i);return ht(i)?n:$c(n,e(i))},B3=function aw(){return[]};var lw=Object.prototype.propertyIsEnumerable,F3=Object.getOwnPropertySymbols,hw=F3?function(i){return null==i?[]:(i=Object(i),function sw(i,t){for(var e=-1,n=null==i?0:i.length,o=0,r=[];++e<n;){var a=i[e];t(a,e,i)&&(r[o++]=a)}return r}(F3(i),function(t){return lw.call(i,t)}))}:B3;const el=hw,dw=M3(Object.keys,Object);var pw=Object.prototype.hasOwnProperty;const R3=function gw(i){if(!Hr(i))return dw(i);var t=[];for(var e in Object(i))pw.call(i,e)&&"constructor"!=e&&t.push(e);return t},ds=function mw(i){return ri(i)?D3(i):R3(i)},tl=function vw(i){return H3(i,ds,el)};var yw=Object.prototype.hasOwnProperty;const nl=si(Rt,"DataView"),il=si(Rt,"Promise"),eo=si(Rt,"Set"),ol=si(Rt,"WeakMap");var j3="[object Map]",$3="[object Promise]",Y3="[object Set]",G3="[object WeakMap]",Z3="[object DataView]",Ow=oi(nl),Aw=oi(rs),Ew=oi(il),Nw=oi(eo),kw=oi(ol),ai=Tn;(nl&&ai(new nl(new ArrayBuffer(1)))!=Z3||rs&&ai(new rs)!=j3||il&&ai(il.resolve())!=$3||eo&&ai(new eo)!=Y3||ol&&ai(new ol)!=G3)&&(ai=function(i){var t=Tn(i),e="[object Object]"==t?i.constructor:void 0,n=e?oi(e):"";if(n)switch(n){case Ow:return Z3;case Aw:return j3;case Ew:return $3;case Nw:return Y3;case kw:return G3}return t});const to=ai;var q3="[object Arguments]",W3="[object Array]",$r="[object Object]",U3=Object.prototype.hasOwnProperty;const Vw=function Pw(i,t,e,n,o,r){var a=ht(i),c=ht(t),l=a?W3:to(i),h=c?W3:to(t),u=(l=l==q3?$r:l)==$r,d=(h=h==q3?$r:h)==$r,f=l==h;if(f&&Ji(i)){if(!Ji(t))return!1;a=!0,u=!1}if(f&&!u)return r||(r=new Ui),a||Fr(i)?V3(i,t,e,n,o,r):function nw(i,t,e,n,o,r,a){switch(e){case"[object DataView]":if(i.byteLength!=t.byteLength||i.byteOffset!=t.byteOffset)return!1;i=i.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(i.byteLength!=t.byteLength||!r(new Lr(i),new Lr(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ji(+i,+t);case"[object Error]":return i.name==t.name&&i.message==t.message;case"[object RegExp]":case"[object String]":return i==t+"";case"[object Map]":var c=Rx;case"[object Set]":if(c||(c=Xc),i.size!=t.size&&!(1&n))return!1;var h=a.get(i);if(h)return h==t;n|=2,a.set(i,t);var u=V3(c(i),c(t),n,o,r,a);return a.delete(i),u;case"[object Symbol]":if(Kc)return Kc.call(i)==Kc.call(t)}return!1}(i,t,l,e,n,o,r);if(!(1&e)){var p=u&&U3.call(i,"__wrapped__"),g=d&&U3.call(t,"__wrapped__");if(p||g){var m=p?i.value():i,v=g?t.value():t;return r||(r=new Ui),o(m,v,e,n,r)}}return!!f&&(r||(r=new Ui),function Cw(i,t,e,n,o,r){var a=1&e,c=tl(i),l=c.length;if(l!=tl(t).length&&!a)return!1;for(var d=l;d--;){var f=c[d];if(!(a?f in t:yw.call(t,f)))return!1}var p=r.get(i),g=r.get(t);if(p&&g)return p==t&&g==i;var m=!0;r.set(i,t),r.set(t,i);for(var v=a;++d<l;){var b=i[f=c[d]],y=t[f];if(n)var z=a?n(y,b,f,t,i,r):n(b,y,f,i,t,r);if(!(void 0===z?b===y||o(b,y,e,n,r):z)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var C=i.constructor,x=t.constructor;C!=x&&"constructor"in i&&"constructor"in t&&!("function"==typeof C&&C instanceof C&&"function"==typeof x&&x instanceof x)&&(m=!1)}return r.delete(i),r.delete(t),m}(i,t,e,n,o,r))},sl=function J3(i,t,e,n,o){return i===t||(null==i||null==t||!jt(i)&&!jt(t)?i!=i&&t!=t:Vw(i,t,e,n,J3,o))},Jt=function Lw(i,t){return sl(i,t)};var Rw=Object.prototype.hasOwnProperty;const Q3=function jw(i){if(null==i)return!0;if(ri(i)&&(ht(i)||"string"==typeof i||"function"==typeof i.splice||Ji(i)||Fr(i)||Zi(i)))return!i.length;var t=to(i);if("[object Map]"==t||"[object Set]"==t)return!i.size;if(Hr(i))return!R3(i).length;for(var e in i)if(Rw.call(i,e))return!1;return!0};var Xw=Object.getOwnPropertySymbols?function(i){for(var t=[];i;)$c(t,el(i)),i=Zc(i);return t}:B3;const X3=Xw,nM=function tM(i){return H3(i,Xi,X3)};var oM=Object.prototype.hasOwnProperty;var lM=/\w*$/;var K3=kt?kt.prototype:void 0,e0=K3?K3.valueOf:void 0;const IM=function DM(i,t,e){var n=i.constructor;switch(t){case"[object ArrayBuffer]":return Gc(i);case"[object Boolean]":case"[object Date]":return new n(+i);case"[object DataView]":return function aM(i,t){var e=t?Gc(i.buffer):i.buffer;return new i.constructor(e,i.byteOffset,i.byteLength)}(i,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return _3(i,e);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(i);case"[object RegExp]":return function hM(i){var t=new i.constructor(i.source,lM.exec(i));return t.lastIndex=i.lastIndex,t}(i);case"[object Symbol]":return function dM(i){return e0?Object(e0.call(i)):{}}(i)}};var t0=Qi&&Qi.isMap;const BM=t0?ls(t0):function VM(i){return jt(i)&&"[object Map]"==to(i)};var n0=Qi&&Qi.isSet;const YM=n0?ls(n0):function RM(i){return jt(i)&&"[object Set]"==to(i)};var o0="[object Arguments]",s0="[object Function]",r0="[object Object]",_e={};_e[o0]=_e["[object Array]"]=_e["[object ArrayBuffer]"]=_e["[object DataView]"]=_e["[object Boolean]"]=_e["[object Date]"]=_e["[object Float32Array]"]=_e["[object Float64Array]"]=_e["[object Int8Array]"]=_e["[object Int16Array]"]=_e["[object Int32Array]"]=_e["[object Map]"]=_e["[object Number]"]=_e[r0]=_e["[object RegExp]"]=_e["[object Set]"]=_e["[object String]"]=_e["[object Symbol]"]=_e["[object Uint8Array]"]=_e["[object Uint8ClampedArray]"]=_e["[object Uint16Array]"]=_e["[object Uint32Array]"]=!0,_e["[object Error]"]=_e[s0]=_e["[object WeakMap]"]=!1;const a0=function Yr(i,t,e,n,o,r){var a,c=1&t,l=2&t,h=4&t;if(e&&(a=o?e(i,n,o,r):e(i)),void 0!==a)return a;if(!Ie(i))return i;var u=ht(i);if(u){if(a=function sM(i){var t=i.length,e=new i.constructor(t);return t&&"string"==typeof i[0]&&oM.call(i,"index")&&(e.index=i.index,e.input=i.input),e}(i),!c)return x3(i,a)}else{var d=to(i),f=d==s0||"[object GeneratorFunction]"==d;if(Ji(i))return C3(i,c);if(d==r0||d==o0||f&&!o){if(a=l||f?{}:S3(i),!c)return l?function Kw(i,t){return us(i,X3(i),t)}(i,function qw(i,t){return i&&us(t,Xi(t),i)}(a,i)):function Uw(i,t){return us(i,el(i),t)}(i,function Gw(i,t){return i&&us(t,ds(t),i)}(a,i))}else{if(!_e[d])return o?i:{};a=IM(i,d,c)}}r||(r=new Ui);var p=r.get(i);if(p)return p;r.set(i,a),YM(i)?i.forEach(function(v){a.add(Yr(v,t,e,v,i,r))}):BM(i)&&i.forEach(function(v,b){a.set(b,Yr(v,t,e,b,i,r))});var m=u?void 0:(h?l?nM:tl:l?Xi:ds)(i);return function $w(i,t){for(var e=-1,n=null==i?0:i.length;++e<n&&!1!==t(i[e],e,i););}(m||i,function(v,b){m&&(v=i[b=v]),jc(a,b,Yr(v,t,e,b,i,r))}),a};const rl=function zS(i){return a0(i,4)};const Oe=function CS(i){return a0(i,5)};var c0=Object.prototype,_S=c0.hasOwnProperty,xS=Ki(function(i,t){i=Object(i);var e=-1,n=t.length,o=n>2?t[2]:void 0;for(o&&Rr(t[0],t[1],o)&&(n=1);++e<n;)for(var r=t[e],a=Xi(r),c=-1,l=a.length;++c<l;){var h=a[c],u=i[h];(void 0===u||ji(u,c0[h])&&!_S.call(i,h))&&(i[h]=r[h])}return i});const wS=xS,MS=function l0(i,t,e,n,o,r){return Ie(i)&&Ie(t)&&(r.set(t,i),Uc(i,t,void 0,l0,r),r.delete(t)),i};var SS=P3(function(i,t,e,n){Uc(i,t,e,n)});const TS=SS;var OS=Ki(function(i){return i.push(void 0,MS),u3(TS,void 0,i)});const h0=OS,ES=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])},DS=/^\s*class\s+/.test(`${class kS{}}`)||/^\s*class\s*\{/.test(`${class{}}`);function al(i,t){let e;return DS?e=class extends t{}:(e=function(){return t.apply(this,arguments)},function NS(i,t){function e(){this.constructor=i}ES(i,t),i.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}(e,t)),Object.defineProperty(e,"name",{value:i}),e}function u0(i){return"__proto__"===i}function cl(i,t,e="/"){let n;const o=Array.isArray(t)?t:t.split(e);if(o.length)for(n=i;o.length;){const r=o.shift();if(Object(n)!==n||!r||!(r in n))return;n=n[r]}return n}function fs(i,t,e,n="/"){const o=Array.isArray(t)?t:t.split(n),r=o.pop();if(r&&!u0(r)){let a=i;o.forEach(c=>{u0(c)||(null==a[c]&&(a[c]={}),a=a[c])}),a[r]=e}return i}function d0(i,t,e="/"){const n=Array.isArray(t)?t.slice():t.split(e),o=n.pop();if(o)if(n.length>0){const r=cl(i,n);r&&delete r[o]}else delete i[o];return i}class Ee extends pb{}(function(i){i.dispose=yt.dispose})(Ee||(Ee={})),function AS(i,...t){t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(n=>{"constructor"!==n&&Object.defineProperty(i.prototype,n,Object.getOwnPropertyDescriptor(e.prototype,n))})})}(Ee,yt);const BS=function HS(i){return i!=i},f0=function YS(i,t){return!(null==i||!i.length)&&function jS(i,t,e){return t==t?function FS(i,t,e){for(var n=e-1,o=i.length;++n<o;)if(i[n]===t)return n;return-1}(i,t,e):function VS(i,t,e,n){for(var o=i.length,r=e+(n?1:-1);n?r--:++r<o;)if(t(i[r],r,i))return r;return-1}(i,BS,e)}(i,t,0)>-1},p0=function GS(i,t,e){for(var n=-1,o=null==i?0:i.length;++n<o;)if(e(t,i[n]))return!0;return!1};var US=eo&&1/Xc(new eo([,-0]))[1]==1/0?function(i){return new eo(i)}:function ZS(){};const JS=US;const g0=function XS(i,t,e){var n=-1,o=f0,r=i.length,a=!0,c=[],l=c;if(e)a=!1,o=p0;else if(r>=200){var h=t?null:JS(i);if(h)return Xc(h);a=!1,o=Qc,l=new Jc}else l=t?[]:c;e:for(;++n<r;){var u=i[n],d=t?t(u):u;if(u=e||0!==u?u:0,a&&d==d){for(var f=l.length;f--;)if(l[f]===d)continue e;t&&l.push(d),c.push(u)}else o(l,d,e)||(l!==c&&l.push(d),c.push(u))}return c},m0=function KS(i){return i&&i.length?g0(i):[]};var eT=Ki(function(i){return g0(Vr(i,1,Br,!0))});const v0=eT;var iT=Math.floor,oT=Math.min;const z0=function sT(i,t,e,n){var o=0,r=null==i?0:i.length;if(0===r)return 0;for(var a=(t=e(t))!=t,c=null===t,l=Wt(t),h=void 0===t;o<r;){var u=iT((o+r)/2),d=e(i[u]),f=void 0!==d,p=null===d,g=d==d,m=Wt(d);if(a)var v=n||g;else v=h?g&&(n||f):c?g&&f&&(n||!p):l?g&&f&&!p&&(n||!m):!p&&!m&&(n?d<=t:d<t);v?o=u+1:r=u}return oT(r,4294967294)};const uT=function hT(i,t){return function cT(i,t,e){var n=0,o=null==i?n:i.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;n<o;){var r=n+o>>>1,a=i[r];null!==a&&!Wt(a)&&(e?a<=t:a<t)?n=r+1:o=r}return o}return z0(i,t,qi,e)}(i,t)};const b0=function mT(i){return i==i&&!Ie(i)},y0=function bT(i,t){return function(e){return null!=e&&e[i]===t&&(void 0!==t||i in Object(e))}},CT=function yT(i){var t=function vT(i){for(var t=ds(i),e=t.length;e--;){var n=t[e],o=i[n];t[e]=[n,o,b0(o)]}return t}(i);return 1==t.length&&t[0][2]?y0(t[0][0],t[0][1]):function(e){return e===i||function pT(i,t,e,n){var o=e.length,r=o,a=!n;if(null==i)return!r;for(i=Object(i);o--;){var c=e[o];if(a&&c[2]?c[1]!==i[c[0]]:!(c[0]in i))return!1}for(;++o<r;){var l=(c=e[o])[0],h=i[l],u=c[1];if(a&&c[2]){if(void 0===h&&!(l in i))return!1}else{var d=new Ui;if(n)var f=n(h,u,l,i,t,d);if(!(void 0===f?sl(u,h,3,n,d):f))return!1}}return!0}(e,i,t)}};const TT=function ST(i,t){return Lc(i)&&b0(t)?y0(cs(i),t):function(e){var n=function _T(i,t,e){var n=null==i?void 0:Dr(i,t);return void 0===n?e:n}(e,i);return void 0===n&&n===t?c3(e,i):sl(t,n,3)}},DT=function kT(i){return Lc(i)?function OT(i){return function(t){return t?.[i]}}(cs(i)):function ET(i){return function(t){return Dr(t,i)}}(i)},ll=function IT(i){return"function"==typeof i?i:null==i?qi:"object"==typeof i?ht(i)?TT(i[0],i[1]):CT(i):DT(i)};var FT=function BT(i,t){return function(e,n){if(null==e)return e;if(!ri(e))return i(e,n);for(var o=e.length,r=t?o:-1,a=Object(e);(t?r--:++r<o)&&!1!==n(a[r],r,a););return e}}(function LT(i,t){return i&&m3(i,t,ds)});const C0=FT,ZT=function GT(i,t){if(i!==t){var e=void 0!==i,n=null===i,o=i==i,r=Wt(i),a=void 0!==t,c=null===t,l=t==t,h=Wt(t);if(!c&&!h&&!r&&i>t||r&&a&&l&&!c&&!h||n&&a&&l||!e&&l||!o)return 1;if(!n&&!r&&!h&&i<t||h&&e&&o&&!n&&!r||c&&e&&o||!a&&o||!l)return-1}return 0},JT=function UT(i,t,e){t=t.length?as(t,function(r){return ht(r)?function(a){return Dr(a,1===r.length?r[0]:r)}:r}):[qi];var n=-1;t=as(t,ls(ll));var o=function RT(i,t){var e=-1,n=ri(i)?Array(i.length):[];return C0(i,function(o,r,a){n[++e]=t(o,r,a)}),n}(i,function(r,a,c){return{criteria:as(t,function(h){return h(r)}),index:++n,value:r}});return function $T(i,t){var e=i.length;for(i.sort(t);e--;)i[e]=i[e].value;return i}(o,function(r,a){return function qT(i,t,e){for(var n=-1,o=i.criteria,r=t.criteria,a=o.length,c=e.length;++n<a;){var l=ZT(o[n],r[n]);if(l)return n>=c?l:l*("desc"==e[n]?-1:1)}return i.index-t.index}(r,a,e)})};var QT=Ki(function(i,t){if(null==i)return[];var e=t.length;return e>1&&Rr(i,t[0],t[1])?t=[]:e>2&&Rr(t[0],t[1],t[2])&&(t=[t[0]]),JT(i,Vr(t,1),[])});const hl=QT,KT=function XT(i,t,e,n){for(var o=-1,r=null==i?0:i.length;++o<r;){var a=i[o];t(n,a,e(a),i)}return n},tO=function eO(i,t,e,n){return C0(i,function(o,r,a){t(n,o,e(o),a)}),n};var sO=Object.prototype.hasOwnProperty,rO=function nO(i,t){return function(e,n){var o=ht(e)?KT:tO,r=t?t():{};return o(e,i,ll(n),r)}}(function(i,t,e){sO.call(i,e)?i[e].push(t):Pr(i,e,[t])});const _0=rO;var hO=Ki(function(i,t){return Br(i)?function cO(i,t,e,n){var o=-1,r=f0,a=!0,c=i.length,l=[],h=t.length;if(!c)return l;e&&(t=as(t,ls(e))),n?(r=p0,a=!1):t.length>=200&&(r=Qc,a=!1,t=new Jc(t));e:for(;++o<c;){var u=i[o],d=null==e?u:e(u);if(u=n||0!==u?u:0,a&&d==d){for(var f=h;f--;)if(t[f]===d)continue e;l.push(u)}else r(t,d,n)||l.push(u)}return l}(i,Vr(t,1,Br,!0)):[]});const uO=hO,gO=function pO(i,t){return i>t},vO=function mO(i){return i&&i.length?function dO(i,t,e){for(var n=-1,o=i.length;++n<o;){var r=i[n],a=t(r);if(null!=a&&(void 0===c?a==a&&!Wt(a):e(a,c)))var c=a,l=r}return l}(i,qi,gO):void 0},SO=function _O(i){return function(t){return i?.[t]}}({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"});var TO=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,DO=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var VO=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var BO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var x0="\\ud800-\\udfff",w0="\\u2700-\\u27bf",M0="a-z\\xdf-\\xf6\\xf8-\\xff",S0="A-Z\\xc0-\\xd6\\xd8-\\xde",T0="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",A0="["+T0+"]",E0="\\d+",XO="["+w0+"]",N0="["+M0+"]",k0="[^"+x0+T0+E0+w0+M0+S0+"]",D0="(?:\\ud83c[\\udde6-\\uddff]){2}",I0="[\\ud800-\\udbff][\\udc00-\\udfff]",no="["+S0+"]",P0="(?:"+N0+"|"+k0+")",iA="(?:"+no+"|"+k0+")",V0="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",L0="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",H0="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",B0="[\\ufe0e\\ufe0f]?",aA=B0+H0+"(?:\\u200d(?:"+["[^"+x0+"]",D0,I0].join("|")+")"+B0+H0+")*",cA="(?:"+[XO,D0,I0].join("|")+")"+aA,lA=RegExp([no+"?"+N0+"+"+V0+"(?="+[A0,no,"$"].join("|")+")",iA+"+"+L0+"(?="+[A0,no+P0,"$"].join("|")+")",no+"?"+P0+"+"+V0,no+"+"+L0,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",E0,cA].join("|"),"g");const fA=function dA(i,t,e){return i=Gi(i),void 0===(t=e?void 0:t)?function FO(i){return BO.test(i)}(i)?function hA(i){return i.match(lA)||[]}(i):function LO(i){return i.match(VO)||[]}(i):i.match(t)||[]};var gA=RegExp("['\u2019]","g");const Gr=function mA(i){return function(t){return function yO(i,t,e,n){var o=-1,r=null==i?0:i.length;for(n&&r&&(e=i[++o]);++o<r;)e=t(e,i[o],o,i);return e}(fA(function IO(i){return(i=Gi(i))&&i.replace(TO,SO).replace(DO,"")}(t).replace(gA,"")),i,"")}},yA=function bA(i,t,e){var n=i.length;return e=void 0===e?n:e,!t&&e>=n?i:function vA(i,t,e){var n=-1,o=i.length;t<0&&(t=-t>o?0:o+t),(e=e>o?o:e)<0&&(e+=o),o=t>e?0:e-t>>>0,t>>>=0;for(var r=Array(o);++n<o;)r[n]=i[n+t];return r}(i,t,e)};var OA=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const F0=function AA(i){return OA.test(i)};var R0="\\ud800-\\udfff",LA="["+R0+"]",ul="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",dl="\\ud83c[\\udffb-\\udfff]",j0="[^"+R0+"]",$0="(?:\\ud83c[\\udde6-\\uddff]){2}",Y0="[\\ud800-\\udbff][\\udc00-\\udfff]",G0="(?:"+ul+"|"+dl+")?",Z0="[\\ufe0e\\ufe0f]?",RA=Z0+G0+"(?:\\u200d(?:"+[j0,$0,Y0].join("|")+")"+Z0+G0+")*",jA="(?:"+[j0+ul+"?",ul,$0,Y0,LA].join("|")+")",$A=RegExp(dl+"(?="+dl+")|"+jA+RA,"g");const qA=function ZA(i){return F0(i)?function YA(i){return i.match($A)||[]}(i):function EA(i){return i.split("")}(i)},q0=function WA(i){return function(t){t=Gi(t);var e=F0(t)?qA(t):void 0,n=e?e[0]:t.charAt(0),o=e?yA(e,1).join(""):t.slice(1);return n[i]()+o}},ps=q0("toUpperCase");var JA=Gr(function(i,t,e){return i+(e?" ":"")+ps(t)});const W0=JA;var KA=Gr(function(i,t,e){return t=t.toLowerCase(),i+(e?function QA(i){return ps(Gi(i).toLowerCase())}(t):t)});const gs=KA;var eE=Gr(function(i,t,e){return i+(e?" ":"")+t.toUpperCase()});const tE=eE;var nE=Gr(function(i,t,e){return i+(e?" ":"")+t.toLowerCase()});const fl=nE,oE=q0("toLowerCase"),ci=i=>{const t=Object.create(null);return e=>t[e]||(t[e]=i(e))},U0=ci(i=>i.replace(/\B([A-Z])/g,"-$1").toLowerCase()),pl=ci(i=>W0(gs(i)).replace(/ /g,""));function gl(i){let t=2166136261,e=!1,n=i;for(let o=0,r=n.length;o<r;o+=1){let a=n.charCodeAt(o);a>127&&!e&&(n=unescape(encodeURIComponent(n)),a=n.charCodeAt(o),e=!0),t^=a,t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)}return t>>>0}function ml(){let i="";const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";for(let e=0,n=t.length;e<n;e+=1){const o=t[e],r=16*Math.random()|0;i+=("x"===o?r:"y"===o?3&r|8:o).toString(16)}return i}function rE(i,t,e){let n=new Array(t.length+1),o=new Array(t.length+1);const r=e+1;for(let c=0;c<=t.length;c+=1)n[c]=c;for(let c=1;c<=i.length;c+=1){const l=i.charCodeAt(c-1),h=c>e?c-e:1,u=t.length>e+c?e+c:t.length;o[0]=c;let d=c;for(let p=1;p<h;p+=1)o[p]=r;for(let p=h;p<=u;p+=1){const g=l===t.charCodeAt(p-1)?n[p-1]:Math.min(n[p]+1,o[p-1]+1,n[p-1]+2);o[p]=g,d=Math.min(d,g)}for(let p=u+1;p<=t.length;p+=1)o[p]=r;if(d>e)return;const f=n;n=o,o=f}const a=n[t.length];return a>e?void 0:a}ci(i=>tE(i).replace(/ /g,"_")),ci(i=>fl(i).replace(/ /g,".")),ci(i=>fl(i).replace(/ /g,"/")),ci(i=>ps(fl(i))),ci(i=>W0(gs(i)));const vl=function cE(i){return"number"==typeof i||jt(i)&&"[object Number]"==Tn(i)},Ct=function uE(i,t,e){return void 0===e&&(e=t,t=void 0),void 0!==e&&(e=(e=os(e))==e?e:0),void 0!==t&&(t=(t=os(t))==t?t:0),function lE(i,t,e){return i==i&&(void 0!==e&&(i=i<=e?i:e),void 0!==t&&(i=i>=t?i:t)),i}(os(i),t,e)};function un(i){return"string"==typeof i&&"%"===i.slice(-1)}function $t(i,t){if(null==i)return 0;let e;if("string"==typeof i){if(e=parseFloat(i),un(i)&&(e/=100,Number.isFinite(e)))return e*t}else e=i;return Number.isFinite(e)?e>0&&e<1?e*t:e:0}function On(i){if("object"==typeof i){let e=0,n=0,o=0,r=0;return null!=i.vertical&&Number.isFinite(i.vertical)&&(n=r=i.vertical),null!=i.horizontal&&Number.isFinite(i.horizontal)&&(o=e=i.horizontal),null!=i.left&&Number.isFinite(i.left)&&(e=i.left),null!=i.top&&Number.isFinite(i.top)&&(n=i.top),null!=i.right&&Number.isFinite(i.right)&&(o=i.right),null!=i.bottom&&Number.isFinite(i.bottom)&&(r=i.bottom),{top:n,right:o,bottom:r,left:e}}let t=0;return null!=i&&Number.isFinite(i)&&(t=i),{top:t,right:t,bottom:t,left:t}}let zl=!1,J0=!1,Q0=!1,X0=!1,K0=!1,eh=!1,th=!1,nh=!1,ih=!1,oh=!1,sh=!1,rh=!1,ah=!1,ch=!1,lh=!1,hh=!1;if("object"==typeof navigator){const i=navigator.userAgent;zl=i.indexOf("Macintosh")>=0,J0=!!i.match(/(iPad|iPhone|iPod)/g),Q0=i.indexOf("Windows")>=0,X0=i.indexOf("MSIE")>=0,K0=!!i.match(/Trident\/7\./),eh=!!i.match(/Edge\//),th=i.indexOf("Mozilla/")>=0&&i.indexOf("MSIE")<0&&i.indexOf("Edge/")<0,ih=i.indexOf("Chrome/")>=0&&i.indexOf("Edge/")<0,oh=i.indexOf("Opera/")>=0||i.indexOf("OPR/")>=0,sh=i.indexOf("Firefox/")>=0,rh=i.indexOf("AppleWebKit/")>=0&&i.indexOf("Chrome/")<0&&i.indexOf("Edge/")<0,"object"==typeof document&&(hh=!document.createElementNS||"[object SVGForeignObjectElement]"!=`${document.createElementNS("http://www.w3.org/2000/svg","foreignObject")}`||i.indexOf("Opera/")>=0)}if("object"==typeof window&&(nh=null!=window.chrome&&null!=window.chrome.app&&null!=window.chrome.app.runtime,ch=null!=window.PointerEvent&&!zl),"object"==typeof document){ah="ontouchstart"in document.documentElement;try{const i=Object.defineProperty({},"passive",{get(){lh=!0}}),t=document.createElement("div");t.addEventListener&&t.addEventListener("click",()=>{},i)}catch{}}var An;(function(i){i.IS_MAC=zl,i.IS_IOS=J0,i.IS_WINDOWS=Q0,i.IS_IE=X0,i.IS_IE11=K0,i.IS_EDGE=eh,i.IS_NETSCAPE=th,i.IS_CHROME_APP=nh,i.IS_CHROME=ih,i.IS_OPERA=oh,i.IS_FIREFOX=sh,i.IS_SAFARI=rh,i.SUPPORT_TOUCH=ah,i.SUPPORT_POINTER=ch,i.SUPPORT_PASSIVE=lh,i.NO_FOREIGNOBJECT=hh,i.SUPPORT_FOREIGNOBJECT=!i.NO_FOREIGNOBJECT})(An||(An={})),function(i){function t(){const r=window.module;return null!=r&&null!=r.hot&&null!=r.hot.status?r.hot.status():"unkonwn"}i.getHMRStatus=t,i.isApplyingHMR=function e(){return"apply"===t()};const n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};i.isEventSupported=function o(r){const a=document.createElement(n[r]||"div"),c=`on${r}`;let l=c in a;return l||(a.setAttribute(c,"return;"),l="function"==typeof a[c]),l}}(An||(An={}));const bl=/[\t\r\n\f]/g,yl=/\S+/g,io=i=>` ${i} `;function oo(i){return i&&i.getAttribute&&i.getAttribute("class")||""}function so(i,t){if(null==i||null==t)return!1;const e=io(oo(i)),n=io(t);return 1===i.nodeType&&e.replace(bl," ").includes(n)}function ee(i,t){if(null!=i&&null!=t){if("function"==typeof t)return ee(i,t(oo(i)));if("string"==typeof t&&1===i.nodeType){const e=t.match(yl)||[],n=io(oo(i)).replace(bl," ");let o=e.reduce((r,a)=>r.indexOf(io(a))<0?`${r}${a} `:r,n);o=o.trim(),n!==o&&i.setAttribute("class",o)}}}function $e(i,t){if(null!=i){if("function"==typeof t)return $e(i,t(oo(i)));if((!t||"string"==typeof t)&&1===i.nodeType){const e=(t||"").match(yl)||[],n=io(oo(i)).replace(bl," ");let o=e.reduce((r,a)=>{const c=io(a);return r.indexOf(c)>-1?r.replace(c," "):r},n);o=t?o.trim():"",n!==o&&i.setAttribute("class",o)}}}function ms(i,t,e){if(null!=i&&null!=t){if(null!=e&&"string"==typeof t)return void(e?ee(i,t):$e(i,t));if("function"==typeof t)return ms(i,t(oo(i),e),e);"string"==typeof t&&(t.match(yl)||[]).forEach(o=>{so(i,o)?$e(i,o):ee(i,o)})}}let uh=0;function Cl(i){return(null==i.id||""===i.id)&&(i.id=function dE(){return uh+=1,`v${uh}`}()),i.id}function En(i){return null!=i&&"function"==typeof i.getScreenCTM&&i instanceof SVGElement}const Je={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},dh="1.1";function fh(i,t=document){return t.createElement(i)}function _l(i,t=Je.xhtml,e=document){return e.createElementNS(t,i)}function dn(i,t=document){return _l(i,Je.svg,t)}function Zr(i){if(i){const e=`<svg xmlns="${Je.svg}" xmlns:xlink="${Je.xlink}" version="${dh}">${i}</svg>`,{documentElement:n}=function fE(i,t={}){let e;try{const n=new DOMParser;null!=t.async&&(n.async=t.async),e=n.parseFromString(i,t.mimeType||"text/xml")}catch{e=void 0}if(!e||e.getElementsByTagName("parsererror").length)throw new Error(`Invalid XML: ${i}`);return e}(e,{async:!1});return n}const t=document.createElementNS(Je.svg,"svg");return t.setAttributeNS(Je.xmlns,"xmlns:xlink",Je.xlink),t.setAttribute("version",dh),t}function xl(i){let t=0,e=i.previousSibling;for(;e;)1===e.nodeType&&(t+=1),e=e.previousSibling;return t}function ph(i,t,e){const n=i.ownerSVGElement;let o=i.parentNode;for(;o&&o!==e&&o!==n;){if(so(o,t))return o;o=o.parentNode}return null}function wl(i,t){const e=t&&t.parentNode;return i===e||!!(e&&1===e.nodeType&&16&i.compareDocumentPosition(e))}function Qt(i){i&&(Array.isArray(i)?i:[i]).forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)})}function vs(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Nn(i,t){(Array.isArray(t)?t:[t]).forEach(n=>{null!=n&&i.appendChild(n)})}function gh(i,t){const e=i.firstChild;return e?Ml(e,t):Nn(i,t)}function Ml(i,t){const e=i.parentNode;e&&(Array.isArray(t)?t:[t]).forEach(o=>{null!=o&&e.insertBefore(o,i)})}function zs(i,t){t?.appendChild(i)}function mh(i){try{return i instanceof HTMLElement}catch{return"object"==typeof i&&1===i.nodeType&&"object"==typeof i.style&&"object"==typeof i.ownerDocument}}const vh=["viewBox","attributeName","attributeType","repeatCount","textLength","lengthAdjust"];function Sl(i,t){const e=bh(t);e.ns?i.hasAttributeNS(e.ns,e.local)&&i.removeAttributeNS(e.ns,e.local):i.hasAttribute(t)&&i.removeAttribute(t)}function Tl(i,t,e){if(null==e)return Sl(i,t);const n=bh(t);n.ns&&"string"==typeof e?i.setAttributeNS(n.ns,t,e):"id"===t?i.id=`${e}`:i.setAttribute(t,`${e}`)}function zh(i,t){Object.keys(t).forEach(e=>{Tl(i,e,t[e])})}function le(i,t,e){if(null==t){const n=i.attributes,o={};for(let r=0;r<n.length;r+=1)o[n[r].name]=n[r].value;return o}if("string"==typeof t&&void 0===e)return i.getAttribute(t);"object"==typeof t?zh(i,t):Tl(i,t,e)}function bh(i){if(-1!==i.indexOf(":")){const t=i.split(":");return{ns:Je[t[0]],local:t[1]}}return{ns:null,local:i}}function bs(i){const t={};return Object.keys(i).forEach(e=>{const n=vh.includes(e)?e:U0(e);t[n]=i[e]}),t}function qr(i){const t={};return i.split(";").forEach(n=>{const o=n.trim();if(o){const r=o.split("=");r.length&&(t[r[0].trim()]=r[1]?r[1].trim():"")}}),t}function Ol(i,t){return Object.keys(t).forEach(e=>{if("class"===e)i[e]=i[e]?`${i[e]} ${t[e]}`:t[e];else if("style"===e){const n="object"==typeof i[e],o="object"==typeof t[e];let r,a;n&&o?(r=i[e],a=t[e]):n?(r=i[e],a=qr(t[e])):o?(r=qr(i[e]),a=t[e]):(r=qr(i[e]),a=qr(t[e])),i[e]=Ol(r,a)}else i[e]=t[e]}),i}function yE(i,t,e={}){const n=e.offset||0,o=[],r=[];let a,c,l=null;for(let h=0;h<i.length;h+=1){a=r[h]=i[h];for(let u=0,d=t.length;u<d;u+=1){const f=t[u];h>=f.start+n&&h<f.end+n&&("string"==typeof a?a=r[h]={t:i[h],attrs:f.attrs}:a.attrs=Ol(Ol({},a.attrs),f.attrs),e.includeAnnotationIndices&&(null==a.annotations&&(a.annotations=[]),a.annotations.push(u)))}c=r[h-1],c?Ie(a)&&Ie(c)?JSON.stringify(a.attrs)===JSON.stringify(c.attrs)?l.t+=a.t:(o.push(l),l=a):Ie(a)||Ie(c)?(o.push(l),l=a):l=(l||"")+a:l=a}return null!=l&&o.push(l),o}var li;let hi;!function(i){function t(h){const u="data:";return h.substr(0,u.length)===u}function n(h){let u=h.replace(/\s/g,"");u=decodeURIComponent(u);const d=u.indexOf(","),f=u.slice(0,d),p=f.split(":")[1].split(";")[0],g=u.slice(d+1);let m;m=f.indexOf("base64")>=0?atob(g):unescape(encodeURIComponent(g));const v=new Uint8Array(m.length);for(let b=0;b<m.length;b+=1)v[b]=m.charCodeAt(b);return new Blob([v],{type:p})}function o(h,u){const d=window.navigator.msSaveBlob;if(d)d(h,u);else{const f=window.URL.createObjectURL(h),p=document.createElement("a");p.href=f,p.download=u,document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(f)}}function c(h){const u=parseFloat(h);return Number.isNaN(u)?null:u}i.isDataUrl=t,i.imageToDataUri=function e(h,u){if(!h||t(h))return void setTimeout(()=>u(null,h));const d=()=>{u(new Error(`Failed to load image: ${h}`))},f=window.FileReader?g=>{if(200===g.status){const m=new FileReader;m.onload=v=>{u(null,v.target.result)},m.onerror=d,m.readAsDataURL(g.response)}else d()}:g=>{if(200===g.status){let v=h.split(".").pop()||"png";"svg"===v&&(v="svg+xml");const b=`data:image/${v};base64,`,y=new Uint8Array(g.response),z=b+btoa((v=>{const y=[];for(let z=0;z<v.length;z+=32768)y.push(String.fromCharCode.apply(null,v.subarray(z,z+32768)));return y.join("")})(y));u(null,z)}else d()},p=new XMLHttpRequest;p.responseType=window.FileReader?"blob":"arraybuffer",p.open("GET",h,!0),p.addEventListener("error",d),p.addEventListener("load",()=>f(p)),p.send()},i.dataUriToBlob=n,i.downloadBlob=o,i.downloadDataUri=function r(h,u){o(n(h),u)},i.svgToDataUrl=function l(h,u={}){let d=null;const f=z=>(null==d&&(d=function a(h){const u=h.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return u&&u[2]?u[2].replace(/\s+/," ").split(" "):null}(h)),null!=d?c(d[z]):null),p=z=>{const C=h.match(z);return C&&C[2]?c(C[2]):null};let g=u.width;if(null==g&&(g=p(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==g&&(g=f(2)),null==g)throw new Error("Can not parse width from svg string");let m=u.height;if(null==m&&(m=p(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==m&&(m=f(3)),null==m)throw new Error("Can not parse height from svg string");return`data:image/svg+xml,${encodeURIComponent(h).replace(/'/g,"%27").replace(/"/g,"%22")}`}}(li||(li={}));const _E={px:i=>i,mm:i=>hi*i,cm:i=>hi*i*10,in:i=>hi*i*25.4,pt:i=>hi*(25.4*i/72),pc:i=>hi*(25.4*i/6)};var yh;!function(i){function t(n,o,r){const a=document.createElement("div"),c=a.style;c.display="inline-block",c.position="absolute",c.left="-15000px",c.top="-15000px",c.width=n+(r||"px"),c.height=o+(r||"px"),document.body.appendChild(a);const l=a.getBoundingClientRect(),h={width:l.width||0,height:l.height||0};return document.body.removeChild(a),h}i.measure=t,i.toPx=function e(n,o){null==hi&&(hi=t("1","1","mm").width);const r=o?_E[o]:null;return r?r(n):n}}(yh||(yh={}));const xE=/-(.)/g,Al={},Ch=["webkit","ms","moz","o"],_h=document?document.createElement("div").style:{};function El(i,t){const e=i.ownerDocument&&i.ownerDocument.defaultView&&i.ownerDocument.defaultView.opener?i.ownerDocument.defaultView.getComputedStyle(i,null):window.getComputedStyle(i,null);return e&&t?e.getPropertyValue(t)||e[t]:e}document.selection||window;const SE={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function Ye(i,t,e){if("string"!=typeof t)for(const n in t)Ye(i,n,t[n]);else{const n=function TE(i){return/^--/.test(i)}(t);if(n||(t=function xh(i){const t=function wE(i){return i.replace(xE,(t,e)=>e.toUpperCase())}(i);if(null==Al[t]){const e=t.charAt(0).toUpperCase()+t.slice(1);Al[t]=t in _h?t:function ME(i){for(let t=0;t<Ch.length;t+=1){const e=Ch[t]+i;if(e in _h)return e}return null}(e)}return Al[t]}(t)),void 0===e)return function Wr(i,t,e){const n=window.getComputedStyle(i,null);return e?n.getPropertyValue(t)||void 0:n[t]||i.style[t]}(i,t,n);n||(e=function OE(i,t){return SE[i]||"number"!=typeof t?t:`${t}px`}(t,e));const o=i.style;n?o.setProperty(t,e):o[t]=e}}const Jr=new WeakMap;function wh(i,t){const e=gs(t),n=Jr.get(i);if(n)return n[e]}function ui(i,t,e){if(!t){const n={};return Object.keys(Jr).forEach(o=>{n[o]=wh(i,o)}),n}if("string"==typeof t)return void 0===e?wh(i,t):void function AE(i,t,e){const n=gs(t),o=Jr.get(i);o?o[n]=e:Jr.set(i,{[n]:e})}(i,t,e);for(const n in t)ui(i,n,t[n])}class X{get[Symbol.toStringTag](){return X.toStringTag}get type(){return this.node.nodeName}get id(){return this.node.id}set id(t){this.node.id=t}constructor(t,e,n){if(!t)throw new TypeError("Invalid element to create vector");let o;if(X.isVector(t))o=t.node;else if("string"==typeof t)if("svg"===t.toLowerCase())o=Zr();else if("<"===t[0]){const r=Zr(t);o=document.importNode(r.firstChild,!0)}else o=document.createElementNS(Je.svg,t);else o=t;this.node=o,e&&this.setAttributes(e),n&&this.append(n)}transform(t,e){return null==t?ao(this.node):(ao(this.node,t,e),this)}translate(t,e=0,n={}){return null==t?Dh(this.node):(Dh(this.node,t,e,n),this)}rotate(t,e,n,o={}){return null==t?Dl(this.node):(Dl(this.node,t,e,n,o),this)}scale(t,e){return null==t?Il(this.node):(Il(this.node,t,e),this)}getTransformToElement(t){const e=X.toNode(t);return xs(this.node,e)}removeAttribute(t){return Sl(this.node,t),this}getAttribute(t){return function bE(i,t){return i.getAttribute(t)}(this.node,t)}setAttribute(t,e){return Tl(this.node,t,e),this}setAttributes(t){return zh(this.node,t),this}attr(t,e){return null==t?le(this.node):"string"==typeof t&&void 0===e?le(this.node,t):("object"==typeof t?le(this.node,t):le(this.node,t,e),this)}svg(){return this.node instanceof SVGSVGElement?this:X.create(this.node.ownerSVGElement)}defs(){const t=this.svg()||this,e=t.node.getElementsByTagName("defs")[0];return e?X.create(e):X.create("defs").appendTo(t)}text(t,e={}){return Th(this.node,t,e),this}tagName(){return function pE(i,t=!0){const e=i.nodeName;return t?e.toLowerCase():e.toUpperCase()}(this.node)}clone(){return X.create(this.node.cloneNode(!0))}remove(){return Qt(this.node),this}empty(){return vs(this.node),this}append(t){return Nn(this.node,X.toNodes(t)),this}appendTo(t){return zs(this.node,X.isVector(t)?t.node:t),this}prepend(t){return gh(this.node,X.toNodes(t)),this}before(t){return Ml(this.node,X.toNodes(t)),this}replace(t){return this.node.parentNode&&this.node.parentNode.replaceChild(X.toNode(t),this.node),X.create(t)}first(){return this.node.firstChild?X.create(this.node.firstChild):null}last(){return this.node.lastChild?X.create(this.node.lastChild):null}get(t){const e=this.node.childNodes[t];return e?X.create(e):null}indexOf(t){return Array.prototype.slice.call(this.node.childNodes).indexOf(X.toNode(t))}find(t){const e=[],n=function gE(i,t){return i.querySelectorAll(t)}(this.node,t);if(n)for(let o=0,r=n.length;o<r;o+=1)e.push(X.create(n[o]));return e}findOne(t){const e=function mE(i,t){return i.querySelector(t)}(this.node,t);return e?X.create(e):null}findParentByClass(t,e){const n=ph(this.node,t,e);return n?X.create(n):null}matches(t){const e=this.node,o=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return o&&o.call(e,t)}contains(t){return wl(this.node,X.isVector(t)?t.node:t)}wrap(t){const e=X.create(t);return this.node.parentNode?.insertBefore(e.node,this.node),e.append(this)}parent(t){let e=this;if(null==e.node.parentNode)return null;if(e=X.create(e.node.parentNode),null==t)return e;do{if("string"==typeof t?e.matches(t):e instanceof t)return e}while(e=X.create(e.node.parentNode));return e}children(){const t=this.node.childNodes,e=[];for(let n=0;n<t.length;n+=1)1===t[n].nodeType&&e.push(X.create(t[n]));return e}eachChild(t,e){const n=this.children();for(let o=0,r=n.length;o<r;o+=1)t.call(n[o],n[o],o,n),e&&n[o].eachChild(t,e);return this}index(){return xl(this.node)}hasClass(t){return so(this.node,t)}addClass(t){return ee(this.node,t),this}removeClass(t){return $e(this.node,t),this}toggleClass(t,e){return ms(this.node,t,e),this}toLocalPoint(t,e){return function XE(i,t,e){const n=i instanceof SVGSVGElement?i:i.ownerSVGElement,o=n.createSVGPoint();o.x=t,o.y=e;try{const r=n.getScreenCTM(),a=o.matrixTransform(r.inverse()),c=xs(i,n).inverse();return a.matrixTransform(c)}catch{return o}}(this.node,t,e)}sample(t=1){return this.node instanceof SVGPathElement?function VE(i,t=1){const e=i.getTotalLength(),n=[];let r,o=0;for(;o<e;)r=i.getPointAtLength(o),n.push({distance:o,x:r.x,y:r.y}),o+=t;return n}(this.node,t):[]}toPath(){return X.create(function $E(i){const t=dn("path");le(t,le(i));const e=Nh(i);return e&&t.setAttribute("d",e),t}(this.node))}toPathData(){return Nh(this.node)}}!function(i){function t(a){if(null==a)return!1;if(a instanceof i)return!0;const c=a[Symbol.toStringTag];return(null==c||c===i.toStringTag)&&a.node instanceof SVGElement&&"function"==typeof a.sample&&"function"==typeof a.toPath}function e(a,c,l){return new i(a,c,l)}function o(a){return t(a)?a.node:a}i.toStringTag=`X6.${i.name}`,i.isVector=t,i.create=e,i.createVectors=function n(a){if("<"===a[0]){const c=Zr(a),l=[];for(let h=0,u=c.childNodes.length;h<u;h+=1)l.push(e(document.importNode(c.childNodes[h],!0)));return l}return[e(a)]},i.toNode=o,i.toNodes=function r(a){return Array.isArray(a)?a.map(c=>o(c)):[o(a)]}}(X||(X={}));const Mh=document.createElement("canvas").getContext("2d");function DE(i,t,e){const n=e.eol,o=e.baseSize,r=e.lineHeight;let c,a=0;const l={},h=t.length-1;for(let u=0;u<=h;u+=1){let d=t[u],f=null;if("object"==typeof d){const p=d.attrs,g=X.create("tspan",p);c=g.node;let m=d.t;n&&u===h&&(m+=n),c.textContent=m;const v=p.class;v&&g.addClass(v),e.includeAnnotationIndices&&g.attr("annotations",d.annotations.join(",")),f=parseFloat(p["font-size"]),void 0===f&&(f=o),f&&f>a&&(a=f)}else n&&u===h&&(d+=n),c=document.createTextNode(d||" "),o&&o>a&&(a=o);i.appendChild(c)}return a&&(l.maxFontSize=a),r?l.lineHeight=r:a&&(l.lineHeight=1.2*a),l}const Sh=/em$/;function Qr(i,t){const e=parseFloat(i);return Sh.test(i)?e*t:e}function Th(i,t,e={}){t=function CE(i){return i.replace(/ /g,"\xa0")}(t);const n=e.eol;let o=e.textPath;const r=e.textVerticalAnchor,a="middle"===r||"bottom"===r||"top"===r;let c=e.x;void 0===c&&(c=i.getAttribute("x")||0);const l=e.includeAnnotationIndices;let h=e.annotations;h&&!Array.isArray(h)&&(h=[h]);const u=e.lineHeight,d="auto"===u,f=d?"1.5em":u||"1em";let p=!0;const g=i.children;1===g.length&&"TITLE"===g[0].tagName.toUpperCase()&&(p=!1),p&&vs(i),le(i,{"xml:space":"preserve",display:t||e.displayEmpty?null:"none"});const m=le(i,"font-size");let b,v=parseFloat(m);v||(v=16,(a||h)&&!m&&le(i,"font-size",`${v}`)),o?("string"==typeof o&&(o={d:o}),b=function kE(i,t){const e=X.create(t),n=X.create("textPath"),o=i.d;if(o&&void 0===i["xlink:href"]){const r=X.create("path").attr("d",o).appendTo(e.defs());n.attr("xlink:href",`#${r.id}`)}return"object"==typeof i&&n.attr(i),n.node}(o,i)):b=document.createDocumentFragment();let y,C,z=0;const x=t.split("\n"),w=[],O=x.length-1;for(let E=0;E<=O;E+=1){y=f;let L="v-line";const k=dn("tspan");let V,K=x[E];if(K)if(h){V=DE(k,yE(K,h,{offset:-z,includeAnnotationIndices:l}),{eol:E!==O&&n,baseSize:v,lineHeight:d?null:f,includeAnnotationIndices:l});const S=V.lineHeight;S&&d&&0!==E&&(y=S),0===E&&(C=.8*V.maxFontSize)}else n&&E!==O&&(K+=n),k.textContent=K;else{k.textContent="-",L+=" v-empty-line";const J=k.style;J.fillOpacity=0,J.strokeOpacity=0,h&&(V={})}V&&w.push(V),E>0&&k.setAttribute("dy",y),(E>0||o)&&k.setAttribute("x",c),k.className.baseVal=L,b.appendChild(k),z+=K.length+1}if(a)if(h)y=function IE(i,t,e,n){if(!Array.isArray(t))return 0;const o=t.length;if(!o)return 0;let r=t[0];const a=Qr(r.maxFontSize,e)||e;let c=0;const l=Qr(n,e);for(let d=1;d<o;d+=1)r=t[d],c+=Qr(r.lineHeight,e)||l;const h=Qr(r.maxFontSize,e)||e;let u;switch(i){case"middle":u=a/2-.15*h-c/2;break;case"bottom":u=-.25*h-c;break;default:u=.8*a}return u}(r,w,v,f);else if("top"===r)y="0.8em";else{let E;switch(O>0?(E=parseFloat(f)||1,E*=O,Sh.test(f)||(E/=v)):E=0,r){case"middle":y=.3-E/2+"em";break;case"bottom":y=-E-.3+"em"}}else 0===r?y="0em":r?y=r:(y=0,null==i.getAttribute("y")&&i.setAttribute("y",`${C||"0.8em"}`));b.firstChild.setAttribute("dy",y),i.appendChild(b)}function ys(i,t={}){if(!i)return{width:0};const e=[],n=t["font-size"]?`${parseFloat(t["font-size"])}px`:"14px";return e.push(t["font-style"]||"normal"),e.push(t["font-variant"]||"normal"),e.push(t["font-weight"]||400),e.push(n),e.push(t["font-family"]||"sans-serif"),Mh.font=e.join(" "),Mh.measureText(i)}function Oh(i,t,e,n={}){if(t>=e)return[i,""];const o=i.length,r={};let a=Math.round(t/e*o-1);for(a<0&&(a=0);a>=0&&a<o;){const c=i.slice(0,a),l=r[c]||ys(c,n).width,h=i.slice(0,a+1),u=r[h]||ys(h,n).width;if(r[c]=l,r[h]=u,l>t)a-=1;else{if(!(u<=t))break;a+=1}}return[i.slice(0,a),i.slice(a)]}const Nl=.551784;function ot(i,t,e=NaN){const n=i.getAttribute(t);if(null==n)return e;const o=parseFloat(n);return Number.isNaN(o)?e:o}function Ah(i){return`M ${i.map(e=>`${e.x} ${e.y}`).join(" L")}`}function Xr(i){const t=[],e=i.points;if(e)for(let n=0,o=e.numberOfItems;n<o;n+=1)t.push(e.getItem(n));return t}function Eh(i){let t;const e=i.x,n=i.y,o=i.width,r=i.height,a=Math.min(i.rx||i["top-rx"]||0,o/2),c=Math.min(i.rx||i["bottom-rx"]||0,o/2),l=Math.min(i.ry||i["top-ry"]||0,r/2),h=Math.min(i.ry||i["bottom-ry"]||0,r/2);return t=a||c||l||h?["M",e,n+l,"v",r-l-h,"a",c,h,0,0,0,c,h,"h",o-2*c,"a",c,h,0,0,0,c,-h,"v",-(r-h-l),"a",a,l,0,0,0,-a,-l,"h",-(o-2*a),"a",a,l,0,0,0,-a,l,"Z"]:["M",e,n,"H",e+o,"V",n+r,"H",e,"V",n,"Z"],t.join(" ")}function Nh(i){const t=i.tagName.toLowerCase();switch(t){case"path":return i.getAttribute("d");case"line":return function LE(i){return["M",ot(i,"x1"),ot(i,"y1"),"L",ot(i,"x2"),ot(i,"y2")].join(" ")}(i);case"polygon":return function HE(i){const t=Xr(i);return 0===t.length?null:`${Ah(t)} Z`}(i);case"polyline":return function BE(i){const t=Xr(i);return 0===t.length?null:Ah(t)}(i);case"ellipse":return function RE(i){const t=ot(i,"cx",0),e=ot(i,"cy",0),n=ot(i,"rx"),o=ot(i,"ry")||n,r=n*Nl,a=o*Nl;return["M",t,e-o,"C",t+r,e-o,t+n,e-a,t+n,e,"C",t+n,e+a,t+r,e+o,t,e+o,"C",t-r,e+o,t-n,e+a,t-n,e,"C",t-n,e-a,t-r,e-o,t,e-o,"Z"].join(" ")}(i);case"circle":return function FE(i){const t=ot(i,"cx",0),e=ot(i,"cy",0),n=ot(i,"r"),o=n*Nl;return["M",t,e-n,"C",t+o,e-n,t+n,e-o,t+n,e,"C",t+n,e+o,t+o,e+n,t,e+n,"C",t-o,e+n,t-n,e+o,t-n,e,"C",t-n,e-o,t-o,e-n,t,e-n,"Z"].join(" ")}(i);case"rect":return function jE(i){return Eh({x:ot(i,"x",0),y:ot(i,"y",0),width:ot(i,"width",0),height:ot(i,"height",0),rx:ot(i,"rx",0),ry:ot(i,"ry",0)})}(i)}throw new Error(`"${t}" cannot be converted to svg path element.`)}const Kr=dn("svg"),YE=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,kh=/[ ,]+/,GE=/^(\w+)\((.*)\)/;function Qe(i){const t=Kr.createSVGMatrix();if(null!=i){const e=i,n=t;for(const o in e)n[o]=e[o]}return t}function Cs(i){return null!=i?(i instanceof DOMMatrix||(i=Qe(i)),Kr.createSVGTransformFromMatrix(i)):Kr.createSVGTransform()}function _s(i){let t=Qe();const e=null!=i&&i.match(YE);if(!e)return t;for(let n=0,o=e.length;n<o;n+=1){const a=e[n].match(GE);if(a){let c,l,h,u,d,f=Qe();const p=a[2].split(kh);switch(a[1].toLowerCase()){case"scale":c=parseFloat(p[0]),l=void 0===p[1]?c:parseFloat(p[1]),f=f.scaleNonUniform(c,l);break;case"translate":h=parseFloat(p[0]),u=parseFloat(p[1]),f=f.translate(h,u);break;case"rotate":d=parseFloat(p[0]),h=parseFloat(p[1])||0,u=parseFloat(p[2])||0,f=0!==h||0!==u?f.translate(h,u).rotate(d).translate(-h,-u):f.rotate(d);break;case"skewx":d=parseFloat(p[0]),f=f.skewX(d);break;case"skewy":d=parseFloat(p[0]),f=f.skewY(d);break;case"matrix":f.a=parseFloat(p[0]),f.b=parseFloat(p[1]),f.c=parseFloat(p[2]),f.d=parseFloat(p[3]),f.e=parseFloat(p[4]),f.f=parseFloat(p[5]);break;default:continue}t=t.multiply(f)}}return t}function ro(i){const t=i||{};return`matrix(${null!=t.a?t.a:1},${null!=t.b?t.b:0},${null!=t.c?t.c:0},${null!=t.d?t.d:1},${null!=t.e?t.e:0},${null!=t.f?t.f:0})`}function ea(i){let t,e,n;if(i){const r=kh;if(i.trim().indexOf("matrix")>=0){const c=function qE(i){const t=kl(i,{x:0,y:1}),e=kl(i,{x:1,y:0}),n=180/Math.PI*Math.atan2(t.y,t.x)-90;return{skewX:n,skewY:180/Math.PI*Math.atan2(e.y,e.x),translateX:i.e,translateY:i.f,scaleX:Math.sqrt(i.a*i.a+i.b*i.b),scaleY:Math.sqrt(i.c*i.c+i.d*i.d),rotation:n}}(_s(i));t=[c.translateX,c.translateY],e=[c.rotation],n=[c.scaleX,c.scaleY];const l=[];(0!==t[0]||0!==t[1])&&l.push(`translate(${t.join(",")})`),(1!==n[0]||1!==n[1])&&l.push(`scale(${n.join(",")})`),0!==e[0]&&l.push(`rotate(${e[0]})`),i=l.join(" ")}else{const a=i.match(/translate\((.*?)\)/);a&&(t=a[1].split(r));const c=i.match(/rotate\((.*?)\)/);c&&(e=c[1].split(r));const l=i.match(/scale\((.*?)\)/);l&&(n=l[1].split(r))}}const o=n&&n[0]?parseFloat(n[0]):1;return{raw:i||"",translation:{tx:t&&t[0]?parseInt(t[0],10):0,ty:t&&t[1]?parseInt(t[1],10):0},rotation:{angle:e&&e[0]?parseInt(e[0],10):0,cx:e&&e[1]?parseInt(e[1],10):void 0,cy:e&&e[2]?parseInt(e[2],10):void 0},scale:{sx:o,sy:n&&n[1]?parseFloat(n[1]):o}}}function kl(i,t){return{x:t.x*i.a+t.y*i.c+0,y:t.x*i.b+t.y*i.d+0}}function ao(i,t,e={}){if(null==t)return _s(le(i,"transform"));if(e.absolute)return void i.setAttribute("transform",ro(t));const n=i.transform,o=Cs(t);n.baseVal.appendItem(o)}function Dh(i,t,e=0,n={}){let o=le(i,"transform");const r=ea(o);if(null==t)return r.translation;o=r.raw,o=o.replace(/translate\([^)]*\)/g,"").trim(),i.setAttribute("transform",`translate(${n.absolute?t:r.translation.tx+t},${n.absolute?e:r.translation.ty+e}) ${o}`.trim())}function Dl(i,t,e,n,o={}){let r=le(i,"transform");const a=ea(r);if(null==t)return a.rotation;r=a.raw,r=r.replace(/rotate\([^)]*\)/g,"").trim(),t%=360,i.setAttribute("transform",`${r} rotate(${o.absolute?t:a.rotation.angle+t}${null!=e&&null!=n?`,${e},${n}`:""})`.trim())}function Il(i,t,e){let n=le(i,"transform");const o=ea(n);if(null==t)return o.scale;e=e??t,n=o.raw,n=n.replace(/scale\([^)]*\)/g,"").trim(),i.setAttribute("transform",`${n} scale(${t},${e})`.trim())}function xs(i,t){if(En(t)&&En(i)){const e=t.getScreenCTM(),n=i.getScreenCTM();if(e&&n)return e.inverse().multiply(n)}return Qe()}var Dt,di,ie,co;!function(i){const t={};i.get=function e(r){return t[r]||{}},i.register=function n(r,a){t[r]=a},i.unregister=function o(r){delete t[r]}}(Dt||(Dt={})),function(i){const t=new WeakMap;i.ensure=function e(r){return t.has(r)||t.set(r,{events:Object.create(null)}),t.get(r)},i.get=function n(r){return t.get(r)},i.remove=function o(r){return t.delete(r)}}(di||(di={})),function(i){i.returnTrue=()=>!0,i.returnFalse=()=>!1,i.stopPropagationCallback=function t(o){o.stopPropagation()},i.addEventListener=function e(o,r,a){null!=o.addEventListener&&o.addEventListener(r,a)},i.removeEventListener=function n(o,r,a){null!=o.removeEventListener&&o.removeEventListener(r,a)}}(ie||(ie={})),function(i){const t=/[^\x20\t\r\n\f]+/g,e=/^([^.]*)(?:\.(.+)|)/;i.splitType=function n(c){return(c||"").match(t)||[""]},i.normalizeType=function o(c){const l=e.exec(c)||[];return{originType:l[1]?l[1].trim():l[1],namespaces:l[2]?l[2].split(".").map(h=>h.trim()).sort():[]}},i.isValidTarget=function r(c){return 1===c.nodeType||9===c.nodeType||!+c.nodeType},i.isValidSelector=function a(c,l){return!l||null!=c.querySelector&&null!=c.querySelector(l)}}(ie||(ie={})),function(i){let t=0;const e=new WeakMap;i.ensureHandlerId=function n(c){return e.has(c)||(e.set(c,t),t+=1),e.get(c)},i.getHandlerId=function o(c){return e.get(c)},i.removeHandlerId=function r(c){return e.delete(c)},i.setHandlerId=function a(c,l){return e.set(c,l)}}(ie||(ie={})),function(i){i.getHandlerQueue=function t(e,n){const o=[],r=di.get(e),a=r&&r.events&&r.events[n.type],c=a&&a.handlers||[],l=a?a.delegateCount:0;if(l>0&&!("click"===n.type&&"number"==typeof n.button&&n.button>=1))for(let h=n.target;h!==e;h=h.parentNode||e)if(1===h.nodeType&&("click"!==n.type||!0!==h.disabled)){const u=[],d={};for(let f=0;f<l;f+=1){const p=c[f],g=p.selector;if(null!=g&&null==d[g]){const v=[];e.querySelectorAll(g).forEach(b=>{v.push(b)}),d[g]=v.includes(h)}d[g]&&u.push(p)}u.length&&o.push({elem:h,handlers:u})}return l<c.length&&o.push({elem:e,handlers:c.slice(l)}),o}}(ie||(ie={})),function(i){i.isWindow=function t(e){return null!=e&&e===e.window}}(ie||(ie={})),function(i){i.contains=function t(e,n){const o=9===e.nodeType?e.documentElement:e,r=n&&n.parentNode;return e===r||!(!r||1!==r.nodeType||!(o.contains?o.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}}(ie||(ie={}));class Xt{constructor(t,e){this.isDefaultPrevented=ie.returnFalse,this.isPropagationStopped=ie.returnFalse,this.isImmediatePropagationStopped=ie.returnFalse,this.isSimulated=!1,"string"==typeof t?this.type=t:t.type&&(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?ie.returnTrue:ie.returnFalse,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.timeStamp=t.timeStamp),e&&Object.assign(this,e),this.timeStamp||(this.timeStamp=Date.now())}preventDefault(){const t=this.originalEvent;this.isDefaultPrevented=ie.returnTrue,t&&!this.isSimulated&&t.preventDefault()}stopPropagation(){const t=this.originalEvent;this.isPropagationStopped=ie.returnTrue,t&&!this.isSimulated&&t.stopPropagation()}stopImmediatePropagation(){const t=this.originalEvent;this.isImmediatePropagationStopped=ie.returnTrue,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}}(function(i){i.create=function t(e){return e instanceof i?e:new i(e)}})(Xt||(Xt={})),function(i){i.addProperty=function t(e,n){Object.defineProperty(i.prototype,e,{enumerable:!0,configurable:!0,get:"function"==typeof n?function(){if(this.originalEvent)return n(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set(o){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:o})}})}}(Xt||(Xt={})),function(i){const t={bubbles:!0,cancelable:!0,eventPhase:!0,detail:!0,view:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pageX:!0,pageY:!0,screenX:!0,screenY:!0,toElement:!0,pointerId:!0,pointerType:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,touches:!0,changedTouches:!0,targetTouches:!0,which:!0,altKey:!0,ctrlKey:!0,metaKey:!0,shiftKey:!0};Object.keys(t).forEach(e=>i.addProperty(e,t[e]))}(Xt||(Xt={})),co||(co={}),Dt.register("load",{noBubble:!0}),co||(co={}),Dt.register("beforeunload",{postDispatch(t,e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}),co||(co={}),Dt.register("mouseenter",{delegateType:"mouseover",bindType:"mouseover",handle(t,e){let n;const o=e.relatedTarget,r=e.handleObj;return(!o||o!==t&&!ie.contains(t,o))&&(e.type=r.originType,n=r.handler.call(t,e),e.type="mouseover"),n}}),Dt.register("mouseleave",{delegateType:"mouseout",bindType:"mouseout",handle(t,e){let n;const o=e.relatedTarget,r=e.handleObj;return(!o||o!==t&&!ie.contains(t,o))&&(e.type=r.originType,n=r.handler.call(t,e),e.type="mouseout"),n}});var ws,gt,Ms;!function(i){let t;function o(a,c,...l){const h=Xt.create(c);h.delegateTarget=a;const u=Dt.get(h.type);if(u.preDispatch&&!1===u.preDispatch(a,h))return;const d=ie.getHandlerQueue(a,h);for(let f=0,p=d.length;f<p&&!h.isPropagationStopped();f+=1){const g=d[f];h.currentTarget=g.elem;for(let m=0,v=g.handlers.length;m<v&&!h.isImmediatePropagationStopped();m+=1){const b=g.handlers[m];if(null==h.rnamespace||b.namespace&&h.rnamespace.test(b.namespace)){h.handleObj=b,h.data=b.data;const y=Dt.get(b.originType).handle,z=y?y(g.elem,h,...l):b.handler.call(g.elem,h,...l);void 0!==z&&(h.result=z,!1===z&&(h.preventDefault(),h.stopPropagation()))}}}return u.postDispatch&&u.postDispatch(a,h),h.result}i.on=function e(a,c,l,h,u){if(!ie.isValidTarget(a))return;let d;if("function"!=typeof l){const{handler:m,selector:v}=l,b=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(l,["handler","selector"]);l=m,u=v,d=b}const f=di.ensure(a);let p=f.handler;null==p&&(p=f.handler=function(m,...v){return t!==m.type?o(a,m,...v):void 0});const g=ie.ensureHandlerId(l);ie.splitType(c).forEach(m=>{const{originType:v,namespaces:b}=ie.normalizeType(m);if(!v)return;let y=v,z=Dt.get(y);y=(u?z.delegateType:z.bindType)||y,z=Dt.get(y);const C=Object.assign({type:y,originType:v,data:h,selector:u,guid:g,handler:l,namespace:b.join(".")},d),x=f.events;let w=x[y];w||(w=x[y]={handlers:[],delegateCount:0},(!z.setup||!1===z.setup(a,h,b,p))&&ie.addEventListener(a,y,p)),z.add&&(ie.removeHandlerId(C.handler),z.add(a,C),ie.setHandlerId(C.handler,g)),u?(w.handlers.splice(w.delegateCount,0,C),w.delegateCount+=1):w.handlers.push(C)})},i.off=function n(a,c,l,h,u){const d=di.get(a);if(!d)return;const f=d.events;f&&(ie.splitType(c).forEach(p=>{const{originType:g,namespaces:m}=ie.normalizeType(p);if(!g)return void Object.keys(f).forEach(x=>{n(a,x+p,l,h,!0)});let v=g;const b=Dt.get(v);v=(h?b.delegateType:b.bindType)||v;const y=f[v]||{},z=m.length>0?new RegExp(`(^|\\.)${m.join("\\.(?:.*\\.|)")}(\\.|$)`):null,C=y.handlers.length;for(let x=y.handlers.length-1;x>=0;x-=1){const w=y.handlers[x];(u||g===w.originType)&&(!l||ie.getHandlerId(l)===w.guid)&&(null==z||w.namespace&&z.test(w.namespace))&&(null==h||h===w.selector||"**"===h&&w.selector)&&(y.handlers.splice(x,1),w.selector&&(y.delegateCount-=1),b.remove&&b.remove(a,w))}C&&0===y.handlers.length&&((!b.teardown||!1===b.teardown(a,m,d.handler))&&ie.removeEventListener(a,v,d.handler),delete f[v])}),0===Object.keys(f).length&&di.remove(a))},i.dispatch=o,i.trigger=function r(a,c,l,h){let u=a,d="string"==typeof a?a:a.type,f="string"==typeof a||null==u.namespace?[]:u.namespace.split(".");const p=l;if(3===p.nodeType||8===p.nodeType)return;d.indexOf(".")>-1&&(f=d.split("."),d=f.shift(),f.sort());const g=d.indexOf(":")<0&&`on${d}`;u=a instanceof Xt?a:new Xt(d,"object"==typeof a?a:null),u.namespace=f.join("."),u.rnamespace=u.namespace?new RegExp(`(^|\\.)${f.join("\\.(?:.*\\.|)")}(\\.|$)`):null,u.result=void 0,u.target||(u.target=p);const m=[u];Array.isArray(c)?m.push(...c):m.push(c);const v=Dt.get(d);if(!h&&v.trigger&&!1===v.trigger(p,u,c))return;let b;const y=[p];if(!h&&!v.noBubble&&!ie.isWindow(p)){b=v.delegateType||d;let C=p,x=p.parentNode;for(;null!=x;)y.push(x),C=x,x=x.parentNode;if(C===(p.ownerDocument||document)){const O=C.defaultView||C.parentWindow||window;y.push(O)}}let z=p;for(let C=0,x=y.length;C<x&&!u.isPropagationStopped();C+=1){const w=y[C];z=w,u.type=C>1?b:v.bindType||d;const O=di.get(w);O&&O.events[u.type]&&O.handler&&O.handler.call(w,...m);const P=g&&w[g]||null;P&&ie.isValidTarget(w)&&(u.result=P.call(w,...m),!1===u.result&&u.preventDefault())}if(u.type=d,!h&&!u.isDefaultPrevented()){const C=v.preventDefault;if((null==C||!1===C(y.pop(),u,c))&&ie.isValidTarget(p)&&g&&"function"==typeof p[d]&&!ie.isWindow(p)){const x=p[g];x&&(p[g]=null),t=d,u.isPropagationStopped()&&z.addEventListener(d,ie.stopPropagationCallback),p[d](),u.isPropagationStopped()&&z.removeEventListener(d,ie.stopPropagationCallback),t=void 0,x&&(p[g]=x)}}return u.result}}(ws||(ws={})),function(i){i.on=function t(r,a,c,l,h){return Ms.on(r,a,c,l,h),r},i.once=function e(r,a,c,l,h){return Ms.on(r,a,c,l,h,!0),r},i.off=function n(r,a,c,l){return Ms.off(r,a,c,l),r},i.trigger=function o(r,a,c,l){return ws.trigger(a,c,r,l),r}}(gt||(gt={})),function(i){i.on=function t(n,o,r,a,c,l){if("object"==typeof o)return"string"!=typeof r&&(a=a||r,r=void 0),void Object.keys(o).forEach(h=>t(n,h,r,a,o[h],l));if(null==a&&null==c?(c=r,a=r=void 0):null==c&&("string"==typeof r?(c=a,a=void 0):(c=a,a=r,r=void 0)),!1===c)c=ie.returnFalse;else if(!c)return;if(l){const h=c;ie.setHandlerId(c=function(u,...d){return i.off(n,u),h.call(this,u,...d)},ie.ensureHandlerId(h))}ws.on(n,o,c,a,r)},i.off=function e(n,o,r,a){if(o&&null!=o.preventDefault&&null!=o.handleObj){const l=o.handleObj;e(o.delegateTarget,l.namespace?`${l.originType}.${l.namespace}`:l.originType,l.selector,l.handler)}else if("object"!=typeof o)(!1===r||"function"==typeof r)&&(a=r,r=void 0),!1===a&&(a=ie.returnFalse),ws.off(n,o,a,r);else{const l=o;Object.keys(l).forEach(h=>e(n,h,r,l[h]))}}}(Ms||(Ms={}));class Ih{constructor(t,e,n){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=An.isEventSupported("wheel")?"wheel":"mousewheel",this.target=t,this.onWheelCallback=e,this.onWheelGuard=n,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}enable(){this.target.addEventListener(this.eventName,this.onWheel,{passive:!1})}disable(){this.target.removeEventListener(this.eventName,this.onWheel)}onWheel(t){if(null!=this.onWheelGuard&&!this.onWheelGuard(t))return;let e;this.deltaX+=t.deltaX,this.deltaY+=t.deltaY,t.preventDefault(),(0!==this.deltaX||0!==this.deltaY)&&(t.stopPropagation(),e=!0),!0===e&&0===this.animationFrameId&&(this.animationFrameId=requestAnimationFrame(()=>{this.didWheel(t)}))}didWheel(t){this.animationFrameId=0,this.onWheelCallback(t,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}function Ss(i){const t=i.getBoundingClientRect(),e=i.ownerDocument.defaultView;return{top:t.top+e.pageYOffset,left:t.left+e.pageXOffset}}function Ph(i,t=60){let e=null;return(...n)=>{e&&clearTimeout(e),e=window.setTimeout(()=>{i.apply(this,n)},t)}}const oN=typeof ResizeObserver<"u"?function iN(i){let t=null,e=[];const n=Ph(()=>{e.forEach(l=>{l(i)})}),a=()=>{t&&(t.disconnect(),e=[],t=null)};return{element:i,bind:l=>{t||(t=(()=>{const l=new ResizeObserver(n);return l.observe(i),n(),l})()),-1===e.indexOf(l)&&e.push(l)},destroy:a,unbind:l=>{const h=e.indexOf(l);-1!==h&&e.splice(h,1),0===e.length&&t&&a()}}}:function nN(i){let t=null,e=[];const o=Ph(()=>{e.forEach(l=>l(i))}),a=()=>{t&&t.parentNode&&(t.contentDocument&&t.contentDocument.defaultView.removeEventListener("resize",o),t.parentNode.removeChild(t),t=null,e=[])};return{element:i,bind:l=>{t||(t=(()=>{"static"===getComputedStyle(i).position&&(i.style.position="relative");const l=document.createElement("object");return l.onload=()=>{l.contentDocument.defaultView.addEventListener("resize",o),o()},l.style.display="block",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.height="100%",l.style.width="100%",l.style.overflow="hidden",l.style.pointerEvents="none",l.style.zIndex="-1",l.style.opacity="0",l.setAttribute("tabindex","-1"),l.type="text/html",i.appendChild(l),l.data="about:blank",l})()),-1===e.indexOf(l)&&e.push(l)},destroy:a,unbind:l=>{const h=e.indexOf(l);-1!==h&&e.splice(h,1),0===e.length&&t&&a()}}};var ta,Pl,fi;!function(i){const t=new WeakMap;function e(o){let r=t.get(o);return r||(r=oN(o),t.set(o,r),r)}i.bind=(o,r)=>{const a=e(o);return a.bind(r),()=>a.unbind(r)},i.clear=o=>{!function n(o){o.destroy(),t.delete(o.element)}(e(o))}}(ta||(ta={}));class Ts{constructor(t={}){this.comparator=t.comparator||Ts.defaultComparator,this.index={},this.data=t.data||[],this.heapify()}isEmpty(){return 0===this.data.length}insert(t,e,n){const o={priority:t,value:e},r=this.data.length;return n&&(o.id=n,this.index[n]=r),this.data.push(o),this.bubbleUp(r),this}peek(){return this.data[0]?this.data[0].value:null}peekPriority(){return this.data[0]?this.data[0].priority:null}updatePriority(t,e){const n=this.index[t];if(typeof n>"u")throw new Error(`Node with id '${t}' was not found in the heap.`);const o=this.data,a=this.comparator(e,o[n].priority);a<0?(o[n].priority=e,this.bubbleUp(n)):a>0&&(o[n].priority=e,this.bubbleDown(n))}remove(){const t=this.data,e=t[0],n=t.pop();return e.id&&delete this.index[e.id],t.length>0&&(t[0]=n,n.id&&(this.index[n.id]=0),this.bubbleDown(0)),e?e.value:null}heapify(){for(let t=0;t<this.data.length;t+=1)this.bubbleUp(t)}bubbleUp(t){const e=this.data;let n,o,r=t;for(;r>0&&(o=r-1>>>1,this.comparator(e[r].priority,e[o].priority)<0);){n=e[o],e[o]=e[r];let a=e[r].id;null!=a&&(this.index[a]=o),e[r]=n,a=e[r].id,null!=a&&(this.index[a]=r),r=o}}bubbleDown(t){const e=this.data,n=e.length-1;let o=t;for(;;){const r=1+(o<<1),a=r+1;let c=o;if(r<=n&&this.comparator(e[r].priority,e[c].priority)<0&&(c=r),a<=n&&this.comparator(e[a].priority,e[c].priority)<0&&(c=a),c===o)break;{const l=e[c];e[c]=e[o];let h=e[o].id;null!=h&&(this.index[h]=c),e[o]=l,h=e[o].id,null!=h&&(this.index[h]=o),o=c}}}}!function(i){i.defaultComparator=(t,e)=>t-e}(Ts||(Ts={})),function(i){i.run=function t(e,n,o=((r,a)=>1)){const r={},a={},c={},l=new Ts;for(r[n]=0,Object.keys(e).forEach(h=>{h!==n&&(r[h]=1/0),l.insert(r[h],h,h)});!l.isEmpty();){const h=l.remove();c[h]=!0;const u=e[h]||[];for(let d=0;d<u.length;d+=1){const f=u[d];if(!c[f]){const p=r[h]+o(h,f);p<r[f]&&(r[f]=p,a[f]=h,l.updatePriority(f,p))}}}return a}}(Pl||(Pl={}));class fn{constructor(t,e,n,o){return null==t?this.set(255,255,255,1):"number"==typeof t?this.set(t,e,n,o):"string"==typeof t?fn.fromString(t)||this:Array.isArray(t)?this.set(t):void this.set(t.r,t.g,t.b,null==t.a?1:t.a)}blend(t,e,n){this.set(t.r+(e.r-t.r)*n,t.g+(e.g-t.g)*n,t.b+(e.b-t.b)*n,t.a+(e.a-t.a)*n)}lighten(t){const e=fn.lighten(this.toArray(),t);this.r=e[0],this.g=e[1],this.b=e[2],this.a=e[3]}darken(t){this.lighten(-t)}set(t,e,n,o){const r=Array.isArray(t)?t[0]:t,a=Array.isArray(t)?t[1]:e,c=Array.isArray(t)?t[2]:n,l=Array.isArray(t)?t[3]:o;return this.r=Math.round(Ct(r,0,255)),this.g=Math.round(Ct(a,0,255)),this.b=Math.round(Ct(c,0,255)),this.a=null==l?1:Ct(l,0,1),this}toHex(){return`#${["r","g","b"].map(e=>{const n=this[e].toString(16);return n.length<2?`0${n}`:n}).join("")}`}toRGBA(){return this.toArray()}toHSLA(){return fn.rgba2hsla(this.r,this.g,this.b,this.a)}toCSS(t){const e=`${this.r},${this.g},${this.b},`;return t?`rgb(${e})`:`rgba(${e},${this.a})`}toGrey(){return fn.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}toArray(){return[this.r,this.g,this.b,this.a]}toString(){return this.toCSS()}}(function(i){function e(z){return new i([...g(z),1])}function n(z){const C=z.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(C){const x=C[1].split(/\s*,\s*/).map(w=>parseInt(w,10));return new i(x)}return null}function o(z,C,x){x<0&&++x,x>1&&--x;const w=6*x;return w<1?z+(C-z)*w:2*x<1?C:3*x<2?z+(C-z)*(2/3-x)*6:z}function r(z){const C=z.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(C){const x=C[2].split(/\s*,\s*/),w=(parseFloat(x[0])%360+360)%360/360,O=parseFloat(x[1])/100,P=parseFloat(x[2])/100,E=null==x[3]?1:parseInt(x[3],10);return new i(h(w,O,P,E))}return null}function h(z,C,x,w){const O=Array.isArray(z)?z[0]:z,P=Array.isArray(z)?z[1]:C,E=Array.isArray(z)?z[2]:x,L=Array.isArray(z)?z[3]:w,k=E<=.5?E*(P+1):E+P-E*P,V=2*E-k;return[256*o(V,k,O+1/3),256*o(V,k,O),256*o(V,k,O-1/3),L??1]}function u(z){return new i(Math.round(256*Math.random()),Math.round(256*Math.random()),Math.round(256*Math.random()),z?void 0:parseFloat(Math.random().toFixed(2)))}function g(z){const C=0===z.indexOf("#")?z:`#${z}`;let x=Number(`0x${C.substr(1)}`);if(4!==C.length&&7!==C.length||Number.isNaN(x))throw new Error("Invalid hex color.");const w=4===C.length?4:8,O=(1<<w)-1,P=["b","g","r"].map(()=>{const E=x&O;return x>>=w,4===w?17*E:E});return[P[2],P[1],P[0]]}function m(z,C,x){const w=O=>O.length<2?`0${O}`:O;return`${w(z.toString(16))}${w(C.toString(16))}${w(x.toString(16))}`}function y(z,C){if("string"==typeof z){const O="#"===z[0],P=parseInt(O?z.substr(1):z,16),E=Ct((P>>16)+C,0,255),L=Ct((P>>8&255)+C,0,255);return`${O?"#":""}${(Ct((255&P)+C,0,255)|L<<8|E<<16).toString(16)}`}const w=g(y(m(z[0],z[1],z[2]),C));return[w[0],w[1],w[2],z[3]]}i.fromArray=function t(z){return new i(z)},i.fromHex=e,i.fromRGBA=n,i.fromHSLA=r,i.fromString=function a(z){if(z.startsWith("#"))return e(z);if(z.startsWith("rgb"))return n(z);const C=i.named[z];return C?e(C):r(z)},i.makeGrey=function c(z,C){return i.fromArray([z,z,z,C])},i.rgba2hsla=function l(z,C,x,w){const O=Array.isArray(z)?z[0]:z,P=Array.isArray(z)?z[1]:C,E=Array.isArray(z)?z[2]:x,L=Array.isArray(z)?z[3]:w,k=Math.max(O,P,E),V=Math.min(O,P,E),K=(k+V)/2;let J=0,S=0;if(V!==k){const I=k-V;switch(S=K>.5?I/(2-k-V):I/(k+V),k){case O:J=(P-E)/I+(P<E?6:0);break;case P:J=(E-O)/I+2;break;case E:J=(O-P)/I+4}J/=6}return[J,S,K,L??1]},i.hsla2rgba=h,i.random=u,i.randomHex=function d(){let C="#";for(let x=0;x<6;x+=1)C+="0123456789ABCDEF"[Math.floor(16*Math.random())];return C},i.randomRGBA=function f(z){return u(z).toString()},i.invert=function p(z,C){if("string"==typeof z){const E="#"===z[0],[L,k,V]=g(z);return C?.299*L+.587*k+.114*V>186?"#000000":"#ffffff":`${E?"#":""}${m(255-L,255-k,255-V)}`}const x=z[0],w=z[1],O=z[2],P=z[3];return C?.299*x+.587*w+.114*O>186?[0,0,0,P]:[255,255,255,P]:[255-x,255-w,255-O,P]},i.lighten=function v(z,C){return y(z,C)},i.darken=function b(z,C){return y(z,-C)}})(fn||(fn={})),function(i){i.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(fn||(fn={}));class Vl{constructor(){this.clear()}clear(){this.map=new WeakMap,this.arr=[]}has(t){return this.map.has(t)}get(t){return this.map.get(t)}set(t,e){this.map.set(t,e),this.arr.push(t)}delete(t){const e=this.arr.indexOf(t);e>=0&&this.arr.splice(e,1);const n=this.map.get(t);return this.map.delete(t),n}each(t){this.arr.forEach(e=>{const n=this.map.get(e);t(n,e)})}dispose(){this.clear()}}!function(i){function t(o){const r=[],a=[];return Array.isArray(o)?r.push(...o):o.split("|").forEach(c=>{-1===c.indexOf("&")?r.push(c):a.push(...c.split("&"))}),{or:r,and:a}}i.parse=t,i.equals=function e(o,r){if(null!=o&&null!=r){const a=t(o),c=t(r),l=a.or.sort(),h=c.or.sort(),u=a.and.sort(),d=c.and.sort(),f=(p,g)=>p.length===g.length&&(0===p.length||p.every((m,v)=>m===g[v]));return f(l,h)&&f(u,d)}return null==o&&null==r},i.isMatch=function n(o,r,a){if(null==r||Array.isArray(r)&&0===r.length)return!a||!0!==o.altKey&&!0!==o.ctrlKey&&!0!==o.metaKey&&!0!==o.shiftKey;const{or:c,and:l}=t(r),h=u=>{const d=`${u.toLowerCase()}Key`;return!0===o[d]};return c.some(u=>h(u))&&l.every(u=>h(u))}}(fi||(fi={}));var kn=(()=>(function(i){i.linear=t=>t,i.quad=t=>t*t,i.cubic=t=>t*t*t,i.inout=t=>{if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},i.exponential=t=>Math.pow(2,10*(t-1)),i.bounce=t=>{for(let e=0,n=1;;e+=n,n/=2)if(t>=(7-4*e)/11){const o=(11-6*e-11*t)/4;return-o*o+n*n}}}(kn||(kn={})),kn))();(function(i){i.decorators={reverse:t=>e=>1-t(1-e),reflect:t=>e=>.5*(e<.5?t(2*e):2-t(2-2*e)),clamp:(t,e=0,n=1)=>o=>{const r=t(o);return r<e?e:r>n?n:r},back:(t=1.70158)=>e=>e*e*((t+1)*e-t),elastic:(t=1.5)=>e=>Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}})(kn||(kn={})),function(i){function V(S){const I=S/1;if(I<1/2.75)return 7.5625*I*I;if(I<2/2.75){const W=I-.5454545454545454;return 7.5625*W*W+.75}if(I<2.5/2.75){const W=I-.8181818181818182;return 7.5625*W*W+.9375}{const W=I-.9545454545454546;return 7.5625*W*W+.984375}}function K(S){return 1-V(1-S)}i.easeInSine=function t(S){return-1*Math.cos(S*(Math.PI/2))+1},i.easeOutSine=function e(S){return Math.sin(S*(Math.PI/2))},i.easeInOutSine=function n(S){return-.5*(Math.cos(Math.PI*S)-1)},i.easeInQuad=function o(S){return S*S},i.easeOutQuad=function r(S){return S*(2-S)},i.easeInOutQuad=function a(S){return S<.5?2*S*S:(4-2*S)*S-1},i.easeInCubic=function c(S){return S*S*S},i.easeOutCubic=function l(S){const I=S-1;return I*I*I+1},i.easeInOutCubic=function h(S){return S<.5?4*S*S*S:(S-1)*(2*S-2)*(2*S-2)+1},i.easeInQuart=function u(S){return S*S*S*S},i.easeOutQuart=function d(S){const I=S-1;return 1-I*I*I*I},i.easeInOutQuart=function f(S){const I=S-1;return S<.5?8*S*S*S*S:1-8*I*I*I*I},i.easeInQuint=function p(S){return S*S*S*S*S},i.easeOutQuint=function g(S){const I=S-1;return 1+I*I*I*I*I},i.easeInOutQuint=function m(S){const I=S-1;return S<.5?16*S*S*S*S*S:1+16*I*I*I*I*I},i.easeInExpo=function v(S){return 0===S?0:Math.pow(2,10*(S-1))},i.easeOutExpo=function b(S){return 1===S?1:1-Math.pow(2,-10*S)},i.easeInOutExpo=function y(S){if(0===S||1===S)return S;const I=2*S,W=I-1;return I<1?.5*Math.pow(2,10*W):.5*(2-Math.pow(2,-10*W))},i.easeInCirc=function z(S){return-1*(Math.sqrt(1-S/1*S)-1)},i.easeOutCirc=function C(S){const I=S-1;return Math.sqrt(1-I*I)},i.easeInOutCirc=function x(S){const I=2*S,W=I-2;return I<1?-.5*(Math.sqrt(1-I*I)-1):.5*(Math.sqrt(1-W*W)+1)},i.easeInBack=function w(S,I=1.70158){return S*S*((I+1)*S-I)},i.easeOutBack=function O(S,I=1.70158){const W=S/1-1;return W*W*((I+1)*W+I)+1},i.easeInOutBack=function P(S,I=1.70158){const W=2*S,me=W-2,ve=1.525*I;return W<1?.5*W*W*((ve+1)*W-ve):.5*(me*me*((ve+1)*me+ve)+2)},i.easeInElastic=function E(S,I=.7){if(0===S||1===S)return S;const me=S/1-1,ve=1-I,ke=ve/(2*Math.PI)*Math.asin(1);return-Math.pow(2,10*me)*Math.sin((me-ke)*(2*Math.PI)/ve)},i.easeOutElastic=function L(S,I=.7){const W=1-I,me=2*S;if(0===S||1===S)return S;const ve=W/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*me)*Math.sin((me-ve)*(2*Math.PI)/W)+1},i.easeInOutElastic=function k(S,I=.65){const W=1-I;if(0===S||1===S)return S;const me=2*S,ve=me-1,ke=W/(2*Math.PI)*Math.asin(1);return me<1?Math.pow(2,10*ve)*Math.sin((ve-ke)*(2*Math.PI)/W)*-.5:Math.pow(2,-10*ve)*Math.sin((ve-ke)*(2*Math.PI)/W)*.5+1},i.easeOutBounce=V,i.easeInBounce=K,i.easeInOutBounce=function J(S){return S<.5?.5*K(2*S):.5*V(2*S-1)+.5}}(kn||(kn={}));var Dn=(()=>(function(i){i.number=(t,e)=>{const n=e-t;return o=>t+n*o},i.object=(t,e)=>{const n=Object.keys(t);return o=>{const r={};for(let a=n.length-1;-1!==a;a-=1){const c=n[a];r[c]=t[c]+(e[c]-t[c])*o}return r}},i.unit=(t,e)=>{const n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,o=n.exec(t),r=n.exec(e),a=r?r[1]:"",c=o?+o[1]:0,l=r?+r[1]:0,h=a.indexOf("."),u=h>0?a[1].length-h-1:0,d=l-c,f=o?o[2]:"";return p=>(c+d*p).toFixed(u)+f},i.color=(t,e)=>{const n=parseInt(t.slice(1),16),o=parseInt(e.slice(1),16),r=255&n,a=(255&o)-r,c=65280&n,l=(65280&o)-c,h=16711680&n,u=(16711680&o)-h;return d=>`#${(1<<24|r+a*d&255|c+l*d&65280|h+u*d&16711680).toString(16).slice(1)}`}}(Dn||(Dn={})),Dn))();const Os=[];function As(i,t){const e=Os.find(n=>n.name===i);if(!(e&&(e.loadTimes+=1,e.loadTimes>1)||An.isApplyingHMR())){const n=document.createElement("style");n.setAttribute("type","text/css"),n.textContent=t;const o=document.querySelector("head");o&&o.insertBefore(n,o.firstChild),Os.push({name:i,loadTimes:1,styleElement:n})}}function Es(i){const t=Os.findIndex(e=>e.name===i);if(t>-1){const e=Os[t];if(e.loadTimes-=1,e.loadTimes>0)return;let n=e.styleElement;n&&n.parentNode&&n.parentNode.removeChild(n),n=null,Os.splice(t,1)}}var he,de;!function(i){i.toDeg=function t(n){return 180*n/Math.PI%360},i.toRad=function(n,o=!1){return(o?n:n%360)*Math.PI/180},i.normalize=function e(n){return n%360+(n<0?360:0)}}(he||(he={})),function(i){i.round=function t(c,l=0){return Number.isInteger(c)?c:+c.toFixed(l)},i.random=function e(c,l){let h,u;if(null==l?(u=c??1,h=0):(u=l,h=c??0),u<h){const d=h;h=u,u=d}return Math.floor(Math.random()*(u-h+1)+h)},i.clamp=function n(c,l,h){return Number.isNaN(c)?NaN:Number.isNaN(l)||Number.isNaN(h)?0:l<h?c<l?l:c>h?h:c:c<h?h:c>l?l:c},i.snapToGrid=function o(c,l){return l*Math.round(c/l)},i.containsPoint=function r(c,l){return null!=l&&null!=c&&l.x>=c.x&&l.x<=c.x+c.width&&l.y>=c.y&&l.y<=c.y+c.height},i.squaredLength=function a(c,l){const h=c.x-l.x,u=c.y-l.y;return h*h+u*u}}(de||(de={}));class In{valueOf(){return this.toJSON()}toString(){return JSON.stringify(this.toJSON())}}class _ extends In{constructor(t,e){super(),this.x=t??0,this.y=e??0}round(t=0){return this.x=de.round(this.x,t),this.y=de.round(this.y,t),this}add(t,e){const n=_.create(t,e);return this.x+=n.x,this.y+=n.y,this}update(t,e){const n=_.create(t,e);return this.x=n.x,this.y=n.y,this}translate(t,e){const n=_.create(t,e);return this.x+=n.x,this.y+=n.y,this}rotate(t,e){const n=_.rotate(this,t,e);return this.x=n.x,this.y=n.y,this}scale(t,e,n=new _){const o=_.create(n);return this.x=o.x+t*(this.x-o.x),this.y=o.y+e*(this.y-o.y),this}closest(t){if(1===t.length)return _.create(t[0]);let e=null,n=1/0;return t.forEach(o=>{const r=this.squaredDistance(o);r<n&&(e=o,n=r)}),e?_.create(e):null}distance(t){return Math.sqrt(this.squaredDistance(t))}squaredDistance(t){const e=_.create(t),n=this.x-e.x,o=this.y-e.y;return n*n+o*o}manhattanDistance(t){const e=_.create(t);return Math.abs(e.x-this.x)+Math.abs(e.y-this.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}theta(t=new _){const e=_.create(t);let r=Math.atan2(-(e.y-this.y),e.x-this.x);return r<0&&(r=2*Math.PI+r),180*r/Math.PI}angleBetween(t,e){if(this.equals(t)||this.equals(e))return NaN;let n=this.theta(e)-this.theta(t);return n<0&&(n+=360),n}vectorAngle(t){return new _(0,0).angleBetween(this,t)}toPolar(t){return this.update(_.toPolar(this,t)),this}changeInAngle(t,e,n=new _){return this.clone().translate(-t,-e).theta(n)-this.theta(n)}adhereToRect(t){return de.containsPoint(t,this)||(this.x=Math.min(Math.max(this.x,t.x),t.x+t.width),this.y=Math.min(Math.max(this.y,t.y),t.y+t.height)),this}bearing(t){const e=_.create(t),n=he.toRad(this.y),o=he.toRad(e.y),c=he.toRad(e.x-this.x),l=Math.sin(c)*Math.cos(o),h=Math.cos(n)*Math.sin(o)-Math.sin(n)*Math.cos(o)*Math.cos(c);let f=he.toDeg(Math.atan2(l,h))-22.5;return f<0&&(f+=360),f=parseInt(f/45,10),["NE","E","SE","S","SW","W","NW","N"][f]}cross(t,e){if(null!=t&&null!=e){const n=_.create(t),o=_.create(e);return(o.x-this.x)*(n.y-this.y)-(o.y-this.y)*(n.x-this.x)}return NaN}dot(t){const e=_.create(t);return this.x*e.x+this.y*e.y}diff(t,e){if("number"==typeof t)return new _(this.x-t,this.y-e);const n=_.create(t);return new _(this.x-n.x,this.y-n.y)}lerp(t,e){const n=_.create(t);return new _((1-e)*this.x+e*n.x,(1-e)*this.y+e*n.y)}normalize(t=1){const e=t/this.magnitude();return this.scale(e,e)}move(t,e){const n=_.create(t),o=he.toRad(n.theta(this));return this.translate(Math.cos(o)*e,-Math.sin(o)*e)}reflection(t){return _.create(t).move(this,this.distance(t))}snapToGrid(t,e){return this.x=de.snapToGrid(this.x,t),this.y=de.snapToGrid(this.y,e??t),this}equals(t){const e=_.create(t);return null!=e&&e.x===this.x&&e.y===this.y}clone(){return _.clone(this)}toJSON(){return _.toJSON(this)}serialize(){return`${this.x} ${this.y}`}}(function(i){i.isPoint=function t(e){return null!=e&&e instanceof i}})(_||(_={})),function(i){i.isPointLike=function t(n){return null!=n&&"object"==typeof n&&"number"==typeof n.x&&"number"==typeof n.y},i.isPointData=function e(n){return null!=n&&Array.isArray(n)&&2===n.length&&"number"==typeof n[0]&&"number"==typeof n[1]}}(_||(_={})),function(i){function e(d){return i.isPoint(d)?new i(d.x,d.y):Array.isArray(d)?new i(d[0],d[1]):new i(d.x,d.y)}function a(d,f){return d===f||null!=d&&null!=f&&d.x===f.x&&d.y===f.y}function u(d,f,p,g=new i){const m=e(d),v=e(g),b=m.x-v.x,y=m.y-v.y;return new i(b*f-y*p+v.x,y*f+b*p+v.y)}i.create=function t(d,f){return null==d||"number"==typeof d?new i(d,f):e(d)},i.clone=e,i.toJSON=function n(d){return i.isPoint(d)?{x:d.x,y:d.y}:Array.isArray(d)?{x:d[0],y:d[1]}:{x:d.x,y:d.y}},i.fromPolar=function o(d,f,p=new i){let g=Math.abs(d*Math.cos(f)),m=Math.abs(d*Math.sin(f));const v=e(p),b=he.normalize(he.toDeg(f));return b<90?m=-m:b<180?(g=-g,m=-m):b<270&&(g=-g),new i(v.x+g,v.y+m)},i.toPolar=function r(d,f=new i){const p=e(d),g=e(f),m=p.x-g.x,v=p.y-g.y;return new i(Math.sqrt(m*m+v*v),he.toRad(g.theta(p)))},i.equals=a,i.equalPoints=function c(d,f){if(null==d&&null!=f||null!=d&&null==f||null!=d&&null!=f&&d.length!==f.length)return!1;if(null!=d&&null!=f)for(let p=0,g=d.length;p<g;p+=1)if(!a(d[p],f[p]))return!1;return!0},i.random=function l(d,f,p,g){return new i(de.random(d,f),de.random(p,g))},i.rotate=function h(d,f,p){const g=he.toRad(he.normalize(-f)),m=Math.sin(g);return u(d,Math.cos(g),m,p)},i.rotateEx=u}(_||(_={}));class F extends In{get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get origin(){return new _(this.x,this.y)}get topLeft(){return new _(this.x,this.y)}get topCenter(){return new _(this.x+this.width/2,this.y)}get topRight(){return new _(this.x+this.width,this.y)}get center(){return new _(this.x+this.width/2,this.y+this.height/2)}get bottomLeft(){return new _(this.x,this.y+this.height)}get bottomCenter(){return new _(this.x+this.width/2,this.y+this.height)}get bottomRight(){return new _(this.x+this.width,this.y+this.height)}get corner(){return new _(this.x+this.width,this.y+this.height)}get rightMiddle(){return new _(this.x+this.width,this.y+this.height/2)}get leftMiddle(){return new _(this.x,this.y+this.height/2)}get topLine(){return new $(this.topLeft,this.topRight)}get rightLine(){return new $(this.topRight,this.bottomRight)}get bottomLine(){return new $(this.bottomLeft,this.bottomRight)}get leftLine(){return new $(this.topLeft,this.bottomLeft)}constructor(t,e,n,o){super(),this.x=t??0,this.y=e??0,this.width=n??0,this.height=o??0}getOrigin(){return this.origin}getTopLeft(){return this.topLeft}getTopCenter(){return this.topCenter}getTopRight(){return this.topRight}getCenter(){return this.center}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}getBottomLeft(){return this.bottomLeft}getBottomCenter(){return this.bottomCenter}getBottomRight(){return this.bottomRight}getCorner(){return this.corner}getRightMiddle(){return this.rightMiddle}getLeftMiddle(){return this.leftMiddle}getTopLine(){return this.topLine}getRightLine(){return this.rightLine}getBottomLine(){return this.bottomLine}getLeftLine(){return this.leftLine}bbox(t){if(!t)return this.clone();const e=he.toRad(t),n=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e)),r=this.width*o+this.height*n,a=this.width*n+this.height*o;return new F(this.x+(this.width-r)/2,this.y+(this.height-a)/2,r,a)}round(t=0){return this.x=de.round(this.x,t),this.y=de.round(this.y,t),this.width=de.round(this.width,t),this.height=de.round(this.height,t),this}add(t,e,n,o){const r=F.create(t,e,n,o),a=Math.min(this.x,r.x),c=Math.min(this.y,r.y),l=Math.max(this.x+this.width,r.x+r.width),h=Math.max(this.y+this.height,r.y+r.height);return this.x=a,this.y=c,this.width=l-a,this.height=h-c,this}update(t,e,n,o){const r=F.create(t,e,n,o);return this.x=r.x,this.y=r.y,this.width=r.width,this.height=r.height,this}inflate(t,e){const n=t,o=e??t;return this.x-=n,this.y-=o,this.width+=2*n,this.height+=2*o,this}snapToGrid(t,e){const n=this.origin.snapToGrid(t,e),o=this.corner.snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=o.x-n.x,this.height=o.y-n.y,this}translate(t,e){const n=_.create(t,e);return this.x+=n.x,this.y+=n.y,this}scale(t,e,n=new _){const o=this.origin.scale(t,e,n);return this.x=o.x,this.y=o.y,this.width*=t,this.height*=e,this}rotate(t,e=this.getCenter()){if(0!==t){const n=he.toRad(t),o=Math.cos(n),r=Math.sin(n);let a=this.getOrigin(),c=this.getTopRight(),l=this.getBottomRight(),h=this.getBottomLeft();a=_.rotateEx(a,o,r,e),c=_.rotateEx(c,o,r,e),l=_.rotateEx(l,o,r,e),h=_.rotateEx(h,o,r,e);const u=new F(a.x,a.y,0,0);u.add(c.x,c.y,0,0),u.add(l.x,l.y,0,0),u.add(h.x,h.y,0,0),this.update(u)}return this}rotate90(){const t=(this.width-this.height)/2;this.x+=t,this.y-=t;const e=this.width;return this.width=this.height,this.height=e,this}moveAndExpand(t){const e=F.clone(t);return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this}getMaxScaleToFit(t,e=this.center){const n=F.clone(t),o=e.x,r=e.y;let a=1/0,c=1/0,l=1/0,h=1/0,u=1/0,d=1/0,f=1/0,p=1/0;const g=n.topLeft;g.x<o&&(a=(this.x-o)/(g.x-o)),g.y<r&&(u=(this.y-r)/(g.y-r));const m=n.bottomRight;m.x>o&&(c=(this.x+this.width-o)/(m.x-o)),m.y>r&&(d=(this.y+this.height-r)/(m.y-r));const v=n.topRight;v.x>o&&(l=(this.x+this.width-o)/(v.x-o)),v.y<r&&(f=(this.y-r)/(v.y-r));const b=n.bottomLeft;return b.x<o&&(h=(this.x-o)/(b.x-o)),b.y>r&&(p=(this.y+this.height-r)/(b.y-r)),{sx:Math.min(a,c,l,h),sy:Math.min(u,d,f,p)}}getMaxUniformScaleToFit(t,e=this.center){const n=this.getMaxScaleToFit(t,e);return Math.min(n.sx,n.sy)}containsPoint(t,e){return de.containsPoint(this,_.create(t,e))}containsRect(t,e,n,o){const r=F.create(t,e,n,o),a=this.x,c=this.y,l=this.width,h=this.height,u=r.x,d=r.y,f=r.width,p=r.height;return 0!==l&&0!==h&&0!==f&&0!==p&&u>=a&&d>=c&&u+f<=a+l&&d+p<=c+h}intersectsWithLine(t){const n=[],o=[];return[this.topLine,this.rightLine,this.bottomLine,this.leftLine].forEach(r=>{const a=t.intersectsWithLine(r);null!==a&&o.indexOf(a.toString())<0&&(n.push(a),o.push(a.toString()))}),n.length>0?n:null}intersectsWithLineFromCenterToPoint(t,e){const n=_.clone(t),o=this.center;let r=null;null!=e&&0!==e&&n.rotate(e,o);const a=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],c=new $(o,n);for(let l=a.length-1;l>=0;l-=1){const h=a[l].intersectsWithLine(c);if(null!==h){r=h;break}}return r&&null!=e&&0!==e&&r.rotate(-e,o),r}intersectsWithRect(t,e,n,o){const r=F.create(t,e,n,o);if(!this.isIntersectWithRect(r))return null;const a=this.origin,c=this.corner,l=r.origin,h=r.corner,u=Math.max(a.x,l.x),d=Math.max(a.y,l.y);return new F(u,d,Math.min(c.x,h.x)-u,Math.min(c.y,h.y)-d)}isIntersectWithRect(t,e,n,o){const r=F.create(t,e,n,o),a=this.origin,c=this.corner,l=r.origin,h=r.corner;return!(h.x<=a.x||h.y<=a.y||l.x>=c.x||l.y>=c.y)}normalize(){let t=this.x,e=this.y,n=this.width,o=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,o=-this.height),this.x=t,this.y=e,this.width=n,this.height=o,this}union(t){const e=F.clone(t),n=this.origin,o=this.corner,r=e.origin,a=e.corner,c=Math.min(n.x,r.x),l=Math.min(n.y,r.y),h=Math.max(o.x,a.x),u=Math.max(o.y,a.y);return new F(c,l,h-c,u-l)}getNearestSideToPoint(t){const e=_.clone(t),o=this.x+this.width-e.x,r=e.y-this.y;let c=e.x-this.x,l="left";return o<c&&(c=o,l="right"),r<c&&(c=r,l="top"),this.y+this.height-e.y<c&&(l="bottom"),l}getNearestPointToPoint(t){const e=_.clone(t);if(this.containsPoint(e)){const n=this.getNearestSideToPoint(e);if("left"===n)return new _(this.x,e.y);if("top"===n)return new _(e.x,this.y);if("right"===n)return new _(this.x+this.width,e.y);if("bottom"===n)return new _(e.x,this.y+this.height)}return e.adhereToRect(this)}equals(t){return null!=t&&t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height}clone(){return new F(this.x,this.y,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}serialize(){return`${this.x} ${this.y} ${this.width} ${this.height}`}}(function(i){i.isRectangle=function t(e){return null!=e&&e instanceof i}})(F||(F={})),function(i){i.isRectangleLike=function t(e){return null!=e&&"object"==typeof e&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.width&&"number"==typeof e.height}}(F||(F={})),function(i){function e(a){return i.isRectangle(a)?a.clone():Array.isArray(a)?new i(a[0],a[1],a[2],a[3]):new i(a.x,a.y,a.width,a.height)}i.create=function t(a,c,l,h){return null==a||"number"==typeof a?new i(a,c,l,h):e(a)},i.clone=e,i.fromEllipse=function n(a){return new i(a.x-a.a,a.y-a.b,2*a.a,2*a.b)},i.fromSize=function o(a){return new i(0,0,a.width,a.height)},i.fromPositionAndSize=function r(a,c){return new i(a.x,a.y,c.width,c.height)}}(F||(F={}));class $ extends In{get center(){return new _((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}constructor(t,e,n,o){super(),"number"==typeof t&&"number"==typeof e?(this.start=new _(t,e),this.end=new _(n,o)):(this.start=_.create(t),this.end=_.create(e))}getCenter(){return this.center}round(t=0){return this.start.round(t),this.end.round(t),this}translate(t,e){return"number"==typeof t?(this.start.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.end.translate(t)),this}rotate(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this}scale(t,e,n){return this.start.scale(t,e,n),this.end.scale(t,e,n),this}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const t=this.start.x-this.end.x,e=this.start.y-this.end.y;return t*t+e*e}setLength(t){const e=this.length();if(!e)return this;const n=t/e;return this.scale(n,n,this.start)}parallel(t){const e=this.clone();if(!e.isDifferentiable())return e;const{start:n,end:o}=e,r=n.clone().rotate(270,o),a=o.clone().rotate(90,n);return n.move(a,t),o.move(r,t),e}vector(){return new _(this.end.x-this.start.x,this.end.y-this.start.y)}angle(){const t=new _(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)}bbox(){const t=Math.min(this.start.x,this.end.x),e=Math.min(this.start.y,this.end.y),n=Math.max(this.start.x,this.end.x),o=Math.max(this.start.y,this.end.y);return new F(t,e,n-t,o-e)}bearing(){return this.start.bearing(this.end)}closestPoint(t){return this.pointAt(this.closestPointNormalizedLength(t))}closestPointLength(t){return this.closestPointNormalizedLength(t)*this.length()}closestPointTangent(t){return this.tangentAt(this.closestPointNormalizedLength(t))}closestPointNormalizedLength(t){const e=this.vector().dot(new $(this.start,t).vector()),n=Math.min(1,Math.max(0,e/this.squaredLength()));return Number.isNaN(n)?0:n}pointAt(t){const e=this.start,n=this.end;return t<=0?e.clone():t>=1?n.clone():e.lerp(n,t)}pointAtLength(t){const e=this.start,n=this.end;let o=!0;t<0&&(o=!1,t=-t);const r=this.length();return t>=r?o?n.clone():e.clone():this.pointAt((o?t:r-t)/r)}divideAt(t){const e=this.pointAt(t);return[new $(this.start,e),new $(e,this.end)]}divideAtLength(t){const e=this.pointAtLength(t);return[new $(this.start,e),new $(e,this.end)]}containsPoint(t){const e=this.start,n=this.end;if(0!==e.cross(t,n))return!1;const o=this.length();return!(new $(e,t).length()>o||new $(t,n).length()>o)}intersect(t,e){const n=t.intersectsWithLine(this,e);return n?Array.isArray(n)?n:[n]:null}intersectsWithLine(t){const e=new _(this.end.x-this.start.x,this.end.y-this.start.y),n=new _(t.end.x-t.start.x,t.end.y-t.start.y),o=e.x*n.y-e.y*n.x,r=new _(t.start.x-this.start.x,t.start.y-this.start.y),a=r.x*n.y-r.y*n.x,c=r.x*e.y-r.y*e.x;if(0===o||a*o<0||c*o<0)return null;if(o>0){if(a>o||c>o)return null}else if(a<o||c<o)return null;return new _(this.start.x+a*e.x/o,this.start.y+a*e.y/o)}isDifferentiable(){return!this.start.equals(this.end)}pointOffset(t){const e=_.clone(t),n=this.start,o=this.end;return((o.x-n.x)*(e.y-n.y)-(o.y-n.y)*(e.x-n.x))/this.length()}pointSquaredDistance(t,e){const n=_.create(t,e);return this.closestPoint(n).squaredDistance(n)}pointDistance(t,e){const n=_.create(t,e);return this.closestPoint(n).distance(n)}tangentAt(t){if(!this.isDifferentiable())return null;const e=this.start,n=this.end,o=this.pointAt(t),r=new $(e,n);return r.translate(o.x-e.x,o.y-e.y),r}tangentAtLength(t){if(!this.isDifferentiable())return null;const e=this.start,n=this.end,o=this.pointAtLength(t),r=new $(e,n);return r.translate(o.x-e.x,o.y-e.y),r}relativeCcw(t,e){const n=_.create(t,e);let o=n.x-this.start.x,r=n.y-this.start.y;const a=this.end.x-this.start.x,c=this.end.y-this.start.y;let l=o*c-r*a;return 0===l&&(l=o*a+r*c,l>0&&(o-=a,r-=c,l=o*a+r*c,l<0&&(l=0))),l<0?-1:l>0?1:0}equals(t){return null!=t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y}clone(){return new $(this.start,this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.end.serialize()].join(" ")}}!function(i){i.isLine=function t(e){return null!=e&&e instanceof i}}($||($={}));class Yt extends In{get center(){return new _(this.x,this.y)}constructor(t,e,n,o){super(),this.x=t??0,this.y=e??0,this.a=n??0,this.b=o??0}bbox(){return F.fromEllipse(this)}getCenter(){return this.center}inflate(t,e){const o=e??t;return this.a+=2*t,this.b+=2*o,this}normalizedDistance(t,e){const n=_.create(t,e),o=n.x-this.x,r=n.y-this.y,a=this.a,c=this.b;return o*o/(a*a)+r*r/(c*c)}containsPoint(t,e){return this.normalizedDistance(t,e)<=1}intersectsWithLine(t){const e=[],n=this.a,o=this.b,r=t.start,a=t.end,c=t.vector(),l=r.diff(new _(this.x,this.y)),h=new _(c.x/(n*n),c.y/(o*o)),u=new _(l.x/(n*n),l.y/(o*o)),d=c.dot(h),f=c.dot(u),g=f*f-d*(l.dot(u)-1);if(g<0)return null;if(g>0){const m=Math.sqrt(g),v=(-f-m)/d,b=(-f+m)/d;if((v<0||v>1)&&(b<0||b>1))return null;v>=0&&v<=1&&e.push(r.lerp(a,v)),b>=0&&b<=1&&e.push(r.lerp(a,b))}else{const m=-f/d;if(!(m>=0&&m<=1))return null;e.push(r.lerp(a,m))}return e}intersectsWithLineFromCenterToPoint(t,e=0){const n=_.clone(t);e&&n.rotate(e,this.getCenter());const o=n.x-this.x,r=n.y-this.y;let a;if(0===o)return a=this.bbox().getNearestPointToPoint(n),e?a.rotate(-e,this.getCenter()):a;const c=r/o;let d=Math.sqrt(1/(1/(this.a*this.a)+c*c/(this.b*this.b)));return d=o<0?-d:d,a=new _(this.x+d,this.y+c*d),e?a.rotate(-e,this.getCenter()):a}tangentTheta(t){const e=_.clone(t),n=e.x,o=e.y,r=this.a,a=this.b,c=this.bbox().center,l=c.x,h=c.y;let p,g;return n>c.x+r/2||n<c.x-r/2?(g=n>c.x?o-30:o+30,p=r*r/(n-l)-r*r*(o-h)*(g-h)/(a*a*(n-l))+l):(p=o>c.y?n+30:n-30,g=a*a/(o-h)-a*a*(n-l)*(p-l)/(r*r*(o-h))+h),new _(p,g).theta(e)}scale(t,e){return this.a*=t,this.b*=e,this}rotate(t,e){const n=F.fromEllipse(this);n.rotate(t,e);const o=Yt.fromRect(n);return this.a=o.a,this.b=o.b,this.x=o.x,this.y=o.y,this}translate(t,e){const n=_.create(t,e);return this.x+=n.x,this.y+=n.y,this}equals(t){return null!=t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b}clone(){return new Yt(this.x,this.y,this.a,this.b)}toJSON(){return{x:this.x,y:this.y,a:this.a,b:this.b}}serialize(){return`${this.x} ${this.y} ${this.a} ${this.b}`}}(function(i){i.isEllipse=function t(e){return null!=e&&e instanceof i}})(Yt||(Yt={})),function(i){function e(o){return i.isEllipse(o)?o.clone():Array.isArray(o)?new i(o[0],o[1],o[2],o[3]):new i(o.x,o.y,o.a,o.b)}i.create=function t(o,r,a,c){return null==o||"number"==typeof o?new i(o,r,a,c):e(o)},i.parse=e,i.fromRect=function n(o){const r=o.center;return new i(r.x,r.y,o.width/2,o.height/2)}}(Yt||(Yt={}));const sN=new RegExp("^[\\s\\dLMCZz,.]*$");function rN(i){return"string"==typeof i&&sN.test(i)}function Ll(i,t){return(i%t+t)%t}function Vh(i,t={}){const e=[];return i&&i.length&&i.forEach(n=>{Array.isArray(n)?e.push({x:n[0],y:n[1]}):e.push({x:n.x,y:n.y})}),function aN(i,t,e,n,o){const r=[],a=i[i.length-1],c=null!=t&&t>0,l=t||0;if(n&&c){const d=(i=i.slice())[0],f=new _(a.x+(d.x-a.x)/2,a.y+(d.y-a.y)/2);i.splice(0,0,f)}let h=i[0],u=1;for(r.push(e?"M":"L",h.x,h.y);u<(n?i.length:i.length-1);){let d=i[Ll(u,i.length)],f=h.x-d.x,p=h.y-d.y;if(c&&(0!==f||0!==p)&&(null==o||o.indexOf(u-1)<0)){let g=Math.sqrt(f*f+p*p);const m=f*Math.min(l,g/2)/g,v=p*Math.min(l,g/2)/g;r.push("L",d.x+m,d.y+v);let z=i[Ll(u+1,i.length)];for(;u<i.length-2&&0===Math.round(z.x-d.x)&&0===Math.round(z.y-d.y);)z=i[Ll(u+2,i.length)],u+=1;f=z.x-d.x,p=z.y-d.y,g=Math.max(1,Math.sqrt(f*f+p*p));const C=f*Math.min(l,g/2)/g,x=p*Math.min(l,g/2)/g,w=d.x+C,O=d.y+x;r.push("Q",d.x,d.y,w,O),d=new _(w,O)}else r.push("L",d.x,d.y);h=d,u+=1}return n?r.push("Z"):r.push("L",a.x,a.y),r.map(d=>"string"==typeof d?d:+d.toFixed(3)).join(" ")}(e,t.round,null==t.initialMove||t.initialMove,t.close,t.exclude)}function na(i,t,e,n,o=0,r=0,a=0,c,l){if(0===e||0===n)return[];c-=i,l-=t,e=Math.abs(e),n=Math.abs(n);const h=-c/2,u=-l/2,d=Math.cos(o*Math.PI/180),f=Math.sin(o*Math.PI/180),p=d*h+f*u,g=-1*f*h+d*u,m=p*p,v=g*g,b=e*e,y=n*n,z=m/b+v/y;let C;if(z>1)e=Math.sqrt(z)*e,n=Math.sqrt(z)*n,C=0;else{let bn=1;r===a&&(bn=-1),C=bn*Math.sqrt((b*y-b*v-y*m)/(b*v+y*m))}const x=C*e*g/n,w=-1*C*n*p/e,O=d*x-f*w+c/2,P=f*x+d*w+l/2;let E=Math.atan2((g-w)/n,(p-x)/e)-Math.atan2(0,1),L=E>=0?E:2*Math.PI+E;E=Math.atan2((-g-w)/n,(-p-x)/e)-Math.atan2((g-w)/n,(p-x)/e);let k=E>=0?E:2*Math.PI+E;0===a&&k>0?k-=2*Math.PI:0!==a&&k<0&&(k+=2*Math.PI);const V=2*k/Math.PI,K=Math.ceil(V<0?-1*V:V),J=k/K,S=8/3*Math.sin(J/4)*Math.sin(J/4)/Math.sin(J/2),I=d*e,W=d*n,me=f*e,ve=f*n;let ke=Math.cos(L),Ae=Math.sin(L),Ao=-S*(I*Ae+ve*ke),Eo=-S*(me*Ae-W*ke),Yn=0,$s=0;const zn=[];for(let bn=0;bn<K;bn+=1){L+=J,ke=Math.cos(L),Ae=Math.sin(L),Yn=I*ke-ve*Ae+O,$s=me*ke+W*Ae+P;const T8=-S*(I*Ae+ve*ke),O8=-S*(me*Ae-W*ke),No=6*bn;zn[No]=Number(Ao+i),zn[No+1]=Number(Eo+t),zn[No+2]=Number(Yn-T8+i),zn[No+3]=Number($s-O8+t),zn[No+4]=Number(Yn+i),zn[No+5]=Number($s+t),Ao=Yn+T8,Eo=$s+O8}return zn.map(bn=>+bn.toFixed(2))}function cN(i,t,e,n,o=0,r=0,a=0,c,l){const h=[],u=na(i,t,e,n,o,r,a,c,l);if(null!=u)for(let d=0,f=u.length;d<f;d+=6)h.push("C",u[d],u[d+1],u[d+2],u[d+3],u[d+4],u[d+5]);return h.join(" ")}class Fe extends In{get start(){return this.points[0]||null}get end(){return this.points[this.points.length-1]||null}constructor(t){if(super(),null!=t){if("string"==typeof t)return Fe.parse(t);this.points=t.map(e=>_.create(e))}else this.points=[]}scale(t,e,n=new _){return this.points.forEach(o=>o.scale(t,e,n)),this}rotate(t,e){return this.points.forEach(n=>n.rotate(t,e)),this}translate(t,e){const n=_.create(t,e);return this.points.forEach(o=>o.translate(n.x,n.y)),this}round(t=0){return this.points.forEach(e=>e.round(t)),this}bbox(){if(0===this.points.length)return new F;let t=1/0,e=-1/0,n=1/0,o=-1/0;const r=this.points;for(let a=0,c=r.length;a<c;a+=1){const l=r[a],h=l.x,u=l.y;h<t&&(t=h),h>e&&(e=h),u<n&&(n=u),u>o&&(o=u)}return new F(t,n,e-t,o-n)}closestPoint(t){const e=this.closestPointLength(t);return this.pointAtLength(e)}closestPointLength(t){const e=this.points,n=e.length;if(0===n||1===n)return 0;let o=0,r=0,a=1/0;for(let c=0,l=n-1;c<l;c+=1){const h=new $(e[c],e[c+1]),u=h.length(),d=h.closestPointNormalizedLength(t),p=h.pointAt(d).squaredDistance(t);p<a&&(a=p,r=o+d*u),o+=u}return r}closestPointNormalizedLength(t){const e=this.length();return 0===e?0:this.closestPointLength(t)/e}closestPointTangent(t){const e=this.closestPointLength(t);return this.tangentAtLength(e)}containsPoint(t){if(0===this.points.length)return!1;const e=_.clone(t),n=e.x,o=e.y,r=this.points,a=r.length;let c=a-1,l=0;for(let h=0;h<a;h+=1){const u=r[c],d=r[h];if(e.equals(u))return!0;const f=new $(u,d);if(f.containsPoint(t))return!0;if(o<=u.y&&o>d.y||o>u.y&&o<=d.y){const p=u.x-n>d.x-n?u.x-n:d.x-n;if(p>=0){const g=new _(n+p,o),m=new $(t,g);f.intersectsWithLine(m)&&(l+=1)}}c=h}return l%2==1}intersectsWithLine(t){const e=[];for(let n=0,o=this.points.length-1;n<o;n+=1){const c=t.intersectsWithLine(new $(this.points[n],this.points[n+1]));c&&e.push(c)}return e.length>0?e:null}isDifferentiable(){for(let t=0,e=this.points.length-1;t<e;t+=1)if(new $(this.points[t],this.points[t+1]).isDifferentiable())return!0;return!1}length(){let t=0;for(let e=0,n=this.points.length-1;e<n;e+=1)t+=this.points[e].distance(this.points[e+1]);return t}pointAt(t){const e=this.points,n=e.length;if(0===n)return null;if(1===n||t<=0)return e[0].clone();if(t>=1)return e[n-1].clone();const r=this.length()*t;return this.pointAtLength(r)}pointAtLength(t){const e=this.points,n=e.length;if(0===n)return null;if(1===n)return e[0].clone();let o=!0;t<0&&(o=!1,t=-t);let r=0;for(let c=0,l=n-1;c<l;c+=1){const h=o?c:l-1-c,u=e[h],d=e[h+1],f=new $(u,d),p=u.distance(d);if(t<=r+p)return f.pointAtLength((o?1:-1)*(t-r));r+=p}return(o?e[n-1]:e[0]).clone()}tangentAt(t){const n=this.points.length;if(0===n||1===n)return null;t<0&&(t=0),t>1&&(t=1);const r=this.length()*t;return this.tangentAtLength(r)}tangentAtLength(t){const e=this.points,n=e.length;if(0===n||1===n)return null;let o=!0;t<0&&(o=!1,t=-t);let r,a=0;for(let c=0,l=n-1;c<l;c+=1){const h=o?c:l-1-c,u=e[h],d=e[h+1],f=new $(u,d),p=u.distance(d);if(f.isDifferentiable()){if(t<=a+p)return f.tangentAtLength((o?1:-1)*(t-a));r=f}a+=p}return r?r.tangentAt(o?1:0):null}simplify(t={}){const e=this.points;if(e.length<3)return this;const n=t.threshold||0;let o=0;for(;e[o+2];){const a=o+1,h=e[a];new $(e[o],e[o+2]).closestPoint(h).distance(h)<=n?e.splice(a,1):o+=1}return this}toHull(){const t=this.points,e=t.length;if(0===e)return new Fe;let n=t[0];for(let f=1;f<e;f+=1)(t[f].y<n.y||t[f].y===n.y&&t[f].x>n.x)&&(n=t[f]);const o=[];for(let f=0;f<e;f+=1){let p=n.theta(t[f]);0===p&&(p=360),o.push([t[f],f,p])}o.sort((f,p)=>{let g=f[2]-p[2];return 0===g&&(g=p[1]-f[1]),g}),o.length>2&&o.unshift(o[o.length-1]);const r={},a=[],c=f=>`${f[0].toString()}@${f[1]}`;for(;0!==o.length;){const f=o.pop(),p=f[0];if(r[c(f)])continue;let g=!1;for(;!g;)if(a.length<2)a.push(f),g=!0;else{const m=a.pop(),v=m[0],b=a.pop(),y=b[0],z=y.cross(v,p);if(z<0)a.push(b),a.push(m),a.push(f),g=!0;else if(0===z){const x=v.angleBetween(y,p);Math.abs(x-180)<1e-10||v.equals(p)||y.equals(v)?(r[c(m)]=v,a.push(b)):Math.abs((x+1)%360-1)<1e-10&&(a.push(b),o.push(m))}else r[c(m)]=v,a.push(b)}}a.length>2&&a.pop();let l,h=-1;for(let f=0,p=a.length;f<p;f+=1){const g=a[f][1];(void 0===l||g<l)&&(l=g,h=f)}let u=[];if(h>0){const f=a.slice(h),p=a.slice(0,h);u=f.concat(p)}else u=a;const d=[];for(let f=0,p=u.length;f<p;f+=1)d.push(u[f][0]);return new Fe(d)}equals(t){return null!=t&&t.points.length===this.points.length&&t.points.every((e,n)=>e.equals(this.points[n]))}clone(){return new Fe(this.points.map(t=>t.clone()))}toJSON(){return this.points.map(t=>t.toJSON())}serialize(){return this.points.map(t=>`${t.serialize()}`).join(" ")}}(function(i){i.isPolyline=function t(e){return null!=e&&e instanceof i}})(Fe||(Fe={})),function(i){i.parse=function t(e){const n=e.trim();if(""===n)return new i;const o=[],r=n.split(/\s*,\s*|\s+/);for(let a=0,c=r.length;a<c;a+=2)o.push({x:+r[a],y:+r[a+1]});return new i(o)}}(Fe||(Fe={}));class Ve extends In{constructor(t,e,n,o){super(),this.PRECISION=3,this.start=_.create(t),this.controlPoint1=_.create(e),this.controlPoint2=_.create(n),this.end=_.create(o)}bbox(){const t=this.start,e=this.controlPoint1,n=this.controlPoint2,o=this.end,r=t.x,a=t.y,c=e.x,l=e.y,h=n.x,u=n.y,d=o.x,f=o.y,p=[],g=[],m=[[],[]];let v,b,y,z,C,x,w,O;for(let W=0;W<2;W+=1)if(0===W?(b=6*r-12*c+6*h,v=-3*r+9*c-9*h+3*d,y=3*c-3*r):(b=6*a-12*l+6*u,v=-3*a+9*l-9*u+3*f,y=3*l-3*a),Math.abs(v)<1e-12){if(Math.abs(b)<1e-12)continue;z=-y/b,z>0&&z<1&&g.push(z)}else w=b*b-4*y*v,O=Math.sqrt(w),!(w<0)&&(C=(-b+O)/(2*v),C>0&&C<1&&g.push(C),x=(-b-O)/(2*v),x>0&&x<1&&g.push(x));let P,E,L,k=g.length;const V=k;for(;k;)k-=1,z=g[k],L=1-z,P=L*L*L*r+3*L*L*z*c+3*L*z*z*h+z*z*z*d,m[0][k]=P,E=L*L*L*a+3*L*L*z*l+3*L*z*z*u+z*z*z*f,m[1][k]=E,p[k]={X:P,Y:E};g[V]=0,g[V+1]=1,p[V]={X:r,Y:a},p[V+1]={X:d,Y:f},m[0][V]=r,m[1][V]=a,m[0][V+1]=d,m[1][V+1]=f,g.length=V+2,m[0].length=V+2,m[1].length=V+2,p.length=V+2;const K=Math.min.apply(null,m[0]),J=Math.min.apply(null,m[1]),S=Math.max.apply(null,m[0]),I=Math.max.apply(null,m[1]);return new F(K,J,S-K,I-J)}closestPoint(t,e={}){return this.pointAtT(this.closestPointT(t,e))}closestPointLength(t,e={}){const n=this.getOptions(e);return this.lengthAtT(this.closestPointT(t,n),n)}closestPointNormalizedLength(t,e={}){const n=this.getOptions(e),o=this.closestPointLength(t,n);if(!o)return 0;const r=this.length(n);return 0===r?0:o/r}closestPointT(t,e={}){const n=this.getPrecision(e),o=this.getDivisions(e),r=Math.pow(10,-n);let a=null,c=0,l=0,h=0,u=0,d=0,f=null;const p=o.length;let g=p>0?1/p:0;for(o.forEach((m,v)=>{const b=m.start.distance(t),y=m.end.distance(t),z=b+y;(null==f||z<f)&&(a=m,c=v*g,l=(v+1)*g,h=b,u=y,f=z,d=m.endpointDistance())});;){const m=h?Math.abs(h-u)/h:0,v=null!=u?Math.abs(h-u)/u:0;if(m<r||v<r||!h||h<d*r||!u||u<d*r)return h<=u?c:l;const x=a.divide(.5);g/=2;const w=x[0].start.distance(t),O=x[0].end.distance(t),P=w+O,E=x[1].start.distance(t),L=x[1].end.distance(t);P<=E+L?(a=x[0],l-=g,h=w,u=O):(a=x[1],c+=g,h=E,u=L)}}closestPointTangent(t,e={}){return this.tangentAtT(this.closestPointT(t,e))}containsPoint(t,e={}){return this.toPolyline(e).containsPoint(t)}divideAt(t,e={}){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);const n=this.tAt(t,e);return this.divideAtT(n)}divideAtLength(t,e={}){const n=this.tAtLength(t,e);return this.divideAtT(n)}divide(t){return this.divideAtT(t)}divideAtT(t){const e=this.start,n=this.controlPoint1,o=this.controlPoint2,r=this.end;if(t<=0)return[new Ve(e,e,e,e),new Ve(e,n,o,r)];if(t>=1)return[new Ve(e,n,o,r),new Ve(r,r,r,r)];const a=this.getSkeletonPoints(t),h=a.divider,u=a.dividerControlPoint1,d=a.dividerControlPoint2;return[new Ve(e,a.startControlPoint1,a.startControlPoint2,h),new Ve(h,u,d,r)]}endpointDistance(){return this.start.distance(this.end)}getSkeletonPoints(t){const e=this.start,n=this.controlPoint1,o=this.controlPoint2,r=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:o.clone()};if(t>=1)return{startControlPoint1:n.clone(),startControlPoint2:o.clone(),divider:r.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:r.clone()};const a=new $(e,n).pointAt(t),c=new $(n,o).pointAt(t),l=new $(o,r).pointAt(t),h=new $(a,c).pointAt(t),u=new $(c,l).pointAt(t);return{startControlPoint1:a,startControlPoint2:h,divider:new $(h,u).pointAt(t),dividerControlPoint1:u,dividerControlPoint2:l}}getSubdivisions(t={}){const e=this.getPrecision(t);let n=[new Ve(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===e)return n;let o=this.endpointDistance();const r=Math.pow(10,-e);let a=0;for(;;){a+=1;const c=[];n.forEach(u=>{const d=u.divide(.5);c.push(d[0],d[1])});const l=c.reduce((u,d)=>u+d.endpointDistance(),0);if(a>1&&(0!==l?(l-o)/l:0)<r)return c;n=c,o=l}}length(t={}){return this.getDivisions(t).reduce((n,o)=>n+o.endpointDistance(),0)}lengthAtT(t,e={}){if(t<=0)return 0;const n=void 0===e.precision?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:n})}pointAt(t,e={}){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();const n=this.tAt(t,e);return this.pointAtT(n)}pointAtLength(t,e={}){const n=this.tAtLength(t,e);return this.pointAtT(n)}pointAtT(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider}isDifferentiable(){const e=this.controlPoint1,n=this.controlPoint2,o=this.end;return!(this.start.equals(e)&&e.equals(n)&&n.equals(o))}tangentAt(t,e={}){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);const n=this.tAt(t,e);return this.tangentAtT(n)}tangentAtLength(t,e={}){if(!this.isDifferentiable())return null;const n=this.tAtLength(t,e);return this.tangentAtT(n)}tangentAtT(t){if(!this.isDifferentiable())return null;t<0&&(t=0),t>1&&(t=1);const e=this.getSkeletonPoints(t),n=e.startControlPoint2,r=e.divider,a=new $(n,e.dividerControlPoint1);return a.translate(r.x-n.x,r.y-n.y),a}getPrecision(t={}){return null==t.precision?this.PRECISION:t.precision}getDivisions(t={}){if(null!=t.subdivisions)return t.subdivisions;const e=this.getPrecision(t);return this.getSubdivisions({precision:e})}getOptions(t={}){return{precision:this.getPrecision(t),subdivisions:this.getDivisions(t)}}tAt(t,e={}){if(t<=0)return 0;if(t>=1)return 1;const n=this.getOptions(e),r=this.length(n)*t;return this.tAtLength(r,n)}tAtLength(t,e={}){let n=!0;t<0&&(n=!1,t=-t);const o=this.getPrecision(e),r=this.getDivisions(e),a={precision:o,subdivisions:r};let l,h,c=null,u=0,d=0,f=0;const p=r.length;let g=p>0?1/p:0;for(let b=0;b<p;b+=1){const y=n?b:p-1-b,z=r[b],C=z.endpointDistance();if(t<=f+C){c=z,l=y*g,h=(y+1)*g,u=n?t-f:C+f-t,d=n?C+f-t:t-f;break}f+=C}if(null==c)return n?1:0;const m=this.length(a),v=Math.pow(10,-o);for(;;){let b,y,z;if(b=0!==m?u/m:0,b<v)return l;if(b=0!==m?d/m:0,b<v)return h;const C=c.divide(.5);g/=2;const x=C[0].endpointDistance(),w=C[1].endpointDistance();u<=x?(c=C[0],h-=g,y=u,z=x-y):(c=C[1],l+=g,y=u-x,z=w-y),u=y,d=z}}toPoints(t={}){const e=this.getDivisions(t),n=[e[0].start.clone()];return e.forEach(o=>n.push(o.end.clone())),n}toPolyline(t={}){return new Fe(this.toPoints(t))}scale(t,e,n){return this.start.scale(t,e,n),this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this}rotate(t,e){return this.start.rotate(t,e),this.controlPoint1.rotate(t,e),this.controlPoint2.rotate(t,e),this.end.rotate(t,e),this}translate(t,e){return"number"==typeof t?(this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}equals(t){return null!=t&&this.start.equals(t.start)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)&&this.end.equals(t.end)}clone(){return new Ve(this.start,this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}(function(i){i.isCurve=function t(e){return null!=e&&e instanceof i}})(Ve||(Ve={})),function(i){function t(o){const r=o.length,a=[],c=[];let l=2;a[0]=o[0]/l;for(let h=1;h<r;h+=1)c[h]=1/l,l=(h<r-1?4:3.5)-c[h],a[h]=(o[h]-a[h-1])/l;for(let h=1;h<r;h+=1)a[r-h-1]-=c[r-h]*a[r-h];return a}i.throughPoints=function n(o){if(null==o||Array.isArray(o)&&o.length<2)throw new Error("At least 2 points are required");const r=function e(o){const r=o.map(f=>_.clone(f)),a=[],c=[],l=r.length-1;if(1===l)return a[0]=new _((2*r[0].x+r[1].x)/3,(2*r[0].y+r[1].y)/3),c[0]=new _(2*a[0].x-r[0].x,2*a[0].y-r[0].y),[a,c];const h=[];for(let f=1;f<l-1;f+=1)h[f]=4*r[f].x+2*r[f+1].x;h[0]=r[0].x+2*r[1].x,h[l-1]=(8*r[l-1].x+r[l].x)/2;const u=t(h);for(let f=1;f<l-1;f+=1)h[f]=4*r[f].y+2*r[f+1].y;h[0]=r[0].y+2*r[1].y,h[l-1]=(8*r[l-1].y+r[l].y)/2;const d=t(h);for(let f=0;f<l;f+=1)a.push(new _(u[f],d[f])),c.push(f<l-1?new _(2*r[f+1].x-u[f+1],2*r[f+1].y-d[f+1]):new _((r[l].x+u[l-1])/2,(r[l].y+d[l-1])/2));return[a,c]}(o),a=[];for(let c=0,l=r[0].length;c<l;c+=1){const h=new _(r[0][c].x,r[0][c].y),u=new _(r[1][c].x,r[1][c].y);a.push(new i(o[c],h,u,o[c+1]))}return a}}(Ve||(Ve={}));class ia extends In{constructor(){super(...arguments),this.isVisible=!0,this.isSegment=!0,this.isSubpathStart=!1}get end(){return this.endPoint}get start(){if(null==this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}closestPointT(t,e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}lengthAtT(t,e){if(t<=0)return 0;const n=this.length();return t>=1?n:n*t}divideAtT(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}pointAtT(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}tangentAtT(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}class ut extends ia{constructor(t,e){super(),this.endPoint=$.isLine(t)?t.end.clone().round(2):_.create(t,e).round(2)}get type(){return"L"}get line(){return new $(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(t){return this.line.closestPoint(t)}closestPointLength(t){return this.line.closestPointLength(t)}closestPointNormalizedLength(t){return this.line.closestPointNormalizedLength(t)}closestPointTangent(t){return this.line.closestPointTangent(t)}length(){return this.line.length()}divideAt(t){const e=this.line.divideAt(t);return[new ut(e[0]),new ut(e[1])]}divideAtLength(t){const e=this.line.divideAtLength(t);return[new ut(e[0]),new ut(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.line.pointAt(t)}pointAtLength(t){return this.line.pointAtLength(t)}tangentAt(t){return this.line.tangentAt(t)}tangentAtLength(t){return this.line.tangentAtLength(t)}isDifferentiable(){return null!=this.previousSegment&&!this.start.equals(this.end)}clone(){return new ut(this.end)}scale(t,e,n){return this.end.scale(t,e,n),this}rotate(t,e){return this.end.rotate(t,e),this}translate(t,e){return"number"==typeof t?this.end.translate(t,e):this.end.translate(t),this}equals(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){const t=this.end;return`${this.type} ${t.x} ${t.y}`}}!function(i){i.create=function t(...e){const n=e.length,o=e[0];if($.isLine(o))return new i(o);if(_.isPointLike(o))return 1===n?new i(o):e.map(a=>new i(a));if(2===n)return new i(+e[0],+e[1]);const r=[];for(let a=0;a<n;a+=2)r.push(new i(+e[a],+e[a+1]));return r}}(ut||(ut={}));class lo extends ia{get end(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}get type(){return"Z"}get line(){return new $(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(t){return this.line.closestPoint(t)}closestPointLength(t){return this.line.closestPointLength(t)}closestPointNormalizedLength(t){return this.line.closestPointNormalizedLength(t)}closestPointTangent(t){return this.line.closestPointTangent(t)}length(){return this.line.length()}divideAt(t){const e=this.line.divideAt(t);return[e[1].isDifferentiable()?new ut(e[0]):this.clone(),new ut(e[1])]}divideAtLength(t){const e=this.line.divideAtLength(t);return[e[1].isDifferentiable()?new ut(e[0]):this.clone(),new ut(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.line.pointAt(t)}pointAtLength(t){return this.line.pointAtLength(t)}tangentAt(t){return this.line.tangentAt(t)}tangentAtLength(t){return this.line.tangentAtLength(t)}isDifferentiable(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))}scale(){return this}rotate(){return this}translate(){return this}equals(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)}clone(){return new lo}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return this.type}}!function(i){i.create=function t(){return new i}}(lo||(lo={}));class ho extends ia{constructor(t,e){super(),this.isVisible=!1,this.isSubpathStart=!0,this.endPoint=$.isLine(t)||Ve.isCurve(t)?t.end.clone().round(2):_.create(t,e).round(2)}get start(){throw new Error("Illegal access. Moveto segments should not need a start property.")}get type(){return"M"}bbox(){return null}closestPoint(){return this.end.clone()}closestPointLength(){return 0}closestPointNormalizedLength(){return 0}closestPointT(){return 1}closestPointTangent(){return null}length(){return 0}lengthAtT(){return 0}divideAt(){return[this.clone(),this.clone()]}divideAtLength(){return[this.clone(),this.clone()]}getSubdivisions(){return[]}pointAt(){return this.end.clone()}pointAtLength(){return this.end.clone()}pointAtT(){return this.end.clone()}tangentAt(){return null}tangentAtLength(){return null}tangentAtT(){return null}isDifferentiable(){return!1}scale(t,e,n){return this.end.scale(t,e,n),this}rotate(t,e){return this.end.rotate(t,e),this}translate(t,e){return"number"==typeof t?this.end.translate(t,e):this.end.translate(t),this}clone(){return new ho(this.end)}equals(t){return this.type===t.type&&this.end.equals(t.end)}toJSON(){return{type:this.type,end:this.end.toJSON()}}serialize(){const t=this.end;return`${this.type} ${t.x} ${t.y}`}}!function(i){i.create=function t(...e){const n=e.length,o=e[0];if($.isLine(o))return new i(o);if(Ve.isCurve(o))return new i(o);if(_.isPointLike(o)){if(1===n)return new i(o);const a=[];for(let c=0;c<n;c+=1)a.push(0===c?new i(e[c]):new ut(e[c]));return a}if(2===n)return new i(+e[0],+e[1]);const r=[];for(let a=0;a<n;a+=2){const c=+e[a],l=+e[a+1];r.push(0===a?new i(c,l):new ut(c,l))}return r}}(ho||(ho={}));class It extends ia{constructor(t,e,n,o,r,a){super(),Ve.isCurve(t)?(this.controlPoint1=t.controlPoint1.clone().round(2),this.controlPoint2=t.controlPoint2.clone().round(2),this.endPoint=t.end.clone().round(2)):"number"==typeof t?(this.controlPoint1=new _(t,e).round(2),this.controlPoint2=new _(n,o).round(2),this.endPoint=new _(r,a).round(2)):(this.controlPoint1=_.create(t).round(2),this.controlPoint2=_.create(e).round(2),this.endPoint=_.create(n).round(2))}get type(){return"C"}get curve(){return new Ve(this.start,this.controlPoint1,this.controlPoint2,this.end)}bbox(){return this.curve.bbox()}closestPoint(t){return this.curve.closestPoint(t)}closestPointLength(t){return this.curve.closestPointLength(t)}closestPointNormalizedLength(t){return this.curve.closestPointNormalizedLength(t)}closestPointTangent(t){return this.curve.closestPointTangent(t)}length(){return this.curve.length()}divideAt(t,e={}){const n=this.curve.divideAt(t,e);return[new It(n[0]),new It(n[1])]}divideAtLength(t,e={}){const n=this.curve.divideAtLength(t,e);return[new It(n[0]),new It(n[1])]}divideAtT(t){const e=this.curve.divideAtT(t);return[new It(e[0]),new It(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.curve.pointAt(t)}pointAtLength(t){return this.curve.pointAtLength(t)}tangentAt(t){return this.curve.tangentAt(t)}tangentAtLength(t){return this.curve.tangentAtLength(t)}isDifferentiable(){if(!this.previousSegment)return!1;const e=this.controlPoint1,n=this.controlPoint2,o=this.end;return!(this.start.equals(e)&&e.equals(n)&&n.equals(o))}scale(t,e,n){return this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this}rotate(t,e){return this.controlPoint1.rotate(t,e),this.controlPoint2.rotate(t,e),this.end.rotate(t,e),this}translate(t,e){return"number"==typeof t?(this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}equals(t){return this.start.equals(t.start)&&this.end.equals(t.end)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)}clone(){return new It(this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){const t=this.controlPoint1,e=this.controlPoint2,n=this.end;return[this.type,t.x,t.y,e.x,e.y,n.x,n.y].join(" ")}}function oa(i,t,e){return{x:i*Math.cos(e)-t*Math.sin(e),y:i*Math.sin(e)+t*Math.cos(e)}}function Lh(i,t,e,n,o,r){const a=.3333333333333333,c=2/3;return[a*i+c*e,a*t+c*n,a*o+c*e,a*r+c*n,o,r]}function Hh(i,t,e,n,o,r,a,c,l,h){const u=120*Math.PI/180,d=Math.PI/180*(+o||0);let p,g,m,v,b,f=[];if(h)g=h[0],m=h[1],v=h[2],b=h[3];else{p=oa(i,t,-d),i=p.x,t=p.y,p=oa(c,l,-d);const J=(i-(c=p.x))/2,S=(t-(l=p.y))/2;let I=J*J/(e*e)+S*S/(n*n);I>1&&(I=Math.sqrt(I),e*=I,n*=I);const W=e*e,me=n*n,ve=(r===a?-1:1)*Math.sqrt(Math.abs((W*me-W*S*S-me*J*J)/(W*S*S+me*J*J)));v=ve*e*S/n+(i+c)/2,b=ve*-n*J/e+(t+l)/2,g=Math.asin((t-b)/n),m=Math.asin((l-b)/n),g=i<v?Math.PI-g:g,m=c<v?Math.PI-m:m,g<0&&(g=2*Math.PI+g),m<0&&(m=2*Math.PI+m),a&&g>m&&(g-=2*Math.PI),!a&&m>g&&(m-=2*Math.PI)}let y=m-g;if(Math.abs(y)>u){const J=m,S=c,I=l;m=g+u*(a&&m>g?1:-1),f=Hh(c=v+e*Math.cos(m),l=b+n*Math.sin(m),e,n,o,0,a,S,I,[m,J,v,b])}y=m-g;const z=Math.cos(g),C=Math.sin(g),x=Math.cos(m),w=Math.sin(m),O=Math.tan(y/4),P=4/3*(e*O),E=4/3*(n*O),L=[i,t],k=[i+P*C,t-E*z],V=[c+P*w,l-E*x],K=[c,l];if(k[0]=2*L[0]-k[0],k[1]=2*L[1]-k[1],h)return[k,V,K].concat(f);{f=[k,V,K].concat(f).join().split(",");const J=[],S=f.length;for(let I=0;I<S;I+=1)J[I]=I%2?oa(+f[I-1],+f[I],d).y:oa(+f[I],+f[I+1],d).x;return J}}function uN(i){const t=function hN(i){const t=function lN(i){if(!i)return null;const t="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",e=new RegExp(`([a-z])[${t},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${t}]*,?[${t}]*)+)`,"ig"),n=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${t}]*,?[${t}]*`,"ig"),o={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return i.replace(e,(a,c,l)=>{const h=[];let u=c.toLowerCase();l.replace(n,(f,p)=>(p&&h.push(+p),f)),"m"===u&&h.length>2&&(r.push([c,...h.splice(0,2)]),u="l",c="m"===c?"l":"L");const d=o[u];for(;h.length>=d&&(r.push([c,...h.splice(0,d)]),d););return a}),r}(i);if(!t||!t.length)return[["M",0,0]];let e=0,n=0,o=0,r=0;const a=[];for(let c=0,l=t.length;c<l;c+=1){const h=[];a.push(h);const u=t[c],d=u[0];if(d!==d.toUpperCase())switch(h[0]=d.toUpperCase(),h[0]){case"A":h[1]=u[1],h[2]=u[2],h[3]=u[3],h[4]=u[4],h[5]=u[5],h[6]=+u[6]+e,h[7]=+u[7]+n;break;case"V":h[1]=+u[1]+n;break;case"H":h[1]=+u[1]+e;break;case"M":o=+u[1]+e,r=+u[2]+n;for(let f=1,p=u.length;f<p;f+=1)h[f]=+u[f]+(f%2?e:n);break;default:for(let f=1,p=u.length;f<p;f+=1)h[f]=+u[f]+(f%2?e:n)}else for(let f=0,p=u.length;f<p;f+=1)h[f]=u[f];switch(h[0]){case"Z":e=+o,n=+r;break;case"H":e=h[1];break;case"V":n=h[1];break;case"M":o=h[h.length-2],r=h[h.length-1],e=h[h.length-2],n=h[h.length-1];break;default:e=h[h.length-2],n=h[h.length-1]}}return a}(i),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function n(l,h,u){let d,f;if(!l)return["C",h.x,h.y,h.x,h.y,h.x,h.y];switch(l[0]in{T:1,Q:1}||(h.qx=null,h.qy=null),l[0]){case"M":h.X=l[1],h.Y=l[2];break;case"A":return 0===parseFloat(l[1])||0===parseFloat(l[2])?["L",l[6],l[7]]:["C"].concat(Hh.apply(0,[h.x,h.y].concat(l.slice(1))));case"S":return"C"===u||"S"===u?(d=2*h.x-h.bx,f=2*h.y-h.by):(d=h.x,f=h.y),["C",d,f].concat(l.slice(1));case"T":return"Q"===u||"T"===u?(h.qx=2*h.x-h.qx,h.qy=2*h.y-h.qy):(h.qx=h.x,h.qy=h.y),["C"].concat(Lh(h.x,h.y,h.qx,h.qy,l[1],l[2]));case"Q":return h.qx=l[1],h.qy=l[2],["C"].concat(Lh(h.x,h.y,l[1],l[2],l[3],l[4]));case"H":return["L"].concat(l[1],h.y);case"V":return["L"].concat(h.x,l[1])}return l}function o(l,h){if(l[h].length>7){l[h].shift();const u=l[h];for(;u.length;)r[h]="A",l.splice(h+=1,0,["C"].concat(u.splice(0,6)));l.splice(h,1),c=t.length}}const r=[];let a="",c=t.length;for(let l=0;l<c;l+=1){let h="";t[l]&&(h=t[l][0]),"C"!==h&&(r[l]=h,l>0&&(a=r[l-1])),t[l]=n(t[l],e,a),"A"!==r[l]&&"C"===h&&(r[l]="C"),o(t,l);const u=t[l],d=u.length;e.x=u[d-2],e.y=u[d-1],e.bx=parseFloat(u[d-4])||e.x,e.by=parseFloat(u[d-3])||e.y}return(!t[0][0]||"M"!==t[0][0])&&t.unshift(["M",0,0]),t}function dN(i){return uN(i).map(t=>t.map(e=>"string"==typeof e?e:de.round(e,2))).join(",").split(",").join(" ")}!function(i){i.create=function t(...e){const n=e.length,o=e[0];if(Ve.isCurve(o))return new i(o);if(_.isPointLike(o)){if(3===n)return new i(e[0],e[1],e[2]);const a=[];for(let c=0;c<n;c+=3)a.push(new i(e[c],e[c+1],e[c+2]));return a}if(6===n)return new i(e[0],e[1],e[2],e[3],e[4],e[5]);const r=[];for(let a=0;a<n;a+=6)r.push(new i(e[a],e[a+1],e[a+2],e[a+3],e[a+4],e[a+5]));return r}}(It||(It={}));class q extends In{constructor(t){if(super(),this.PRECISION=3,this.segments=[],Array.isArray(t))if($.isLine(t[0])||Ve.isCurve(t[0])){let e=null;t.forEach((o,r)=>{0===r&&this.appendSegment(q.createSegment("M",o.start)),null!=e&&!e.end.equals(o.start)&&this.appendSegment(q.createSegment("M",o.start)),$.isLine(o)?this.appendSegment(q.createSegment("L",o.end)):Ve.isCurve(o)&&this.appendSegment(q.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),e=o})}else t.forEach(n=>{n.isSegment&&this.appendSegment(n)});else null!=t&&($.isLine(t)?(this.appendSegment(q.createSegment("M",t.start)),this.appendSegment(q.createSegment("L",t.end))):Ve.isCurve(t)?(this.appendSegment(q.createSegment("M",t.start)),this.appendSegment(q.createSegment("C",t.controlPoint1,t.controlPoint2,t.end))):Fe.isPolyline(t)?t.points&&t.points.length&&t.points.forEach((e,n)=>{const o=q.createSegment(0===n?"M":"L",e);this.appendSegment(o)}):t.isSegment&&this.appendSegment(t))}get start(){const t=this.segments,e=t.length;if(0===e)return null;for(let n=0;n<e;n+=1){const o=t[n];if(o.isVisible)return o.start}return t[e-1].end}get end(){const t=this.segments,e=t.length;if(0===e)return null;for(let n=e-1;n>=0;n-=1){const o=t[n];if(o.isVisible)return o.end}return t[e-1].end}moveTo(...t){return this.appendSegment(ho.create.call(null,...t))}lineTo(...t){return this.appendSegment(ut.create.call(null,...t))}curveTo(...t){return this.appendSegment(It.create.call(null,...t))}arcTo(t,e,n,o,r,a,c){const l=this.end||new _,h="number"==typeof a?na(l.x,l.y,t,e,n,o,r,a,c):na(l.x,l.y,t,e,n,o,r,a.x,a.y);if(null!=h)for(let u=0,d=h.length;u<d;u+=6)this.curveTo(h[u],h[u+1],h[u+2],h[u+3],h[u+4],h[u+5]);return this}quadTo(t,e,n,o){const r=this.end||new _,a=["M",r.x,r.y];"number"==typeof t?a.push("Q",t,e,n,o):a.push("Q",t.x,t.y,e.x,e.y);const c=q.parse(a.join(" "));return this.appendSegment(c.segments.slice(1)),this}close(){return this.appendSegment(lo.create())}drawPoints(t,e={}){const n=Vh(t,e),o=q.parse(n);o&&o.segments&&this.appendSegment(o.segments)}bbox(){const t=this.segments,e=t.length;if(0===e)return null;let n;for(let r=0;r<e;r+=1){const a=t[r];if(a.isVisible){const c=a.bbox();null!=c&&(n=n?n.union(c):c)}}if(null!=n)return n;const o=t[e-1];return new F(o.end.x,o.end.y,0,0)}appendSegment(t){const e=this.segments.length;let o,n=0!==e?this.segments[e-1]:null;if(Array.isArray(t))for(let a=0,c=t.length;a<c;a+=1)o=this.prepareSegment(t[a],n,null),this.segments.push(o),n=o;else null!=t&&t.isSegment&&(o=this.prepareSegment(t,n,null),this.segments.push(o));return this}insertSegment(t,e){const n=this.segments.length;if(t<0&&(t=n+t+1),t>n||t<0)throw new Error("Index out of range.");let o,r=null,a=null;if(0!==n&&(t>=1?(r=this.segments[t-1],a=r.nextSegment):(r=null,a=this.segments[0])),Array.isArray(e))for(let c=0,l=e.length;c<l;c+=1)o=this.prepareSegment(e[c],r,a),this.segments.splice(t+c,0,o),r=o;else o=this.prepareSegment(e,r,a),this.segments.splice(t,0,o);return this}removeSegment(t){const e=this.fixIndex(t),n=this.segments.splice(e,1)[0],o=n.previousSegment,r=n.nextSegment;return o&&(o.nextSegment=r),r&&(r.previousSegment=o),n.isSubpathStart&&r&&this.updateSubpathStartSegment(r),n}replaceSegment(t,e){const n=this.fixIndex(t);let o;const r=this.segments[n];let a=r.previousSegment;const c=r.nextSegment;let l=r.isSubpathStart;if(Array.isArray(e)){this.segments.splice(t,1);for(let h=0,u=e.length;h<u;h+=1)o=this.prepareSegment(e[h],a,c),this.segments.splice(t+h,0,o),a=o,l&&o.isSubpathStart&&(l=!1)}else o=this.prepareSegment(e,a,c),this.segments.splice(n,1,o),l&&o.isSubpathStart&&(l=!1);l&&c&&this.updateSubpathStartSegment(c)}getSegment(t){const e=this.fixIndex(t);return this.segments[e]}fixIndex(t){const e=this.segments.length;if(0===e)throw new Error("Path has no segments.");let n=t;for(;n<0;)n=e+n;if(n>=e||n<0)throw new Error("Index out of range.");return n}segmentAt(t,e={}){const n=this.segmentIndexAt(t,e);return n?this.getSegment(n):null}segmentAtLength(t,e={}){const n=this.segmentIndexAtLength(t,e);return n?this.getSegment(n):null}segmentIndexAt(t,e={}){if(0===this.segments.length)return null;const n=de.clamp(t,0,1),o=this.getOptions(e),a=this.length(o)*n;return this.segmentIndexAtLength(a,o)}segmentIndexAtLength(t,e={}){const n=this.segments.length;if(0===n)return null;let o=!0;t<0&&(o=!1,t=-t);const r=this.getPrecision(e),a=this.getSubdivisions(e);let c=0,l=null;for(let h=0;h<n;h+=1){const u=o?h:n-1-h,d=this.segments[u],p=d.length({precision:r,subdivisions:a[u]});if(d.isVisible){if(t<=c+p)return u;l=u}c+=p}return l}getSegmentSubdivisions(t={}){const e=this.getPrecision(t),n=[];for(let o=0,r=this.segments.length;o<r;o+=1){const c=this.segments[o].getSubdivisions({precision:e});n.push(c)}return n}updateSubpathStartSegment(t){let e=t.previousSegment,n=t;for(;n&&!n.isSubpathStart;)n.subpathStartSegment=null!=e?e.subpathStartSegment:null,e=n,n=n.nextSegment}prepareSegment(t,e,n){t.previousSegment=e,t.nextSegment=n,null!=e&&(e.nextSegment=t),null!=n&&(n.previousSegment=t);let o=t;return t.isSubpathStart&&(t.subpathStartSegment=t,o=n),null!=o&&this.updateSubpathStartSegment(o),t}closestPoint(t,e={}){const n=this.closestPointT(t,e);return n?this.pointAtT(n):null}closestPointLength(t,e={}){const n=this.getOptions(e),o=this.closestPointT(t,n);return o?this.lengthAtT(o,n):0}closestPointNormalizedLength(t,e={}){const n=this.getOptions(e),o=this.closestPointLength(t,n);if(0===o)return 0;const r=this.length(n);return 0===r?0:o/r}closestPointT(t,e={}){if(0===this.segments.length)return null;const n=this.getPrecision(e),o=this.getSubdivisions(e);let r,a=1/0;for(let c=0,l=this.segments.length;c<l;c+=1){const h=this.segments[c];if(h.isVisible){const d=h.closestPointT(t,{precision:n,subdivisions:o[c]}),f=h.pointAtT(d),p=de.squaredLength(f,t);p<a&&(r={segmentIndex:c,value:d},a=p)}}return r||{segmentIndex:this.segments.length-1,value:1}}closestPointTangent(t,e={}){if(0===this.segments.length)return null;const n=this.getPrecision(e),o=this.getSubdivisions(e);let r,a=1/0;for(let c=0,l=this.segments.length;c<l;c+=1){const h=this.segments[c],u=o[c];if(h.isDifferentiable()){const d=h.closestPointT(t,{precision:n,subdivisions:u}),f=h.pointAtT(d),p=de.squaredLength(f,t);p<a&&(r=h.tangentAtT(d),a=p)}}return r||null}containsPoint(t,e={}){const n=this.toPolylines(e);if(!n)return!1;let o=0;for(let r=0,a=n.length;r<a;r+=1)n[r].containsPoint(t)&&(o+=1);return o%2==1}pointAt(t,e={}){if(0===this.segments.length)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();const n=this.getOptions(e),r=this.length(n)*t;return this.pointAtLength(r,n)}pointAtLength(t,e={}){if(0===this.segments.length)return null;if(0===t)return this.start.clone();let n=!0;t<0&&(n=!1,t=-t);const o=this.getPrecision(e),r=this.getSubdivisions(e);let a,c=0;for(let h=0,u=this.segments.length;h<u;h+=1){const d=n?h:u-1-h,f=this.segments[d],p=r[d],g=f.length({precision:o,subdivisions:p});if(f.isVisible){if(t<=c+g)return f.pointAtLength((n?1:-1)*(t-c),{precision:o,subdivisions:p});a=f}c+=g}return a?n?a.end:a.start:this.segments[this.segments.length-1].end.clone()}pointAtT(t){const e=this.segments,n=e.length;if(0===n)return null;const o=t.segmentIndex;if(o<0)return e[0].pointAtT(0);if(o>=n)return e[n-1].pointAtT(1);const r=de.clamp(t.value,0,1);return e[o].pointAtT(r)}divideAt(t,e={}){if(0===this.segments.length)return null;const n=de.clamp(t,0,1),o=this.getOptions(e),a=this.length(o)*n;return this.divideAtLength(a,o)}divideAtLength(t,e={}){if(0===this.segments.length)return null;let n=!0;t<0&&(n=!1,t=-t);const o=this.getPrecision(e),r=this.getSubdivisions(e);let c,l,h,u,d,a=0;for(let x=0,w=this.segments.length;x<w;x+=1){const O=n?x:w-1-x,P=this.getSegment(O),L={precision:o,subdivisions:r[O]},k=P.length(L);if(P.isDifferentiable()&&(h=P,u=O,t<=a+k)){l=O,c=P.divideAtLength((n?1:-1)*(t-a),L);break}a+=k}if(!h)return null;c||(l=u,d=n?1:0,c=h.divideAtT(d));const f=this.clone(),p=l;f.replaceSegment(p,c);const g=p;let m=p+1,v=p+2;c[0].isDifferentiable()||(f.removeSegment(g),m-=1,v-=1);const b=f.getSegment(m).start;f.insertSegment(m,q.createSegment("M",b)),v+=1,c[1].isDifferentiable()||(f.removeSegment(v-1),v-=1);const y=v-g-1;for(let x=v,w=f.segments.length;x<w;x+=1){const O=this.getSegment(x-y),P=f.getSegment(x);if("Z"===P.type&&!O.subpathStartSegment.end.equals(P.subpathStartSegment.end)){const E=q.createSegment("L",O.end);f.replaceSegment(x,E)}}return[new q(f.segments.slice(0,m)),new q(f.segments.slice(m))]}intersectsWithLine(t,e={}){const n=this.toPolylines(e);if(null==n)return null;let o=null;for(let r=0,a=n.length;r<a;r+=1){const l=t.intersect(n[r]);l&&(null==o&&(o=[]),Array.isArray(l)?o.push(...l):o.push(l))}return o}isDifferentiable(){for(let t=0,e=this.segments.length;t<e;t+=1)if(this.segments[t].isDifferentiable())return!0;return!1}isValid(){const t=this.segments;return 0===t.length||"M"===t[0].type}length(t={}){if(0===this.segments.length)return 0;const e=this.getSubdivisions(t);let n=0;for(let o=0,r=this.segments.length;o<r;o+=1)n+=this.segments[o].length({subdivisions:e[o]});return n}lengthAtT(t,e={}){const n=this.segments.length;if(0===n)return 0;let o=t.segmentIndex;if(o<0)return 0;let r=de.clamp(t.value,0,1);o>=n&&(o=n-1,r=1);const a=this.getPrecision(e),c=this.getSubdivisions(e);let l=0;for(let d=0;d<o;d+=1)l+=this.segments[d].length({precision:a,subdivisions:c[d]});return l+=this.segments[o].lengthAtT(r,{precision:a,subdivisions:c[o]}),l}tangentAt(t,e={}){if(0===this.segments.length)return null;const n=de.clamp(t,0,1),o=this.getOptions(e),a=this.length(o)*n;return this.tangentAtLength(a,o)}tangentAtLength(t,e={}){if(0===this.segments.length)return null;let n=!0;t<0&&(n=!1,t=-t);const o=this.getPrecision(e),r=this.getSubdivisions(e);let a,c=0;for(let l=0,h=this.segments.length;l<h;l+=1){const u=n?l:h-1-l,d=this.segments[u],f=r[u],p=d.length({precision:o,subdivisions:f});if(d.isDifferentiable()){if(t<=c+p)return d.tangentAtLength((n?1:-1)*(t-c),{precision:o,subdivisions:f});a=d}c+=p}return a?a.tangentAtT(n?1:0):null}tangentAtT(t){const e=this.segments.length;if(0===e)return null;const n=t.segmentIndex;if(n<0)return this.segments[0].tangentAtT(0);if(n>=e)return this.segments[e-1].tangentAtT(1);const o=de.clamp(t.value,0,1);return this.segments[n].tangentAtT(o)}getPrecision(t={}){return null==t.precision?this.PRECISION:t.precision}getSubdivisions(t={}){if(null==t.segmentSubdivisions){const e=this.getPrecision(t);return this.getSegmentSubdivisions({precision:e})}return t.segmentSubdivisions}getOptions(t={}){return{precision:this.getPrecision(t),segmentSubdivisions:this.getSubdivisions(t)}}toPoints(t={}){const e=this.segments,n=e.length;if(0===n)return null;const o=this.getSubdivisions(t),r=[];let a=[];for(let c=0;c<n;c+=1){const l=e[c];if(l.isVisible){const h=o[c];h.length>0?h.forEach(u=>a.push(u.start)):a.push(l.start)}else a.length>0&&(a.push(e[c-1].end),r.push(a),a=[])}return a.length>0&&(a.push(this.end),r.push(a)),r}toPolylines(t={}){const e=this.toPoints(t);return e?e.map(n=>new Fe(n)):null}scale(t,e,n){return this.segments.forEach(o=>o.scale(t,e,n)),this}rotate(t,e){return this.segments.forEach(n=>n.rotate(t,e)),this}translate(t,e){return this.segments.forEach("number"==typeof t?n=>n.translate(t,e):n=>n.translate(t)),this}clone(){const t=new q;return this.segments.forEach(e=>t.appendSegment(e.clone())),t}equals(t){if(null==t)return!1;const e=this.segments,n=t.segments,o=e.length;if(n.length!==o)return!1;for(let r=0;r<o;r+=1){const a=e[r],c=n[r];if(a.type!==c.type||!a.equals(c))return!1}return!0}toJSON(){return this.segments.map(t=>t.toJSON())}serialize(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(t=>t.serialize()).join(" ")}toString(){return this.serialize()}}(function(i){i.isPath=function t(e){return null!=e&&e instanceof i}})(q||(q={})),function(i){function e(n,...o){if("M"===n)return ho.create.call(null,...o);if("L"===n)return ut.create.call(null,...o);if("C"===n)return It.create.call(null,...o);if("z"===n||"Z"===n)return lo.create();throw new Error(`Invalid path segment type "${n}"`)}i.parse=function t(n){if(!n)return new i;const o=new i,a=i.normalize(n).match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g);if(null!=a)for(let c=0,l=a.length;c<l;c+=1){const d=a[c].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g);if(null!=d){const f=d[0],p=d.slice(1).map(m=>+m),g=e.call(null,f,...p);o.appendSegment(g)}}return o},i.createSegment=e}(q||(q={})),function(i){i.normalize=dN,i.isValid=rN,i.drawArc=cN,i.drawPoints=Vh,i.arcToCurves=na}(q||(q={}));class Re{constructor(t){this.options=Object.assign({},t),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}get names(){return Object.keys(this.data)}register(t,e,n=!1){if("object"==typeof t)return void Object.entries(t).forEach(([a,c])=>{this.register(a,c,e)});this.exist(t)&&!n&&!An.isApplyingHMR()&&this.onDuplicated(t);const o=this.options.process,r=o?Z(o,this,t,e):e;return this.data[t]=r,r}unregister(t){const e=t?this.data[t]:null;return delete this.data[t],e}get(t){return t?this.data[t]:null}exist(t){return!!t&&null!=this.data[t]}onDuplicated(t){try{throw this.options.onConflict&&Z(this.options.onConflict,this,t),new Error(`${ps(this.options.type)} with name '${t}' already registered.`)}catch(e){throw e}}onNotFound(t,e){throw new Error(this.getSpellingSuggestion(t,e))}getSpellingSuggestion(t,e){const n=this.getSpellingSuggestionForName(t),o=e?`${e} ${oE(this.options.type)}`:this.options.type;return`${ps(o)} with name '${t}' does not exist.${n?` Did you mean '${n}'?`:""}`}getSpellingSuggestionForName(t){return function sE(i,t,e){const n=Math.min(2,Math.floor(.34*i.length));let r,o=Math.floor(.4*i.length)+1,a=!1;const c=i.toLowerCase();for(const l of t){const h=e(l);if(void 0!==h&&Math.abs(h.length-c.length)<=n){const u=h.toLowerCase();if(u===c){if(h===i)continue;return l}if(a||h.length<3)continue;const d=rE(c,u,o-1);if(void 0===d)continue;d<3?(a=!0,r=l):(o=d,r=l)}}return r}(t,Object.keys(this.data),e=>e)}}!function(i){i.create=function t(e){return new i(e)}}(Re||(Re={}));const fN={color:"#aaaaaa",thickness:1,markup:"rect",update(i,t){const e=t.thickness*t.sx,n=t.thickness*t.sy;le(i,{width:e,height:n,rx:e,ry:n,fill:t.color})}},pN={color:"#aaaaaa",thickness:1,markup:"rect",update(i,t){const e=t.sx<=1?t.thickness*t.sx:t.thickness;le(i,{width:e,height:e,rx:e,ry:e,fill:t.color})}},gN={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(i,t){let e;const n=t.width,o=t.height,r=t.thickness;e=n-r>=0&&o-r>=0?["M",n,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",le(i,{d:e,stroke:t.color,"stroke-width":t.thickness})}},mN=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(i,t){let e;const n=t.width,o=t.height,r=t.thickness;e=n-r>=0&&o-r>=0?["M",n,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",le(i,{d:e,stroke:t.color,"stroke-width":t.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update(i,t){let e;const n=t.factor||1,o=t.width*n,r=t.height*n,a=t.thickness;e=o-a>=0&&r-a>=0?["M",o,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",t.width=o,t.height=r,le(i,{d:e,stroke:t.color,"stroke-width":t.thickness})}}];class Pn{constructor(){this.patterns={},this.root=X.create(Zr(),{width:"100%",height:"100%"},[dn("defs")]).node}add(t,e){const n=this.root.childNodes[0];n&&n.appendChild(e),this.patterns[t]=e,X.create("rect",{width:"100%",height:"100%",fill:`url(#${t})`}).appendTo(this.root)}get(t){return this.patterns[t]}has(t){return null!=this.patterns[t]}}!function(i){i.presets=Gt,i.registry=Re.create({type:"grid"}),i.registry.register(i.presets,!0)}(Pn||(Pn={}));const Bh=function(i){const t=document.createElement("canvas"),e=i.width,n=i.height;t.width=2*e,t.height=n;const o=t.getContext("2d");return o.drawImage(i,0,0,e,n),o.translate(2*e,0),o.scale(-1,1),o.drawImage(i,0,0,e,n),t},Fh=function(i){const t=document.createElement("canvas"),e=i.width,n=i.height;t.width=e,t.height=2*n;const o=t.getContext("2d");return o.drawImage(i,0,0,e,n),o.translate(0,2*n),o.scale(1,-1),o.drawImage(i,0,0,e,n),t},Rh=function(i){const t=document.createElement("canvas"),e=i.width,n=i.height;t.width=2*e,t.height=2*n;const o=t.getContext("2d");return o.drawImage(i,0,0,e,n),o.setTransform(-1,0,0,-1,t.width,t.height),o.drawImage(i,0,0,e,n),o.setTransform(-1,0,0,1,t.width,0),o.drawImage(i,0,0,e,n),o.setTransform(1,0,0,-1,0,t.height),o.drawImage(i,0,0,e,n),t},vN=function(i,t){const e=i.width,n=i.height,o=document.createElement("canvas");o.width=3*e,o.height=3*n;const r=o.getContext("2d"),c=he.toRad(null!=t.angle?-t.angle:-20),l=o.width/4,h=o.height/4;for(let u=0;u<4;u+=1)for(let d=0;d<4;d+=1)(u+d)%2>0&&(r.setTransform(1,0,0,1,(2*u-1)*l,(2*d-1)*h),r.rotate(c),r.drawImage(i,-e/2,-n/2,e,n));return o};var Ns,uo;function Hl(i,t){return i??t}function Xe(i,t){return null!=i&&Number.isFinite(i)?i:t}function zN(i={}){const t=Hl(i.color,"blue"),e=Xe(i.width,1),n=Xe(i.margin,2);return`\n    <filter>\n      <feFlood flood-color="${t}" flood-opacity="${Xe(i.opacity,1)}" result="colored"/>\n      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${n+e}" />\n      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${n}" />\n      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>\n      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>\n      <feMerge>\n        <feMergeNode in="outline"/>\n        <feMergeNode in="SourceGraphic"/>\n      </feMerge>\n    </filter>\n  `.trim()}function bN(i={}){const t=Hl(i.color,"red"),e=Xe(i.blur,0),n=Xe(i.width,1);return`\n      <filter>\n        <feFlood flood-color="${t}" flood-opacity="${Xe(i.opacity,1)}" result="colored"/>\n        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${n}"/>\n        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>\n        <feGaussianBlur result="blured" in="composed" stdDeviation="${e}"/>\n        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>\n      </filter>\n    `.trim()}function yN(i={}){const t=Xe(i.x,2);return`\n    <filter>\n      <feGaussianBlur stdDeviation="${null!=i.y&&Number.isFinite(i.y)?[t,i.y]:t}"/>\n    </filter>\n  `.trim()}function CN(i={}){const t=Xe(i.dx,0),e=Xe(i.dy,0),n=Hl(i.color,"black"),o=Xe(i.blur,4),r=Xe(i.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>\n         <feDropShadow stdDeviation="${o}" dx="${t}" dy="${e}" flood-color="${n}" flood-opacity="${r}" />\n       </filter>`.trim():`<filter>\n         <feGaussianBlur in="SourceAlpha" stdDeviation="${o}" />\n         <feOffset dx="${t}" dy="${e}" result="offsetblur" />\n         <feFlood flood-color="${n}" />\n         <feComposite in2="offsetblur" operator="in" />\n         <feComponentTransfer>\n           <feFuncA type="linear" slope="${r}" />\n         </feComponentTransfer>\n         <feMerge>\n           <feMergeNode/>\n           <feMergeNode in="SourceGraphic"/>\n         </feMerge>\n       </filter>`.trim()}function _N(i={}){const t=Xe(i.amount,1),n=.7152-.7152*(1-t);return`\n    <filter>\n      <feColorMatrix type="matrix" values="${.2126+.7874*(1-t)} ${n} ${.0722-.0722*(1-t)} 0 0 ${.2126-.2126*(1-t)} ${.7152+.2848*(1-t)} ${.0722-.0722*(1-t)} 0 0 ${.2126-.2126*(1-t)} ${n} ${.0722+.9278*(1-t)} 0 0 0 0 0 1 0"/>\n    </filter>\n  `.trim()}function xN(i={}){const t=Xe(i.amount,1);return`\n      <filter>\n        <feColorMatrix type="matrix" values="${.393+.607*(1-t)} ${.769-.769*(1-t)} ${.189-.189*(1-t)} 0 0 ${.349-.349*(1-t)} ${.686+.314*(1-t)} ${.168-.168*(1-t)} 0 0 ${.272-.272*(1-t)} ${.534-.534*(1-t)} ${.131+.869*(1-t)} 0 0 0 0 0 1 0"/>\n      </filter>\n    `.trim()}function wN(i={}){return`\n      <filter>\n        <feColorMatrix type="saturate" values="${1-Xe(i.amount,1)}"/>\n      </filter>\n    `.trim()}function MN(i={}){return`\n      <filter>\n        <feColorMatrix type="hueRotate" values="${Xe(i.angle,0)}"/>\n      </filter>\n    `.trim()}function SN(i={}){const t=Xe(i.amount,1),e=1-t;return`\n      <filter>\n        <feComponentTransfer>\n          <feFuncR type="table" tableValues="${t} ${e}"/>\n          <feFuncG type="table" tableValues="${t} ${e}"/>\n          <feFuncB type="table" tableValues="${t} ${e}"/>\n        </feComponentTransfer>\n      </filter>\n    `.trim()}function TN(i={}){const t=Xe(i.amount,1);return`\n    <filter>\n      <feComponentTransfer>\n        <feFuncR type="linear" slope="${t}"/>\n        <feFuncG type="linear" slope="${t}"/>\n        <feFuncB type="linear" slope="${t}"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim()}function ON(i={}){const t=Xe(i.amount,1),e=.5-t/2;return`\n    <filter>\n     <feComponentTransfer>\n        <feFuncR type="linear" slope="${t}" intercept="${e}"/>\n        <feFuncG type="linear" slope="${t}" intercept="${e}"/>\n        <feFuncB type="linear" slope="${t}" intercept="${e}"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim()}!function(i){i.presets=Object.assign({},Zt),i.presets["flip-x"]=Bh,i.presets["flip-y"]=Fh,i.presets["flip-xy"]=Rh,i.registry=Re.create({type:"background pattern"}),i.registry.register(i.presets,!0)}(Ns||(Ns={})),function(i){i.presets=nn,i.registry=Re.create({type:"filter"}),i.registry.register(i.presets,!0)}(uo||(uo={}));const AN={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},EN={},jh={position:sa("x","width","origin")},$h={position:sa("y","height","origin")},NN={position:sa("x","width","corner")},kN={position:sa("y","height","corner")},Yh={set:Vn("width","width")},Gh={set:Vn("height","height")},DN={set:Vn("rx","width")},IN={set:Vn("ry","height")},Zh={set:(i=>{const t=Vn("r","width"),e=Vn("r","height");return function(n,o){const r=o.refBBox;return Z(r.height>r.width?t:e,this,n,o)}})()},PN={set(i,{refBBox:t}){let e=parseFloat(i);const n=un(i);n&&(e/=100);const o=Math.sqrt(t.height*t.height+t.width*t.width);let r;return Number.isFinite(e)&&(r=n||e>=0&&e<=1?e*o:Math.max(e+o,0)),{r}}},VN={set:Vn("cx","width")},LN={set:Vn("cy","height")},qh={set:Jh({resetOffset:!0})},HN={set:Jh({resetOffset:!1})},Wh={set:Qh({resetOffset:!0})},BN={set:Qh({resetOffset:!1})},FN=Zh,RN=qh,jN=Wh,$N=jh,YN=$h,GN=Yh,ZN=Gh;function sa(i,t,e){return(n,{refBBox:o})=>{if(null==n)return null;let r=parseFloat(n);const a=un(n);let c;if(a&&(r/=100),Number.isFinite(r)){const h=o[e];c=a||r>0&&r<1?h[i]+o[t]*r:h[i]+r}const l=new _;return l[i]=c||0,l}}function Vn(i,t){return function(e,{refBBox:n}){let o=parseFloat(e);const r=un(e);r&&(o/=100);const a={};if(Number.isFinite(o)){const c=r||o>=0&&o<=1?o*n[t]:Math.max(o+n[t],0);a[i]=c}return a}}function Uh(i,t){const e="x6-shape",n=t&&t.resetOffset;return function(o,{elem:r,refBBox:a}){let c=ui(r,e);if(!c||c.value!==o){const m=i(o);c={value:o,shape:m,shapeBBox:m.bbox()},ui(r,e,c)}const l=c.shape.clone(),h=c.shapeBBox.clone(),u=h.getOrigin(),d=a.getOrigin();h.x=d.x,h.y=d.y;const f=a.getMaxScaleToFit(h,d);return l.scale(0===h.width||0===a.width?1:f.sx,0===h.height||0===a.height?1:f.sy,u),n&&l.translate(-u.x,-u.y),l}}function Jh(i){const e=Uh(function t(n){return q.parse(n)},i);return(n,o)=>({d:e(n,o).serialize()})}function Qh(i){const t=Uh(e=>new Fe(e),i);return(e,n)=>({points:t(e,n).serialize()})}const qN={qualify:Ut,set:(i,{view:t})=>`url(#${t.graph.defineGradient(i)})`},WN={qualify:Ut,set(i,{view:t}){const e=t.cell,n=Object.assign({},i);if(e.isEdge()&&"linearGradient"===n.type){const r=t.sourcePoint,a=t.targetPoint;n.id=`gradient-${n.type}-${e.id}`,n.attrs=Object.assign(Object.assign({},n.attrs),{x1:r.x,y1:r.y,x2:a.x,y2:a.y,gradientUnits:"userSpaceOnUse"}),t.graph.defs.remove(n.id)}return`url(#${t.graph.defineGradient(n)})`}},Xh={qualify:(i,{attrs:t})=>null==t.textWrap||!Ut(t.textWrap),set(i,{view:t,elem:e,attrs:n}){const o="x6-text",r=ui(e,o),a=u=>{try{return JSON.parse(u)}catch{return u}},c={x:n.x,eol:n.eol,annotations:a(n.annotations),textPath:a(n["text-path"]||n.textPath),textVerticalAnchor:n["text-vertical-anchor"]||n.textVerticalAnchor,displayEmpty:"true"===(n["display-empty"]||n.displayEmpty),lineHeight:n["line-height"]||n.lineHeight},l=n["font-size"]||n.fontSize,h=JSON.stringify([i,c]);if(l&&e.setAttribute("font-size",l),null==r||r!==h){const u=c.textPath;if(null!=u&&"object"==typeof u){const d=u.selector;if("string"==typeof d){const f=t.find(d)[0];f instanceof SVGPathElement&&(Cl(f),c.textPath=Object.assign({"xlink:href":`#${f.id}`},u))}}Th(e,`${i}`,c),ui(e,o,h)}}},UN={qualify:Ut,set(i,{view:t,elem:e,attrs:n,refBBox:o}){const r=i,a=r.width||0;un(a)?o.width*=parseFloat(a)/100:a<=0?o.width+=a:o.width=a;const c=r.height||0;un(c)?o.height*=parseFloat(c)/100:c<=0?o.height+=c:o.height=c;let l,h=r.text;null==h&&(h=n.text),l=null!=h?function PE(i,t,e={},n={}){const o=t.width,r=t.height,a=n.eol||"\n",{width:c}=ys(i,e);if(c<o)return i;const l=[],h=e.fontSize||14,u=e.lineHeight?parseFloat(e.lineHeight):Math.ceil(1.4*h),d=Math.floor(r/u);let f=i,p=c,g=n.ellipsis,m=0;g&&("string"!=typeof g&&(g="\u2026"),m=ys(g,e).width);for(let v=0;v<d;v+=1){if(!(p>o)){l.push(f);break}if(v===d-1){const[y]=Oh(f,o-m,p,e);l.push(g?`${y}${g}`:y)}else{const[y,z]=Oh(f,o,p,e);l.push(y),f=z,p=ys(f,e).width}}return l.join(a)}(`${h}`,o,{"font-weight":n["font-weight"]||n.fontWeight,"font-size":n["font-size"]||n.fontSize,"font-family":n["font-family"]||n.fontFamily,lineHeight:n.lineHeight},{ellipsis:r.ellipsis}):"",Z(Xh.set,this,l,{view:t,elem:e,attrs:n,refBBox:o,cell:t.cell})}},fo=(i,{attrs:t})=>void 0!==t.text,JN={qualify:fo},QN={qualify:fo},XN={qualify:fo},KN={qualify:fo},ek={qualify:fo},tk={qualify:fo},nk={qualify:(i,{elem:t})=>t instanceof SVGElement,set(i,{elem:t}){const e="x6-title",n=`${i}`,o=ui(t,e);if(null==o||o!==n){ui(t,e,n);const r=t.firstChild;if(r&&"TITLE"===r.tagName.toUpperCase())r.textContent=n;else{const a=document.createElementNS(t.namespaceURI,"title");a.textContent=n,t.insertBefore(a,r)}}}},ik={offset:Kh("x","width","right")},ok={offset:Kh("y","height","bottom")},sk={offset:(i,{refBBox:t})=>i?{x:-t.x,y:-t.y}:{x:0,y:0}};function Kh(i,t,e){return(n,{refBBox:o})=>{const r=new _;let a;return a="middle"===n?o[t]/2:n===e?o[t]:"number"==typeof n&&Number.isFinite(n)?n>-1&&n<1?-o[t]*n:-n:un(n)?o[t]*parseFloat(n)/100:0,r[i]=-(o[i]+a),r}}const rk={qualify:Ut,set(i,{elem:t}){Ye(t,i)}},ak={set(i,{elem:t}){t.innerHTML=`${i}`}},ck={qualify:Ut,set:(i,{view:t})=>`url(#${t.graph.defineFilter(i)})`},lk={set:i=>null!=i&&"object"==typeof i&&i.id?i.id:i};function pi(i,t,e){let n,o;"object"==typeof t?(n=t.x,o=t.y):(n=t,o=e);const r=q.parse(i),a=r.bbox();if(a){let c=-a.height/2-a.y,l=-a.width/2-a.x;"number"==typeof n&&(l-=n),"number"==typeof o&&(c-=o),r.translate(l,c)}return r.serialize()}var e6=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e};const hk=i=>{var{size:t,width:e,height:n,offset:o,open:r}=i;return t6({size:t,width:e,height:n,offset:o},!0===r,!0,void 0,e6(i,["size","width","height","offset","open"]))},uk=i=>{var{size:t,width:e,height:n,offset:o,factor:r}=i;return t6({size:t,width:e,height:n,offset:o},!1,!1,r,e6(i,["size","width","height","offset","factor"]))};function t6(i,t,e,n=3/4,o={}){const r=i.size||10,a=i.width||r,c=i.height||r,l=new q,h={};if(t)l.moveTo(a,0).lineTo(0,c/2).lineTo(a,c),h.fill="none";else{if(l.moveTo(0,c/2),l.lineTo(a,0),!e){const u=Ct(n,0,1);l.lineTo(a*u,c/2)}l.lineTo(a,c),l.close()}return Object.assign(Object.assign(Object.assign({},h),o),{tagName:"path",d:pi(l.serialize(),{x:null!=i.offset?i.offset:-a/2})})}const fk=i=>{var{size:t,width:e,height:n,offset:o}=i,r=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(i,["size","width","height","offset"]);const a=t||10,c=e||a,l=n||a,h=new q;return h.moveTo(0,l/2).lineTo(c/2,0).lineTo(c,l/2).lineTo(c/2,l).close(),Object.assign(Object.assign({},r),{tagName:"path",d:pi(h.serialize(),o??-c/2)})},gk=i=>{var{d:t,offsetX:e,offsetY:n}=i,o=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(i,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},o),{tagName:"path",d:pi(t,e,n)})},vk=i=>{var{size:t,width:e,height:n,offset:o}=i,r=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(i,["size","width","height","offset"]);const a=t||10,c=e||a,l=n||a,h=new q;return h.moveTo(0,0).lineTo(c,l).moveTo(0,l).lineTo(c,0),Object.assign(Object.assign({},r),{tagName:"path",fill:"none",d:pi(h.serialize(),o||-c/2)})},bk=i=>{var{width:t,height:e,offset:n,open:o,flip:r}=i,a=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(i,["width","height","offset","open","flip"]);let c=e||6;const l=t||10,h=!0===o,u=!0===r,d=Object.assign(Object.assign({},a),{tagName:"path"});u&&(c=-c);const f=new q;return f.moveTo(0,c).lineTo(l,0),h?d.fill="none":(f.lineTo(l,c),f.close()),d.d=pi(f.serialize(),{x:n||-l/2,y:c/2}),d};var n6=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e};const o6=i=>{var{r:t}=i,e=n6(i,["r"]);const n=t||5;return Object.assign(Object.assign({cx:n},e),{tagName:"circle",r:n})},yk=i=>{var{r:t}=i,e=n6(i,["r"]);const n=t||5,o=new q;return o.moveTo(n,0).lineTo(n,2*n),o.moveTo(0,n).lineTo(2*n,n),{children:[Object.assign(Object.assign({},o6({r:n})),{fill:"none"}),Object.assign(Object.assign({},e),{tagName:"path",d:pi(o.serialize(),-n)})]}},_k=i=>{var{rx:t,ry:e}=i,n=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(i,["rx","ry"]);const o=t||5,r=e||5;return Object.assign(Object.assign({cx:o},n),{tagName:"ellipse",rx:o,ry:r})};var Ln;(function(i){i.presets=ko,i.registry=Re.create({type:"marker"}),i.registry.register(i.presets,!0)})(Ln||(Ln={})),function(i){i.normalize=pi}(Ln||(Ln={}));var xk=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e};function Bl(i){return"string"==typeof i||Ut(i)}const wk={qualify:Bl,set:(i,{view:t,attrs:e})=>Fl("marker-start",i,t,e)},Mk={qualify:Bl,set:(i,{view:t,attrs:e})=>Fl("marker-end",i,t,e,{transform:"rotate(180)"})},Sk={qualify:Bl,set:(i,{view:t,attrs:e})=>Fl("marker-mid",i,t,e)};function Fl(i,t,e,n,o={}){const r="string"==typeof t?{name:t}:t,{name:a,args:c}=r,l=xk(r,["name","args"]);let h=l;if(a&&"string"==typeof a){const d=Ln.registry.get(a);if(!d)return Ln.registry.onNotFound(a);h=d(Object.assign(Object.assign({},l),c))}const u=Object.assign(Object.assign(Object.assign({},function Tk(i,t){const e={},n=i.stroke;"string"==typeof n&&(e.stroke=n,e.fill=n);let o=i.strokeOpacity;if(null==o&&(o=i["stroke-opacity"]),null==o&&(o=i.opacity),null!=o&&(e["stroke-opacity"]=o,e["fill-opacity"]=o),"marker-mid"!==t){const r=parseFloat(i.strokeWidth||i["stroke-width"]);if(Number.isFinite(r)&&r>1){const a=Math.ceil(r/2);e.refX="marker-start"===t?a:-a}}return e}(n,i)),o),h);return{[i]:`url(#${e.graph.defineMarker(u)})`}}const ks=(i,{view:t})=>t.cell.isEdge(),Ok={qualify:ks,set(i,t){var e,n,o,r;const a=t.view,c=i.reverse||!1,l=i.stubs||0;let h;if(Number.isFinite(l)&&0!==l)if(c){let u,d;const f=a.getConnectionLength()||0;l<0?(u=(f+l)/2,d=-l):(u=l,d=f-2*l),h=null===(r=null===(o=null===(n=null===(e=a.getConnection()?.divideAtLength(u))||void 0===e?void 0:e[1])||void 0===n?void 0:n.divideAtLength(d))||void 0===o?void 0:o[0])||void 0===r?void 0:r.serialize()}else{let u;u=l<0?((a.getConnectionLength()||0)+l)/2:l;const d=a.getConnection();if(d){const f=d.divideAtLength(u),p=d.divideAtLength(-u);f&&p&&(h=`${f[0].serialize()} ${p[1].serialize()}`)}}return{d:h||a.getConnectionPathData()}}},s6={qualify:ks,set:ra("getTangentAtLength",{rotate:!0})},Ak={qualify:ks,set:ra("getTangentAtLength",{rotate:!1})},r6={qualify:ks,set:ra("getTangentAtRatio",{rotate:!0})},Ek={qualify:ks,set:ra("getTangentAtRatio",{rotate:!1})},Nk=s6,kk=r6;function ra(i,t){const e={x:1,y:0};return(n,o)=>{let r,a;const c=o.view,l=c[i](Number(n));return l?(a=t.rotate?l.vector().vectorAngle(e):0,r=l.start):(r=c.path.start,a=0),0===a?{transform:`translate(${r.x},${r.y}')`}:{transform:`translate(${r.x},${r.y}') rotate(${a})`}}}var Kt;(function(i){i.isValidDefinition=function t(e,n,o){return!(null==e||"string"!=typeof e&&"function"==typeof e.qualify&&!Z(e.qualify,this,n,o))}})(Kt||(Kt={})),function(i){i.presets=Object.assign(Object.assign({},AN),At),i.registry=Re.create({type:"attribute definition"}),i.registry.register(i.presets,!0)}(Kt||(Kt={}));const Ke={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,prefix:i=>`${Ke.prefixCls}-${i}`},a6=Ke.prefix("highlighted"),Dk={highlight(i,t,e){ee(t,e&&e.className||a6)},unhighlight(i,t,e){$e(t,e&&e.className||a6)}},c6=Ke.prefix("highlight-opacity"),Ik={highlight(i,t){ee(t,c6)},unhighlight(i,t){$e(t,c6)}};var ye;!function(i){const t=dn("svg");function e(p,g){const m=function ZE(i,t){const e=Kr.createSVGPoint();return e.x=i,e.y=t,e}(p.x,p.y).matrixTransform(g);return new _(m.x,m.y)}function r(p,g){const m=t.createSVGPoint();m.x=p.x,m.y=p.y;const v=m.matrixTransform(g);m.x=p.x+p.width,m.y=p.y;const b=m.matrixTransform(g);m.x=p.x+p.width,m.y=p.y+p.height;const y=m.matrixTransform(g);m.x=p.x,m.y=p.y+p.height;const z=m.matrixTransform(g),C=Math.min(v.x,b.x,y.x,z.x),x=Math.max(v.x,b.x,y.x,z.x),w=Math.min(v.y,b.y,y.y,z.y),O=Math.max(v.y,b.y,y.y,z.y);return new F(C,w,x-C,O-w)}function c(p,g={}){let m;if(!p.ownerSVGElement||!En(p)){if(mh(p)){const{left:z,top:C,width:x,height:w}=l(p);return new F(z,C,x,w)}return new F(0,0,0,0)}let b=g.target;if(!g.recursive){try{m=p.getBBox()}catch{m={x:p.clientLeft,y:p.clientTop,width:p.clientWidth,height:p.clientHeight}}return b?r(m,xs(p,b)):F.create(m)}{const z=p.childNodes,C=z.length;if(0===C)return c(p,{target:b});b||(b=p);for(let x=0;x<C;x+=1){const w=z[x];let O;O=c(w,0===w.childNodes.length?{target:b}:{target:b,recursive:!0}),m=m?m.union(O):O}return m}}function l(p){let g=0,m=0,v=0,b=0;if(p){let y=p;for(;y;)g+=y.offsetLeft,m+=y.offsetTop,y=y.offsetParent,y&&(g+=parseInt(El(y,"borderLeft"),10),m+=parseInt(El(y,"borderTop"),10));v=p.offsetWidth,b=p.offsetHeight}return{left:g,top:m,width:v,height:b}}function h(p){const g=m=>{const v=p.getAttribute(m),b=v?parseFloat(v):0;return Number.isNaN(b)?0:b};switch(p instanceof SVGElement&&p.nodeName.toLowerCase()){case"rect":return new F(g("x"),g("y"),g("width"),g("height"));case"circle":return new Yt(g("cx"),g("cy"),g("r"),g("r"));case"ellipse":return new Yt(g("cx"),g("cy"),g("rx"),g("ry"));case"polyline":{const m=Xr(p);return new Fe(m)}case"polygon":{const m=Xr(p);return m.length>1&&m.push(m[0]),new Fe(m)}case"path":{let m=p.getAttribute("d");return q.isValid(m)||(m=q.normalize(m)),q.parse(m)}case"line":return new $(g("x1"),g("y1"),g("x2"),g("y2"))}return c(p)}function d(p){if(null==p)return null;let g=p;do{let m=g.tagName;if("string"!=typeof m)return null;if(m=m.toUpperCase(),so(g,"x6-port"))g=g.nextElementSibling;else if("G"===m)g=g.firstElementChild;else{if("TITLE"!==m)break;g=g.nextElementSibling}}while(g);return g}i.transformPoint=e,i.transformLine=function n(p,g){return new $(e(p.start,g),e(p.end,g))},i.transformPolyline=function o(p,g){let m=p instanceof Fe?p.points:p;return Array.isArray(m)||(m=[]),new Fe(m.map(v=>e(v,g)))},i.transformRectangle=r,i.bbox=function a(p,g,m){let v;const b=p.ownerSVGElement;if(!b)return new F(0,0,0,0);try{v=p.getBBox()}catch{v={x:p.clientLeft,y:p.clientTop,width:p.clientWidth,height:p.clientHeight}}return g?F.create(v):r(v,xs(p,m||b))},i.getBBox=c,i.getBoundingOffsetRect=l,i.toGeometryShape=h,i.translateAndAutoOrient=function u(p,g,m,v){const b=_.create(g),y=_.create(m);v||(v=p instanceof SVGSVGElement?p:p.ownerSVGElement);const z=Il(p);p.setAttribute("transform","");const C=c(p,{target:v}).scale(z.sx,z.sy),x=Cs();x.setTranslate(-C.x-C.width/2,-C.y-C.height/2);const w=Cs(),O=b.angleBetween(y,b.clone().translate(1,0));O&&w.setRotate(O,0,0);const P=Cs(),E=b.clone().move(y,C.width/2);P.setTranslate(2*b.x-E.x,2*b.y-E.y);const L=xs(p,v),k=Cs();k.setMatrix(P.matrix.multiply(w.matrix.multiply(x.matrix.multiply(L.scale(z.sx,z.sy))))),p.setAttribute("transform",ro(k.matrix))},i.findShapeNode=d,i.getBBoxV2=function f(p){const g=d(p);if(!En(g)){if(mh(p)){const{left:v,top:b,width:y,height:z}=l(p);return new F(v,b,y,z)}return new F(0,0,0,0)}return h(g).bbox()||F.create()}}(ye||(ye={}));const Pk={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},Vk={highlight(i,t,e){const n=Hn.getHighlighterId(t,e);if(Hn.hasCache(n))return;e=h0({},e,Pk);const o=X.create(t);let r,a;try{r=o.toPathData()}catch{a=ye.bbox(o.node,!0),r=Eh(Object.assign(Object.assign({},e),a))}const c=dn("path");if(le(c,Object.assign({d:r,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},e.attrs?bs(e.attrs):null)),i.isEdgeElement(t))le(c,"d",i.getConnectionPathData());else{let u=o.getTransformToElement(i.container);const d=e.padding;if(d){null==a&&(a=ye.bbox(o.node,!0));const f=a.x+a.width/2,p=a.y+a.height/2;a=ye.transformRectangle(a,u);const g=Math.max(a.width,1),m=Math.max(a.height,1),v=(g+d)/g,b=(m+d)/m,y=Qe({a:v,b:0,c:0,d:b,e:f-v*f,f:p-b*p});u=u.multiply(y)}ao(c,u)}ee(c,Ke.prefix("highlight-stroke"));const l=i.cell,h=()=>Hn.removeHighlighter(n);l.on("removed",h),l.model&&l.model.on("reseted",h),i.container.appendChild(c),Hn.setCache(n,c)},unhighlight(i,t,e){Hn.removeHighlighter(Hn.getHighlighterId(t,e))}};var Hn,pn;function Rl(i,t={}){return new _($t(t.x,i.width),$t(t.y,i.height))}function jl(i,t,e){return Object.assign({angle:t,position:i.toJSON()},e)}!function(i){i.getHighlighterId=function t(a,c){return Cl(a),a.id+JSON.stringify(c)};const e={};i.setCache=function n(a,c){e[a]=c},i.hasCache=function o(a){return null!=e[a]},i.removeHighlighter=function r(a){const c=e[a];c&&(Qt(c),delete e[a])}}(Hn||(Hn={})),function(i){i.check=function t(e,n){if("function"!=typeof n.highlight)throw new Error(`Highlighter '${e}' is missing required \`highlight()\` method`);if("function"!=typeof n.unhighlight)throw new Error(`Highlighter '${e}' is missing required \`unhighlight()\` method`)}}(pn||(pn={})),function(i){i.presets=yi,i.registry=Re.create({type:"highlighter"}),i.registry.register(i.presets,!0)}(pn||(pn={}));const Lk=(i,t)=>i.map(({x:e,y:n,angle:o})=>jl(Rl(t,{x:e,y:n}),o||0)),Hk=(i,t,e)=>{const o=e.step||20;return l6(i,t,e.start||0,(r,a)=>(r+.5-a/2)*o)},Bk=(i,t,e)=>{const o=e.step||360/i.length;return l6(i,t,e.start||0,r=>r*o)};function l6(i,t,e,n){const o=t.getCenter(),r=t.getTopCenter(),a=t.width/t.height,c=Yt.fromRect(t),l=i.length;return i.map((h,u)=>{const d=e+n(u,l),f=r.clone().rotate(-d,o).scale(a,1,o),p=h.compensateRotate?-c.tangentTheta(f):0;return(h.dx||h.dy)&&f.translate(h.dx||0,h.dy||0),h.dr&&f.move(o,h.dr),jl(f.round(),p,h)})}var Fk=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e};const Rk=(i,t,e)=>Ds(i,Rl(t,e.start||t.getOrigin()),Rl(t,e.end||t.getCorner()),e),jk=(i,t,e)=>Ds(i,t.getTopLeft(),t.getBottomLeft(),e),$k=(i,t,e)=>Ds(i,t.getTopRight(),t.getBottomRight(),e),Yk=(i,t,e)=>Ds(i,t.getTopLeft(),t.getTopRight(),e),Gk=(i,t,e)=>Ds(i,t.getBottomLeft(),t.getBottomRight(),e);function Ds(i,t,e,n){const o=new $(t,e),r=i.length;return i.map((a,c)=>{var{strict:l}=a,h=Fk(a,["strict"]);const d=o.pointAt(l||n.strict?(c+1)/(r+1):(c+.5)/r);return(h.dx||h.dy)&&d.translate(h.dx||0,h.dy||0),jl(d.round(),0,h)})}var gi;!function(i){i.presets=Ci,i.registry=Re.create({type:"port layout"}),i.registry.register(i.presets,!0)}(gi||(gi={}));const Zk={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function Bn(i,t){const{x:e,y:n,angle:o,attrs:r}=t||{};return h0({},{angle:o,attrs:r,position:{x:e,y:n}},i,Zk)}const qk=(i,t,e)=>Bn({position:t.getTopLeft()},e),Wk=(i,t,e)=>Bn({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},e),Uk=(i,t,e)=>Bn({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},e),Jk=(i,t,e)=>Bn({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},e),Qk=(i,t,e)=>Bn({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},e),Xk=(i,t,e)=>h6(i,t,!1,e),Kk=(i,t,e)=>h6(i,t,!0,e),eD=(i,t,e)=>u6(i,t,!1,e),tD=(i,t,e)=>u6(i,t,!0,e);function h6(i,t,e,n){const o=null!=n.offset?n.offset:15,r=t.getCenter().theta(i),a=d6(t);let c,l,h,u,d=0;return r<a[1]||r>a[2]?(c=".3em",l=o,h=0,u="start"):r<a[0]?(c="0",l=0,h=-o,e?(d=-90,u="start"):u="middle"):r<a[3]?(c=".3em",l=-o,h=0,u="end"):(c=".6em",l=0,h=o,e?(d=90,u="start"):u="middle"),Bn({position:{x:Math.round(l),y:Math.round(h)},angle:d,attrs:{".":{y:c,"text-anchor":u}}},n)}function u6(i,t,e,n){const o=null!=n.offset?n.offset:15,r=t.getCenter().theta(i),a=d6(t);let c,l,h,u,d=0;return r<a[1]||r>a[2]?(c=".3em",l=-o,h=0,u="end"):r<a[0]?(c=".6em",l=0,h=o,e?(d=90,u="start"):u="middle"):r<a[3]?(c=".3em",l=o,h=0,u="start"):(c="0em",l=0,h=-o,e?(d=-90,u="start"):u="middle"),Bn({position:{x:Math.round(l),y:Math.round(h)},angle:d,attrs:{".":{y:c,"text-anchor":u}}},n)}function d6(i){const t=i.getCenter(),e=t.theta(i.getTopLeft()),n=t.theta(i.getBottomLeft()),o=t.theta(i.getBottomRight());return[e,t.theta(i.getTopRight()),o,n]}const nD=(i,t,e)=>f6(i.diff(t.getCenter()),!1,e),iD=(i,t,e)=>f6(i.diff(t.getCenter()),!0,e);function f6(i,t,e){const n=null!=e.offset?e.offset:20,o=new _(0,0),r=-i.theta(o);let l,c=".3em",h=r;return(r+90)%180==0?(l=t?"end":"middle",!t&&-270===r&&(c="0em")):r>-270&&r<-90?(l="start",h=r-180):l="end",Bn({position:i.clone().move(o,n).diff(i).round().round().toJSON(),angle:t?h:0,attrs:{".":{y:c,"text-anchor":l}}},e)}var po,$l,xe;!function(i){i.presets=_i,i.registry=Re.create({type:"port label layout"}),i.registry.register(i.presets,!0)}(po||(po={}));class fe extends Ee{get priority(){return 2}constructor(){super(),this.cid=$l.uniqueId(),fe.views[this.cid]=this}confirmUpdate(t,e){return 0}empty(t=this.container){return vs(t),this}unmount(t=this.container){return Qt(t),this}remove(t=this.container){return t===this.container&&(this.removeEventListeners(document),this.onRemove(),delete fe.views[this.cid]),this.unmount(t),this}onRemove(){}setClass(t,e=this.container){e.classList.value=Array.isArray(t)?t.join(" "):t}addClass(t,e=this.container){return ee(e,Array.isArray(t)?t.join(" "):t),this}removeClass(t,e=this.container){return $e(e,Array.isArray(t)?t.join(" "):t),this}setStyle(t,e=this.container){return Ye(e,t),this}setAttrs(t,e=this.container){return null!=t&&null!=e&&le(e,t),this}findAttr(t,e=this.container){let n=e;for(;n&&1===n.nodeType;){const o=n.getAttribute(t);if(null!=o)return o;if(n===this.container)return null;n=n.parentNode}return null}find(t,e=this.container,n=this.selectors){return fe.find(t,e,n).elems}findOne(t,e=this.container,n=this.selectors){const o=this.find(t,e,n);return o.length>0?o[0]:null}findByAttr(t,e=this.container){let n=e;for(;n&&n.getAttribute;){const o=n.getAttribute(t);if((null!=o||n===this.container)&&"false"!==o)return n;n=n.parentNode}return null}getSelector(t,e){let n;if(t===this.container)return"string"==typeof e&&(n=`> ${e}`),n;if(t){const o=xl(t)+1;n=`${t.tagName.toLowerCase()}:nth-child(${o})`,e&&(n+=` > ${e}`),n=this.getSelector(t.parentNode,n)}return n}prefixClassName(t){return Ke.prefix(t)}delegateEvents(t,e){if(null==t)return this;e||this.undelegateEvents();const n=/^(\S+)\s*(.*)$/;return Object.keys(t).forEach(o=>{const r=o.match(n);if(null==r)return;const a=this.getEventHandler(t[o]);"function"==typeof a&&this.delegateEvent(r[1],r[2],a)}),this}undelegateEvents(){return gt.off(this.container,this.getEventNamespace()),this}delegateDocumentEvents(t,e){return this.addEventListeners(document,t,e),this}undelegateDocumentEvents(){return this.removeEventListeners(document),this}delegateEvent(t,e,n){return gt.on(this.container,t+this.getEventNamespace(),e,n),this}undelegateEvent(t,e,n){const o=t+this.getEventNamespace();return null==e?gt.off(this.container,o):"string"==typeof e?gt.off(this.container,o,e,n):gt.off(this.container,o,e),this}addEventListeners(t,e,n){if(null==e)return this;const o=this.getEventNamespace();return Object.keys(e).forEach(r=>{const a=this.getEventHandler(e[r]);"function"==typeof a&&gt.on(t,r+o,n,a)}),this}removeEventListeners(t){return null!=t&&gt.off(t,this.getEventNamespace()),this}getEventNamespace(){return`.${Ke.prefixCls}-event-${this.cid}`}getEventHandler(t){let e;if("string"==typeof t){const n=this[t];"function"==typeof n&&(e=(...o)=>n.call(this,...o))}else e=(...n)=>t.call(this,...n);return e}getEventTarget(t,e={}){const{target:n,type:o,clientX:r=0,clientY:a=0}=t;return e.fromPoint||"touchmove"===o||"touchend"===o?document.elementFromPoint(r,a):n}stopPropagation(t){return this.setEventData(t,{propagationStopped:!0}),this}isPropagationStopped(t){return!0===this.getEventData(t).propagationStopped}getEventData(t){return this.eventData(t)}setEventData(t,e){return this.eventData(t,e)}eventData(t,e){if(null==t)throw new TypeError("Event object required");let n=t.data;const o=`__${this.cid}__`;return null==e?null==n?{}:n[o]||{}:(null==n&&(n=t.data={}),n[o]=Object.assign(null==n[o]?{}:Object.assign({},n[o]),e),n[o])}normalizeEvent(t){return fe.normalizeEvent(t)}}(function(i){i.createElement=function t(o,r){return r?dn(o||"g"):_l(o||"div")},i.find=function e(o,r,a){if(!o||"."===o)return{elems:[r]};if(a){const c=a[o];if(c)return{elems:Array.isArray(c)?c:[c]}}if(Ke.useCSSSelector){const c=o.includes(">")?`:scope ${o}`:o;return{isCSSSelector:!0,elems:Array.prototype.slice.call(r.querySelectorAll(c))}}return{elems:[]}},i.normalizeEvent=function n(o){let r=o;const a=o.originalEvent,c=a&&a.changedTouches&&a.changedTouches[0];if(c){for(const h in o)void 0===c[h]&&(c[h]=o[h]);r=c}const l=r.target;if(l){const h=l.correspondingUseElement;h&&(r.target=h)}return r}})(fe||(fe={})),function(i){i.views={},i.getView=function t(e){return i.views[e]||null}}(fe||(fe={})),function(i){let t=0;i.uniqueId=function e(){const n=`v${t}`;return t+=1,n}}($l||($l={}));class oD{constructor(t){this.view=t,this.clean()}clean(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new Vl,this.pathCache={}}get(t){return this.elemCache.has(t)||this.elemCache.set(t,{}),this.elemCache.get(t)}getData(t){const e=this.get(t);return e.data||(e.data={}),e.data}getMatrix(t){const e=this.get(t);return null==e.matrix&&(e.matrix=function QE(i,t){let e=Qe();if(En(t)&&En(i)){let n=i;const o=[];for(;n&&n!==t;){const a=_s(n.getAttribute("transform")||null);o.push(a),n=n.parentNode}o.reverse().forEach(r=>{e=e.multiply(r)})}return e}(t,this.view.container)),Qe(e.matrix)}getShape(t){const e=this.get(t);return null==e.shape&&(e.shape=ye.toGeometryShape(t)),e.shape.clone()}getBoundingRect(t){const e=this.get(t);return null==e.boundingRect&&(e.boundingRect=ye.getBBoxV2(t)),e.boundingRect.clone()}}(function(i){function e(h){return null!=h&&"string"==typeof h}function r(h,u={ns:Je.svg}){const d=document.createDocumentFragment(),f={},p={},g=[{markup:Array.isArray(h)?h:[h],parent:d,ns:u.ns}];for(;g.length>0;){const m=g.pop();let v=m.ns||Je.svg;const y=m.parent;m.markup.forEach(z=>{const C=z.tagName;if(!C)throw new TypeError("Invalid tagName");z.ns&&(v=z.ns);const x=v?_l(C,v):fh(C),w=z.attrs;w&&le(x,bs(w));const O=z.style;O&&Ye(x,O);const P=z.className;null!=P&&x.setAttribute("class",Array.isArray(P)?P.join(" "):P),z.textContent&&(x.textContent=z.textContent);const E=z.selector;if(null!=E){if(p[E])throw new TypeError("Selector must be unique");p[E]=x}if(z.groupSelector){let k=z.groupSelector;Array.isArray(k)||(k=[k]),k.forEach(V=>{f[V]||(f[V]=[]),f[V].push(x)})}y.appendChild(x);const L=z.children;Array.isArray(L)&&g.push({ns:v,markup:L,parent:x})})}return Object.keys(f).forEach(m=>{if(p[m])throw new Error("Ambiguous group selector");p[m]=f[m]}),{fragment:d,selectors:p,groups:f}}function a(h){return h instanceof SVGElement?dn("g"):fh("div")}i.isJSONMarkup=function t(h){return null!=h&&!e(h)},i.isStringMarkup=e,i.clone=function n(h){return null==h||e(h)?h:Oe(h)},i.sanitize=function o(h){return`${h}`.trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")},i.parseJSONMarkup=r,i.renderMarkup=function c(h){if(e(h)){const p=X.createVectors(h),g=p.length;if(1===g)return{elem:p[0].node};if(g>1){const m=a(p[0].node);return p.forEach(v=>{m.appendChild(v.node)}),{elem:m}}return{}}const u=r(h),d=u.fragment;let f=null;return d.childNodes.length>1?(f=a(d.firstChild),f.appendChild(d)):f=d.firstChild,{elem:f,selectors:u.selectors}},i.parseLabelStringMarkup=function l(h){const u=X.createVectors(h),d=document.createDocumentFragment();for(let f=0,p=u.length;f<p;f+=1)d.appendChild(u[f].node);return{fragment:d,selectors:{}}}})(xe||(xe={})),function(i){i.getSelector=function t(e,n,o){if(null!=e){let r;const a=e.tagName.toLowerCase();if(e===n)return r="string"==typeof o?`> ${a} > ${o}`:`> ${a}`,r;const c=e.parentNode;return r=c&&c.childNodes.length>1?`${a}:nth-child(${xl(e)+1})`:a,o&&(r+=` > ${o}`),t(e.parentNode,n,r)}return o}}(xe||(xe={})),function(i){i.getPortContainerMarkup=function t(){return"g"},i.getPortMarkup=function e(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}},i.getPortLabelMarkup=function n(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}}(xe||(xe={})),function(i){i.getEdgeMarkup=function t(){return[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}]}}(xe||(xe={})),function(i){i.getForeignObjectMarkup=function t(e=!1){return{tagName:"foreignObject",selector:"fo",children:[{ns:Je.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:Je.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:e?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}}(xe||(xe={}));class p6{constructor(t){this.view=t}get cell(){return this.view.cell}getDefinition(t){return this.cell.getAttrDefinition(t)}processAttrs(t,e){let n,o,r,a;const c=[];return Object.keys(e).forEach(l=>{const h=e[l],u=this.getDefinition(l),d=Z(Kt.isValidDefinition,this.view,u,h,{elem:t,attrs:e,cell:this.cell,view:this.view});if(u&&d)"string"==typeof u?(null==n&&(n={}),n[u]=h):null!==h&&c.push({name:l,definition:u});else{null==n&&(n={});const f=vh.includes(l)?l:U0(l);n[f]=h}}),c.forEach(({name:l,definition:h})=>{const u=e[l];"function"==typeof h.set&&(null==o&&(o={}),o[l]=u),"function"==typeof h.offset&&(null==r&&(r={}),r[l]=u),"function"==typeof h.position&&(null==a&&(a={}),a[l]=u)}),{raw:e,normal:n,set:o,offset:r,position:a}}mergeProcessedAttrs(t,e){t.set=Object.assign(Object.assign({},t.set),e.set),t.position=Object.assign(Object.assign({},t.position),e.position),t.offset=Object.assign(Object.assign({},t.offset),e.offset);const n=t.normal&&t.normal.transform;null!=n&&e.normal&&(e.normal.transform=n),t.normal=e.normal}findAttrs(t,e,n,o){const r=[],a=new Vl;return Object.keys(t).forEach(c=>{const l=t[c];if(!Ut(l))return;const{isCSSSelector:h,elems:u}=fe.find(c,e,o);n[c]=u;for(let d=0,f=u.length;d<f;d+=1){const p=u[d],g=o&&o[c]===p,m=a.get(p);if(m){m.array||(r.push(p),m.array=!0,m.attrs=[m.attrs],m.priority=[m.priority]);const v=m.attrs,b=m.priority;if(g)v.unshift(l),b.unshift(-1);else{const y=uT(b,h?-1:f);v.splice(y,0,l),b.splice(y,0,f)}}else a.set(p,{elem:p,attrs:l,priority:g?-1:f,array:!1})}}),r.forEach(c=>{const l=a.get(c);l.attrs=l.attrs.reduceRight((u,d)=>Pe(u,d),{})}),a}updateRelativeAttrs(t,e,n){const o=e.raw||{};let r=e.normal||{};const a=e.set,c=e.position,l=e.offset,h=()=>({elem:t,cell:this.cell,view:this.view,attrs:o,refBBox:n.clone()});if(null!=a&&Object.keys(a).forEach(v=>{const b=a[v],y=this.getDefinition(v);if(null!=y){const z=Z(y.set,this.view,b,h());"object"==typeof z?r=Object.assign(Object.assign({},r),z):null!=z&&(r[v]=z)}}),t instanceof HTMLElement)return void this.view.setAttrs(r,t);const u=r.transform,f=_s(u?`${u}`:null),p=new _(f.e,f.f);u&&(delete r.transform,f.e=0,f.f=0);let g=!1;null!=c&&Object.keys(c).forEach(v=>{const b=c[v],y=this.getDefinition(v);if(null!=y){const z=Z(y.position,this.view,b,h());null!=z&&(g=!0,p.translate(_.create(z)))}}),this.view.setAttrs(r,t);let m=!1;if(null!=l){const v=this.view.getBoundingRectOfElement(t);if(v.width>0&&v.height>0){const b=ye.transformRectangle(v,f);Object.keys(l).forEach(y=>{const z=l[y],C=this.getDefinition(y);if(null!=C){const x=Z(C.offset,this.view,z,{elem:t,cell:this.cell,view:this.view,attrs:o,refBBox:b});null!=x&&(m=!0,p.translate(_.create(x)))}})}}(null!=u||g||m)&&(p.round(1),f.e=p.x,f.f=p.y,t.setAttribute("transform",ro(f)))}update(t,e,n){const o={},r=this.findAttrs(n.attrs||e,t,o,n.selectors),a=n.attrs?this.findAttrs(e,t,o,n.selectors):r,c=[];r.each(u=>{const d=u.elem,f=u.attrs,p=this.processAttrs(d,f);if(null==p.set&&null==p.position&&null==p.offset)this.view.setAttrs(p.normal,d);else{const g=a.get(d),m=g?g.attrs:null,v=m&&null==f.ref?m.ref:f.ref;let b;if(v){if(b=(o[v]||this.view.find(v,t,n.selectors))[0],!b)throw new Error(`"${v}" reference does not exist.`)}else b=null;const y={node:d,refNode:b,attributes:m,processedAttributes:p},z=c.findIndex(C=>C.refNode===d);z>-1?c.splice(z,0,y):c.push(y)}});const l=new Vl;let h;c.forEach(u=>{const d=u.node,f=u.refNode;let p;const g=null!=f&&null!=n.rotatableNode&&wl(n.rotatableNode,f);let m;f&&(p=l.get(f)),p||(p=f?ye.getBBox(f,{target:g?n.rotatableNode:t}):n.rootBBox,f&&l.set(f,p)),n.attrs&&u.attributes?(m=this.processAttrs(d,u.attributes),this.mergeProcessedAttrs(m,u.processedAttributes)):m=u.processedAttributes;let v=p;g&&null!=n.rotatableNode&&!n.rotatableNode.contains(d)&&(h||(h=_s(le(n.rotatableNode,"transform"))),v=ye.transformRectangle(p,h)),this.updateRelativeAttrs(d,m,v)})}}class g6{get cell(){return this.view.cell}constructor(t,e,n=[]){this.view=t;const o={},r={};let a=0;Object.keys(e).forEach(l=>{let h=e[l];Array.isArray(h)||(h=[h]),h.forEach(u=>{let d=o[u];d||(a+=1,d=o[u]=1<<a),r[l]|=d})});let c=n;if(Array.isArray(c)||(c=[c]),c.forEach(l=>{o[l]||(a+=1,o[l]=1<<a)}),a>25)throw new Error("Maximum number of flags exceeded.");this.flags=o,this.attrs=r,this.bootstrap=n}getFlag(t){const e=this.flags;return null==e?0:Array.isArray(t)?t.reduce((n,o)=>n|e[o],0):0|e[t]}hasAction(t,e){return t&this.getFlag(e)}removeAction(t,e){return t^t&this.getFlag(e)}getBootstrapFlag(){return this.getFlag(this.bootstrap)}getChangedFlag(){let t=0;return this.attrs&&Object.keys(this.attrs).forEach(e=>{this.cell.hasChanged(e)&&(t|=this.attrs[e])}),t}}let dt=(()=>{class i extends fe{static getDefaults(){return this.defaults}static config(e){this.defaults=this.getOptions(e)}static getOptions(e){const n=(u,d)=>null!=d?m0([...Array.isArray(u)?u:[u],...Array.isArray(d)?d:[d]]):Array.isArray(u)?[...u]:[u],o=Oe(this.getDefaults()),{bootstrap:r,actions:a,events:c,documentEvents:l}=e,h=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(e,["bootstrap","actions","events","documentEvents"]);return r&&(o.bootstrap=n(o.bootstrap,r)),a&&Object.entries(a).forEach(([u,d])=>{const f=o.actions[u];d&&f?o.actions[u]=n(f,d):d&&(o.actions[u]=n(d))}),c&&(o.events=Object.assign(Object.assign({},o.events),c)),e.documentEvents&&(o.documentEvents=Object.assign(Object.assign({},o.documentEvents),l)),Pe(o,h)}get[Symbol.toStringTag](){return i.toStringTag}constructor(e,n={}){super(),this.cell=e,this.options=this.ensureOptions(n),this.graph=this.options.graph,this.attr=new p6(this),this.flag=new g6(this,this.options.actions,this.options.bootstrap),this.cache=new oD(this),this.setContainer(this.ensureContainer()),this.setup(),this.init()}init(){}onRemove(){this.removeTools()}get priority(){return this.options.priority}get rootSelector(){return this.options.rootSelector}getConstructor(){return this.constructor}ensureOptions(e){return this.getConstructor().getOptions(e)}getContainerTagName(){return this.options.isSvgElement?"g":"div"}getContainerStyle(){}getContainerAttrs(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}getContainerClassName(){return this.prefixClassName("cell")}ensureContainer(){return fe.createElement(this.getContainerTagName(),this.options.isSvgElement)}setContainer(e){if(this.container!==e){this.undelegateEvents(),this.container=e,null!=this.options.events&&this.delegateEvents(this.options.events);const n=this.getContainerAttrs();null!=n&&this.setAttrs(n,e);const o=this.getContainerStyle();null!=o&&this.setStyle(o,e);const r=this.getContainerClassName();null!=r&&this.addClass(r,e)}return this}isNodeView(){return!1}isEdgeView(){return!1}render(){return this}confirmUpdate(e,n={}){return 0}getBootstrapFlag(){return this.flag.getBootstrapFlag()}getFlag(e){return this.flag.getFlag(e)}hasAction(e,n){return this.flag.hasAction(e,n)}removeAction(e,n){return this.flag.removeAction(e,n)}handleAction(e,n,o,r){if(this.hasAction(e,n)){o();const a=[n];return r&&("string"==typeof r?a.push(r):a.push(...r)),this.removeAction(e,a)}return e}setup(){this.cell.on("changed",({options:e})=>this.onAttrsChange(e))}onAttrsChange(e){let n=this.flag.getChangedFlag();e.updated||!n||(e.dirty&&this.hasAction(n,"update")&&(n|=this.getFlag("render")),e.toolId&&(e.async=!1),null!=this.graph&&this.graph.renderer.requestViewUpdate(this,n,e))}parseJSONMarkup(e,n){const o=xe.parseJSONMarkup(e),r=o.selectors,a=this.rootSelector;if(n&&a){if(r[a])throw new Error("Invalid root selector");r[a]=n}return o}can(e){let n=this.graph.options.interacting;if("function"==typeof n&&(n=Z(n,this.graph,this)),"object"==typeof n){let o=n[e];return"function"==typeof o&&(o=Z(o,this.graph,this)),!1!==o}return"boolean"==typeof n&&n}cleanCache(){return this.cache.clean(),this}getCache(e){return this.cache.get(e)}getDataOfElement(e){return this.cache.getData(e)}getMatrixOfElement(e){return this.cache.getMatrix(e)}getShapeOfElement(e){return this.cache.getShape(e)}getBoundingRectOfElement(e){return this.cache.getBoundingRect(e)}getBBoxOfElement(e){const n=this.getBoundingRectOfElement(e),o=this.getMatrixOfElement(e),r=this.getRootRotatedMatrix(),a=this.getRootTranslatedMatrix();return ye.transformRectangle(n,a.multiply(r).multiply(o))}getUnrotatedBBoxOfElement(e){const n=this.getBoundingRectOfElement(e),o=this.getMatrixOfElement(e),r=this.getRootTranslatedMatrix();return ye.transformRectangle(n,r.multiply(o))}getBBox(e={}){let n;if(e.useCellGeometry){const o=this.cell,r=o.isNode()?o.getAngle():0;n=o.getBBox().bbox(r)}else n=this.getBBoxOfElement(this.container);return this.graph.coord.localToGraphRect(n)}getRootTranslatedMatrix(){const e=this.cell,n=e.isNode()?e.getPosition():{x:0,y:0};return Qe().translate(n.x,n.y)}getRootRotatedMatrix(){let e=Qe();const n=this.cell,o=n.isNode()?n.getAngle():0;if(o){const r=n.getBBox(),a=r.width/2,c=r.height/2;e=e.translate(a,c).rotate(o).translate(-a,-c)}return e}findMagnet(e=this.container){return this.findByAttr("magnet",e)}updateAttrs(e,n,o={}){null==o.rootBBox&&(o.rootBBox=new F),null==o.selectors&&(o.selectors=this.selectors),this.attr.update(e,n,o)}isEdgeElement(e){return this.cell.isEdge()&&(null==e||e===this.container)}prepareHighlight(e,n={}){const o=e||this.container;return n.partial=o===this.container,o}highlight(e,n={}){const o=this.prepareHighlight(e,n);return this.notify("cell:highlight",{magnet:o,options:n,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:o,options:n,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:o,options:n,view:this,node:this.cell,cell:this.cell}),this}unhighlight(e,n={}){const o=this.prepareHighlight(e,n);return this.notify("cell:unhighlight",{magnet:o,options:n,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:o,options:n,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:o,options:n,view:this,edge:this.cell,cell:this.cell}),this}notifyUnhighlight(e,n){}getEdgeTerminal(e,n,o,r,a){const c=this.cell,l=this.findAttr("port",e),h=e.getAttribute("data-selector"),u={cell:c.id};return null!=h&&(u.magnet=h),null!=l?(u.port=l,c.isNode()&&!c.hasPort(l)&&null==h&&(u.selector=this.getSelector(e))):null==h&&this.container!==e&&(u.selector=this.getSelector(e)),u}getMagnetFromEdgeTerminal(e){const n=this.cell,o=this.container,r=e.port;let c,a=e.magnet;return null!=r&&n.isNode()&&n.hasPort(r)?c=this.findPortElem(r,a)||o:(a||(a=e.selector),!a&&null!=r&&(a=`[port="${r}"]`),c=this.findOne(a,o,this.selectors)),c}hasTools(e){const n=this.tools;return null!=n&&(null==e||n.name===e)}addTools(e){if(!this.can("toolsAddable"))return this;if(this.removeTools(),e){const n=Ge.isToolsView(e)?e:new Ge(e);this.tools=n,n.config({view:this}),n.mount()}return this}updateTools(e={}){return this.tools&&this.tools.update(e),this}removeTools(){return this.tools&&(this.tools.remove(),this.tools=null),this}hideTools(){return this.tools&&this.tools.hide(),this}showTools(){return this.tools&&this.tools.show(),this}renderTools(){const e=this.cell.getTools();return this.addTools(e),this}notify(e,n){return this.trigger(e,n),this.graph.trigger(e,n),this}getEventArgs(e,n,o){const r=this,a=r.cell;return null==n||null==o?{e,view:r,cell:a}:{e,x:n,y:o,view:r,cell:a}}onClick(e,n,o){this.notify("cell:click",this.getEventArgs(e,n,o))}onDblClick(e,n,o){this.notify("cell:dblclick",this.getEventArgs(e,n,o))}onContextMenu(e,n,o){this.notify("cell:contextmenu",this.getEventArgs(e,n,o))}onMouseDown(e,n,o){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(e,n,o))}onMouseUp(e,n,o){this.notify("cell:mouseup",this.getEventArgs(e,n,o)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}onMouseMove(e,n,o){this.notify("cell:mousemove",this.getEventArgs(e,n,o))}onMouseOver(e){this.notify("cell:mouseover",this.getEventArgs(e))}onMouseOut(e){this.notify("cell:mouseout",this.getEventArgs(e))}onMouseEnter(e){this.notify("cell:mouseenter",this.getEventArgs(e))}onMouseLeave(e){this.notify("cell:mouseleave",this.getEventArgs(e))}onMouseWheel(e,n,o,r){this.notify("cell:mousewheel",Object.assign({delta:r},this.getEventArgs(e,n,o)))}onCustomEvent(e,n,o,r){this.notify("cell:customevent",Object.assign({name:n},this.getEventArgs(e,o,r))),this.notify(n,Object.assign({},this.getEventArgs(e,o,r)))}onMagnetMouseDown(e,n,o,r){}onMagnetDblClick(e,n,o,r){}onMagnetContextMenu(e,n,o,r){}onLabelMouseDown(e,n,o){}checkMouseleave(e){const n=this.getEventTarget(e,{fromPoint:!0}),o=this.graph.findViewByElem(n);o!==this&&(this.onMouseLeave(e),o&&o.onMouseEnter(e))}}return i.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},i})();(function(i){i.Flag=g6,i.Attr=p6})(dt||(dt={})),function(i){i.toStringTag=`X6.${i.name}`,i.isCellView=function t(e){if(null==e)return!1;if(e instanceof i)return!0;const n=e[Symbol.toStringTag];return(null==n||n===i.toStringTag)&&"function"==typeof e.isNodeView&&"function"==typeof e.isEdgeView&&"function"==typeof e.confirmUpdate}}(dt||(dt={})),function(i){i.priority=function t(n){return function(o){o.config({priority:n})}},i.bootstrap=function e(n){return function(o){o.config({bootstrap:n})}}}(dt||(dt={})),function(i){i.registry=Re.create({type:"view"})}(dt||(dt={}));class Ge extends fe{get name(){return this.options.name}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get[Symbol.toStringTag](){return Ge.toStringTag}constructor(t={}){super(),this.svgContainer=this.createContainer(!0,t),this.htmlContainer=this.createContainer(!1,t),this.config(t)}createContainer(t,e){const n=t?fe.createElement("g",!0):fe.createElement("div",!1);return ee(n,this.prefixClassName("cell-tools")),e.className&&ee(n,e.className),n}config(t){if(this.options=Object.assign(Object.assign({},this.options),t),!dt.isCellView(t.view)||t.view===this.cellView)return this;this.cellView=t.view,this.cell.isEdge()?(ee(this.svgContainer,this.prefixClassName("edge-tools")),ee(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(ee(this.svgContainer,this.prefixClassName("node-tools")),ee(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));const e=this.options.items;if(!Array.isArray(e))return this;this.tools=[];const n=[];e.forEach(o=>{Ge.ToolItem.isToolItem(o)?"vertices"===o.name?n.unshift(o):n.push(o):"vertices"===("object"==typeof o?o.name:o)?n.unshift(o):n.push(o)});for(let o=0;o<n.length;o+=1){const r=n[o];let a;if(Ge.ToolItem.isToolItem(r))a=r;else{const c="object"==typeof r?r.name:r,l="object"==typeof r&&r.args||{};if(c)if(this.cell.isNode()){const h=mo.registry.get(c);if(!h)return mo.registry.onNotFound(c);a=new h(l)}else if(this.cell.isEdge()){const h=vo.registry.get(c);if(!h)return vo.registry.onNotFound(c);a=new h(l)}}a&&(a.config(this.cellView,this),a.render(),(!1!==a.options.isSVGElement?this.svgContainer:this.htmlContainer).appendChild(a.container),this.tools.push(a))}return this}update(t={}){const e=this.tools;return e&&e.forEach(n=>{t.toolId!==n.cid&&n.isVisible()&&n.update()}),this}focus(t){const e=this.tools;return e&&e.forEach(n=>{t===n?n.show():n.hide()}),this}blur(t){const e=this.tools;return e&&e.forEach(n=>{n!==t&&!n.isVisible()&&(n.show(),n.update())}),this}hide(){return this.focus(null)}show(){return this.blur(null)}remove(){const t=this.tools;return t&&(t.forEach(e=>e.remove()),this.tools=null),Qt(this.svgContainer),Qt(this.htmlContainer),super.remove()}mount(){const t=this.tools,e=this.cellView;if(e&&t){const n=t.some(r=>!1!==r.options.isSVGElement),o=t.some(r=>!1===r.options.isSVGElement);n&&(this.options.local?e.container:e.graph.view.decorator).appendChild(this.svgContainer),o&&this.graph.container.appendChild(this.htmlContainer)}return this}}(function(i){i.toStringTag=`X6.${i.name}`,i.isToolsView=function t(e){if(null==e)return!1;if(e instanceof i)return!0;const n=e[Symbol.toStringTag];return(null==n||n===i.toStringTag)&&null!=e.graph&&null!=e.cell&&"function"==typeof e.config&&"function"==typeof e.update&&"function"==typeof e.focus&&"function"==typeof e.blur&&"function"==typeof e.show&&"function"==typeof e.hide}})(Ge||(Ge={})),function(i){let t=(()=>{class e extends fe{static getDefaults(){return this.defaults}static config(o){this.defaults=this.getOptions(o)}static getOptions(o){return Pe(Oe(this.getDefaults()),o)}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get name(){return this.options.name}get[Symbol.toStringTag](){return e.toStringTag}constructor(o={}){super(),this.visible=!0,this.options=this.getOptions(o),this.container=fe.createElement(this.options.tagName||"g",!1!==this.options.isSVGElement),ee(this.container,this.prefixClassName("cell-tool")),"string"==typeof this.options.className&&ee(this.container,this.options.className),this.init()}init(){}getOptions(o){return this.constructor.getOptions(o)}delegateEvents(){return this.options.events&&super.delegateEvents(this.options.events),this}config(o,r){return this.cellView=o,this.parent=r,this.stamp(this.container),this.cell.isEdge()?ee(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&ee(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}render(){this.empty();const o=this.options.markup;if(o){const r=xe.parseJSONMarkup(o);this.container.appendChild(r.fragment),this.childNodes=r.selectors}return this.onRender(),this}onRender(){}update(){return this}stamp(o){o&&o.setAttribute("data-cell-id",this.cellView.cell.id)}show(){return this.container.style.display="",this.visible=!0,this}hide(){return this.container.style.display="none",this.visible=!1,this}isVisible(){return this.visible}focus(){const o=this.options.focusOpacity;return null!=o&&Number.isFinite(o)&&(this.container.style.opacity=`${o}`),this.parent.focus(this),this}blur(){return this.container.style.opacity="",this.parent.blur(this),this}guard(o){return null==this.graph||null==this.cellView||this.graph.view.guard(o,this.cellView)}}return e.defaults={isSVGElement:!0,tagName:"g"},e})();var e;i.ToolItem=t,function(e){let n=0;e.define=function r(a){const c=al(function o(a){return a?pl(a):(n+=1,`CustomTool${n}`)}(a.name),this);return c.config(a),c}}(t=i.ToolItem||(i.ToolItem={})),(e=t=i.ToolItem||(i.ToolItem={})).toStringTag=`X6.${e.name}`,e.isToolItem=function n(o){if(null==o)return!1;if(o instanceof e)return!0;const r=o[Symbol.toStringTag];return(null==r||r===e.toStringTag)&&null!=o.graph&&null!=o.cell&&"function"==typeof o.config&&"function"==typeof o.update&&"function"==typeof o.focus&&"function"==typeof o.blur&&"function"==typeof o.show&&"function"==typeof o.hide&&"function"==typeof o.isVisible}}(Ge||(Ge={}));const rD=i=>i;function m6(i,t){return 0===t?"0%":`${Math.round(i/t*100)}%`}function v6(i){return(e,n,o,r)=>n.isEdgeElement(o)?function cD(i,t,e,n,o){const r=e.getConnection();if(!r)return t;const a=r.closestPointLength(o);if(i){const c=r.length();t.anchor={name:"ratio",args:{ratio:a/c}}}else t.anchor={name:"length",args:{length:a}};return t}(i,e,n,0,r):function aD(i,t,e,n,o){const r=e.cell,a=r.getAngle(),c=e.getUnrotatedBBoxOfElement(n),l=r.getBBox().getCenter(),h=_.create(o).rotate(a,l);let u=h.x-c.x,d=h.y-c.y;return i&&(u=m6(u,c.width),d=m6(d,c.height)),t.anchor={name:"topLeft",args:{dx:u,dy:d,rotate:!0}},t}(i,e,n,o,r)}const lD=v6(!0),hD=v6(!1);var Yl;function z6(i,t,e,n){return Z(Yl.presets.pinRelative,this.graph,{},t,e,i,this.cell,n,{}).anchor}function b6(i,t){return t?i.cell.getBBox():i.cell.isEdge()?i.getConnection().bbox():i.getUnrotatedBBoxOfElement(i.container)}!function(i){i.presets=on,i.registry=Re.create({type:"connection strategy"}),i.registry.register(i.presets,!0)}(Yl||(Yl={}));class Fn extends Ge.ToolItem{onRender(){ee(this.container,this.prefixClassName("cell-tool-button")),this.update()}update(){return this.updatePosition(),this}updatePosition(){const e=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();ao(this.container,e,{absolute:!0})}getNodeMatrix(){const t=this.cellView,e=this.options;let{x:n=0,y:o=0}=e;const{offset:r,useCellGeometry:a,rotate:c}=e;let l=b6(t,a);const h=t.cell.getAngle();c||(l=l.bbox(h));let u=0,d=0;"number"==typeof r?(u=r,d=r):"object"==typeof r&&(u=r.x,d=r.y),n=$t(n,l.width),o=$t(o,l.height);let f=Qe().translate(l.x+l.width/2,l.y+l.height/2);return c&&(f=f.rotate(h)),f=f.translate(n+u-l.width/2,o+d-l.height/2),f}getEdgeMatrix(){const t=this.cellView,e=this.options,{offset:n=0,distance:o=0,rotate:r}=e;let a,c,l;const h=$t(o,1);a=h>=0&&h<=1?t.getTangentAtRatio(h):t.getTangentAtLength(h),a?(c=a.start,l=a.vector().vectorAngle(new _(1,0))||0):(c=t.getConnection().start,l=0);let u=Qe().translate(c.x,c.y).rotate(l);return u="object"==typeof n?u.translate(n.x||0,n.y||0):u.translate(0,n),r||(u=u.rotate(-l)),u}onMouseDown(t){if(this.guard(t))return;t.stopPropagation(),t.preventDefault();const e=this.options.onClick;"function"==typeof e&&Z(e,this.cellView,{e:t,view:this.cellView,cell:this.cellView.cell,btn:this})}}(function(i){i.config({name:"button",useCellGeometry:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(Fn||(Fn={})),function(i){i.Remove=i.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,useCellGeometry:!0,onClick({view:t,btn:e}){e.parent.remove(),t.cell.remove({ui:!0,toolId:e.cid})}})}(Fn||(Fn={}));class aa extends Ge.ToolItem{onRender(){if(ee(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){const t=this.options.attrs,{class:e}=t,n=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(t,["class"]);le(this.container,bs(n)),e&&ee(this.container,e)}this.update()}update(){const t=this.cellView,e=this.options,{useCellGeometry:n,rotate:o}=e,r=On(e.padding);let a=b6(t,n).moveAndExpand({x:-r.left,y:-r.top,width:r.left+r.right,height:r.top+r.bottom});const c=t.cell;if(c.isNode()){const l=c.getAngle();if(l)if(o){const h=c.getBBox().getCenter();Dl(this.container,l,h.x,h.y,{absolute:!0})}else a=a.bbox(l)}return le(this.container,a.toJSON()),this}}!function(i){i.config({name:"boundary",tagName:"rect",padding:10,useCellGeometry:!0,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})}(aa||(aa={}));class Is extends Ge.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}onRender(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}update(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}resetHandles(){const t=this.handles;this.handles=[],t&&t.forEach(e=>{this.stopHandleListening(e),e.remove()})}renderHandles(){const t=this.vertices;for(let e=0,n=t.length;e<n;e+=1){const o=t[e],a=this.options.processHandle,c=(0,this.options.createHandle)({index:e,graph:this.graph,guard:l=>this.guard(l),attrs:this.options.attrs||{}});a&&a(c),c.updatePosition(o.x,o.y),this.stamp(c.container),this.container.appendChild(c.container),this.handles.push(c),this.startHandleListening(c)}}updateHandles(){const t=this.vertices;for(let e=0,n=t.length;e<n;e+=1){const o=t[e],r=this.handles[e];r&&r.updatePosition(o.x,o.y)}}updatePath(){const t=this.childNodes.connection;t&&t.setAttribute("d",this.cellView.getConnectionPathData())}startHandleListening(t){const e=this.cellView;e.can("vertexMovable")&&(t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.on("remove",this.onHandleRemove,this)}stopHandleListening(t){const e=this.cellView;e.can("vertexMovable")&&(t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.off("remove",this.onHandleRemove,this)}getNeighborPoints(t){const e=this.cellView,n=this.vertices,r=t<n.length-1?n[t+1]:e.targetAnchor;return{prev:_.create(t>0?n[t-1]:e.sourceAnchor),next:_.create(r)}}getMouseEventArgs(t){const e=this.normalizeEvent(t),{x:n,y:o}=this.graph.snapToGrid(e.clientX,e.clientY);return{e,x:n,y:o}}onHandleChange({e:t}){this.focus();const e=this.cellView;if(e.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){const{e:n,x:o,y:r}=this.getMouseEventArgs(t);e.notifyMouseDown(n,o,r)}}onHandleChanging({handle:t,e}){const n=this.cellView,o=t.options.index,{e:r,x:a,y:c}=this.getMouseEventArgs(e),l={x:a,y:c};this.snapVertex(l,o),n.cell.setVertexAt(o,l,{ui:!0,toolId:this.cid}),t.updatePosition(l.x,l.y),this.options.stopPropagation||n.notifyMouseMove(r,a,c)}onHandleChanged({e:t}){const e=this.options,n=this.cellView;if(e.addable&&this.updatePath(),!e.removeRedundancies)return;n.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),n.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(t).vertexAdded&&n.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});const{e:r,x:a,y:c}=this.getMouseEventArgs(t);this.options.stopPropagation||n.notifyMouseUp(r,a,c),n.checkMouseleave(r),e.onChanged&&e.onChanged({edge:n.cell,edgeView:n})}snapVertex(t,e){const n=this.options.snapRadius||0;if(n>0){const o=this.getNeighborPoints(e),r=o.prev,a=o.next;Math.abs(t.x-r.x)<n?t.x=r.x:Math.abs(t.x-a.x)<n&&(t.x=a.x),Math.abs(t.y-r.y)<n?t.y=o.prev.y:Math.abs(t.y-a.y)<n&&(t.y=a.y)}}onHandleRemove({handle:t,e}){if(this.options.removable){const o=this.cellView;o.cell.removeVertexAt(t.options.index,{ui:!0}),this.options.addable&&this.updatePath(),o.checkMouseleave(this.normalizeEvent(e))}}onPathMouseDown(t){const e=this.cellView;if(this.guard(t)||!this.options.addable||!e.can("vertexAddable"))return;t.stopPropagation(),t.preventDefault();const n=this.normalizeEvent(t),o=this.graph.snapToGrid(n.clientX,n.clientY).toJSON();e.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});const r=e.getVertexIndex(o.x,o.y);this.snapVertex(o,r),e.cell.insertVertex(o,r,{ui:!0,toolId:this.cid}),this.render();const a=this.handles[r];this.eventData(n,{vertexAdded:!0}),a.onMouseDown(n)}onRemove(){this.resetHandles()}}(function(i){i.Handle=class t extends fe{get graph(){return this.options.graph}constructor(n){super(),this.options=n,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"})}render(){this.container=fe.createElement("circle",!0);const n=this.options.attrs;if("function"==typeof n){const o=i.getDefaults();this.setAttrs(Object.assign(Object.assign({},o.attrs),n(this)))}else this.setAttrs(n);this.addClass(this.prefixClassName("edge-tool-vertex"))}updatePosition(n,o){this.setAttrs({cx:n,cy:o})}onMouseDown(n){this.options.guard(n)||(n.stopPropagation(),n.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},n.data),this.emit("change",{e:n,handle:this}))}onMouseMove(n){this.emit("changing",{e:n,handle:this})}onMouseUp(n){this.emit("changed",{e:n,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}onDoubleClick(n){this.emit("remove",{e:n,handle:this})}}})(Is||(Is={})),function(i){const t=Ke.prefix("edge-tool-vertex-path");i.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:e=>new i.Handle(e),markup:[{tagName:"path",selector:"connection",className:t,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:{[`mousedown .${t}`]:"onPathMouseDown",[`touchstart .${t}`]:"onPathMouseDown"}})}(Is||(Is={}));class Ps extends Ge.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}update(){return this.render(),this}onRender(){ee(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();const t=this.cellView,e=[...this.vertices];e.unshift(t.sourcePoint),e.push(t.targetPoint);for(let n=0,o=e.length;n<o-1;n+=1){const c=this.renderHandle(e[n],e[n+1],n);this.stamp(c.container),this.handles.push(c)}return this}renderHandle(t,e,n){const o=this.options.createHandle({index:n,graph:this.graph,guard:r=>this.guard(r),attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(o),this.updateHandle(o,t,e),this.container.appendChild(o.container),this.startHandleListening(o),o}startHandleListening(t){t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)}stopHandleListening(t){t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)}resetHandles(){const t=this.handles;this.handles=[],t&&t.forEach(e=>{this.stopHandleListening(e),e.remove()})}shiftHandleIndexes(t){const e=this.handles;for(let n=0,o=e.length;n<o;n+=1)e[n].options.index+=t}resetAnchor(t,e){const n=this.cellView.cell,o={ui:!0,toolId:this.cid};e?n.prop([t,"anchor"],e,o):n.removeProp([t,"anchor"],o)}snapHandle(t,e,n){const o=t.options.axis,r=t.options.index,l=this.cellView.cell.getVertices(),h=l[r-2]||n.sourceAnchor,u=l[r+1]||n.targetAnchor,d=this.options.snapRadius;return Math.abs(e[o]-h[o])<d?e[o]=h[o]:Math.abs(e[o]-u[o])<d&&(e[o]=u[o]),e}onHandleChanging({handle:t,e}){const n=this.graph,o=this.options,r=this.cellView,a=o.anchor,c=t.options.axis,l=t.options.index-1,h=this.getEventData(e),u=this.normalizeEvent(e),d=n.snapToGrid(u.clientX,u.clientY),f=this.snapHandle(t,d.clone(),h),p=Oe(this.vertices);let g=p[l],m=p[l+1];const v=r.sourceView,b=r.sourceBBox;let y=!1,z=!1;if(g?0===l?b.containsPoint(g)?(p.shift(),this.shiftHandleIndexes(-1),y=!0):(g[c]=f[c],z=!0):g[c]=f[c]:(g=r.sourceAnchor.toJSON(),g[c]=f[c],b.containsPoint(g)?y=!0:(p.unshift(g),this.shiftHandleIndexes(1),z=!0)),"function"==typeof a&&v){if(y){const P=h.sourceAnchor.clone();P[c]=f[c];const E=Z(a,r,P,v,r.sourceMagnet||v.container,"source",r,this);this.resetAnchor("source",E)}z&&this.resetAnchor("source",h.sourceAnchorDef)}const C=r.targetView,x=r.targetBBox;let w=!1,O=!1;if(m?l===p.length-2?x.containsPoint(m)?(p.pop(),w=!0):(m[c]=f[c],O=!0):m[c]=f[c]:(m=r.targetAnchor.toJSON(),m[c]=f[c],x.containsPoint(m)?w=!0:(p.push(m),O=!0)),"function"==typeof a&&C){if(w){const P=h.targetAnchor.clone();P[c]=f[c];const E=Z(a,r,P,C,r.targetMagnet||C.container,"target",r,this);this.resetAnchor("target",E)}O&&this.resetAnchor("target",h.targetAnchorDef)}_.equalPoints(p,this.vertices)||this.cellView.cell.setVertices(p,{ui:!0,toolId:this.cid}),this.updateHandle(t,g,m,0),o.stopPropagation||r.notifyMouseMove(u,d.x,d.y)}onHandleChange({handle:t,e}){const n=this.options,o=this.handles,r=this.cellView,a=t.options.index;if(Array.isArray(o)){for(let c=0,l=o.length;c<l;c+=1)c!==a&&o[c].hide();if(this.focus(),this.setEventData(e,{sourceAnchor:r.sourceAnchor.clone(),targetAnchor:r.targetAnchor.clone(),sourceAnchorDef:Oe(this.cell.prop(["source","anchor"])),targetAnchorDef:Oe(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!n.stopPropagation){const c=this.normalizeEvent(e),l=this.graph.snapToGrid(c.clientX,c.clientY);r.notifyMouseDown(c,l.x,l.y)}}}onHandleChanged({e:t}){const e=this.options,n=this.cellView;e.removeRedundancies&&n.removeRedundantLinearVertices({ui:!0,toolId:this.cid});const o=this.normalizeEvent(t),r=this.graph.snapToGrid(o.clientX,o.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),e.stopPropagation||n.notifyMouseUp(o,r.x,r.y),n.checkMouseleave(o),e.onChanged&&e.onChanged({edge:n.cell,edgeView:n})}updateHandle(t,e,n,o=0){const r=this.options.precision||0,a=Math.abs(e.x-n.x)<r,c=Math.abs(e.y-n.y)<r;if(a||c){const l=new $(e,n);if(l.length()<this.options.threshold)t.hide();else{const u=l.getCenter(),d=a?"x":"y";u[d]+=o||0;const f=l.vector().vectorAngle(new _(1,0));t.updatePosition(u.x,u.y,f,this.cellView),t.show(),t.options.axis=d}}else t.hide()}onRemove(){this.resetHandles()}}(function(i){i.Handle=class t extends fe{constructor(n){super(),this.options=n,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"})}render(){this.container=fe.createElement("rect",!0);const n=this.options.attrs;if("function"==typeof n){const o=i.getDefaults();this.setAttrs(Object.assign(Object.assign({},o.attrs),n(this)))}else this.setAttrs(n);this.addClass(this.prefixClassName("edge-tool-segment"))}updatePosition(n,o,r,a){const c=a.getClosestPoint(new _(n,o))||new _(n,o);let l=Qe().translate(c.x,c.y);if(c.equals({x:n,y:o}))l=l.rotate(r);else{let u=new $(n,o,c.x,c.y).vector().vectorAngle(new _(1,0));0!==u&&(u+=90),l=l.rotate(u)}this.setAttrs({transform:ro(l),cursor:r%180==0?"row-resize":"col-resize"})}onMouseDown(n){this.options.guard(n)||(this.trigger("change",{e:n,handle:this}),n.stopPropagation(),n.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},n.data))}onMouseMove(n){this.emit("changing",{e:n,handle:this})}onMouseUp(n){this.emit("changed",{e:n,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}show(){this.container.style.display=""}hide(){this.container.style.display="none"}}})(Ps||(Ps={})),function(i){i.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:t=>new i.Handle(t),anchor:z6})}(Ps||(Ps={}));class ca extends Ge.ToolItem{get type(){return this.options.type}onRender(){ee(this.container,this.prefixClassName(`edge-tool-${this.type}-anchor`)),this.toggleArea(!1),this.update()}update(){return this.cellView.getTerminalView(this.type)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}updateAnchor(){const t=this.childNodes;if(!t)return;const e=t.anchor;if(!e)return;const n=this.type,o=this.cellView,r=this.options,a=o.getTerminalAnchor(n),c=o.cell.prop([n,"anchor"]);e.setAttribute("transform",`translate(${a.x}, ${a.y})`);const l=c?r.customAnchorAttrs:r.defaultAnchorAttrs;l&&Object.keys(l).forEach(h=>{e.setAttribute(h,l[h])})}updateArea(){const t=this.childNodes;if(!t)return;const e=t.area;if(!e)return;const n=this.type,o=this.cellView,r=o.getTerminalView(n);if(r){const a=r.cell,c=o.getTerminalMagnet(n);let h,u,d,l=this.options.areaPadding||0;Number.isFinite(l)||(l=0),r.isEdgeElement(c)?(h=r.getBBox(),u=0,d=h.getCenter()):(h=r.getUnrotatedBBoxOfElement(c),u=a.getAngle(),d=h.getCenter(),u&&d.rotate(-u,a.getBBox().getCenter())),h.inflate(l),le(e,{x:-h.width/2,y:-h.height/2,width:h.width,height:h.height,transform:`translate(${d.x}, ${d.y}) rotate(${u})`})}}toggleArea(t){if(this.childNodes){const e=this.childNodes.area;e&&(e.style.display=t?"":"none")}}onMouseDown(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}resetAnchor(t){const e=this.type,n=this.cell;t?n.prop([e,"anchor"],t,{rewrite:!0,ui:!0,toolId:this.cid}):n.removeProp([e,"anchor"],{ui:!0,toolId:this.cid})}onMouseMove(t){const e=this.type,n=this.cellView,o=n.getTerminalView(e);if(null==o)return;const r=this.normalizeEvent(t),a=o.cell,c=n.getTerminalMagnet(e);let l=this.graph.coord.clientToLocalPoint(r.clientX,r.clientY);const h=this.options.snap;if("function"==typeof h){const f=Z(h,n,l,o,c,e,n,this);l=_.create(f)}if(this.options.restrictArea)if(o.isEdgeElement(c)){const f=o.getClosestPoint(l);f&&(l=f)}else{const f=o.getUnrotatedBBoxOfElement(c),p=a.getAngle(),g=a.getBBox().getCenter(),m=l.clone().rotate(p,g);f.containsPoint(m)||(l=f.getNearestPointToPoint(m).rotate(-p,g))}let u;const d=this.options.anchor;"function"==typeof d&&(u=Z(d,n,l,o,c,e,n,this)),this.resetAnchor(u),this.update()}onMouseUp(t){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1),this.options.removeRedundancies&&this.cellView.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}onDblClick(){const t=this.options.resetAnchor;t&&this.resetAnchor(!0===t?void 0:t),this.update()}}!function(i){i.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:z6,snap(t,e,n,o,r,a){const c=a.options.snapRadius||0,l="source"===o,u=this.cell.getVertexAt(l?0:-1)||this.getTerminalAnchor(l?"target":"source");return u&&(Math.abs(u.x-t.x)<c&&(t.x=u.x),Math.abs(u.y-t.y)<c&&(t.y=u.y)),t}})}(ca||(ca={}));const dD=ca.define({name:"source-anchor",type:"source"}),fD=ca.define({name:"target-anchor",type:"target"});class la extends Ge.ToolItem{get type(){return this.options.type}get ratio(){return this.options.ratio}init(){if(this.options.attrs){const t=this.options.attrs,{class:e}=t,n=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(t,["class"]);this.setAttrs(n,this.container),e&&ee(this.container,e)}}onRender(){ee(this.container,this.prefixClassName(`edge-tool-${this.type}-arrowhead`)),this.update()}update(){const t=this.ratio,e=this.cellView,n=e.getTangentAtRatio(t),o=n?n.start:e.getPointAtRatio(t),r=n&&n.vector().vectorAngle(new _(1,0))||0;if(!o)return this;const a=Qe().translate(o.x,o.y).rotate(r);return ao(this.container,a,{absolute:!0}),this}onMouseDown(t){if(this.guard(t))return;t.stopPropagation(),t.preventDefault();const e=this.cellView;if(e.can("arrowheadMovable")){e.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});const n=this.graph.snapToGrid(t.clientX,t.clientY),o=e.prepareArrowheadDragging(this.type,{x:n.x,y:n.y,options:Object.assign(Object.assign({},this.options),{toolId:this.cid})});this.cellView.setEventData(t,o),this.delegateDocumentEvents(this.options.documentEvents,t.data),e.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}onMouseMove(t){const e=this.normalizeEvent(t),n=this.graph.snapToGrid(e.clientX,e.clientY);this.cellView.onMouseMove(e,n.x,n.y),this.update()}onMouseUp(t){this.undelegateDocumentEvents();const e=this.normalizeEvent(t),n=this.cellView,o=this.graph.snapToGrid(e.clientX,e.clientY);n.onMouseUp(e,o.x,o.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",n.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}!function(i){i.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})}(la||(la={}));const gD=la.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),mD=la.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}});class go extends Ge.ToolItem{constructor(){super(...arguments),this.labelIndex=-1,this.distance=.5}onRender(){this.graph.on("cell:dblclick",({e:t,cell:e})=>{e===this.cell&&this.onCellDblClick(t)})}createElement(){const t=[this.prefixClassName((this.cell.isEdge()?"edge":"node")+"-tool-editor"),this.prefixClassName("cell-tool-editor")];this.editor=Ge.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}removeElement(){this.undelegateDocumentEvents(),this.editor&&(this.container.removeChild(this.editor),this.editor=null)}updateEditor(){const{cell:t,editor:e}=this;if(!e)return;const{style:n}=e;t.isNode()?this.updateNodeEditorTransform():t.isEdge()&&this.updateEdgeEditorTransform();const{attrs:o}=this.options;let r;n.fontSize=`${o.fontSize}px`,n.fontFamily=o.fontFamily,n.color=o.color,n.backgroundColor=o.backgroundColor;const{getText:a}=this.options;return"function"==typeof a&&(r=Z(a,this.cellView,{cell:this.cell,index:this.labelIndex})),e.innerText=r||"",this.setCellText(""),this}updateNodeEditorTransform(){const{graph:t,cell:e,editor:n}=this;if(!n)return;let o=_.create(),r=20,a="",{x:c,y:l}=this.options;if(typeof c<"u"&&typeof l<"u"){const d=e.getBBox();c=$t(c,d.width),l=$t(l,d.height),o=d.topLeft.translate(c,l),r=d.width-2*c}else{const d=e.getBBox();o=d.center,r=d.width-4,a="translate(-50%, -50%)"}const h=t.scale(),{style:u}=n;o=t.localToGraph(o),u.left=`${o.x}px`,u.top=`${o.y}px`,u.transform=`scale(${h.sx}, ${h.sy}) ${a}`,u.minWidth=`${r}px`}updateEdgeEditorTransform(){if(!this.event)return;const{graph:t,editor:e}=this;if(!e)return;let n=_.create(),o=20;const{style:r}=e,a=this.event.target,c=a.parentElement;if(c&&so(c,this.prefixClassName("edge-label"))){const u=c.getAttribute("data-index")||"0";this.labelIndex=parseInt(u,10);const d=c.getAttribute("transform"),{translation:f}=ea(d);n=new _(f.tx,f.ty),o=ye.getBBox(a).width}else{if(!this.options.labelAddable)return this;n=t.clientToLocal(_.create(this.event.clientX,this.event.clientY));const d=this.cellView.path.closestPointLength(n);this.distance=d,this.labelIndex=-1}n=t.localToGraph(n);const h=t.scale();r.left=`${n.x}px`,r.top=`${n.y}px`,r.minWidth=`${o}px`,r.transform=`scale(${h.sx}, ${h.sy}) translate(-50%, -50%)`}onDocumentMouseDown(t){if(this.editor&&t.target!==this.editor){const e=this.editor.innerText.replace(/\n$/,"")||"";this.setCellText(""!==e?e:null),this.removeElement()}}onCellDblClick(t){t.stopPropagation(),this.removeElement(),this.event=t,this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents)}onMouseDown(t){t.stopPropagation()}autoFocus(){setTimeout(()=>{this.editor&&(this.editor.focus(),this.selectText())})}selectText(){if(window.getSelection&&this.editor){const t=document.createRange(),e=window.getSelection();t.selectNodeContents(this.editor),e.removeAllRanges(),e.addRange(t)}}setCellText(t){const e=this.options.setText;"function"==typeof e&&Z(e,this.cellView,{cell:this.cell,value:t,index:this.labelIndex,distance:this.distance})}onRemove(){this.removeElement()}}(function(i){i.config({tagName:"div",isSVGElement:!1,events:{mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}})})(go||(go={})),function(i){i.NodeEditor=i.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:({cell:t})=>t.attr("text/text"),setText({cell:t,value:e}){null!==e&&t.attr("text/text",e)}}),i.EdgeEditor=i.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:({cell:t,index:e})=>-1===e?"":t.prop(`labels/${e}/attrs/label/text`),setText({cell:t,value:e,index:n,distance:o}){const r=t;-1===n?e&&r.appendLabel({position:{distance:o},attrs:{label:{text:e}}}):null!==e?r.prop(`labels/${n}/attrs/label/text`,e):"number"==typeof n&&r.removeLabelAt(n)}})}(go||(go={}));var mo,vo,y6=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e};!function(i){i.presets={boundary:aa,button:Fn,"button-remove":Fn.Remove,"node-editor":go.NodeEditor},i.registry=Re.create({type:"node tool",process(t,e){if("function"==typeof e)return e;let n=Ge.ToolItem;const{inherit:o}=e,r=y6(e,["inherit"]);if(o){const a=this.get(o);null==a?this.onNotFound(o,"inherited"):n=a}return null==r.name&&(r.name=t),n.define.call(n,r)}}),i.registry.register(i.presets,!0)}(mo||(mo={})),function(i){i.presets={boundary:aa,vertices:Is,segments:Ps,button:Fn,"button-remove":Fn.Remove,"source-anchor":dD,"target-anchor":fD,"source-arrowhead":gD,"target-arrowhead":mD,"edge-editor":go.EdgeEditor},i.registry=Re.create({type:"edge tool",process(t,e){if("function"==typeof e)return e;let n=Ge.ToolItem;const{inherit:o}=e,r=y6(e,["inherit"]);if(o){const a=this.get(o);null==a?this.onNotFound(o,"inherited"):n=a}return null==r.name&&(r.name=t),n.define.call(n,r)}}),i.registry.register(i.presets,!0)}(vo||(vo={}));const vD=gn("center"),zD=gn("topCenter"),bD=gn("bottomCenter"),yD=gn("leftMiddle"),CD=gn("rightMiddle"),_D=gn("topLeft"),xD=gn("topRight"),wD=gn("bottomLeft"),MD=gn("bottomRight");function gn(i){return function(t,e,n,o={}){const r=o.rotate?t.getUnrotatedBBoxOfElement(e):t.getBBoxOfElement(e),a=r[i];a.x+=$t(o.dx,r.width),a.y+=$t(o.dy,r.height);const c=t.cell;return o.rotate?a.rotate(-c.getAngle(),c.getBBox().getCenter()):a}}function ha(i){return function(t,e,n,o){if(n instanceof Element){const r=this.graph.findViewByElem(n);let a;return a=r?r.isEdgeElement(n)?C6(r,null!=o.fixedAt?o.fixedAt:"50%"):r.getBBoxOfElement(n).getCenter():new _,i.call(this,t,e,a,o)}return i.apply(this,arguments)}}function C6(i,t){const e=un(t),n="string"==typeof t?parseFloat(t):t;return e?i.getPointAtRatio(n/100):i.getPointAtLength(n)}const SD=ha(function(i,t,e,n){const o=i.cell.getAngle(),r=i.getBBoxOfElement(t),a=r.getCenter(),c=r.getTopLeft(),l=r.getBottomRight();let h=n.padding;if(Number.isFinite(h)||(h=0),c.y+h<=e.y&&e.y<=l.y-h){const u=e.y-a.y;a.x+=0===o||180===o?0:1*u/Math.tan(he.toRad(o)),a.y+=u}else if(c.x+h<=e.x&&e.x<=l.x-h){const u=e.x-a.x;a.y+=90===o||270===o?0:u*Math.tan(he.toRad(o)),a.x+=u}return a}),TD=function(i,t,e,n,o){const r=i.cell.getConnectionPoint(this.cell,o);return(n.dx||n.dy)&&r.translate(n.dx||0,n.dy||0),r},OD=ha(function(i,t,e,n){let o,a,r=0;const c=i.cell;n.rotate?(o=i.getUnrotatedBBoxOfElement(t),a=c.getBBox().getCenter(),r=c.getAngle()):o=i.getBBoxOfElement(t);const l=n.padding;null!=l&&Number.isFinite(l)&&o.inflate(l),n.rotate&&e.rotate(r,a);const h=o.getNearestSideToPoint(e);let u;switch(h){case"left":u=o.getLeftMiddle();break;case"right":u=o.getRightMiddle();break;case"top":u=o.getTopCenter();break;case"bottom":u=o.getBottomCenter()}const d=n.direction;return"H"===d?("top"===h||"bottom"===h)&&(u=e.x<=o.x+o.width?o.getLeftMiddle():o.getRightMiddle()):"V"===d&&(u=e.y<=o.y+o.height?o.getTopCenter():o.getBottomCenter()),n.rotate?u.rotate(-r,a):u});var zo;!function(i){i.presets=xt,i.registry=Re.create({type:"node endpoint"}),i.registry.register(i.presets,!0)}(zo||(zo={}));const AD=function(i,t,e,n){let o=null!=n.ratio?n.ratio:.5;return o>1&&(o/=100),i.getPointAtRatio(o)},ED=function(i,t,e,n){return i.getPointAtLength(null!=n.length?n.length:20)},_6=function(i,t,e,n){return i.getClosestPoint(e)??new _},ND=ha(_6),kD=ha(function(i,t,e,n){const r=i.getConnection(),a=i.getConnectionSubdivisions(),c=new $(e.clone().translate(0,1e6),e.clone().translate(0,-1e6)),l=new $(e.clone().translate(1e6,0),e.clone().translate(-1e6,0)),h=c.intersect(r,{segmentSubdivisions:a}),u=l.intersect(r,{segmentSubdivisions:a}),d=[];return h&&d.push(...h),u&&d.push(...u),d.length>0?e.closest(d):null!=n.fallbackAt?C6(i,n.fallbackAt):Z(_6,this,i,t,e,n)});var bo;function ua(i,t,e){let n;if("object"==typeof e){if(Number.isFinite(e.y)){const r=new $(t,i),{start:a,end:c}=r.parallel(e.y);t=a,i=c}n=e.x}else n=e;if(null==n||!Number.isFinite(n))return i;const o=i.distance(t);return 0===n&&o>0?i:i.move(t,-Math.min(n,o-1))}function da(i){const t=i.getAttribute("stroke-width");return null===t?0:parseFloat(t)||0}!function(i){i.presets=Zn,i.registry=Re.create({type:"edge endpoint"}),i.registry.register(i.presets,!0)}(bo||(bo={}));const x6=function(i,t,e,n){const o=t.getBBoxOfElement(e);n.stroked&&o.inflate(da(e)/2);const r=i.intersect(o);return ua(r&&r.length?i.start.closest(r):i.end,i.start,n.offset)},ID=function(i,t,e,n,o){const r=t.cell,a=r.isNode()?r.getAngle():0;if(0===a)return Z(x6,this,i,t,e,n,o);const c=t.getUnrotatedBBoxOfElement(e);n.stroked&&c.inflate(da(e)/2);const l=c.getCenter(),h=i.clone().rotate(a,l),u=h.setLength(1e6).intersect(c);return ua(u&&u.length?h.start.closest(u).rotate(-a,l):i.end,i.start,n.offset)},PD=function(i,t,e,n){let o,r;const a=i.end,c=n.selector;if(o="string"==typeof c?t.findOne(c):Array.isArray(c)?cl(e,c):function DD(i){if(null==i)return null;let t=i;do{let e=t.tagName;if("string"!=typeof e)return null;if(e=e.toUpperCase(),"G"===e)t=t.firstElementChild;else{if("TITLE"!==e)break;t=t.nextElementSibling}}while(t);return t}(e),!En(o)){if(o===e||!En(e))return a;o=e}const l=t.getShapeOfElement(o),h=t.getMatrixOfElement(o),u=t.getRootTranslatedMatrix(),d=t.getRootRotatedMatrix(),f=u.multiply(d).multiply(h),p=f.inverse(),g=ye.transformLine(i,p),m=g.start.clone(),v=t.getDataOfElement(o);if(!1===n.insideout){null==v.shapeBBox&&(v.shapeBBox=l.bbox());const C=v.shapeBBox;if(null!=C&&C.containsPoint(m))return a}let b;if(!0===n.extrapolate&&g.setLength(1e6),q.isPath(l)){const C=n.precision||2;null==v.segmentSubdivisions&&(v.segmentSubdivisions=l.getSegmentSubdivisions({precision:C})),b={precision:C,segmentSubdivisions:v.segmentSubdivisions},r=g.intersect(l,b)}else r=g.intersect(l);r?Array.isArray(r)&&(r=m.closest(r)):!0===n.sticky&&(r=F.isRectangle(l)?l.getNearestPointToPoint(m):Yt.isEllipse(l)?l.intersectsWithLineFromCenterToPoint(m):l.closestPoint(m,b));const y=r?ye.transformPoint(r,f):a;let z=n.offset||0;return!1!==n.stroked&&("object"==typeof z?(z=Object.assign({},z),null==z.x&&(z.x=0),z.x+=da(o)/2):z+=da(o)/2),ua(y,i.start,z)},LD=function(i,t,e,n){const{alignOffset:o,align:r}=n;return r&&function VD(i,t,e=0){const{start:n,end:o}=i;let r,a,c,l;switch(t){case"left":l="x",r=o,a=n,c=-1;break;case"right":l="x",r=n,a=o,c=1;break;case"top":l="y",r=o,a=n,c=-1;break;case"bottom":l="y",r=n,a=o,c=1;break;default:return}n[l]<o[l]?r[l]=a[l]:a[l]=r[l],Number.isFinite(e)&&(r[l]+=c*e,a[l]+=c*e)}(i,r,o),ua(i.end,i.start,n.offset)};var yo;!function(i){i.presets=xi,i.registry=Re.create({type:"connection point"}),i.registry.register(i.presets,!0)}(yo||(yo={}));const HD=function(i){return[...i]},BD=function(i,t,e){const n=t.side||"bottom",o=On(t.padding||40),r=e.sourceBBox,a=e.targetBBox,c=r.getCenter(),l=a.getCenter();let h,u,d;switch(n){case"top":d=-1,h="y",u="height";break;case"left":d=-1,h="x",u="width";break;case"right":d=1,h="x",u="width";break;default:d=1,h="y",u="height"}return c[h]+=d*(r[u]/2+o[n]),l[h]+=d*(a[u]/2+o[n]),d*(c[h]-l[h])>0?l[h]=c[h]:c[h]=l[h],[c.toJSON(),...i,l.toJSON()]};function fa(i){return new F(i.x,i.y,0,0)}function pa(i={}){const t=On(i.padding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function w6(i,t={}){return i.sourceBBox.clone().moveAndExpand(pa(t))}function M6(i,t={}){return i.targetBBox.clone().moveAndExpand(pa(t))}const S6=function(i,t,e){let n=w6(e,t),o=M6(e,t);const r=function FD(i,t={}){return i.sourceAnchor?i.sourceAnchor:w6(i,t).getCenter()}(e,t),a=function RD(i,t={}){return i.targetAnchor?i.targetAnchor:M6(i,t).getCenter()}(e,t);n=n.union(fa(r)),o=o.union(fa(a));const c=i.map(u=>_.create(u));c.unshift(r),c.push(a);let l=null;const h=[];for(let u=0,d=c.length-1;u<d;u+=1){let f=null;const p=c[u],g=c[u+1],m=null!=Pt.getBearing(p,g);if(0===u)u+1===d?n.intersectsWithRect(o.clone().inflate(1))?f=Pt.insideNode(p,g,n,o):m||(f=Pt.nodeToNode(p,g,n,o)):n.containsPoint(g)?f=Pt.insideNode(p,g,n,fa(g).moveAndExpand(pa(t))):m||(f=Pt.nodeToVertex(p,g,n));else if(u+1===d){const v=m&&Pt.getBearing(g,p)===l;o.containsPoint(p)||v?f=Pt.insideNode(p,g,fa(p).moveAndExpand(pa(t)),o,l):m||(f=Pt.vertexToNode(p,g,o,l))}else m||(f=Pt.vertexToVertex(p,g,l));f?(h.push(...f.points),l=f.direction):l=Pt.getBearing(p,g),u+1<d&&h.push(g)}return h};var Pt;!function(i){const t={N:"S",S:"N",E:"W",W:"E"},e={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function n(d,f,p){let g=new _(d.x,f.y);return p.containsPoint(g)&&(g=new _(f.x,d.y)),g}function o(d,f){return d["W"===f||"E"===f?"width":"height"]}function r(d,f){return d.x===f.x?d.y>f.y?"N":"S":d.y===f.y?d.x>f.x?"W":"E":null}function a(d,f,p){const g=new _(d.x,f.y),m=new _(f.x,d.y),v=r(d,g),b=r(d,m),y=p?t[p]:null,z=v===p||v!==y&&(b===y||b!==p)?g:m;return{points:[z],direction:r(z,f)}}function c(d,f,p){const g=n(d,f,p);return{points:[g],direction:r(g,f)}}i.getBBoxSize=o,i.getBearing=r,i.vertexToVertex=a,i.nodeToVertex=c,i.vertexToNode=function l(d,f,p,g){const m=[new _(d.x,f.y),new _(f.x,d.y)],v=m.filter(z=>!p.containsPoint(z)),b=v.filter(z=>r(z,d)!==g);let y;if(b.length>0)return y=b.filter(z=>r(d,z)===g).pop(),y=y||b[0],{points:[y],direction:r(y,f)};{y=uO(m,v)[0];const z=_.create(f).move(y,-o(p,g)/2);return{points:[n(z,d,p),z],direction:r(z,f)}}},i.nodeToNode=function h(d,f,p,g){let m=c(f,d,g);const v=m.points[0];if(p.containsPoint(v)){m=c(d,f,p);const b=m.points[0];if(g.containsPoint(b)){const y=_.create(d).move(b,-o(p,r(d,b))/2),z=_.create(f).move(v,-o(g,r(f,v))/2),C=new $(y,z).getCenter(),x=c(d,C,p),w=a(C,f,x.direction);m.points=[x.points[0],w.points[0]],m.direction=w.direction}}return m},i.insideNode=function u(d,f,p,g,m){const v=p.union(g).inflate(1),b=v.getCenter(),y=b.distance(f)>b.distance(d),z=y?f:d,C=y?d:f;let x,w,O,P;return m?(x=_.fromPolar(v.width+v.height,e[m],z),x=v.getNearestPointToPoint(x).move(x,-1)):x=v.getNearestPointToPoint(z).move(z,1),w=n(x,C,v),x.round().equals(w.round())?(w=_.fromPolar(v.width+v.height,he.toRad(x.theta(z))+Math.PI/2,C),w=v.getNearestPointToPoint(w).move(C,1).round(),O=n(x,w,v),P=y?[w,O,x]:[x,O,w]):P=y?[w,x]:[x,w],{points:P,direction:r(y?x:w,f)}}}(Pt||(Pt={}));const jD={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeNodes:[],excludeShapes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost(){return Rn(this.step,this)},directions(){const i=Rn(this.step,this),t=Rn(this.cost,this);return[{cost:t,offsetX:i,offsetY:0},{cost:t,offsetX:-i,offsetY:0},{cost:t,offsetX:0,offsetY:i},{cost:t,offsetX:0,offsetY:-i}]},penalties(){const i=Rn(this.step,this);return{0:0,45:i/2,90:i/2}},paddingBox(){const i=Rn(this.step,this);return{x:-i,y:-i,width:2*i,height:2*i}},fallbackRouter:S6,draggingRouter:null,snapToGrid:!0};function Rn(i,t){return"function"==typeof i?i.call(t):i}class YD{constructor(){this.items=[],this.hash={},this.values={}}add(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=1,this.values[t]=e;const n=function PT(i,t,e){return z0(i,t,ll(e))}(this.items,t,o=>this.values[o]);this.items.splice(n,0,t)}pop(){const t=this.items.shift();return t&&(this.hash[t]=2),t}isOpen(t){return 1===this.hash[t]}isClose(t){return 2===this.hash[t]}isEmpty(){return 0===this.items.length}}class GD{constructor(t){this.options=t,this.mapGridSize=100,this.map={}}build(t,e){const n=this.options,o=n.excludeTerminals.reduce((h,u)=>{const d=e[u];if(d){const f=t.getCell(d.cell);f&&h.push(f)}return h},[]);let r=[];const a=t.getCell(e.getSourceCellId());a&&(r=v0(r,a.getAncestors().map(h=>h.id)));const c=t.getCell(e.getTargetCellId());c&&(r=v0(r,c.getAncestors().map(h=>h.id)));const l=this.mapGridSize;return t.getNodes().reduce((h,u)=>{const d=o.some(v=>v.id===u.id),f=!!u.shape&&n.excludeShapes.includes(u.shape),p=n.excludeNodes.some(v=>"string"==typeof v?u.id===v:v===u),g=r.includes(u.id);if(!(f||d||p||g)){const v=u.getBBox().moveAndExpand(n.paddingBox),b=v.getOrigin().snapToGrid(l),y=v.getCorner().snapToGrid(l);for(let z=b.x;z<=y.x;z+=l)for(let C=b.y;C<=y.y;C+=l){const x=new _(z,C).toString();null==h[x]&&(h[x]=[]),h[x].push(v)}}return h},this.map),this}isAccessible(t){const e=t.clone().snapToGrid(this.mapGridSize).toString(),n=this.map[e];return!n||n.every(o=>!o.containsPoint(t))}}function A6(i,t){const e=i.sourceBBox.clone();return t&&t.paddingBox?e.moveAndExpand(t.paddingBox):e}function E6(i,t){const e=i.targetBBox.clone();return t&&t.paddingBox?e.moveAndExpand(t.paddingBox):e}function N6(i,t){return i.sourceAnchor?i.sourceAnchor:A6(i,t).getCenter()}function Gl(i,t,e,n,o){const r=360/e,a=i.theta(function qD(i,t,e,n){const o=n.step;return new _(i.x+(t.x-i.x)/e.x*o,i.y+(t.y-i.y)/e.y*o)}(i,t,n,o)),c=he.normalize(a+r/2);return r*Math.floor(c/r)}function k6(i,t){const e=Math.abs(i-t);return e>180?360-e:e}function D6(i,t){if(!i)return t;const e=Math.abs(i),n=Math.round(e/t);return n?t+(e-n*t)/n:e}function Vs(i,t){return i.round(t)}function ga(i,t,e){return Vs(function JD(i,t){const e=t.source,n=de.snapToGrid(i.x-e.x,t.x)+e.x,o=de.snapToGrid(i.y-e.y,t.y)+e.y;return new _(n,o)}(i.clone(),t),e)}function Ls(i){return i.toString()}function Zl(i){return new _(0===i.x?0:Math.abs(i.x)/i.x,0===i.y?0:Math.abs(i.y)/i.y)}function I6(i,t){let e=1/0;for(let n=0,o=t.length;n<o;n+=1){const r=i.manhattanDistance(t[n]);r<e&&(e=r)}return e}function P6(i,t,e,n,o){const r=o.precision,a=o.directionMap,c=i.diff(t.getCenter()),l=Object.keys(a).reduce((h,u)=>{if(e.includes(u)){const d=a[u],f=new _(i.x+d.x*(Math.abs(c.x)+t.width),i.y+d.y*(Math.abs(c.y)+t.height)),g=new $(i,f).intersect(t)||[];let m,v=null;for(let b=0;b<g.length;b+=1){const y=g[b],z=i.squaredDistance(y);(null==m||z>m)&&(m=z,v=y)}if(v){let b=ga(v,n,r);t.containsPoint(b)&&(b=ga(b.translate(d.x*n.x,d.y*n.y),n,r)),h.push(b)}}return h},[]);return t.containsPoint(i)||l.push(ga(i,n,r)),l}function QD(i,t,e,n,o){const r=[];let h,a=Zl(o.diff(e)),c=Ls(e),l=i[c];for(;l;){h=t[c];const f=Zl(h.diff(l));f.equals(a)||(r.unshift(h),a=f),c=Ls(l),l=i[c]}const u=t[c];return Zl(u.diff(n)).equals(a)||r.unshift(u),r}function XD(i,t,e,n,o){const r=o.precision;let a,c;a=F.isRectangle(t)?Vs(N6(i,o).clone(),r):Vs(t.clone(),r),c=F.isRectangle(e)?Vs(function ZD(i,t){return i.targetAnchor?i.targetAnchor:E6(i,t).getCenter()}(i,o).clone(),r):Vs(e.clone(),r);const l=function UD(i,t,e){return{source:t.clone(),x:D6(e.x-t.x,i),y:D6(e.y-t.y,i)}}(o.step,a,c),h=a,u=c;let d,f;if(d=F.isRectangle(t)?P6(h,t,o.startDirections,l,o):[h],f=F.isRectangle(e)?P6(c,e,o.endDirections,l,o):[u],d=d.filter(p=>n.isAccessible(p)),f=f.filter(p=>n.isAccessible(p)),d.length>0&&f.length>0){const p=new YD,g={},m={},v={};for(let L=0,k=d.length;L<k;L+=1){const V=d[L],K=Ls(V);p.add(K,I6(V,f)),g[K]=V,v[K]=0}const b=o.previousDirectionAngle,y=void 0===b;let z,C;const x=function WD(i,t){const e=t.step;return t.directions.forEach(n=>{n.gridOffsetX=n.offsetX/e*i.x,n.gridOffsetY=n.offsetY/e*i.y}),t.directions}(l,o),w=x.length,O=f.reduce((L,k)=>{const V=Ls(k);return L.push(V),L},[]),P=_.equalPoints(d,f);let E=o.maxLoopCount;for(;!p.isEmpty()&&E>0;){const L=p.pop(),k=g[L],V=m[L],K=v[L],J=k.equals(h),S=null==V;let I;if(I=S?y?J?null:Gl(h,k,w,l,o):b:Gl(V,k,w,l,o),(!S||!P)&&O.indexOf(L)>=0)return o.previousDirectionAngle=I,QD(m,g,k,h,u);for(let me=0;me<w;me+=1){z=x[me];const ve=z.angle;if(C=k6(I,ve),(!y||!J)&&C>o.maxDirectionChange)continue;const ke=ga(k.clone().translate(z.gridOffsetX||0,z.gridOffsetY||0),l,r),Ae=Ls(ke);if(p.isClose(Ae)||!n.isAccessible(ke))continue;if(O.indexOf(Ae)>=0&&!ke.equals(u)&&k6(ve,Gl(ke,u,w,l,o))>o.maxDirectionChange)continue;const Yn=K+z.cost+(J?0:o.penalties[C]);(!p.isOpen(Ae)||Yn<v[Ae])&&(g[Ae]=ke,m[Ae]=k,v[Ae]=Yn,p.add(Ae,Yn+I6(ke,f)))}E-=1}}return o.fallbackRoute?Z(o.fallbackRoute,this,h,u,o):null}const eI=function(i,t,e){const n=function $D(i){const t=Object.keys(i).reduce((e,n)=>(e[n]="fallbackRouter"===n||"draggingRouter"===n||"fallbackRoute"===n?i[n]:Rn(i[n],i),e),{});if(t.padding){const e=On(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}return t.directions.forEach(e=>{const n=new _(0,0),o=new _(e.offsetX,e.offsetY);e.angle=he.normalize(n.theta(o))}),t}(t),o=A6(e,n),r=E6(e,n),a=N6(e,n),c=new GD(n).build(e.graph.model,e.cell),l=i.map(p=>_.create(p)),h=[];let d,f,u=a;for(let p=0,g=l.length;p<=g;p+=1){let m=null;if(d=f||o,f=l[p],null==f){f=r;const b=e.cell;if((null==b.getSourceCellId()||null==b.getTargetCellId())&&"function"==typeof n.draggingRouter){const z=d===o?a:d,C=f.getOrigin();m=Z(n.draggingRouter,e,z,C,n)}}if(null==m&&(m=XD(e,d,f,c,n)),null===m)return console.warn("Unable to execute manhattan algorithm, use orth instead"),Z(n.fallbackRouter,this,i,n,e);const v=m[0];v&&v.equals(u)&&m.shift(),u=m[m.length-1]||u,h.push(...m)}return n.snapToGrid?function KD(i,t=10){if(i.length<=1)return i;for(let e=0,n=i.length;e<n-1;e+=1){const o=i[e],r=i[e+1];if(o.x===r.x){const a=t*Math.round(o.x/t);o.x!==a&&(o.x=a,r.x=a)}else if(o.y===r.y){const a=t*Math.round(o.y/t);o.y!==a&&(o.y=a,r.y=a)}}return i}(h,e.graph.grid.getGridSize()):h},V6=function(i,t,e){return Z(eI,this,i,Object.assign(Object.assign({},jD),t),e)},tI={maxDirectionChange:45,directions(){const i=Rn(this.step,this),t=Rn(this.cost,this),e=Math.ceil(Math.sqrt(i*i<<1));return[{cost:t,offsetX:i,offsetY:0},{cost:e,offsetX:i,offsetY:i},{cost:t,offsetX:0,offsetY:i},{cost:e,offsetX:-i,offsetY:i},{cost:t,offsetX:-i,offsetY:0},{cost:e,offsetX:-i,offsetY:-i},{cost:t,offsetX:0,offsetY:-i},{cost:e,offsetX:i,offsetY:-i}]},fallbackRoute(i,t,e){const n=i.theta(t),o=[];let r={x:t.x,y:i.y},a={x:i.x,y:t.y};if(n%180>90){const z=r;r=a,a=z}const c=n%90<45?r:a,l=new $(i,c),h=90*Math.ceil(n/90),u=_.fromPolar(l.squaredLength(),he.toRad(h+135),c),d=new $(t,u),f=l.intersectsWithLine(d),p=f||t,m=360/e.directions.length,v=(f?p:i).theta(t),b=he.normalize(v+m/2),y=m*Math.floor(b/m);return e.previousDirectionAngle=y,p&&o.push(p.round()),o.push(t),o}},nI=function(i,t,e){return Z(V6,this,i,Object.assign(Object.assign({},tI),t),e)},iI=function(i,t,e){const n=t.offset||32,o=null==t.min?16:t.min;let r=0,a=t.direction;const c=e.sourceBBox,l=e.targetBBox,h=c.getCenter(),u=l.getCenter();if("number"==typeof n&&(r=n),null==a){let b=l.left-c.right,y=l.top-c.bottom;b>=0&&y>=0?a=b>=y?"L":"T":b<=0&&y>=0?(b=c.left-l.right,a=b>=0&&b>=y?"R":"T"):b>=0&&y<=0?(y=c.top-l.bottom,a=y>=0?b>=y?"L":"B":"L"):(b=c.left-l.right,y=c.top-l.bottom,a=b>=0&&y>=0?b>=y?"R":"B":b<=0&&y>=0?"B":b>=0&&y<=0||Math.abs(b)>Math.abs(y)?"R":"B")}let d,f,p;"H"===a?a=u.x-h.x>=0?"L":"R":"V"===a&&(a=u.y-h.y>=0?"T":"B"),"center"===n&&("L"===a?r=(l.left-c.right)/2:"R"===a?r=(c.left-l.right)/2:"T"===a?r=(l.top-c.bottom)/2:"B"===a&&(r=(c.top-l.bottom)/2));const g="L"===a||"R"===a;if(g){if(u.y===h.y)return[...i];p="L"===a?1:-1,d="x",f="width"}else{if(u.x===h.x)return[...i];p="T"===a?1:-1,d="y",f="height"}const m=h.clone(),v=u.clone();if(m[d]+=p*(c[f]/2+r),v[d]-=p*(l[f]/2+r),g){const b=m.x,y=v.x,z=c.width/2+o,C=l.width/2+o;u.x>h.x?y<=b&&(m.x=Math.max(y,h.x+z),v.x=Math.min(b,u.x-C)):y>=b&&(m.x=Math.min(y,h.x-z),v.x=Math.max(b,u.x+C))}else{const b=m.y,y=v.y,z=c.height/2+o,C=l.height/2+o;u.y>h.y?y<=b&&(m.y=Math.max(y,h.y+z),v.y=Math.min(b,u.y-C)):y>=b&&(m.y=Math.min(y,h.y-z),v.y=Math.max(b,u.y+C))}return[m.toJSON(),...i,v.toJSON()]};function Co(i,t){if(null!=t&&!1!==t){const e="boolean"==typeof t?0:t;if(e>0){const n=_.create(i[1]).move(i[2],e),o=_.create(i[1]).move(i[0],e);return[n.toJSON(),...i,o.toJSON()]}{const n=i[1];return[Object.assign({},n),...i,Object.assign({},n)]}}return i}const oI=function(i,t,e){const n=t.width||50,r=(t.height||80)/2,a=t.angle||"auto",c=e.sourceAnchor,l=e.targetAnchor,h=e.sourceBBox,u=e.targetBBox;if(c.equals(l)){const d=b=>{const y=he.toRad(b),z=Math.sin(y),C=Math.cos(y),x=new _(c.x+C*n,c.y+z*n),w=new _(x.x-C*r,x.y-z*r),O=w.clone().rotate(-90,x),P=w.clone().rotate(90,x);return[O.toJSON(),x.toJSON(),P.toJSON()]},f=b=>{const y=c.clone().move(b,-1),z=new $(y,b);return!h.containsPoint(b)&&!h.intersectsWithLine(z)},p=[0,90,180,270,45,135,225,315];if("number"==typeof a)return Co(d(a),t.merge);const g=h.getCenter();if(g.equals(c))return Co(d(0),t.merge);const m=g.angleBetween(c,g.clone().translate(1,0));let v=d(m);if(f(v[1]))return Co(v,t.merge);for(let b=1,y=p.length;b<y;b+=1)if(v=d(m+p[b]),f(v[1]))return Co(v,t.merge);return Co(v,t.merge)}{const d=new $(c,l);let f=d.parallel(-n),p=f.getCenter(),g=f.start.clone().move(f.end,r),m=f.end.clone().move(f.start,r);const v=d.parallel(-1),b=new $(v.start,p),y=new $(v.end,p);if((h.containsPoint(p)||u.containsPoint(p)||h.intersectsWithLine(b)||h.intersectsWithLine(y)||u.intersectsWithLine(b)||u.intersectsWithLine(y))&&(f=d.parallel(n),p=f.getCenter(),g=f.start.clone().move(f.end,r),m=f.end.clone().move(f.start,r)),t.merge){const z=new $(c,l),C=new $(p,z.center).setLength(Number.MAX_SAFE_INTEGER),x=h.intersectsWithLine(C),w=u.intersectsWithLine(C),O=x?Array.isArray(x)?x:[x]:[];w&&(Array.isArray(w)?O.push(...w):O.push(w));const P=z.center.closest(O);P?(e.sourceAnchor=P.clone(),e.targetAnchor=P.clone()):(e.sourceAnchor=z.center.clone(),e.targetAnchor=z.center.clone())}return Co([g.toJSON(),p.toJSON(),m.toJSON()],t.merge)}};var jn;!function(i){i.presets=Do,i.registry=Re.create({type:"router"}),i.registry.register(i.presets,!0)}(jn||(jn={}));const sI=function(i,t,e,n={}){const o=[i,...e,t],r=new Fe(o),a=new q(r);return n.raw?a:a.serialize()},rI=function(i,t,e,n={}){const o=3===e.length?0:1,r=_.create(e[0+o]),a=_.create(e[2+o]),c=_.create(e[1+o]);if(!_.equals(i,t)){const h=new _((i.x+t.x)/2,(i.y+t.y)/2),u=h.angleBetween(_.create(i).rotate(90,h),c);u>1&&(r.rotate(180-u,h),a.rotate(180-u,h),c.rotate(180-u,h))}const l=`\n     M ${i.x} ${i.y}\n     Q ${r.x} ${r.y} ${c.x} ${c.y}\n     Q ${a.x} ${a.y} ${t.x} ${t.y}\n  `;return n.raw?q.parse(l):l},aI=function(i,t,e,n={}){const o=new q;o.appendSegment(q.createSegment("M",i));const r=1/3,a=2/3,c=n.radius||10;let l,h;for(let u=0,d=e.length;u<d;u+=1){const f=_.create(e[u]),p=e[u-1]||i,g=e[u+1]||t;l=h||f.distance(p)/2,h=f.distance(g)/2;const m=-Math.min(c,l),v=-Math.min(c,h),b=f.clone().move(p,m).round(),y=f.clone().move(g,v).round(),z=new _(r*b.x+a*f.x,a*f.y+r*b.y),C=new _(r*y.x+a*f.x,a*f.y+r*y.y);o.appendSegment(q.createSegment("L",b)),o.appendSegment(q.createSegment("C",z,C,y))}return o.appendSegment(q.createSegment("L",t)),n.raw?o:o.serialize()},cI=function(i,t,e,n={}){let o,r=n.direction;if(e&&0!==e.length){const a=[i,...e,t],c=Ve.throughPoints(a);o=new q(c)}else if(o=new q,o.appendSegment(q.createSegment("M",i)),r||(r=Math.abs(i.x-t.x)>=Math.abs(i.y-t.y)?"H":"V"),"H"===r){const a=(i.x+t.x)/2;o.appendSegment(q.createSegment("C",a,i.y,a,t.y,t.x,t.y))}else{const a=(i.y+t.y)/2;o.appendSegment(q.createSegment("C",i.x,a,t.x,a,t.x,t.y))}return n.raw?o:o.serialize()},ma=1/3,va=2/3;function ql(i,t,e=[]){const n=[i,...e,t],o=[];return n.forEach((r,a)=>{const c=n[a+1];null!=c&&o.push(new $(r,c))}),o}function H6(i,t){return new $(i,t).squaredLength()}function B6(i,t,e,n){const o=new q;let r;return r=q.createSegment("M",i[0].start),o.appendSegment(r),i.forEach((a,c)=>{if(Hs.includes(a)){let l,h,u,d;if("arc"===e){l=-90,h=a.start.diff(a.end),(h.x<0||0===h.x&&h.y<0)&&(l+=180);const p=a.getCenter(),g=new $(p,a.end).rotate(l,p);let m;m=new $(a.start,p),u=m.pointAt(2/3).rotate(l,a.start),d=g.pointAt(1/3).rotate(-l,g.end),r=q.createSegment("C",u,d,g.end),o.appendSegment(r),m=new $(p,a.end),u=g.pointAt(1/3).rotate(l,g.end),d=m.pointAt(1/3).rotate(-l,a.end),r=q.createSegment("C",u,d,a.end),o.appendSegment(r)}else if("gap"===e)r=q.createSegment("M",a.end),o.appendSegment(r);else if("cubic"===e){l=a.start.theta(a.end);const f=.6*t;let p=1.35*t;h=a.start.diff(a.end),(h.x<0||0===h.x&&h.y<0)&&(p*=-1),u=new _(a.start.x+f,a.start.y+p).rotate(l,a.start),d=new _(a.end.x-f,a.end.y+p).rotate(l,a.end),r=q.createSegment("C",u,d,a.end),o.appendSegment(r)}}else{const l=i[c+1];0===n||!l||Hs.includes(l)?(r=q.createSegment("L",a.end),o.appendSegment(r)):function dI(i,t,e,n,o){const r=e.distance(n)/2,a=e.distance(o)/2,c=-Math.min(i,r),l=-Math.min(i,a),h=e.clone().move(n,c).round(),u=e.clone().move(o,l).round(),d=new _(ma*h.x+va*e.x,va*e.y+ma*h.y),f=new _(ma*u.x+va*e.x,va*e.y+ma*u.y);let p;p=q.createSegment("L",h),t.appendSegment(p),p=q.createSegment("C",d,f,u),t.appendSegment(p)}(n,o,a.end,a.start,l.end)}}),o}let Hs,za;const fI=function(i,t,e,n={}){Hs=[],za=[],function lI(i){let t=i.graph._jumpOverUpdateList;if(null==t&&(t=i.graph._jumpOverUpdateList=[],i.graph.on("cell:mouseup",()=>{const e=i.graph._jumpOverUpdateList;setTimeout(()=>{for(let n=0;n<e.length;n+=1)e[n].update()})}),i.graph.on("model:reseted",()=>{t=i.graph._jumpOverUpdateList=[]})),t.indexOf(i)<0){t.push(i);const e=()=>t.splice(t.indexOf(i),1);i.cell.once("change:connector",e),i.cell.once("removed",e)}}(this);const o=n.size||5,r=n.type||"arc",a=n.radius||0,c=n.ignoreConnectors||["smooth"],l=this.graph,u=l.model.getEdges();if(1===u.length)return B6(ql(i,t,e),o,r,a);const d=this.cell,f=u.indexOf(d),p=l.options.connecting.connector||{},g=u.filter((C,x)=>{const w=C.getConnector()||p;return!(c.includes(w.name)||x>f&&"jumpover"===w.name)}),m=g.map(C=>l.findViewByCell(C)),v=ql(i,t,e),b=m.map(C=>null==C?[]:C===this?v:ql(C.sourcePoint,C.targetPoint,C.routePoints)),y=[];v.forEach(C=>{const x=g.reduce((w,O,P)=>{if(O!==d){const E=function hI(i,t){const e=[];return t.forEach(n=>{const o=i.intersectsWithLine(n);o&&e.push(o)}),e}(C,b[P]);w.push(...E)}return w},[]).sort((w,O)=>H6(C.start,w)-H6(C.start,O));x.length>0?y.push(...function uI(i,t,e){return t.reduce((n,o,r)=>{if(za.includes(o))return n;const a=n.pop()||i,c=_.create(o).move(a.start,-e);let l=_.create(o).move(a.start,+e);const h=t[r+1];if(null!=h){const f=l.distance(h);f<=e&&(l=h.move(a.start,f),za.push(h))}else if(c.distance(a.end)<2*e+1)return n.push(a),n;if(l.distance(a.start)<2*e+1)return n.push(a),n;const d=new $(c,l);return Hs.push(d),n.push(new $(a.start,c),d,new $(l,a.end)),n},[])}(C,x,o)):y.push(C)});const z=B6(y,o,r,a);return Hs=[],za=[],n.raw?z:z.serialize()};var mi;!function(i){i.presets=Io,i.registry=Re.create({type:"connector"}),i.registry.register(i.presets,!0)}(mi||(mi={}));class F6 extends Ee{constructor(t={}){super(),this.pending=!1,this.changing=!1,this.data={},this.mutate(Oe(t)),this.changed={}}mutate(t,e={}){const n=!0===e.unset,o=!0===e.silent,r=[],a=this.changing;this.changing=!0,a||(this.previous=Oe(this.data),this.changed={});const c=this.data,l=this.previous,h=this.changed;if(Object.keys(t).forEach(u=>{const d=u,f=t[d];Jt(c[d],f)||r.push(d),Jt(l[d],f)?delete h[d]:h[d]=f,n?delete c[d]:c[d]=f}),!o&&r.length>0&&(this.pending=!0,this.pendingOptions=e,r.forEach(u=>{this.emit("change:*",{key:u,options:e,store:this,current:c[u],previous:l[u]})})),a)return this;if(!o)for(;this.pending;)this.pending=!1,this.emit("changed",{current:c,previous:l,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}get(t,e){return null==t?this.data:this.data[t]??e}getPrevious(t){if(this.previous)return this.previous[t]??void 0}set(t,e,n){return null!=t&&("object"==typeof t?this.mutate(t,e):this.mutate({[t]:e},n)),this}remove(t,e){const o={};let r;if("string"==typeof t)o[t]=void 0,r=e;else if(Array.isArray(t))t.forEach(a=>o[a]=void 0),r=e;else{for(const a in this.data)o[a]=void 0;r=t}return this.mutate(o,Object.assign(Object.assign({},r),{unset:!0})),this}getByPath(t){return cl(this.data,t,"/")}setByPath(t,e,n={}){const o="/",r=Array.isArray(t)?[...t]:t.split(o),a=Array.isArray(t)?t.join(o):t,c=r[0],l=r.length;if(n.propertyPath=a,n.propertyValue=e,n.propertyPathArray=r,1===l)this.set(c,e,n);else{const h={};let u=h,d=c;for(let g=1;g<l;g+=1){const m=r[g],v=Number.isFinite(Number(m));u=u[d]=v?[]:{},d=m}fs(h,r,e,o);const f=Oe(this.data);n.rewrite&&d0(f,t,o);const p=Pe(f,h);this.set(c,p[c],n)}return this}removeByPath(t,e){const n=Array.isArray(t)?t:t.split("/"),o=n[0];if(1===n.length)this.remove(o,e);else{const r=n.slice(1),a=Oe(this.get(o));a&&d0(a,r),this.set(o,a,e)}return this}hasChanged(t){return null==t?Object.keys(this.changed).length>0:t in this.changed}getChanges(t){if(null==t)return this.hasChanged()?Oe(this.changed):null;const e=this.changing?this.previous:this.data,n={};let o;for(const r in t){const a=t[r];Jt(e[r],a)||(n[r]=a,o=!0)}return o?Oe(n):null}toJSON(){return Oe(this.data)}clone(){return new(0,this.constructor)(this.data)}dispose(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}!function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([Ee.dispose()],F6.prototype,"dispose",null);class Bs{constructor(t){this.cell=t,this.ids={},this.cache={}}get(){return Object.keys(this.ids)}start(t,e,n={},o="/"){const r=this.cell.getPropByPath(t),a=wS(n,Bs.defaultOptions),c=this.getTiming(a.timing),l=this.getInterp(a.interp,r,e);let h=0;const u=Array.isArray(t)?t.join(o):t,d=Array.isArray(t)?t:t.split(o),f=()=>{const p=(new Date).getTime();0===h&&(h=p);let m=(p-h)/a.duration;m<1?this.ids[u]=requestAnimationFrame(f):m=1;const v=l(c(m));this.cell.setPropByPath(d,v),n.progress&&n.progress(Object.assign({progress:m,currentValue:v},this.getArgs(u))),1===m&&(this.cell.notify("transition:complete",this.getArgs(u)),n.complete&&n.complete(this.getArgs(u)),this.cell.notify("transition:finish",this.getArgs(u)),n.finish&&n.finish(this.getArgs(u)),this.clean(u))};return setTimeout(()=>{this.stop(t,void 0,o),this.cache[u]={startValue:r,targetValue:e,options:a},this.ids[u]=requestAnimationFrame(f),this.cell.notify("transition:start",this.getArgs(u)),n.start&&n.start(this.getArgs(u))},n.delay),this.stop.bind(this,t,o,n)}stop(t,e={},n="/"){const o=Array.isArray(t)?t:t.split(n);return Object.keys(this.ids).filter(r=>Jt(o,r.split(n).slice(0,o.length))).forEach(r=>{cancelAnimationFrame(this.ids[r]);const a=this.cache[r],c=this.getArgs(r),l=Object.assign(Object.assign({},a.options),e),h=l.jumpedToEnd;h&&null!=a.targetValue&&(this.cell.setPropByPath(r,a.targetValue),this.cell.notify("transition:end",Object.assign({},c)),this.cell.notify("transition:complete",Object.assign({},c)),l.complete&&l.complete(Object.assign({},c)));const u=Object.assign({jumpedToEnd:h},c);this.cell.notify("transition:stop",Object.assign({},u)),l.stop&&l.stop(Object.assign({},u)),this.cell.notify("transition:finish",Object.assign({},c)),l.finish&&l.finish(Object.assign({},c)),this.clean(r)}),this}clean(t){delete this.ids[t],delete this.cache[t]}getTiming(t){return"string"==typeof t?kn[t]:t}getInterp(t,e,n){return t?t(e,n):"number"==typeof n?Dn.number(e,n):"string"==typeof n?"#"===n[0]?Dn.color(e,n):Dn.unit(e,n):Dn.object(e,n)}getArgs(t){const e=this.cache[t];return{path:t,startValue:e.startValue,targetValue:e.targetValue,cell:this.cell}}}!function(i){i.defaultOptions={delay:10,duration:100,timing:"linear"}}(Bs||(Bs={}));var _o,R6=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e};class ae extends Ee{static config(t){const{markup:e,propHooks:n,attrHooks:o}=t,r=R6(t,["markup","propHooks","attrHooks"]);null!=e&&(this.markup=e),n&&(this.propHooks=this.propHooks.slice(),Array.isArray(n)?this.propHooks.push(...n):"function"==typeof n?this.propHooks.push(n):Object.values(n).forEach(a=>{"function"==typeof a&&this.propHooks.push(a)})),o&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),o)),this.defaults=Pe({},this.defaults,r)}static getMarkup(){return this.markup}static getDefaults(t){return t?this.defaults:Oe(this.defaults)}static getAttrHooks(){return this.attrHooks}static applyPropHooks(t,e){return this.propHooks.reduce((n,o)=>o?Z(o,t,n):n,e)}get[Symbol.toStringTag](){return ae.toStringTag}constructor(t={}){super();const n=this.constructor.getDefaults(!0),o=Pe({},this.preprocess(n),this.preprocess(t));this.id=o.id||ml(),this.store=new F6(o),this.animation=new Bs(this),this.setup(),this.init(),this.postprocess(t)}init(){}get model(){return this._model}set model(t){this._model!==t&&(this._model=t)}preprocess(t,e){const n=t.id,r=this.constructor.applyPropHooks(this,t);return null==n&&!0!==e&&(r.id=ml()),r}postprocess(t){}setup(){this.store.on("change:*",t=>{const{key:e,current:n,previous:o,options:r}=t;this.notify("change:*",{key:e,options:r,current:n,previous:o,cell:this}),this.notify(`change:${e}`,{options:r,current:n,previous:o,cell:this}),("source"===e||"target"===e)&&this.notify("change:terminal",{type:e,current:n,previous:o,options:r,cell:this})}),this.store.on("changed",({options:t})=>this.notify("changed",{options:t,cell:this}))}notify(t,e){this.trigger(t,e);const n=this.model;return n&&(n.notify(`cell:${t}`,e),this.isNode()?n.notify(`node:${t}`,Object.assign(Object.assign({},e),{node:this})):this.isEdge()&&n.notify(`edge:${t}`,Object.assign(Object.assign({},e),{edge:this}))),this}isNode(){return!1}isEdge(){return!1}isSameStore(t){return this.store===t.store}get view(){return this.store.get("view")}get shape(){return this.store.get("shape","")}getProp(t,e){return null==t?this.store.get():this.store.get(t,e)}setProp(t,e,n){if("string"==typeof t)this.store.set(t,e,n);else{const o=this.preprocess(t,!0);this.store.set(Pe({},this.getProp(),o),e),this.postprocess(t)}return this}removeProp(t,e){return"string"==typeof t||Array.isArray(t)?this.store.removeByPath(t,e):this.store.remove(e),this}hasChanged(t){return null==t?this.store.hasChanged():this.store.hasChanged(t)}getPropByPath(t){return this.store.getByPath(t)}setPropByPath(t,e,n={}){return this.model&&("children"===t?this._children=e?e.map(o=>this.model.getCell(o)).filter(o=>null!=o):null:"parent"===t&&(this._parent=e?this.model.getCell(e):null)),this.store.setByPath(t,e,n),this}removePropByPath(t,e={}){const n=Array.isArray(t)?t:t.split("/");return"attrs"===n[0]&&(e.dirty=!0),this.store.removeByPath(n,e),this}prop(t,e,n){return null==t?this.getProp():"string"==typeof t||Array.isArray(t)?1===arguments.length?this.getPropByPath(t):null==e?this.removePropByPath(t,n||{}):this.setPropByPath(t,e,n||{}):this.setProp(t,e||{})}previous(t){return this.store.getPrevious(t)}get zIndex(){return this.getZIndex()}set zIndex(t){null==t?this.removeZIndex():this.setZIndex(t)}getZIndex(){return this.store.get("zIndex")}setZIndex(t,e={}){return this.store.set("zIndex",t,e),this}removeZIndex(t={}){return this.store.remove("zIndex",t),this}toFront(t={}){const e=this.model;if(e){let o,n=e.getMaxZIndex();t.deep?(o=this.getDescendants({deep:!0,breadthFirst:!0}),o.unshift(this)):o=[this],n=n-o.length+1;const r=e.total();let a=e.indexOf(this)!==r-o.length;a||(a=o.some((c,l)=>c.getZIndex()!==n+l)),a&&this.batchUpdate("to-front",()=>{n+=o.length,o.forEach((c,l)=>{c.setZIndex(n+l,t)})})}return this}toBack(t={}){const e=this.model;if(e){let o,n=e.getMinZIndex();t.deep?(o=this.getDescendants({deep:!0,breadthFirst:!0}),o.unshift(this)):o=[this];let r=0!==e.indexOf(this);r||(r=o.some((a,c)=>a.getZIndex()!==n+c)),r&&this.batchUpdate("to-back",()=>{n-=o.length,o.forEach((a,c)=>{a.setZIndex(n+c,t)})})}return this}get markup(){return this.getMarkup()}set markup(t){null==t?this.removeMarkup():this.setMarkup(t)}getMarkup(){let t=this.store.get("markup");return null==t&&(t=this.constructor.getMarkup()),t}setMarkup(t,e={}){return this.store.set("markup",t,e),this}removeMarkup(t={}){return this.store.remove("markup",t),this}get attrs(){return this.getAttrs()}set attrs(t){null==t?this.removeAttrs():this.setAttrs(t)}getAttrs(){const t=this.store.get("attrs");return t?Object.assign({},t):{}}setAttrs(t,e={}){if(null==t)this.removeAttrs(e);else{const n=o=>this.store.set("attrs",o,e);if(!0===e.overwrite)n(t);else{const o=this.getAttrs();n(!1===e.deep?Object.assign(Object.assign({},o),t):Pe({},o,t))}}return this}replaceAttrs(t,e={}){return this.setAttrs(t,Object.assign(Object.assign({},e),{overwrite:!0}))}updateAttrs(t,e={}){return this.setAttrs(t,Object.assign(Object.assign({},e),{deep:!1}))}removeAttrs(t={}){return this.store.remove("attrs",t),this}getAttrDefinition(t){if(!t)return null;const n=this.constructor.getAttrHooks()||{};let o=n[t]||Kt.registry.get(t);if(!o){const r=gs(t);o=n[r]||Kt.registry.get(r)}return o||null}getAttrByPath(t){return null==t||""===t?this.getAttrs():this.getPropByPath(this.prefixAttrPath(t))}setAttrByPath(t,e,n={}){return this.setPropByPath(this.prefixAttrPath(t),e,n),this}removeAttrByPath(t,e={}){return this.removePropByPath(this.prefixAttrPath(t),e),this}prefixAttrPath(t){return Array.isArray(t)?["attrs"].concat(t):`attrs/${t}`}attr(t,e,n){return null==t?this.getAttrByPath():"string"==typeof t||Array.isArray(t)?1===arguments.length?this.getAttrByPath(t):null==e?this.removeAttrByPath(t,n||{}):this.setAttrByPath(t,e,n||{}):this.setAttrs(t,e||{})}get visible(){return this.isVisible()}set visible(t){this.setVisible(t)}setVisible(t,e={}){return this.store.set("visible",t,e),this}isVisible(){return!1!==this.store.get("visible")}show(t={}){return this.isVisible()||this.setVisible(!0,t),this}hide(t={}){return this.isVisible()&&this.setVisible(!1,t),this}toggleVisible(t,e={}){const o="boolean"==typeof t?e:t;return("boolean"==typeof t?t:!this.isVisible())?this.show(o):this.hide(o),this}get data(){return this.getData()}set data(t){this.setData(t)}getData(){return this.store.get("data")}setData(t,e={}){if(null==t)this.removeData(e);else{const n=o=>this.store.set("data",o,e);if(!0===e.overwrite)n(t);else{const o=this.getData();n(!1===e.deep?"object"==typeof t?Object.assign(Object.assign({},o),t):t:Pe({},o,t))}}return this}replaceData(t,e={}){return this.setData(t,Object.assign(Object.assign({},e),{overwrite:!0}))}updateData(t,e={}){return this.setData(t,Object.assign(Object.assign({},e),{deep:!1}))}removeData(t={}){return this.store.remove("data",t),this}get parent(){return this.getParent()}get children(){return this.getChildren()}getParentId(){return this.store.get("parent")}getParent(){const t=this.getParentId();if(t&&this.model){const e=this.model.getCell(t);return this._parent=e,e}return null}getChildren(){const t=this.store.get("children");if(t&&t.length&&this.model){const e=t.map(n=>{var o;return null===(o=this.model)||void 0===o?void 0:o.getCell(n)}).filter(n=>null!=n);return this._children=e,[...e]}return null}hasParent(){return null!=this.parent}isParentOf(t){return null!=t&&t.getParent()===this}isChildOf(t){return null!=t&&this.getParent()===t}eachChild(t,e){return this.children&&this.children.forEach(t,e),this}filterChild(t,e){return this.children?this.children.filter(t,e):[]}getChildCount(){return null==this.children?0:this.children.length}getChildIndex(t){return null==this.children?-1:this.children.indexOf(t)}getChildAt(t){return null!=this.children&&t>=0?this.children[t]:null}getAncestors(t={}){const e=[];let n=this.getParent();for(;n;)e.push(n),n=!1!==t.deep?n.getParent():null;return e}getDescendants(t={}){if(!1!==t.deep){if(t.breadthFirst){const e=[],n=this.getChildren()||[];for(;n.length>0;){const o=n.shift(),r=o.getChildren();e.push(o),r&&n.push(...r)}return e}{const e=this.getChildren()||[];return e.forEach(n=>{e.push(...n.getDescendants(t))}),e}}return this.getChildren()||[]}isDescendantOf(t,e={}){if(null==t)return!1;if(!1!==e.deep){let n=this.getParent();for(;n;){if(n===t)return!0;n=n.getParent()}return!1}return this.isChildOf(t)}isAncestorOf(t,e={}){return null!=t&&t.isDescendantOf(this,e)}contains(t){return this.isAncestorOf(t)}getCommonAncestor(...t){return ae.getCommonAncestor(this,...t)}setParent(t,e={}){return this._parent=t,t?this.store.set("parent",t.id,e):this.store.remove("parent",e),this}setChildren(t,e={}){return this._children=t,null!=t?this.store.set("children",t.map(n=>n.id),e):this.store.remove("children",e),this}unembed(t,e={}){const n=this.children;if(null!=n&&null!=t){const o=this.getChildIndex(t);-1!==o&&(n.splice(o,1),t.setParent(null,e),this.setChildren(n,e))}return this}embed(t,e={}){return t.addTo(this,e),this}addTo(t,e={}){return ae.isCell(t)?t.addChild(this,e):t.addCell(this,e),this}insertTo(t,e,n={}){return t.insertChild(this,e,n),this}addChild(t,e={}){return this.insertChild(t,void 0,e)}insertChild(t,e,n={}){if(null!=t&&t!==this){const o=t.getParent(),r=this!==o;let a=e;if(null==a&&(a=this.getChildCount(),r||(a-=1)),o){const l=o.getChildren();if(l){const h=l.indexOf(t);h>=0&&(t.setParent(null,n),l.splice(h,1),o.setChildren(l,n))}}let c=this.children;if(null==c?(c=[],c.push(t)):c.splice(a,0,t),t.setParent(this,n),this.setChildren(c,n),r&&this.model){const l=this.model.getIncomingEdges(this),h=this.model.getOutgoingEdges(this);l&&l.forEach(u=>u.updateParent(n)),h&&h.forEach(u=>u.updateParent(n))}this.model&&this.model.addCell(t,n)}return this}removeFromParent(t={}){const e=this.getParent();if(null!=e){const n=e.getChildIndex(this);e.removeChildAt(n,t)}return this}removeChild(t,e={}){const n=this.getChildIndex(t);return this.removeChildAt(n,e)}removeChildAt(t,e={}){const n=this.getChildAt(t);return null!=this.children&&null!=n&&(this.unembed(n,e),n.remove(e)),n}remove(t={}){return this.batchUpdate("remove",()=>{const e=this.getParent();e&&e.removeChild(this,t),!1!==t.deep&&this.eachChild(n=>n.remove(t)),this.model&&this.model.removeCell(this,t)}),this}transition(t,e,n={},o="/"){return this.animation.start(t,e,n,o)}stopTransition(t,e,n="/"){return this.animation.stop(t,e,n),this}getTransitions(){return this.animation.get()}translate(t,e,n){return this}scale(t,e,n,o){return this}addTools(t,e,n){const o=Array.isArray(t)?t:[t],r="string"==typeof e?e:null,a="object"==typeof e?e:"object"==typeof n?n:{};if(a.reset)return this.setTools({name:r,items:o,local:a.local},a);let c=Oe(this.getTools());return null==c||null==r||c.name===r?(null==c&&(c={}),c.items||(c.items=[]),c.name=r,c.items=[...c.items,...o],this.setTools(Object.assign({},c),a)):void 0}setTools(t,e={}){return null==t?this.removeTools():this.store.set("tools",ae.normalizeTools(t),e),this}getTools(){return this.store.get("tools")}removeTools(t={}){return this.store.remove("tools",t),this}hasTools(t){const e=this.getTools();return null!=e&&(null==t||e.name===t)}hasTool(t){const e=this.getTools();return null!=e&&e.items.some(n=>"string"==typeof n?n===t:n.name===t)}removeTool(t,e={}){const n=Oe(this.getTools());if(n){let o=!1;const r=n.items.slice(),a=c=>{r.splice(c,1),o=!0};if("number"==typeof t)a(t);else for(let c=r.length-1;c>=0;c-=1){const l=r[c];("string"==typeof l?l===t:l.name===t)&&a(c)}o&&(n.items=r,this.setTools(n,e))}return this}getBBox(t){return new F}getConnectionPoint(t,e){return new _}toJSON(t={}){const e=Object.assign({},this.store.get()),n=Object.prototype.toString,o=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!e.shape){const g=this.constructor;throw new Error(`Unable to serialize ${o} missing "shape" prop, check the ${o} "${g.name||n.call(g)}"`)}const a=!0===t.diff,c=e.attrs||{},l=this.constructor.getDefaults(!0),h=a?this.preprocess(l,!0):l,u=h.attrs||{},d={};Object.entries(e).forEach(([g,m])=>{if(null!=m&&!Array.isArray(m)&&"object"==typeof m&&!Ut(m))throw new Error(`Can only serialize ${o} with plain-object props, but got a "${n.call(m)}" type of key "${g}" on ${o} "${this.id}"`);"attrs"!==g&&"shape"!==g&&a&&Jt(m,h[g])&&delete e[g]}),Object.keys(c).forEach(g=>{const m=c[g],v=u[g];Object.keys(m).forEach(b=>{const y=m[b],z=v?v[b]:null;null==y||"object"!=typeof y||Array.isArray(y)?(null==v||!Jt(z,y))&&(null==d[g]&&(d[g]={}),d[g][b]=y):Object.keys(y).forEach(C=>{const x=y[C];null!=v&&null!=z&&Ie(z)&&Jt(z[C],x)||(null==d[g]&&(d[g]={}),null==d[g][b]&&(d[g][b]={}),d[g][b][C]=x)})})});const f=Object.assign(Object.assign({},e),{attrs:Q3(d)?void 0:d});null==f.attrs&&delete f.attrs;const p=f;return 0===p.angle&&delete p.angle,Oe(p)}clone(t={}){if(!t.deep){const n=Object.assign({},this.store.get());return t.keepId||delete n.id,delete n.parent,delete n.children,new(0,this.constructor)(n)}return ae.deepClone(this)[this.id]}findView(t){return t.findViewByCell(this)}startBatch(t,e={},n=this.model){return this.notify("batch:start",{name:t,data:e,cell:this}),n&&n.startBatch(t,Object.assign(Object.assign({},e),{cell:this})),this}stopBatch(t,e={},n=this.model){return n&&n.stopBatch(t,Object.assign(Object.assign({},e),{cell:this})),this.notify("batch:stop",{name:t,data:e,cell:this}),this}batchUpdate(t,e,n){const o=this.model;this.startBatch(t,n,o);const r=e();return this.stopBatch(t,n,o),r}dispose(){this.removeFromParent(),this.store.dispose()}}ae.defaults={},ae.attrHooks={},ae.propHooks=[],function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([Ee.dispose()],ae.prototype,"dispose",null),function(i){i.normalizeTools=function t(e){return"string"==typeof e?{items:[e]}:Array.isArray(e)?{items:e}:e.items?e:{items:[e]}}}(ae||(ae={})),function(i){i.toStringTag=`X6.${i.name}`,i.isCell=function t(e){if(null==e)return!1;if(e instanceof i)return!0;const n=e[Symbol.toStringTag];return(null==n||n===i.toStringTag)&&"function"==typeof e.isNode&&"function"==typeof e.isEdge&&"function"==typeof e.prop&&"function"==typeof e.attr}}(ae||(ae={})),function(i){i.getCommonAncestor=function t(...r){const a=r.filter(l=>null!=l).map(l=>l.getAncestors()).sort((l,h)=>l.length-h.length);return a.shift().find(l=>a.every(h=>h.includes(l)))||null},i.getCellsBBox=function e(r,a={}){let c=null;for(let l=0,h=r.length;l<h;l+=1){const u=r[l];let d=u.getBBox(a);if(d){if(u.isNode()){const f=u.getAngle();null!=f&&0!==f&&(d=d.bbox(f))}c=null==c?d:c.union(d)}}return c},i.deepClone=function n(r){const a=[r,...r.getDescendants({deep:!0})];return i.cloneCells(a)},i.cloneCells=function o(r){const a=m0(r),c=a.reduce((l,h)=>(l[h.id]=h.clone(),l),{});return a.forEach(l=>{const h=c[l.id];if(h.isEdge()){const f=h.getSourceCellId(),p=h.getTargetCellId();f&&c[f]&&h.setSource(Object.assign(Object.assign({},h.getSource()),{cell:c[f].id})),p&&c[p]&&h.setTarget(Object.assign(Object.assign({},h.getTarget()),{cell:c[p].id}))}const u=l.getParent();u&&c[u.id]&&h.setParent(c[u.id]);const d=l.getChildren();if(d&&d.length){const f=d.reduce((p,g)=>(c[g.id]&&p.push(c[g.id]),p),[]);f.length>0&&h.setChildren(f)}}),c}}(ae||(ae={})),function(i){i.config({propHooks(t){var{tools:e}=t,n=R6(t,["tools"]);return e&&(n.tools=i.normalizeTools(e)),n}})}(ae||(ae={})),function(i){let t,e;i.exist=function n(a,c){return c?null!=t&&t.exist(a):null!=e&&e.exist(a)},i.setEdgeRegistry=function o(a){t=a},i.setNodeRegistry=function r(a){e=a}}(_o||(_o={}));class mI{constructor(t){this.ports=[],this.groups={},this.init(Oe(t))}getPorts(){return this.ports}getGroup(t){return null!=t?this.groups[t]:null}getPortsByGroup(t){return this.ports.filter(e=>e.group===t||null==e.group&&null==t)}getPortsLayoutByGroup(t,e){const n=this.getPortsByGroup(t),o=t?this.getGroup(t):null,r=o?o.position:null,a=r?r.name:null;let c;if(null!=a){const d=gi.registry.get(a);if(null==d)return gi.registry.onNotFound(a);c=d}else c=gi.presets.left;return c(n.map(d=>d&&d.position&&d.position.args||{}),e,r&&r.args||{}).map((d,f)=>{const p=n[f];return{portLayout:d,portId:p.id,portSize:p.size,portAttrs:p.attrs,labelSize:p.label.size,labelLayout:this.getPortLabelLayout(p,_.create(d.position),e)}})}init(t){const{groups:e,items:n}=t;null!=e&&Object.keys(e).forEach(o=>{this.groups[o]=this.parseGroup(e[o])}),Array.isArray(n)&&n.forEach(o=>{this.ports.push(this.parsePort(o))})}parseGroup(t){return Object.assign(Object.assign({},t),{label:this.getLabel(t,!0),position:this.getPortPosition(t.position,!0)})}parsePort(t){const e=Object.assign({},t),n=this.getGroup(t.group)||{};return e.markup=e.markup||n.markup,e.attrs=Pe({},n.attrs,e.attrs),e.position=this.createPosition(n,e),e.label=Pe({},n.label,this.getLabel(e)),e.zIndex=this.getZIndex(n,e),e.size=Object.assign(Object.assign({},n.size),e.size),e}getZIndex(t,e){return"number"==typeof e.zIndex?e.zIndex:"number"==typeof t.zIndex||"auto"===t.zIndex?t.zIndex:"auto"}createPosition(t,e){return Pe({name:"left",args:{}},t.position,{args:e.args})}getPortPosition(t,e=!1){if(null==t){if(e)return{name:"left",args:{}}}else{if("string"==typeof t)return{name:t,args:{}};if(Array.isArray(t))return{name:"absolute",args:{x:t[0],y:t[1]}};if("object"==typeof t)return t}return{args:{}}}getPortLabelPosition(t,e=!1){if(null==t){if(e)return{name:"left",args:{}}}else{if("string"==typeof t)return{name:t,args:{}};if("object"==typeof t)return t}return{args:{}}}getLabel(t,e=!1){const n=t.label||{};return n.position=this.getPortLabelPosition(n.position,e),n}getPortLabelLayout(t,e,n){const r=t.label.position.args||{},a=po.registry.get(t.label.position.name||"left")||po.presets.left;return a?a(e,n,r):null}}var ba=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e};let Ze=(()=>{class i extends ae{get[Symbol.toStringTag](){return i.toStringTag}constructor(e={}){super(e),this.initPorts()}preprocess(e,n){const{x:o,y:r,width:a,height:c}=e,l=ba(e,["x","y","width","height"]);if(null!=o||null!=r){const h=l.position;l.position=Object.assign(Object.assign({},h),{x:o??(h?h.x:0),y:r??(h?h.y:0)})}if(null!=a||null!=c){const h=l.size;l.size=Object.assign(Object.assign({},h),{width:a??(h?h.width:0),height:c??(h?h.height:0)})}return super.preprocess(l,n)}isNode(){return!0}size(e,n,o){return void 0===e?this.getSize():"number"==typeof e?this.setSize(e,n,o):this.setSize(e,n)}getSize(){const e=this.store.get("size");return e?Object.assign({},e):{width:1,height:1}}setSize(e,n,o){return"object"==typeof e?this.resize(e.width,e.height,n):this.resize(e,n,o),this}resize(e,n,o={}){this.startBatch("resize",o);const r=o.direction;if(r){const a=this.getSize();switch(r){case"left":case"right":n=a.height;break;case"top":case"bottom":e=a.width}let l={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[r];const h=he.normalize(this.getAngle()||0);o.absolute&&(l+=Math.floor((h+45)/90),l%=4);const u=this.getBBox();let d;d=0===l?u.getBottomLeft():1===l?u.getCorner():2===l?u.getTopRight():u.getOrigin();const f=d.clone().rotate(-h,u.getCenter()),p=Math.sqrt(e*e+n*n)/2;let g=l*Math.PI/2;g+=Math.atan(l%2==0?n/e:e/n),g-=he.toRad(h);const v=_.fromPolar(p,g,f).clone().translate(e/-2,n/-2);this.store.set("size",{width:e,height:n},o),this.setPosition(v.x,v.y,o)}else this.store.set("size",{width:e,height:n},o);return this.stopBatch("resize",o),this}scale(e,n,o,r={}){const a=this.getBBox().scale(e,n,o??void 0);return this.startBatch("scale",r),this.setPosition(a.x,a.y,r),this.resize(a.width,a.height,r),this.stopBatch("scale"),this}position(e,n,o){return"number"==typeof e?this.setPosition(e,n,o):this.getPosition(e)}getPosition(e={}){if(e.relative){const o=this.getParent();if(null!=o&&o.isNode()){const r=this.getPosition(),a=o.getPosition();return{x:r.x-a.x,y:r.y-a.y}}}const n=this.store.get("position");return n?Object.assign({},n):{x:0,y:0}}setPosition(e,n,o={}){let r,a,c;if("object"==typeof e?(r=e.x,a=e.y,c=n||{}):(r=e,a=n,c=o||{}),c.relative){const l=this.getParent();if(null!=l&&l.isNode()){const h=l.getPosition();r+=h.x,a+=h.y}}if(c.deep){const l=this.getPosition();this.translate(r-l.x,a-l.y,c)}else this.store.set("position",{x:r,y:a},c);return this}translate(e=0,n=0,o={}){if(0===e&&0===n)return this;o.translateBy=o.translateBy||this.id;const r=this.getPosition();if(null!=o.restrict&&o.translateBy===this.id){const c=this.getBBox({deep:!0}),l=o.restrict,h=r.x-c.x,u=r.y-c.y,d=Math.max(l.x+h,Math.min(l.x+l.width+h-c.width,r.x+e)),f=Math.max(l.y+u,Math.min(l.y+l.height+u-c.height,r.y+n));e=d-r.x,n=f-r.y}const a={x:r.x+e,y:r.y+n};return o.tx=e,o.ty=n,o.transition?("object"!=typeof o.transition&&(o.transition={}),this.transition("position",a,Object.assign(Object.assign({},o.transition),{interp:Dn.object})),this.eachChild(c=>{var l;(null===(l=o.exclude)||void 0===l?void 0:l.includes(c))||c.translate(e,n,o)})):(this.startBatch("translate",o),this.store.set("position",a,o),this.eachChild(c=>{var l;(null===(l=o.exclude)||void 0===l?void 0:l.includes(c))||c.translate(e,n,o)}),this.stopBatch("translate",o)),this}angle(e,n){return null==e?this.getAngle():this.rotate(e,n)}getAngle(){return this.store.get("angle",0)}rotate(e,n={}){const o=this.getAngle();if(n.center){const r=this.getSize(),a=this.getPosition(),c=this.getBBox().getCenter();c.rotate(o-e,n.center);const l=c.x-r.width/2-a.x,h=c.y-r.height/2-a.y;this.startBatch("rotate",{angle:e,options:n}),this.setPosition(a.x+l,a.y+h,n),this.rotate(e,Object.assign(Object.assign({},n),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",n.absolute?e:(o+e)%360,n);return this}getBBox(e={}){if(e.deep){const n=this.getDescendants({deep:!0,breadthFirst:!0});return n.push(this),ae.getCellsBBox(n)}return F.fromPositionAndSize(this.getPosition(),this.getSize())}getConnectionPoint(e,n){const o=this.getBBox(),r=o.getCenter(),a=e.getTerminal(n);if(null==a)return r;const c=a.port;if(!c||!this.hasPort(c))return r;const l=this.getPort(c);if(!l||!l.group)return r;const u=this.getPortsPosition(l.group)[c].position,d=_.create(u).translate(o.getOrigin()),f=this.getAngle();return f&&d.rotate(-f,r),d}fit(e={}){const o=(this.getChildren()||[]).filter(u=>u.isNode());if(0===o.length)return this;this.startBatch("fit-embeds",e),e.deep&&o.forEach(u=>u.fit(e));let{x:r,y:a,width:c,height:l}=ae.getCellsBBox(o);const h=On(e.padding);return r-=h.left,a-=h.top,c+=h.left+h.right,l+=h.bottom+h.top,this.store.set({position:{x:r,y:a},size:{width:c,height:l}},e),this.stopBatch("fit-embeds"),this}get portContainerMarkup(){return this.getPortContainerMarkup()}set portContainerMarkup(e){this.setPortContainerMarkup(e)}getDefaultPortContainerMarkup(){return this.store.get("defaultPortContainerMarkup")||xe.getPortContainerMarkup()}getPortContainerMarkup(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}setPortContainerMarkup(e,n={}){return this.store.set("portContainerMarkup",xe.clone(e),n),this}get portMarkup(){return this.getPortMarkup()}set portMarkup(e){this.setPortMarkup(e)}getDefaultPortMarkup(){return this.store.get("defaultPortMarkup")||xe.getPortMarkup()}getPortMarkup(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}setPortMarkup(e,n={}){return this.store.set("portMarkup",xe.clone(e),n),this}get portLabelMarkup(){return this.getPortLabelMarkup()}set portLabelMarkup(e){this.setPortLabelMarkup(e)}getDefaultPortLabelMarkup(){return this.store.get("defaultPortLabelMarkup")||xe.getPortLabelMarkup()}getPortLabelMarkup(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}setPortLabelMarkup(e,n={}){return this.store.set("portLabelMarkup",xe.clone(e),n),this}get ports(){const e=this.store.get("ports",{items:[]});return null==e.items&&(e.items=[]),e}getPorts(){return Oe(this.ports.items)}getPortsByGroup(e){return this.getPorts().filter(n=>n.group===e)}getPort(e){return Oe(this.ports.items.find(n=>n.id&&n.id===e))}getPortAt(e){return this.ports.items[e]||null}hasPorts(){return this.ports.items.length>0}hasPort(e){return-1!==this.getPortIndex(e)}getPortIndex(e){const n="string"==typeof e?e:e.id;return null!=n?this.ports.items.findIndex(o=>o.id===n):-1}getPortsPosition(e){const n=this.getSize();return this.port.getPortsLayoutByGroup(e,new F(0,0,n.width,n.height)).reduce((r,a)=>{const c=a.portLayout;return r[a.portId]={position:Object.assign({},c.position),angle:c.angle||0},r},{})}getPortProp(e,n){return this.getPropByPath(this.prefixPortPath(e,n))}setPortProp(e,n,o,r){if("string"==typeof n||Array.isArray(n)){const l=this.prefixPortPath(e,n);return this.setPropByPath(l,o,r)}const a=this.prefixPortPath(e);return this.setPropByPath(a,n,o)}removePortProp(e,n,o){return"string"==typeof n||Array.isArray(n)?this.removePropByPath(this.prefixPortPath(e,n),o):this.removePropByPath(this.prefixPortPath(e),n)}portProp(e,n,o,r){return null==n?this.getPortProp(e):"string"==typeof n||Array.isArray(n)?2===arguments.length?this.getPortProp(e,n):null==o?this.removePortProp(e,n,r):this.setPortProp(e,n,o,r):this.setPortProp(e,n,o)}prefixPortPath(e,n){const o=this.getPortIndex(e);if(-1===o)throw new Error(`Unable to find port with id: "${e}"`);return null==n||""===n?["ports","items",`${o}`]:Array.isArray(n)?["ports","items",`${o}`,...n]:`ports/items/${o}/${n}`}addPort(e,n){const o=[...this.ports.items];return o.push(e),this.setPropByPath("ports/items",o,n),this}addPorts(e,n){return this.setPropByPath("ports/items",[...this.ports.items,...e],n),this}insertPort(e,n,o){const r=[...this.ports.items];return r.splice(e,0,n),this.setPropByPath("ports/items",r,o),this}removePort(e,n={}){return this.removePortAt(this.getPortIndex(e),n)}removePortAt(e,n={}){if(e>=0){const o=[...this.ports.items];o.splice(e,1),n.rewrite=!0,this.setPropByPath("ports/items",o,n)}return this}removePorts(e,n){let o;if(Array.isArray(e)){if(o=n||{},e.length){o.rewrite=!0;const a=[...this.ports.items].filter(c=>!e.some(l=>c.id===("string"==typeof l?l:l.id)));this.setPropByPath("ports/items",a,o)}}else o=e||{},o.rewrite=!0,this.setPropByPath("ports/items",[],o);return this}getParsedPorts(){return this.port.getPorts()}getParsedGroups(){return this.port.groups}getPortsLayoutByGroup(e,n){return this.port.getPortsLayoutByGroup(e,n)}initPorts(){this.updatePortData(),this.on("change:ports",()=>{this.processRemovedPort(),this.updatePortData()})}processRemovedPort(){const n={};this.ports.items.forEach(c=>{c.id&&(n[c.id]=!0)});const o={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(c=>{c.id&&!n[c.id]&&(o[c.id]=!0)});const a=this.model;a&&!Q3(o)&&(a.getConnectedEdges(this,{incoming:!0}).forEach(h=>{const u=h.getTargetPortId();u&&o[u]&&h.remove()}),a.getConnectedEdges(this,{outgoing:!0}).forEach(h=>{const u=h.getSourcePortId();u&&o[u]&&h.remove()}))}validatePorts(){const e={},n=[];return this.ports.items.forEach(o=>{"object"!=typeof o&&n.push(`Invalid port ${o}.`),null==o.id&&(o.id=this.generatePortId()),e[o.id]&&n.push("Duplicitied port id."),e[o.id]=!0}),n}generatePortId(){return ml()}updatePortData(){const e=this.validatePorts();if(e.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(e.join(" "));const n=this.port?this.port.getPorts():null;this.port=new mI(this.ports);const o=this.port.getPorts(),r=n?o.filter(c=>n.find(l=>l.id===c.id)?null:c):[...o],a=n?n.filter(c=>o.find(l=>l.id===c.id)?null:c):[];r.length>0&&this.notify("ports:added",{added:r,cell:this,node:this}),a.length>0&&this.notify("ports:removed",{removed:a,cell:this,node:this})}}return i.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},i})();(function(i){i.toStringTag=`X6.${i.name}`,i.isNode=function t(e){if(null==e)return!1;if(e instanceof i)return!0;const n=e[Symbol.toStringTag];return(null==n||n===i.toStringTag)&&"function"==typeof e.isNode&&"function"==typeof e.isEdge&&"function"==typeof e.prop&&"function"==typeof e.attr&&"function"==typeof e.size&&"function"==typeof e.position}})(Ze||(Ze={})),function(i){i.config({propHooks(t){var{ports:e}=t,n=ba(t,["ports"]);return e&&(n.ports=Array.isArray(e)?{items:e}:e),n}})}(Ze||(Ze={})),function(i){i.registry=Re.create({type:"node",process(t,e){if(_o.exist(t,!0))throw new Error(`Node with name '${t}' was registered by anthor Edge`);if("function"==typeof e)return e.config({shape:t}),e;let n=i;const{inherit:o}=e,r=ba(e,["inherit"]);if(o)if("string"==typeof o){const c=this.get(o);null==c?this.onNotFound(o,"inherited"):n=c}else n=o;null==r.constructorName&&(r.constructorName=t);const a=n.define.call(n,r);return a.config({shape:t}),a}}),_o.setNodeRegistry(i.registry)}(Ze||(Ze={})),function(i){let t=0;i.define=function n(r){const{constructorName:a,overwrite:c}=r,l=ba(r,["constructorName","overwrite"]),h=al(function e(r){return r?pl(r):(t+=1,`CustomNode${t}`)}(a||l.shape),this);return h.config(l),l.shape&&i.registry.register(l.shape,h,c),h},i.create=function o(r){const a=r.shape||"rect",c=i.registry.get(a);return c?new c(r):i.registry.onNotFound(a)}}(Ze||(Ze={}));var ya=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e};let je=(()=>{class i extends ae{get[Symbol.toStringTag](){return i.toStringTag}constructor(e={}){super(e)}preprocess(e,n){const{source:o,sourceCell:r,sourcePort:a,sourcePoint:c,target:l,targetCell:h,targetPort:u,targetPoint:d}=e,p=ya(e,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),g=m=>"string"==typeof m||"number"==typeof m;if(null!=o)if(ae.isCell(o))p.source={cell:o.id};else if(g(o))p.source={cell:o};else if(_.isPoint(o))p.source=o.toJSON();else if(Array.isArray(o))p.source={x:o[0],y:o[1]};else{const m=o.cell;p.source=ae.isCell(m)?Object.assign(Object.assign({},o),{cell:m.id}):o}if(null!=r||null!=a){let m=p.source;if(null!=r){const v=g(r)?r:r.id;m?m.cell=v:m=p.source={cell:v}}null!=a&&m&&(m.port=a)}else null!=c&&(p.source=_.create(c).toJSON());if(null!=l)if(ae.isCell(l))p.target={cell:l.id};else if(g(l))p.target={cell:l};else if(_.isPoint(l))p.target=l.toJSON();else if(Array.isArray(l))p.target={x:l[0],y:l[1]};else{const m=l.cell;p.target=ae.isCell(m)?Object.assign(Object.assign({},l),{cell:m.id}):l}if(null!=h||null!=u){let m=p.target;if(null!=h){const v=g(h)?h:h.id;m?m.cell=v:m=p.target={cell:v}}null!=u&&m&&(m.port=u)}else null!=d&&(p.target=_.create(d).toJSON());return super.preprocess(p,n)}setup(){super.setup(),this.on("change:labels",e=>this.onLabelsChanged(e)),this.on("change:vertices",e=>this.onVertexsChanged(e))}isEdge(){return!0}disconnect(e={}){return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},e),this}get source(){return this.getSource()}set source(e){this.setSource(e)}getSource(){return this.getTerminal("source")}getSourceCellId(){return this.source.cell}getSourcePortId(){return this.source.port}setSource(e,n,o={}){return this.setTerminal("source",e,n,o)}get target(){return this.getTarget()}set target(e){this.setTarget(e)}getTarget(){return this.getTerminal("target")}getTargetCellId(){return this.target.cell}getTargetPortId(){return this.target.port}setTarget(e,n,o={}){return this.setTerminal("target",e,n,o)}getTerminal(e){return Object.assign({},this.store.get(e))}setTerminal(e,n,o,r={}){if(ae.isCell(n))return this.store.set(e,Pe({},o,{cell:n.id}),r),this;const a=n;return _.isPoint(n)||null!=a.x&&null!=a.y?(this.store.set(e,Pe({},o,{x:a.x,y:a.y}),r),this):(this.store.set(e,Oe(n),r),this)}getSourcePoint(){return this.getTerminalPoint("source")}getTargetPoint(){return this.getTerminalPoint("target")}getTerminalPoint(e){const n=this[e];if(_.isPointLike(n))return _.create(n);const o=this.getTerminalCell(e);return o?o.getConnectionPoint(this,e):new _}getSourceCell(){return this.getTerminalCell("source")}getTargetCell(){return this.getTerminalCell("target")}getTerminalCell(e){if(this.model){const n="source"===e?this.getSourceCellId():this.getTargetCellId();if(n)return this.model.getCell(n)}return null}getSourceNode(){return this.getTerminalNode("source")}getTargetNode(){return this.getTerminalNode("target")}getTerminalNode(e){let n=this;const o={};for(;n&&n.isEdge();){if(o[n.id])return null;o[n.id]=!0,n=n.getTerminalCell(e)}return n&&n.isNode()?n:null}get router(){return this.getRouter()}set router(e){null==e?this.removeRouter():this.setRouter(e)}getRouter(){return this.store.get("router")}setRouter(e,n,o){return"object"==typeof e?this.store.set("router",e,n):this.store.set("router",{name:e,args:n},o),this}removeRouter(e={}){return this.store.remove("router",e),this}get connector(){return this.getConnector()}set connector(e){null==e?this.removeConnector():this.setConnector(e)}getConnector(){return this.store.get("connector")}setConnector(e,n,o){return"object"==typeof e?this.store.set("connector",e,n):this.store.set("connector",{name:e,args:n},o),this}removeConnector(e={}){return this.store.remove("connector",e)}getDefaultLabel(){const e=this.constructor,n=this.store.get("defaultLabel")||e.defaultLabel||{};return Oe(n)}get labels(){return this.getLabels()}set labels(e){this.setLabels(e)}getLabels(){return[...this.store.get("labels",[])].map(e=>this.parseLabel(e))}setLabels(e,n={}){return this.store.set("labels",Array.isArray(e)?e:[e],n),this}insertLabel(e,n,o={}){const r=this.getLabels(),a=r.length;let c=null!=n&&Number.isFinite(n)?n:a;return c<0&&(c=a+c+1),r.splice(c,0,this.parseLabel(e)),this.setLabels(r,o)}appendLabel(e,n={}){return this.insertLabel(e,-1,n)}getLabelAt(e){const n=this.getLabels();return null!=e&&Number.isFinite(e)?this.parseLabel(n[e]):null}setLabelAt(e,n,o={}){if(null!=e&&Number.isFinite(e)){const r=this.getLabels();r[e]=this.parseLabel(n),this.setLabels(r,o)}return this}removeLabelAt(e,n={}){const o=this.getLabels(),r=null!=e&&Number.isFinite(e)?e:-1,a=o.splice(r,1);return this.setLabels(o,n),a.length?a[0]:null}parseLabel(e){return"string"==typeof e?this.constructor.parseStringLabel(e):e}onLabelsChanged({previous:e,current:n}){const o=e&&n?n.filter(a=>e.find(c=>a===c||Jt(a,c))?null:a):n?[...n]:[],r=e&&n?e.filter(a=>n.find(c=>a===c||Jt(a,c))?null:a):e?[...e]:[];o.length>0&&this.notify("labels:added",{added:o,cell:this,edge:this}),r.length>0&&this.notify("labels:removed",{removed:r,cell:this,edge:this})}get vertices(){return this.getVertices()}set vertices(e){this.setVertices(e)}getVertices(){return[...this.store.get("vertices",[])]}setVertices(e,n={}){const o=Array.isArray(e)?e:[e];return this.store.set("vertices",o.map(r=>_.toJSON(r)),n),this}insertVertex(e,n,o={}){const r=this.getVertices(),a=r.length;let c=null!=n&&Number.isFinite(n)?n:a;return c<0&&(c=a+c+1),r.splice(c,0,_.toJSON(e)),this.setVertices(r,o)}appendVertex(e,n={}){return this.insertVertex(e,-1,n)}getVertexAt(e){return null!=e&&Number.isFinite(e)?this.getVertices()[e]:null}setVertexAt(e,n,o={}){if(null!=e&&Number.isFinite(e)){const r=this.getVertices();r[e]=n,this.setVertices(r,o)}return this}removeVertexAt(e,n={}){const o=this.getVertices(),r=null!=e&&Number.isFinite(e)?e:-1;return o.splice(r,1),this.setVertices(o,n)}onVertexsChanged({previous:e,current:n}){const o=e&&n?n.filter(a=>e.find(c=>_.equals(a,c))?null:a):n?[...n]:[],r=e&&n?e.filter(a=>n.find(c=>_.equals(a,c))?null:a):e?[...e]:[];o.length>0&&this.notify("vertexs:added",{added:o,cell:this,edge:this}),r.length>0&&this.notify("vertexs:removed",{removed:r,cell:this,edge:this})}getDefaultMarkup(){return this.store.get("defaultMarkup")||xe.getEdgeMarkup()}getMarkup(){return super.getMarkup()||this.getDefaultMarkup()}translate(e,n,o={}){return o.translateBy=o.translateBy||this.id,o.tx=e,o.ty=n,this.applyToPoints(r=>({x:(r.x||0)+e,y:(r.y||0)+n}),o)}scale(e,n,o,r={}){return this.applyToPoints(a=>_.create(a).scale(e,n,o).toJSON(),r)}applyToPoints(e,n={}){const o={},r=this.getSource(),a=this.getTarget();_.isPointLike(r)&&(o.source=e(r)),_.isPointLike(a)&&(o.target=e(a));const c=this.getVertices();return c.length>0&&(o.vertices=c.map(e)),this.store.set(o,n),this}getBBox(){return this.getPolyline().bbox()}getConnectionPoint(){return this.getPolyline().pointAt(.5)}getPolyline(){const e=[this.getSourcePoint(),...this.getVertices().map(n=>_.create(n)),this.getTargetPoint()];return new Fe(e)}updateParent(e){let n=null;const o=this.getSourceCell(),r=this.getTargetCell(),a=this.getParent();return o&&r&&(n=o===r||o.isDescendantOf(r)?r:r.isDescendantOf(o)?o:ae.getCommonAncestor(o,r)),a&&(!n||n.id!==a.id)&&a.unembed(this,e),n&&n.embed(this,e),n}hasLoop(e={}){const n=this.getSource(),o=this.getTarget(),r=n.cell,a=o.cell;if(!r||!a)return!1;let c=r===a;if(!c&&e.deep&&this._model){const l=this.getSourceCell(),h=this.getTargetCell();l&&h&&(c=l.isAncestorOf(h,e)||h.isAncestorOf(l,e))}return c}getFragmentAncestor(){const e=[this,this.getSourceNode(),this.getTargetNode()].filter(n=>null!=n);return this.getCommonAncestor(...e)}isFragmentDescendantOf(e){const n=this.getFragmentAncestor();return!!n&&(n.id===e.id||n.isDescendantOf(e))}}return i.defaults={},i})();(function(i){i.equalTerminals=function t(e,n){return e.cell===n.cell&&(e.port===n.port||null==e.port&&null==n.port)}})(je||(je={})),function(i){i.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}},i.parseStringLabel=function t(e){return{attrs:{label:{text:e}}}}}(je||(je={})),function(i){i.toStringTag=`X6.${i.name}`,i.isEdge=function t(e){if(null==e)return!1;if(e instanceof i)return!0;const n=e[Symbol.toStringTag];return(null==n||n===i.toStringTag)&&"function"==typeof e.isNode&&"function"==typeof e.isEdge&&"function"==typeof e.prop&&"function"==typeof e.attr&&"function"==typeof e.disconnect&&"function"==typeof e.getSource&&"function"==typeof e.getTarget}}(je||(je={})),function(i){i.registry=Re.create({type:"edge",process(t,e){if(_o.exist(t,!1))throw new Error(`Edge with name '${t}' was registered by anthor Node`);if("function"==typeof e)return e.config({shape:t}),e;let n=i;const{inherit:o="edge"}=e,r=ya(e,["inherit"]);if("string"==typeof o){const c=this.get(o||"edge");null==c&&o?this.onNotFound(o,"inherited"):n=c}else n=o;null==r.constructorName&&(r.constructorName=t);const a=n.define.call(n,r);return a.config({shape:t}),a}}),_o.setEdgeRegistry(i.registry)}(je||(je={})),function(i){let t=0;i.define=function n(r){const{constructorName:a,overwrite:c}=r,l=ya(r,["constructorName","overwrite"]),h=al(function e(r){return r?pl(r):(t+=1,`CustomEdge${t}`)}(a||l.shape),this);return h.config(l),l.shape&&i.registry.register(l.shape,h,c),h},i.create=function o(r){const a=r.shape||"edge",c=i.registry.get(a);return c?new c(r):i.registry.onNotFound(a)}}(je||(je={})),function(i){const t="basic.edge";i.config({shape:t,propHooks(e){const{label:n,vertices:o}=e,r=ya(e,["label","vertices"]);if(n){null==r.labels&&(r.labels=[]);const a="string"==typeof n?i.parseStringLabel(n):n;r.labels.push(a)}return o&&Array.isArray(o)&&(r.vertices=o.map(a=>_.create(a).toJSON())),r}}),i.registry.register(t,i)}(je||(je={}));class j6 extends Ee{constructor(t,e={}){super(),this.length=0,this.comparator=e.comparator||"zIndex",this.clean(),t&&this.reset(t,{silent:!0})}toJSON(){return this.cells.map(t=>t.toJSON())}add(t,e,n){let o,r;"number"==typeof e?(o=e,r=Object.assign({merge:!1},n)):(o=this.length,r=Object.assign({merge:!1},e)),o>this.length&&(o=this.length),o<0&&(o+=this.length+1);const a=Array.isArray(t)?t:[t],c=this.comparator&&"number"!=typeof e&&!1!==r.sort,l=this.comparator||null;let h=!1;const u=[],d=[];return a.forEach(f=>{const p=this.get(f);p?r.merge&&!f.isSameStore(p)&&(p.setProp(f.getProp(),n),d.push(p),c&&!h&&(h=null==l||"function"==typeof l?p.hasChanged():"string"==typeof l?p.hasChanged(l):l.some(g=>p.hasChanged(g)))):(u.push(f),this.reference(f))}),u.length&&(c&&(h=!0),this.cells.splice(o,0,...u),this.length=this.cells.length),h&&this.sort({silent:!0}),r.silent||(u.forEach((f,p)=>{const g={cell:f,index:o+p,options:r};this.trigger("added",g),r.dryrun||f.notify("added",Object.assign({},g))}),h&&this.trigger("sorted"),(u.length||d.length)&&this.trigger("updated",{added:u,merged:d,removed:[],options:r})),this}remove(t,e={}){const n=Array.isArray(t)?t:[t],o=this.removeCells(n,e);return!e.silent&&o.length>0&&this.trigger("updated",{options:e,removed:o,added:[],merged:[]}),Array.isArray(t)?o:o[0]}removeCells(t,e){const n=[];for(let o=0;o<t.length;o+=1){const r=this.get(t[o]);if(null==r)continue;const a=this.cells.indexOf(r);this.cells.splice(a,1),this.length-=1,delete this.map[r.id],n.push(r),this.unreference(r),e.dryrun||r.remove(),e.silent||(this.trigger("removed",{cell:r,index:a,options:e}),e.dryrun||r.notify("removed",{cell:r,index:a,options:e}))}return n}reset(t,e={}){const n=this.cells.slice();if(n.forEach(o=>this.unreference(o)),this.clean(),this.add(t,Object.assign({silent:!0},e)),!e.silent){const o=this.cells.slice();this.trigger("reseted",{options:e,previous:n,current:o});const r=[],a=[];o.forEach(c=>{n.some(h=>h.id===c.id)||r.push(c)}),n.forEach(c=>{o.some(h=>h.id===c.id)||a.push(c)}),this.trigger("updated",{options:e,added:r,removed:a,merged:[]})}return this}push(t,e){return this.add(t,this.length,e)}pop(t){const e=this.at(this.length-1);return this.remove(e,t)}unshift(t,e){return this.add(t,0,e)}shift(t){const e=this.at(0);return this.remove(e,t)}get(t){return null==t?null:this.map["string"==typeof t||"number"==typeof t?t:t.id]||null}has(t){return null!=this.get(t)}at(t){return t<0&&(t+=this.length),this.cells[t]||null}first(){return this.at(0)}last(){return this.at(-1)}indexOf(t){return this.cells.indexOf(t)}toArray(){return this.cells.slice()}sort(t={}){return null!=this.comparator&&(this.cells=hl(this.cells,this.comparator),t.silent||this.trigger("sorted")),this}clone(){return new(0,this.constructor)(this.cells.slice(),{comparator:this.comparator})}reference(t){this.map[t.id]=t,t.on("*",this.notifyCellEvent,this)}unreference(t){t.off("*",this.notifyCellEvent,this),delete this.map[t.id]}notifyCellEvent(t,e){const n=e.cell;this.trigger(`cell:${t}`,e),n&&(n.isNode()?this.trigger(`node:${t}`,Object.assign(Object.assign({},e),{node:n})):n.isEdge()&&this.trigger(`edge:${t}`,Object.assign(Object.assign({},e),{edge:n})))}clean(){this.length=0,this.cells=[],this.map={}}}class Vt extends Ee{get[Symbol.toStringTag](){return Vt.toStringTag}constructor(t=[]){super(),this.batches={},this.addings=new WeakMap,this.nodes={},this.edges={},this.outgoings={},this.incomings={},this.collection=new j6(t),this.setup()}notify(t,e){this.trigger(t,e);const n=this.graph;return n&&n.trigger("sorted"===t||"reseted"===t||"updated"===t?`model:${t}`:t,e),this}setup(){const t=this.collection;t.on("sorted",()=>this.notify("sorted",null)),t.on("updated",e=>this.notify("updated",e)),t.on("cell:change:zIndex",()=>this.sortOnChangeZ()),t.on("added",({cell:e})=>{this.onCellAdded(e)}),t.on("removed",e=>{const n=e.cell;this.onCellRemoved(n,e.options),this.notify("cell:removed",e),n.isNode()?this.notify("node:removed",Object.assign(Object.assign({},e),{node:n})):n.isEdge()&&this.notify("edge:removed",Object.assign(Object.assign({},e),{edge:n}))}),t.on("reseted",e=>{this.onReset(e.current),this.notify("reseted",e)}),t.on("edge:change:source",({edge:e})=>this.onEdgeTerminalChanged(e,"source")),t.on("edge:change:target",({edge:e})=>{this.onEdgeTerminalChanged(e,"target")})}sortOnChangeZ(){this.collection.sort()}onCellAdded(t){const e=t.id;t.isEdge()?(t.updateParent(),this.edges[e]=!0,this.onEdgeTerminalChanged(t,"source"),this.onEdgeTerminalChanged(t,"target")):this.nodes[e]=!0}onCellRemoved(t,e){const n=t.id;if(t.isEdge()){delete this.edges[n];const o=t.getSource(),r=t.getTarget();if(o&&o.cell){const a=this.outgoings[o.cell],c=a?a.indexOf(n):-1;c>=0&&(a.splice(c,1),0===a.length&&delete this.outgoings[o.cell])}if(r&&r.cell){const a=this.incomings[r.cell],c=a?a.indexOf(n):-1;c>=0&&(a.splice(c,1),0===a.length&&delete this.incomings[r.cell])}}else delete this.nodes[n];e.clear||(e.disconnectEdges?this.disconnectConnectedEdges(t,e):this.removeConnectedEdges(t,e)),t.model===this&&(t.model=null)}onReset(t){this.nodes={},this.edges={},this.outgoings={},this.incomings={},t.forEach(e=>this.onCellAdded(e))}onEdgeTerminalChanged(t,e){const n="source"===e?this.outgoings:this.incomings,o=t.previous(e);if(o&&o.cell){const a=ae.isCell(o.cell)?o.cell.id:o.cell,c=n[a],l=c?c.indexOf(t.id):-1;l>=0&&(c.splice(l,1),0===c.length&&delete n[a])}const r=t.getTerminal(e);if(r&&r.cell){const a=ae.isCell(r.cell)?r.cell.id:r.cell,c=n[a]||[];-1===c.indexOf(t.id)&&c.push(t.id),n[a]=c}}prepareCell(t,e){return!t.model&&(!e||!e.dryrun)&&(t.model=this),null==t.zIndex&&t.setZIndex(this.getMaxZIndex()+1,{silent:!0}),t}resetCells(t,e={}){return t.map(n=>this.prepareCell(n,Object.assign(Object.assign({},e),{dryrun:!0}))),this.collection.reset(t,e),t.map(n=>this.prepareCell(n,{options:e})),this}clear(t={}){const e=this.getCells();if(0===e.length)return this;const n=Object.assign(Object.assign({},t),{clear:!0});return this.batchUpdate("clear",()=>{const o=e.sort((r,a)=>(r.isEdge()?1:2)-(a.isEdge()?1:2));for(;o.length>0;){const r=o.shift();r&&r.remove(n)}},n),this}addNode(t,e={}){const n=Ze.isNode(t)?t:this.createNode(t);return this.addCell(n,e),n}updateNode(t,e={}){const n=this.createNode(t),o=n.getProp();return n.dispose(),this.updateCell(o,e)}createNode(t){return Ze.create(t)}addEdge(t,e={}){const n=je.isEdge(t)?t:this.createEdge(t);return this.addCell(n,e),n}createEdge(t){return je.create(t)}updateEdge(t,e={}){const n=this.createEdge(t),o=n.getProp();return n.dispose(),this.updateCell(o,e)}addCell(t,e={}){return Array.isArray(t)?this.addCells(t,e):(!this.collection.has(t)&&!this.addings.has(t)&&(this.addings.set(t,!0),this.collection.add(this.prepareCell(t,e),e),t.eachChild(n=>this.addCell(n,e)),this.addings.delete(t)),this)}addCells(t,e={}){const n=t.length;if(0===n)return this;const o=Object.assign(Object.assign({},e),{position:n-1,maxPosition:n-1});return this.startBatch("add",Object.assign(Object.assign({},o),{cells:t})),t.forEach(r=>{this.addCell(r,o),o.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},o),{cells:t})),this}updateCell(t,e={}){const n=t.id&&this.getCell(t.id);return!!n&&this.batchUpdate("update",()=>(Object.entries(t).forEach(([o,r])=>n.setProp(o,r,e)),!0),t)}removeCell(t,e={}){const n="string"==typeof t?this.getCell(t):t;return n&&this.has(n)?this.collection.remove(n,e):null}updateCellId(t,e){this.startBatch("update",{id:e}),t.prop("id",e);const n=t.clone({keepId:!0});return this.addCell(n),this.getConnectedEdges(t).forEach(r=>{const a=r.getSourceCell(),c=r.getTargetCell();a===t&&r.setSource(Object.assign(Object.assign({},r.getSource()),{cell:e})),c===t&&r.setTarget(Object.assign(Object.assign({},r.getTarget()),{cell:e}))}),this.removeCell(t),this.stopBatch("update",{id:e}),n}removeCells(t,e={}){return t.length?this.batchUpdate("remove",()=>t.map(n=>this.removeCell(n,e))):[]}removeConnectedEdges(t,e={}){const n=this.getConnectedEdges(t);return n.forEach(o=>{o.remove(e)}),n}disconnectConnectedEdges(t,e={}){const n="string"==typeof t?t:t.id;this.getConnectedEdges(t).forEach(o=>{const r=o.getSourceCellId(),a=o.getTargetCellId();r===n&&o.setSource({x:0,y:0},e),a===n&&o.setTarget({x:0,y:0},e)})}has(t){return this.collection.has(t)}total(){return this.collection.length}indexOf(t){return this.collection.indexOf(t)}getCell(t){return this.collection.get(t)}getCells(){return this.collection.toArray()}getFirstCell(){return this.collection.first()}getLastCell(){return this.collection.last()}getMinZIndex(){const t=this.collection.first();return t&&t.getZIndex()||0}getMaxZIndex(){const t=this.collection.last();return t&&t.getZIndex()||0}getCellsFromCache(t){return t?Object.keys(t).map(e=>this.getCell(e)).filter(e=>null!=e):[]}getNodes(){return this.getCellsFromCache(this.nodes)}getEdges(){return this.getCellsFromCache(this.edges)}getOutgoingEdges(t){const n=this.outgoings["string"==typeof t?t:t.id];return n?n.map(o=>this.getCell(o)).filter(o=>o&&o.isEdge()):null}getIncomingEdges(t){const n=this.incomings["string"==typeof t?t:t.id];return n?n.map(o=>this.getCell(o)).filter(o=>o&&o.isEdge()):null}getConnectedEdges(t,e={}){const n=[],o="string"==typeof t?this.getCell(t):t;if(null==o)return n;const r={},a=e.indirect;let c=e.incoming,l=e.outgoing;null==c&&null==l&&(c=l=!0);const h=(u,d)=>{if((d?this.getOutgoingEdges(u):this.getIncomingEdges(u))?.forEach(p=>{r[p.id]||(n.push(p),r[p.id]=!0,a&&(c&&h(p,!1),l&&h(p,!0)))}),a&&u.isEdge()){const p=d?u.getTargetCell():u.getSourceCell();p&&p.isEdge()&&(r[p.id]||(n.push(p),h(p,d)))}};if(l&&h(o,!0),c&&h(o,!1),e.deep){const u=o.getDescendants({deep:!0}),d={};u.forEach(p=>{p.isNode()&&(d[p.id]=!0)});const f=(p,g)=>{(g?this.getOutgoingEdges(p.id):this.getIncomingEdges(p.id))?.forEach(v=>{if(!r[v.id]){const b=v.getSourceCell(),y=v.getTargetCell();if(!e.enclosed&&b&&d[b.id]&&y&&d[y.id])return;n.push(v),r[v.id]=!0}})};u.forEach(p=>{p.isEdge()||(l&&f(p,!0),c&&f(p,!1))})}return n}isBoundary(t,e){const n="string"==typeof t?this.getCell(t):t,o=e?this.getIncomingEdges(n):this.getOutgoingEdges(n);return null==o||0===o.length}getBoundaryNodes(t){const e=[];return Object.keys(this.nodes).forEach(n=>{if(this.isBoundary(n,t)){const o=this.getCell(n);o&&e.push(o)}}),e}getRoots(){return this.getBoundaryNodes(!0)}getLeafs(){return this.getBoundaryNodes(!1)}isRoot(t){return this.isBoundary(t,!0)}isLeaf(t){return this.isBoundary(t,!1)}getNeighbors(t,e={}){let n=e.incoming,o=e.outgoing;null==n&&null==o&&(n=o=!0);const a=this.getConnectedEdges(t,e).reduce((c,l)=>{const h=l.hasLoop(e),u=l.getSourceCell(),d=l.getTargetCell();return n&&u&&u.isNode()&&!c[u.id]&&(h||u!==t&&(!e.deep||!u.isDescendantOf(t)))&&(c[u.id]=u),o&&d&&d.isNode()&&!c[d.id]&&(h||d!==t&&(!e.deep||!d.isDescendantOf(t)))&&(c[d.id]=d),c},{});if(t.isEdge()){if(n){const c=t.getSourceCell();c&&c.isNode()&&!a[c.id]&&(a[c.id]=c)}if(o){const c=t.getTargetCell();c&&c.isNode()&&!a[c.id]&&(a[c.id]=c)}}return Object.keys(a).map(c=>a[c])}isNeighbor(t,e,n={}){let o=n.incoming,r=n.outgoing;return null==o&&null==r&&(o=r=!0),this.getConnectedEdges(t,n).some(a=>{const c=a.getSourceCell(),l=a.getTargetCell();return!!(o&&c&&c.id===e.id||r&&l&&l.id===e.id)})}getSuccessors(t,e={}){const n=[];return this.search(t,(o,r)=>{o!==t&&this.matchDistance(r,e.distance)&&n.push(o)},Object.assign(Object.assign({},e),{outgoing:!0})),n}isSuccessor(t,e,n={}){let o=!1;return this.search(t,(r,a)=>{if(r===e&&r!==t&&this.matchDistance(a,n.distance))return o=!0,!1},Object.assign(Object.assign({},n),{outgoing:!0})),o}getPredecessors(t,e={}){const n=[];return this.search(t,(o,r)=>{o!==t&&this.matchDistance(r,e.distance)&&n.push(o)},Object.assign(Object.assign({},e),{incoming:!0})),n}isPredecessor(t,e,n={}){let o=!1;return this.search(t,(r,a)=>{if(r===e&&r!==t&&this.matchDistance(a,n.distance))return o=!0,!1},Object.assign(Object.assign({},n),{incoming:!0})),o}matchDistance(t,e){return null==e||("function"==typeof e?e(t):!(!Array.isArray(e)||!e.includes(t))||t===e)}getCommonAncestor(...t){const e=[];return t.forEach(n=>{n&&(Array.isArray(n)?e.push(...n):e.push(n))}),ae.getCommonAncestor(...e)}getSubGraph(t,e={}){const n=[],o={},r=[],a=[],c=l=>{o[l.id]||(n.push(l),o[l.id]=l,l.isEdge()&&a.push(l),l.isNode()&&r.push(l))};return t.forEach(l=>{c(l),e.deep&&l.getDescendants({deep:!0}).forEach(u=>c(u))}),a.forEach(l=>{const h=l.getSourceCell(),u=l.getTargetCell();h&&!o[h.id]&&(n.push(h),o[h.id]=h,h.isNode()&&r.push(h)),u&&!o[u.id]&&(n.push(u),o[u.id]=u,u.isNode()&&r.push(u))}),r.forEach(l=>{this.getConnectedEdges(l,e).forEach(u=>{const d=u.getSourceCell(),f=u.getTargetCell();!o[u.id]&&d&&o[d.id]&&f&&o[f.id]&&(n.push(u),o[u.id]=u)})}),n}cloneSubGraph(t,e={}){const n=this.getSubGraph(t,e);return this.cloneCells(n)}cloneCells(t){return ae.cloneCells(t)}getNodesFromPoint(t,e){const n="number"==typeof t?{x:t,y:e||0}:t;return this.getNodes().filter(o=>o.getBBox().containsPoint(n))}getNodesInArea(t,e,n,o,r){const a="number"==typeof t?new F(t,e,n,o):F.create(t),c="number"==typeof t?r:e,l=c&&c.strict;return this.getNodes().filter(h=>{const u=h.getBBox();return l?a.containsRect(u):a.isIntersectWithRect(u)})}getEdgesInArea(t,e,n,o,r){const a="number"==typeof t?new F(t,e,n,o):F.create(t),c="number"==typeof t?r:e,l=c&&c.strict;return this.getEdges().filter(h=>{const u=h.getBBox();return 0===u.width?u.inflate(1,0):0===u.height&&u.inflate(0,1),l?a.containsRect(u):a.isIntersectWithRect(u)})}getNodesUnderNode(t,e={}){const n=t.getBBox();return(null==e.by||"bbox"===e.by?this.getNodesInArea(n):this.getNodesFromPoint(n[e.by])).filter(r=>t.id!==r.id&&!r.isDescendantOf(t))}getAllCellsBBox(){return this.getCellsBBox(this.getCells())}getCellsBBox(t,e={}){return ae.getCellsBBox(t,e)}search(t,e,n={}){n.breadthFirst?this.breadthFirstSearch(t,e,n):this.depthFirstSearch(t,e,n)}breadthFirstSearch(t,e,n={}){const o=[],r={},a={};for(o.push(t),a[t.id]=0;o.length>0;){const c=o.shift();null==c||r[c.id]||(r[c.id]=!0,!1===Z(e,this,c,a[c.id]))||this.getNeighbors(c,n).forEach(h=>{a[h.id]=a[c.id]+1,o.push(h)})}}depthFirstSearch(t,e,n={}){const o=[],r={},a={};for(o.push(t),a[t.id]=0;o.length>0;){const c=o.pop();if(null==c||r[c.id]||(r[c.id]=!0,!1===Z(e,this,c,a[c.id])))continue;const l=this.getNeighbors(c,n),h=o.length;l.forEach(u=>{a[u.id]=a[c.id]+1,o.splice(h,0,u)})}}getShortestPath(t,e,n={}){const o={};this.getEdges().forEach(h=>{const u=h.getSourceCellId(),d=h.getTargetCellId();u&&d&&(o[u]||(o[u]=[]),o[d]||(o[d]=[]),o[u].push(d),n.directed||o[d].push(u))});const a=Pl.run(o,"string"==typeof t?t:t.id,n.weight),c=[];let l="string"==typeof e?e:e.id;for(a[l]&&c.push(l);l=a[l];)c.unshift(l);return c}translate(t,e,n){return this.getCells().filter(o=>!o.hasParent()).forEach(o=>o.translate(t,e,n)),this}resize(t,e,n){return this.resizeCells(t,e,this.getCells(),n)}resizeCells(t,e,n,o={}){const r=this.getCellsBBox(n);if(r){const a=Math.max(t/r.width,0),c=Math.max(e/r.height,0),l=r.getOrigin();n.forEach(h=>h.scale(a,c,l,o))}return this}toJSON(t={}){return Vt.toJSON(this.getCells(),t)}parseJSON(t){return Vt.fromJSON(t)}fromJSON(t,e={}){const n=this.parseJSON(t);return this.resetCells(n,e),this}startBatch(t,e={}){return this.batches[t]=(this.batches[t]||0)+1,this.notify("batch:start",{name:t,data:e}),this}stopBatch(t,e={}){return this.batches[t]=(this.batches[t]||0)-1,this.notify("batch:stop",{name:t,data:e}),this}batchUpdate(t,e,n={}){this.startBatch(t,n);const o=e();return this.stopBatch(t,n),o}hasActiveBatch(t=Object.keys(this.batches)){return(Array.isArray(t)?t:[t]).some(n=>this.batches[n]>0)}}(function(i){i.toStringTag=`X6.${i.name}`,i.isModel=function t(e){if(null==e)return!1;if(e instanceof i)return!0;const n=e[Symbol.toStringTag];return(null==n||n===i.toStringTag)&&"function"==typeof e.addNode&&"function"==typeof e.addEdge&&null!=e.collection}})(Vt||(Vt={})),function(i){i.toJSON=function t(n,o={}){return{cells:n.map(r=>r.toJSON(o))}},i.fromJSON=function e(n){const o=[];return Array.isArray(n)?o.push(...n):(n.cells&&o.push(...n.cells),n.nodes&&n.nodes.forEach(r=>{null==r.shape&&(r.shape="rect"),o.push(r)}),n.edges&&n.edges.forEach(r=>{null==r.shape&&(r.shape="edge"),o.push(r)})),o.map(r=>{const a=r.shape;if(a){if(Ze.registry.exist(a))return Ze.create(r);if(je.registry.exist(a))return je.create(r)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}}(Vt||(Vt={}));class $n extends Ze{get label(){return this.getLabel()}set label(t){this.setLabel(t)}getLabel(){return this.getAttrByPath("text/text")}setLabel(t,e){return null==t?this.removeLabel():this.setAttrByPath("text/text",t,e),this}removeLabel(){return this.removeAttrByPath("text/text"),this}}!function(i){i.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},i.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},i.config({attrs:{text:Object.assign({},i.labelAttr)},propHooks(t){const{label:e}=t,n=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(t,["label"]);return e&&fs(n,"attrs/text/text",e),n},visible:!0})}($n||($n={}));function bI(i,t="body"){return[{tagName:i,selector:t},{tagName:"text",selector:"label"}]}function xo(i,t,e={}){const n={constructorName:i,markup:bI(i,e.selector),attrs:{[i]:Object.assign({},$n.bodyAttr)}};return(e.parent||$n).define(Pe(n,t,{shape:i}))}xo("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}});const $6=je.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}});xo("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}});class wo extends $n{get points(){return this.getPoints()}set points(t){this.setPoints(t)}getPoints(){return this.getAttrByPath("body/refPoints")}setPoints(t,e){return null==t?this.removePoints():this.setAttrByPath("body/refPoints",wo.pointsToString(t),e),this}removePoints(){return this.removeAttrByPath("body/refPoints"),this}}!function(i){function t(e){return"string"==typeof e?e:e.map(n=>Array.isArray(n)?n.join(","):_.isPointLike(n)?`${n.x}, ${n.y}`:"").join(" ")}i.pointsToString=t,i.config({propHooks(e){const{points:n}=e,o=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(e,["points"]);if(n){const r=t(n);r&&fs(o,"attrs/body/refPoints",r)}return o}})}(wo||(wo={})),xo("polygon",{},{parent:wo}),xo("polyline",{},{parent:wo}),$n.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks(i){const{path:t}=i,e=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(i,["path"]);return t&&fs(e,"attrs/body/refD",t),e}}),$n.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},An.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:Je.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},$n.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks(i){const{text:t}=i,e=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(i,["text"]);return t&&fs(e,"attrs/label/text",t),e},attrHooks:{text:{set(i,{cell:t,view:e,refBBox:n,elem:o,attrs:r}){if(!(o instanceof HTMLElement)){const a=r.style||{},c={text:i,width:-5,height:"100%"},l=Object.assign({textVerticalAnchor:"middle"},a);return Z(Kt.presets.textWrap.set,this,c,{cell:t,view:e,elem:o,refBBox:n,attrs:l}),{fill:a.color||null}}o.textContent=i},position(i,{refBBox:t,elem:e}){if(e instanceof SVGElement)return t.getCenter()}}}}),xo("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:function yI(i="xlink:href"){return e=>{const{imageUrl:n,imageWidth:o,imageHeight:r}=e,a=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(e,["imageUrl","imageWidth","imageHeight"]);if(null!=n||null!=o||null!=r){const c=()=>{if(a.attrs){const l=a.attrs.image;null!=n&&(l[i]=n),null!=o&&(l.width=o),null!=r&&(l.height=r),a.attrs.image=l}};a.attrs?(null==a.attrs.image&&(a.attrs.image={}),c()):(a.attrs={image:{}},c())}return a}}()},{selector:"image"}),xo("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}});class Ot extends dt{constructor(){super(...arguments),this.portsCache={}}get[Symbol.toStringTag](){return Ot.toStringTag}getContainerClassName(){const t=[super.getContainerClassName(),this.prefixClassName("node")];return this.can("nodeMovable")||t.push(this.prefixClassName("node-immovable")),t.join(" ")}updateClassName(t){const e=t.target;if(e.hasAttribute("magnet")){const n=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?$e(e,n):ee(e,n)}else{const n=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(n):this.addClass(n)}}isNodeView(){return!0}confirmUpdate(t,e={}){let n=t;return this.hasAction(n,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(n,"render")?(this.render(),n=this.removeAction(n,["render","update","resize","translate","rotate","ports","tools"])):(n=this.handleAction(n,"resize",()=>this.resize(),"update"),n=this.handleAction(n,"update",()=>this.update(),Ke.useCSSSelector?"ports":null),n=this.handleAction(n,"translate",()=>this.translate()),n=this.handleAction(n,"rotate",()=>this.rotate()),n=this.handleAction(n,"ports",()=>this.renderPorts()),n=this.handleAction(n,"tools",()=>{this.getFlag("tools")===t?this.renderTools():this.updateTools(e)})),n}update(t){this.cleanCache(),Ke.useCSSSelector&&this.removePorts();const e=this.cell,n=e.getSize(),o=e.getAttrs();this.updateAttrs(this.container,o,{attrs:t===o?null:t,rootBBox:new F(0,0,n.width,n.height),selectors:this.selectors}),Ke.useCSSSelector&&this.renderPorts()}renderMarkup(){const t=this.cell.markup;if(t){if("string"==typeof t)throw new TypeError("Not support string markup.");return this.renderJSONMarkup(t)}throw new TypeError("Invalid node markup.")}renderJSONMarkup(t){const e=this.parseJSONMarkup(t,this.container);this.selectors=e.selectors,this.container.appendChild(e.fragment)}render(){return this.empty(),this.renderMarkup(),this.resize(),this.updateTransform(),Ke.useCSSSelector||this.renderPorts(),this.renderTools(),this}resize(){this.cell.getAngle()&&this.rotate(),this.update()}translate(){this.updateTransform()}rotate(){this.updateTransform()}getTranslationString(){const t=this.cell.getPosition();return`translate(${t.x},${t.y})`}getRotationString(){const t=this.cell.getAngle();if(t){const e=this.cell.getSize();return`rotate(${t},${e.width/2},${e.height/2})`}}updateTransform(){let t=this.getTranslationString();const e=this.getRotationString();e&&(t+=` ${e}`),this.container.setAttribute("transform",t)}findPortElem(t,e){const n=t?this.portsCache[t]:null;return n?this.findOne(e,n.portContentElement,n.portContentSelectors||{}):null}cleanPortsCache(){this.portsCache={}}removePorts(){Object.values(this.portsCache).forEach(t=>{Qt(t.portElement)})}renderPorts(){const t=this.container,e=[];t.childNodes.forEach(a=>{e.push(a)});const n=this.cell.getParsedPorts(),o=_0(n,"zIndex"),r="auto";o[r]&&o[r].forEach(a=>{const c=this.getPortElement(a);t.append(c),e.push(c)}),Object.keys(o).forEach(a=>{if(a!==r){const c=parseInt(a,10);this.appendPorts(o[a],c,e)}}),this.updatePorts()}appendPorts(t,e,n){const o=t.map(r=>this.getPortElement(r));n[e]||e<0?Ml(n[Math.max(e,0)],o):Nn(this.container,o)}getPortElement(t){const e=this.portsCache[t.id];return e?e.portElement:this.createPortElement(t)}createPortElement(t){let e=xe.renderMarkup(this.cell.getPortContainerMarkup());const n=e.elem;if(null==n)throw new Error("Invalid port container markup.");e=xe.renderMarkup(this.getPortMarkup(t));const o=e.elem,r=e.selectors;if(null==o)throw new Error("Invalid port markup.");this.setAttrs({port:t.id,"port-group":t.group},o);let a="x6-port";t.group&&(a+=` x6-port-${t.group}`),ee(n,a),ee(n,"x6-port"),ee(o,"x6-port-body"),n.appendChild(o);let l,h,c=r;if(this.existPortLabel(t)){if(e=xe.renderMarkup(this.getPortLabelMarkup(t.label)),l=e.elem,h=e.selectors,null==l)throw new Error("Invalid port label markup.");if(r&&h){for(const d in h)if(r[d]&&d!==this.rootSelector)throw new Error("Selectors within port must be unique.");c=Object.assign(Object.assign({},r),h)}ee(l,"x6-port-label"),n.appendChild(l)}return this.portsCache[t.id]={portElement:n,portSelectors:c,portLabelElement:l,portLabelSelectors:h,portContentElement:o,portContentSelectors:r},this.graph.options.onPortRendered&&this.graph.options.onPortRendered({port:t,node:this.cell,container:n,selectors:c,labelContainer:l,labelSelectors:h,contentContainer:o,contentSelectors:r}),n}updatePorts(){const t=this.cell.getParsedGroups(),e=Object.keys(t);0===e.length?this.updatePortGroup():e.forEach(n=>this.updatePortGroup(n))}updatePortGroup(t){const e=F.fromSize(this.cell.getSize()),n=this.cell.getPortsLayoutByGroup(t,e);for(let o=0,r=n.length;o<r;o+=1){const a=n[o],l=this.portsCache[a.portId]||{},h=a.portLayout;if(this.applyPortTransform(l.portElement,h),null!=a.portAttrs){const d={selectors:l.portSelectors||{}};a.portSize&&(d.rootBBox=F.fromSize(a.portSize)),this.updateAttrs(l.portElement,a.portAttrs,d)}const u=a.labelLayout;if(u&&l.portLabelElement&&(this.applyPortTransform(l.portLabelElement,u,-(h.angle||0)),u.attrs)){const d={selectors:l.portLabelSelectors||{}};a.labelSize&&(d.rootBBox=F.fromSize(a.labelSize)),this.updateAttrs(l.portLabelElement,u.attrs,d)}}}applyPortTransform(t,e,n=0){const o=e.angle,r=e.position;ao(t,Qe().rotate(n).translate(r.x||0,r.y||0).rotate(o||0),{absolute:!0})}getPortMarkup(t){return t.markup||this.cell.portMarkup}getPortLabelMarkup(t){return t.markup||this.cell.portLabelMarkup}existPortLabel(t){return t.attrs&&t.attrs.text}getEventArgs(t,e,n){const o=this,r=o.cell;return null==e||null==n?{e:t,view:o,node:r,cell:r}:{e:t,x:e,y:n,view:o,node:r,cell:r}}getPortEventArgs(t,e,n){const o=this,r=o.cell;return n?{e:t,x:n.x,y:n.y,view:o,node:r,cell:r,port:e}:{e:t,view:o,node:r,cell:r,port:e}}notifyMouseDown(t,e,n){super.onMouseDown(t,e,n),this.notify("node:mousedown",this.getEventArgs(t,e,n))}notifyMouseMove(t,e,n){super.onMouseMove(t,e,n),this.notify("node:mousemove",this.getEventArgs(t,e,n))}notifyMouseUp(t,e,n){super.onMouseUp(t,e,n),this.notify("node:mouseup",this.getEventArgs(t,e,n))}notifyPortEvent(t,e,n){const o=this.findAttr("port",e.target);if(o){const r=e.type;"node:port:mouseenter"===t?e.type="mouseenter":"node:port:mouseleave"===t&&(e.type="mouseleave"),this.notify(t,this.getPortEventArgs(e,o,n)),e.type=r}}onClick(t,e,n){super.onClick(t,e,n),this.notify("node:click",this.getEventArgs(t,e,n)),this.notifyPortEvent("node:port:click",t,{x:e,y:n})}onDblClick(t,e,n){super.onDblClick(t,e,n),this.notify("node:dblclick",this.getEventArgs(t,e,n)),this.notifyPortEvent("node:port:dblclick",t,{x:e,y:n})}onContextMenu(t,e,n){super.onContextMenu(t,e,n),this.notify("node:contextmenu",this.getEventArgs(t,e,n)),this.notifyPortEvent("node:port:contextmenu",t,{x:e,y:n})}onMouseDown(t,e,n){this.isPropagationStopped(t)||(this.notifyMouseDown(t,e,n),this.notifyPortEvent("node:port:mousedown",t,{x:e,y:n}),this.startNodeDragging(t,e,n))}onMouseMove(t,e,n){const o=this.getEventData(t),r=o.action;if("magnet"===r)this.dragMagnet(t,e,n);else{if("move"===r){const c=o.targetView||this;c.dragNode(t,e,n),c.notify("node:moving",{e:t,x:e,y:n,view:c,cell:c.cell,node:c.cell})}this.notifyMouseMove(t,e,n),this.notifyPortEvent("node:port:mousemove",t,{x:e,y:n})}this.setEventData(t,o)}onMouseUp(t,e,n){const o=this.getEventData(t),r=o.action;"magnet"===r?this.stopMagnetDragging(t,e,n):(this.notifyMouseUp(t,e,n),this.notifyPortEvent("node:port:mouseup",t,{x:e,y:n}),"move"===r&&(o.targetView||this).stopNodeDragging(t,e,n));const a=o.targetMagnet;a&&this.onMagnetClick(t,a,e,n),this.checkMouseleave(t)}onMouseOver(t){super.onMouseOver(t),this.notify("node:mouseover",this.getEventArgs(t)),this.notifyPortEvent("node:port:mouseenter",t),this.notifyPortEvent("node:port:mouseover",t)}onMouseOut(t){super.onMouseOut(t),this.notify("node:mouseout",this.getEventArgs(t)),this.notifyPortEvent("node:port:mouseleave",t),this.notifyPortEvent("node:port:mouseout",t)}onMouseEnter(t){this.updateClassName(t),super.onMouseEnter(t),this.notify("node:mouseenter",this.getEventArgs(t))}onMouseLeave(t){super.onMouseLeave(t),this.notify("node:mouseleave",this.getEventArgs(t))}onMouseWheel(t,e,n,o){super.onMouseWheel(t,e,n,o),this.notify("node:mousewheel",Object.assign({delta:o},this.getEventArgs(t,e,n)))}onMagnetClick(t,e,n,o){const r=this.graph;r.view.getMouseMovedCount(t)>r.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:e},this.getEventArgs(t,n,o)))}onMagnetDblClick(t,e,n,o){this.notify("node:magnet:dblclick",Object.assign({magnet:e},this.getEventArgs(t,n,o)))}onMagnetContextMenu(t,e,n,o){this.notify("node:magnet:contextmenu",Object.assign({magnet:e},this.getEventArgs(t,n,o)))}onMagnetMouseDown(t,e,n,o){this.startMagnetDragging(t,n,o)}onCustomEvent(t,e,n,o){this.notify("node:customevent",Object.assign({name:e},this.getEventArgs(t,n,o))),super.onCustomEvent(t,e,n,o)}prepareEmbedding(t){const e=this.graph,o=this.getEventData(t).cell||this.cell,r=e.findViewByCell(o),a=e.snapToGrid(t.clientX,t.clientY);this.notify("node:embed",{e:t,node:o,view:r,cell:o,x:a.x,y:a.y,currentParent:o.getParent()})}processEmbedding(t,e){const n=e.cell||this.cell,o=e.graph||this.graph,r=o.options.embedding,a=r.findParent;let c="function"==typeof a?Z(a,o,{view:this,node:this.cell}).filter(f=>ae.isCell(f)&&this.cell.id!==f.id&&!f.isDescendantOf(this.cell)):o.model.getNodesUnderNode(n,{by:a});if(r.frontOnly&&c.length>0){const f=_0(c,"zIndex"),p=vO(Object.keys(f).map(g=>parseInt(g,10)));p&&(c=f[p])}c=c.filter(f=>f.visible);let l=null;const h=e.candidateEmbedView,u=r.validate;for(let f=c.length-1;f>=0;f-=1){const p=c[f];if(h&&h.cell.id===p.id){l=h;break}{const g=p.findView(o);if(Z(u,o,{child:this.cell,parent:g.cell,childView:this,parentView:g})){l=g;break}}}this.clearEmbedding(e),l&&l.highlight(null,{type:"embedding"}),e.candidateEmbedView=l;const d=o.snapToGrid(t.clientX,t.clientY);this.notify("node:embedding",{e:t,cell:n,node:n,view:o.findViewByCell(n),x:d.x,y:d.y,currentParent:n.getParent(),candidateParent:l?l.cell:null})}clearEmbedding(t){const e=t.candidateEmbedView;e&&(e.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null)}finalizeEmbedding(t,e){this.graph.startBatch("embedding");const n=e.cell||this.cell,o=e.graph||this.graph,r=o.findViewByCell(n),a=n.getParent(),c=e.candidateEmbedView;if(c?(c.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null,(null==a||a.id!==c.cell.id)&&c.cell.insertChild(n,void 0,{ui:!0})):a&&a.unembed(n,{ui:!0}),o.model.getConnectedEdges(n,{deep:!0}).forEach(l=>{l.updateParent({ui:!0})}),r&&c){const l=o.snapToGrid(t.clientX,t.clientY);r.notify("node:embedded",{e:t,cell:n,x:l.x,y:l.y,node:n,view:o.findViewByCell(n),previousParent:a,currentParent:n.getParent()})}this.graph.stopBatch("embedding")}getDelegatedView(){let t=this.cell,e=this;for(;e&&!t.isEdge();){if(!t.hasParent()||e.can("stopDelegateOnDragging"))return e;t=t.getParent(),e=this.graph.findViewByCell(t)}return null}validateMagnet(t,e,n){if("passive"!==e.getAttribute("magnet")){const o=this.graph.options.connecting.validateMagnet;return!o||Z(o,this.graph,{e:n,magnet:e,view:t,cell:t.cell})}return!1}startMagnetDragging(t,e,n){if(!this.can("magnetConnectable"))return;t.stopPropagation();const o=t.currentTarget,r=this.graph;this.setEventData(t,{targetMagnet:o}),this.validateMagnet(this,o,t)?(r.options.magnetThreshold<=0&&this.startConnectting(t,o,e,n),this.setEventData(t,{action:"magnet"}),this.stopPropagation(t)):this.onMouseDown(t,e,n),r.view.delegateDragEvents(t,this)}startConnectting(t,e,n,o){this.graph.model.startBatch("add-edge");const r=this.createEdgeFromMagnet(e,n,o);r.setEventData(t,r.prepareArrowheadDragging("target",{x:n,y:o,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(t,{edgeView:r}),r.notifyMouseDown(t,n,o)}getDefaultEdge(t,e){let n;const o=this.graph.options.connecting.createEdge;return o&&(n=Z(o,this.graph,{sourceMagnet:e,sourceView:t,sourceCell:t.cell})),n}createEdgeFromMagnet(t,e,n){const o=this.graph,r=o.model,a=this.getDefaultEdge(this,t);return a.setSource(Object.assign(Object.assign({},a.getSource()),this.getEdgeTerminal(t,e,n,a,"source"))),a.setTarget(Object.assign(Object.assign({},a.getTarget()),{x:e,y:n})),a.addTo(r,{async:!1,ui:!0}),a.findView(o)}dragMagnet(t,e,n){const o=this.getEventData(t),r=o.edgeView;if(r)r.onMouseMove(t,e,n),this.autoScrollGraph(t.clientX,t.clientY);else{const a=this.graph,c=a.options.magnetThreshold,l=this.getEventTarget(t),h=o.targetMagnet;if("onleave"===c){if(h===l||h.contains(l))return}else if(a.view.getMouseMovedCount(t)<=c)return;this.startConnectting(t,h,e,n)}}stopMagnetDragging(t,e,n){const r=this.eventData(t).edgeView;r&&(r.onMouseUp(t,e,n),this.graph.model.stopBatch("add-edge"))}notifyUnhandledMouseDown(t,e,n){this.notify("node:unhandled:mousedown",{e:t,x:e,y:n,view:this,cell:this.cell,node:this.cell})}notifyNodeMove(t,e,n,o,r){let a=[r];const c=this.graph.getPlugin("selection");if(c&&c.isSelectionMovable()){const l=c.getSelectedCells();l.includes(r)&&(a=l.filter(h=>h.isNode()))}a.forEach(l=>{this.notify(t,{e,x:n,y:o,cell:l,node:l,view:l.findView(this.graph)})})}getRestrictArea(t){const e=this.graph.options.translating.restrict,n="function"==typeof e?Z(e,this.graph,t):e;return"number"==typeof n?this.graph.transform.getGraphArea().inflate(n):!0===n?this.graph.transform.getGraphArea():n||null}startNodeDragging(t,e,n){const o=this.getDelegatedView();if(null==o||!o.can("nodeMovable"))return this.notifyUnhandledMouseDown(t,e,n);this.setEventData(t,{targetView:o,action:"move"});const r=_.create(o.cell.getPosition());o.setEventData(t,{moving:!1,offset:r.diff(e,n),restrict:this.getRestrictArea(o)})}dragNode(t,e,n){const o=this.cell,r=this.graph,a=r.getGridSize(),c=this.getEventData(t),l=c.offset,h=c.restrict;c.moving||(c.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",t,e,n,this.cell)),this.autoScrollGraph(t.clientX,t.clientY);const u=de.snapToGrid(e+l.x,a),d=de.snapToGrid(n+l.y,a);o.setPosition(u,d,{restrict:h,deep:!0,ui:!0}),r.options.embedding.enabled&&(c.embedding||(this.prepareEmbedding(t),c.embedding=!0),this.processEmbedding(t,c))}stopNodeDragging(t,e,n){const o=this.getEventData(t);o.embedding&&this.finalizeEmbedding(t,o),o.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",t,e,n,this.cell)),o.moving=!1,o.embedding=!1}autoScrollGraph(t,e){const n=this.graph.getPlugin("scroller");n&&n.autoScroll(t,e)}}(function(i){i.toStringTag=`X6.${i.name}`,i.isNodeView=function t(e){if(null==e)return!1;if(e instanceof i)return!0;const n=e[Symbol.toStringTag];return(null==n||n===i.toStringTag)&&"function"==typeof e.isNodeView&&"function"==typeof e.isEdgeView&&"function"==typeof e.confirmUpdate&&"function"==typeof e.update&&"function"==typeof e.findPortElem&&"function"==typeof e.resize&&"function"==typeof e.rotate&&"function"==typeof e.translate}})(Ot||(Ot={})),Ot.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),Ot.registry.register("node",Ot,!0);class mn extends dt{constructor(){super(...arguments),this.POINT_ROUNDING=2}get[Symbol.toStringTag](){return mn.toStringTag}getContainerClassName(){return[super.getContainerClassName(),this.prefixClassName("edge")].join(" ")}get sourceBBox(){const t=this.sourceView;if(!t){const n=this.cell.getSource();return new F(n.x,n.y)}const e=this.sourceMagnet;return t.isEdgeElement(e)?new F(this.sourceAnchor.x,this.sourceAnchor.y):t.getBBoxOfElement(e||t.container)}get targetBBox(){const t=this.targetView;if(!t){const n=this.cell.getTarget();return new F(n.x,n.y)}const e=this.targetMagnet;return t.isEdgeElement(e)?new F(this.targetAnchor.x,this.targetAnchor.y):t.getBBoxOfElement(e||t.container)}isEdgeView(){return!0}confirmUpdate(t,e={}){let n=t;if(this.hasAction(n,"source")){if(!this.updateTerminalProperties("source"))return n;n=this.removeAction(n,"source")}if(this.hasAction(n,"target")){if(!this.updateTerminalProperties("target"))return n;n=this.removeAction(n,"target")}const o=this.graph,r=this.sourceView,a=this.targetView;return o&&(r&&!o.renderer.isViewMounted(r)||a&&!o.renderer.isViewMounted(a))?n:this.hasAction(n,"render")?(this.render(),n=this.removeAction(n,["render","update","labels","tools"]),n):(n=this.handleAction(n,"update",()=>this.update(e)),n=this.handleAction(n,"labels",()=>this.onLabelsChange(e)),n=this.handleAction(n,"tools",()=>this.renderTools()),n)}render(){return this.empty(),this.renderMarkup(),this.labelContainer=null,this.renderLabels(),this.update(),this.renderTools(),this}renderMarkup(){const t=this.cell.markup;if(t){if("string"==typeof t)throw new TypeError("Not support string markup.");return this.renderJSONMarkup(t)}throw new TypeError("Invalid edge markup.")}renderJSONMarkup(t){const e=this.parseJSONMarkup(t,this.container);this.selectors=e.selectors,this.container.append(e.fragment)}customizeLabels(){if(this.labelContainer){const t=this.cell,e=t.labels;for(let n=0,o=e.length;n<o;n+=1){const l=this.graph.options.onEdgeLabelRendered;l&&l({edge:t,label:e[n],container:this.labelCache[n],selectors:this.labelSelectors[n]})}}}renderLabels(){const t=this.cell,e=t.getLabels(),n=e.length;let o=this.labelContainer;if(this.labelCache={},this.labelSelectors={},n<=0)return o&&o.parentNode&&o.parentNode.removeChild(o),this;o?this.empty(o):(o=dn("g"),this.addClass(this.prefixClassName("edge-labels"),o),this.labelContainer=o);for(let r=0,a=e.length;r<a;r+=1){const l=this.normalizeLabelMarkup(this.parseLabelMarkup(e[r].markup));let h,u;if(l)h=l.node,u=l.selectors;else{const f=t.getDefaultLabel(),p=this.normalizeLabelMarkup(this.parseLabelMarkup(f.markup));h=p.node,u=p.selectors}h.setAttribute("data-index",`${r}`),o.appendChild(h);const d=this.rootSelector;if(u[d])throw new Error("Ambiguous label root selector.");u[d]=h,this.labelCache[r]=h,this.labelSelectors[r]=u}return null==o.parentNode&&this.container.appendChild(o),this.updateLabels(),this.customizeLabels(),this}onLabelsChange(t={}){this.shouldRerenderLabels(t)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}shouldRerenderLabels(t={}){const e=this.cell.previous("labels");if(null==e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){const n=t.propertyPathArray||[],o=n.length;if(o>1&&e[n[1]]){if(2===o)return"object"==typeof t.propertyValue&&kr(t.propertyValue,"markup");if("markup"!==n[2])return!1}}return!0}parseLabelMarkup(t){return t?"string"==typeof t?this.parseLabelStringMarkup(t):this.parseJSONMarkup(t):null}parseLabelStringMarkup(t){const e=X.createVectors(t),n=document.createDocumentFragment();for(let o=0,r=e.length;o<r;o+=1)n.appendChild(e[o].node);return{fragment:n,selectors:{}}}normalizeLabelMarkup(t){if(null==t)return;const e=t.fragment;if(!(e instanceof DocumentFragment&&e.hasChildNodes()))throw new Error("Invalid label markup.");let n;const o=e.childNodes;return n=o.length>1||"G"!==o[0].nodeName.toUpperCase()?X.create("g").append(e):X.create(o[0]),n.addClass(this.prefixClassName("edge-label")),{node:n.node,selectors:t.selectors}}updateLabels(){if(this.labelContainer){const t=this.cell,e=t.labels,n=this.can("edgeLabelMovable"),o=t.getDefaultLabel();for(let r=0,a=e.length;r<a;r+=1){const c=this.labelCache[r],l=this.labelSelectors[r];c.setAttribute("cursor",n?"move":"default");const h=e[r],u=Pe({},o.attrs,h.attrs);this.updateAttrs(c,u,{selectors:l,rootBBox:h.size?F.fromSize(h.size):void 0})}}}renderTools(){const t=this.cell.getTools();return this.addTools(t),this}update(t={}){this.cleanCache(),this.updateConnection(t);const e=this.cell.getAttrs();return null!=e&&this.updateAttrs(this.container,e,{selectors:this.selectors}),this.updateLabelPositions(),this.updateTools(t),this}removeRedundantLinearVertices(t={}){const e=this.cell,n=e.getVertices(),o=[this.sourceAnchor,...n,this.targetAnchor],r=o.length,a=new Fe(o);a.simplify({threshold:.01});const c=a.points.map(h=>h.toJSON()),l=c.length;return r===l?0:(e.setVertices(c.slice(1,l-1),t),r-l)}getTerminalView(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error(`Unknown terminal type '${t}'`)}}getTerminalAnchor(t){switch(t){case"source":return _.create(this.sourceAnchor);case"target":return _.create(this.targetAnchor);default:throw new Error(`Unknown terminal type '${t}'`)}}getTerminalConnectionPoint(t){switch(t){case"source":return _.create(this.sourcePoint);case"target":return _.create(this.targetPoint);default:throw new Error(`Unknown terminal type '${t}'`)}}getTerminalMagnet(t,e={}){switch(t){case"source":{if(e.raw)return this.sourceMagnet;const n=this.sourceView;return n?this.sourceMagnet||n.container:null}case"target":{if(e.raw)return this.targetMagnet;const n=this.targetView;return n?this.targetMagnet||n.container:null}default:throw new Error(`Unknown terminal type '${t}'`)}}updateConnection(t={}){const e=this.cell;if(t.translateBy&&e.isFragmentDescendantOf(t.translateBy)){const n=t.tx||0,o=t.ty||0;this.routePoints=new Fe(this.routePoints).translate(n,o).points,this.translateConnectionPoints(n,o),this.path.translate(n,o)}else{const n=e.getVertices(),o=this.findAnchors(n);this.sourceAnchor=o.source,this.targetAnchor=o.target,this.routePoints=this.findRoutePoints(n);const r=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=r.source,this.targetPoint=r.target;const a=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,a.source||this.sourcePoint,a.target||this.targetPoint)}this.cleanCache()}findAnchors(t){const e=this.cell,r=t[0],a=t[t.length-1];return e.target.priority&&!e.source.priority?this.findAnchorsOrdered("target",a,"source",r):this.findAnchorsOrdered("source",r,"target",a)}findAnchorsOrdered(t,e,n,o){let r,a;const c=this.cell,l=c[t],h=c[n],u=this.getTerminalView(t),d=this.getTerminalView(n),f=this.getTerminalMagnet(t),p=this.getTerminalMagnet(n);if(u){let g;g=e?_.create(e):d?p:_.create(h),r=this.getAnchor(l.anchor,u,f,g,t)}else r=_.create(l);if(d){const g=_.create(o||r);a=this.getAnchor(h.anchor,d,p,g,n)}else a=_.isPointLike(h)?_.create(h):new _;return{[t]:r,[n]:a}}getAnchor(t,e,n,o,r){const a=e.isEdgeElement(n),c=this.graph.options.connecting;let h,l="string"==typeof t?{name:t}:t;if(!l){const d=a?("source"===r?c.sourceEdgeAnchor:c.targetEdgeAnchor)||c.edgeAnchor:("source"===r?c.sourceAnchor:c.targetAnchor)||c.anchor;l="string"==typeof d?{name:d}:d}if(!l)throw new Error("Anchor should be specified.");const u=l.name;if(a){const d=bo.registry.get(u);if("function"!=typeof d)return bo.registry.onNotFound(u);h=Z(d,this,e,n,o,l.args||{},r)}else{const d=zo.registry.get(u);if("function"!=typeof d)return zo.registry.onNotFound(u);h=Z(d,this,e,n,o,l.args||{},r)}return h?h.round(this.POINT_ROUNDING):new _}findRoutePoints(t=[]){const e=this.graph.options.connecting.router||jn.presets.normal,n=this.cell.getRouter()||e;let o;if("function"==typeof n)o=Z(n,this,t,{},this);else{const r="string"==typeof n?n:n.name,a="string"==typeof n?{}:n.args||{},c=r?jn.registry.get(r):jn.presets.normal;if("function"!=typeof c)return jn.registry.onNotFound(r);o=Z(c,this,t,a,this)}return null==o?t.map(r=>_.create(r)):o.map(r=>_.create(r))}findConnectionPoints(t,e,n){const o=this.cell,r=this.graph.options.connecting,a=o.getSource(),c=o.getTarget(),l=this.sourceView,h=this.targetView,u=t[0],d=t[t.length-1];let f,p;if(l&&!l.isEdgeElement(this.sourceMagnet)){const g=this.sourceMagnet||l.container,v=new $(u||n,e);f=this.getConnectionPoint(a.connectionPoint||r.sourceConnectionPoint||r.connectionPoint,l,g,v,"source")}else f=e;if(h&&!h.isEdgeElement(this.targetMagnet)){const g=this.targetMagnet||h.container,m=c.connectionPoint||r.targetConnectionPoint||r.connectionPoint,b=new $(d||e,n);p=this.getConnectionPoint(m,h,g,b,"target")}else p=n;return{source:f,target:p}}getConnectionPoint(t,e,n,o,r){const a=o.end;if(null==t)return a;const c="string"==typeof t?t:t.name,l="string"==typeof t?{}:t.args,h=yo.registry.get(c);if("function"!=typeof h)return yo.registry.onNotFound(c);const u=Z(h,this,o,e,n,l||{},r);return u?u.round(this.POINT_ROUNDING):a}findMarkerPoints(t,e,n){const o=d=>{const f=this.cell.getAttrs(),p=Object.keys(f);for(let g=0,m=p.length;g<m;g+=1){const v=f[p[g]];if(v[`${d}Marker`]||v[`${d}-marker`]){const b=v.strokeWidth||v["stroke-width"];if(b)return parseFloat(b);break}}return null},r=t[0],a=t[t.length-1];let c,l;const h=o("source");h&&(c=e.clone().move(r||n,-h));const u=o("target");return u&&(l=n.clone().move(a||e,-u)),this.sourceMarkerPoint=c||e.clone(),this.targetMarkerPoint=l||n.clone(),{source:c,target:l}}findPath(t,e,n){const o=this.cell.getConnector()||this.graph.options.connecting.connector;let r,a,c;if("string"==typeof o?r=o:(r=o.name,a=o.args),r){const h=mi.registry.get(r);if("function"!=typeof h)return mi.registry.onNotFound(r);c=h}else c=mi.presets.normal;const l=Z(c,this,e,n,t,Object.assign(Object.assign({},a),{raw:!0}),this);return"string"==typeof l?q.parse(l):l}translateConnectionPoints(t,e){this.sourcePoint.translate(t,e),this.targetPoint.translate(t,e),this.sourceAnchor.translate(t,e),this.targetAnchor.translate(t,e),this.sourceMarkerPoint.translate(t,e),this.targetMarkerPoint.translate(t,e)}updateLabelPositions(){if(null==this.labelContainer)return this;if(!this.path)return this;const e=this.cell,n=e.getLabels();if(0===n.length)return this;const o=e.getDefaultLabel(),r=this.normalizeLabelPosition(o.position);for(let a=0,c=n.length;a<c;a+=1){const h=this.normalizeLabelPosition(n[a].position),u=Pe({},r,h),d=this.getLabelTransformationMatrix(u);this.labelCache[a].setAttribute("transform",ro(d))}return this}updateTerminalProperties(t){const n=this.graph,o=this.cell[t],r=o&&o.cell,a=`${t}View`;if(!r)return this[a]=null,this.updateTerminalMagnet(t),!0;const c=n.getCellById(r);if(!c)throw new Error(`Edge's ${t} node with id "${r}" not exists`);const l=c.findView(n);return!!l&&(this[a]=l,this.updateTerminalMagnet(t),!0)}updateTerminalMagnet(t){const e=`${t}Magnet`,n=this.getTerminalView(t);if(n){let o=n.getMagnetFromEdgeTerminal(this.cell[t]);o===n.container&&(o=null),this[e]=o}else this[e]=null}getLabelPositionAngle(t){const e=this.cell.getLabelAt(t);return e&&e.position&&"object"==typeof e.position&&e.position.angle||0}getLabelPositionArgs(t){const e=this.cell.getLabelAt(t);if(e&&e.position&&"object"==typeof e.position)return e.position.options}getDefaultLabelPositionArgs(){const t=this.cell.getDefaultLabel();if(t&&t.position&&"object"==typeof t.position)return t.position.options}mergeLabelPositionArgs(t,e){return null===t?null:void 0===t?null===e?null:e:Pe({},e,t)}getConnection(){return null!=this.path?this.path.clone():null}getConnectionPathData(){if(null==this.path)return"";const t=this.cache.pathCache;return kr(t,"data")||(t.data=this.path.serialize()),t.data||""}getConnectionSubdivisions(){if(null==this.path)return null;const t=this.cache.pathCache;return kr(t,"segmentSubdivisions")||(t.segmentSubdivisions=this.path.getSegmentSubdivisions()),t.segmentSubdivisions}getConnectionLength(){if(null==this.path)return 0;const t=this.cache.pathCache;return kr(t,"length")||(t.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),t.length}getPointAtLength(t){return null==this.path?null:this.path.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getPointAtRatio(t){return null==this.path?null:(un(t)&&(t=parseFloat(t)/100),this.path.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}))}getTangentAtLength(t){return null==this.path?null:this.path.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getTangentAtRatio(t){return null==this.path?null:this.path.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPoint(t){return null==this.path?null:this.path.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointLength(t){return null==this.path?null:this.path.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointRatio(t){return null==this.path?null:this.path.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getLabelPosition(t,e,n,o){const r={distance:0};let c,a=0;"number"==typeof n?(a=n,c=o):c=n,null!=c&&(r.options=c);const l=c&&c.absoluteOffset,h=!(c&&c.absoluteDistance),u=c&&c.absoluteDistance&&c.reverseDistance,d=this.path,f={segmentSubdivisions:this.getConnectionSubdivisions()},p=new _(t,e),g=d.closestPointT(p,f),m=this.getConnectionLength()||0;let b,y,v=d.lengthAtT(g,f);if(h&&(v=m>0?v/m:0),u&&(v=-1*(m-v)||1),r.distance=v,l||(b=d.tangentAtT(g)),b)y=b.pointOffset(p);else{const z=d.pointAtT(g),C=p.diff(z);y={x:C.x,y:C.y}}return r.offset=y,r.angle=a,r}normalizeLabelPosition(t){return"number"==typeof t?{distance:t}:t}getLabelTransformationMatrix(t){const e=this.normalizeLabelPosition(t),n=e.options||{},o=e.angle||0,r=e.distance,a=r>0&&r<=1;let c=0;const l={x:0,y:0},h=e.offset;h&&("number"==typeof h?c=h:(null!=h.x&&(l.x=h.x),null!=h.y&&(l.y=h.y)));const u=0!==l.x||0!==l.y||0===c,d=n.keepGradient,f=n.ensureLegibility,p=this.path,g={segmentSubdivisions:this.getConnectionSubdivisions()},m=a?r*this.getConnectionLength():r,v=p.tangentAtLength(m,g);let b,y=o;if(v){if(u)b=v.start,b.translate(l);else{const z=v.clone();z.rotate(-90,v.start),z.setLength(c),b=z.end}d&&(y=v.angle()+o,f&&(y=he.normalize((y+90)%180-90)))}else b=p.start,u&&b.translate(l);return Qe().translate(b.x,b.y).rotate(y)}getVertexIndex(t,e){const o=this.cell.getVertices(),r=this.getClosestPointLength(new _(t,e));let a=0;if(null!=r)for(const c=o.length;a<c;a+=1){const h=this.getClosestPointLength(o[a]);if(null!=h&&r<h)break}return a}getEventArgs(t,e,n){const o=this,r=o.cell;return null==e||null==n?{e:t,view:o,edge:r,cell:r}:{e:t,x:e,y:n,view:o,edge:r,cell:r}}notifyUnhandledMouseDown(t,e,n){this.notify("edge:unhandled:mousedown",{e:t,x:e,y:n,view:this,cell:this.cell,edge:this.cell})}notifyMouseDown(t,e,n){super.onMouseDown(t,e,n),this.notify("edge:mousedown",this.getEventArgs(t,e,n))}notifyMouseMove(t,e,n){super.onMouseMove(t,e,n),this.notify("edge:mousemove",this.getEventArgs(t,e,n))}notifyMouseUp(t,e,n){super.onMouseUp(t,e,n),this.notify("edge:mouseup",this.getEventArgs(t,e,n))}onClick(t,e,n){super.onClick(t,e,n),this.notify("edge:click",this.getEventArgs(t,e,n))}onDblClick(t,e,n){super.onDblClick(t,e,n),this.notify("edge:dblclick",this.getEventArgs(t,e,n))}onContextMenu(t,e,n){super.onContextMenu(t,e,n),this.notify("edge:contextmenu",this.getEventArgs(t,e,n))}onMouseDown(t,e,n){this.notifyMouseDown(t,e,n),this.startEdgeDragging(t,e,n)}onMouseMove(t,e,n){const o=this.getEventData(t);switch(o.action){case"drag-label":this.dragLabel(t,e,n);break;case"drag-arrowhead":this.dragArrowhead(t,e,n);break;case"drag-edge":this.dragEdge(t,e,n)}return this.notifyMouseMove(t,e,n),o}onMouseUp(t,e,n){const o=this.getEventData(t);switch(o.action){case"drag-label":this.stopLabelDragging(t,e,n);break;case"drag-arrowhead":this.stopArrowheadDragging(t,e,n);break;case"drag-edge":this.stopEdgeDragging(t,e,n)}return this.notifyMouseUp(t,e,n),this.checkMouseleave(t),o}onMouseOver(t){super.onMouseOver(t),this.notify("edge:mouseover",this.getEventArgs(t))}onMouseOut(t){super.onMouseOut(t),this.notify("edge:mouseout",this.getEventArgs(t))}onMouseEnter(t){super.onMouseEnter(t),this.notify("edge:mouseenter",this.getEventArgs(t))}onMouseLeave(t){super.onMouseLeave(t),this.notify("edge:mouseleave",this.getEventArgs(t))}onMouseWheel(t,e,n,o){super.onMouseWheel(t,e,n,o),this.notify("edge:mousewheel",Object.assign({delta:o},this.getEventArgs(t,e,n)))}onCustomEvent(t,e,n,o){if(ph(t.target,"edge-tool",this.container)){if(t.stopPropagation(),this.can("useEdgeTools")){if("edge:remove"===e)return void this.cell.remove({ui:!0});this.notify("edge:customevent",Object.assign({name:e},this.getEventArgs(t,n,o)))}this.notifyMouseDown(t,n,o)}else this.notify("edge:customevent",Object.assign({name:e},this.getEventArgs(t,n,o))),super.onCustomEvent(t,e,n,o)}onLabelMouseDown(t,e,n){this.notifyMouseDown(t,e,n),this.startLabelDragging(t,e,n),this.getEventData(t).stopPropagation&&t.stopPropagation()}startEdgeDragging(t,e,n){this.can("edgeMovable")?this.setEventData(t,{x:e,y:n,moving:!1,action:"drag-edge"}):this.notifyUnhandledMouseDown(t,e,n)}dragEdge(t,e,n){const o=this.getEventData(t);o.moving||(o.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e:t,x:e,y:n,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(e-o.x,n-o.y,{ui:!0}),this.setEventData(t,{x:e,y:n}),this.notify("edge:moving",{e:t,x:e,y:n,view:this,cell:this.cell,edge:this.cell})}stopEdgeDragging(t,e,n){const o=this.getEventData(t);o.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e:t,x:e,y:n,view:this,cell:this.cell,edge:this.cell})),o.moving=!1}prepareArrowheadDragging(t,e){const n=this.getTerminalMagnet(t),o={action:"drag-arrowhead",x:e.x,y:e.y,isNewEdge:!0===e.isNewEdge,terminalType:t,initialMagnet:n,initialTerminal:rl(this.cell[t]),fallbackAction:e.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(t),options:e.options};return this.beforeArrowheadDragging(o),o}createValidateConnectionArgs(t){const e=[];e[4]=t,e[5]=this;let n,o=0,r=0;"source"===t?(o=2,n="target"):(r=2,n="source");const a=this.cell[n],c=a.cell;if(c){let l;const h=e[o]=this.graph.findViewByCell(c);h&&(l=h.getMagnetFromEdgeTerminal(a),l===h.container&&(l=void 0)),e[o+1]=l}return(l,h)=>(e[r]=l,e[r+1]=l.container===h?void 0:h,e)}beforeArrowheadDragging(t){t.zIndex=this.cell.zIndex,this.cell.toFront();const e=this.container.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(t)}afterArrowheadDragging(t){null!=t.zIndex&&(this.cell.setZIndex(t.zIndex,{ui:!0}),t.zIndex=null),this.container.style.pointerEvents=t.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(t)}validateConnection(t,e,n,o,r,a,c){const l=this.graph.options.connecting,h=l.allowLoop,u=l.allowNode,d=l.allowEdge,f=l.allowPort,p=l.allowMulti,g=l.validateConnection,m=a?a.cell:null,v="target"===r?n:t,b="target"===r?o:e;let y=!0;const z=C=>{const x="source"===r?c?c.port:null:m?m.getSourcePortId():null,w="target"===r?c?c.port:null:m?m.getTargetPortId():null;return Z(C,this.graph,{edge:m,edgeView:a,sourceView:t,targetView:n,sourcePort:x,targetPort:w,sourceMagnet:e,targetMagnet:o,sourceCell:t?t.cell:null,targetCell:n?n.cell:null,type:r})};if(null!=h&&("boolean"==typeof h?!h&&t===n&&(y=!1):y=z(h)),y&&null!=f&&("boolean"==typeof f?!f&&b&&(y=!1):y=z(f)),y&&null!=d&&("boolean"==typeof d?!d&&mn.isEdgeView(v)&&(y=!1):y=z(d)),y&&null!=u&&null==b&&("boolean"==typeof u?!u&&Ot.isNodeView(v)&&(y=!1):y=z(u)),y&&null!=p&&a){const C=a.cell,x="source"===r?c:C.getSource(),w="target"===r?c:C.getTarget(),O=c?this.graph.getCellById(c.cell):null;if(x&&w&&x.cell&&w.cell&&O)if("function"==typeof p)y=z(p);else{const P=this.graph.model.getConnectedEdges(O,{outgoing:"source"===r,incoming:"target"===r});P.length&&("withPort"===p?P.some(L=>{const k=L.getSource(),V=L.getTarget();return k&&V&&k.cell===x.cell&&V.cell===w.cell&&null!=k.port&&k.port===x.port&&null!=V.port&&V.port===w.port})&&(y=!1):p||P.some(L=>{const k=L.getSource(),V=L.getTarget();return k&&V&&k.cell===x.cell&&V.cell===w.cell})&&(y=!1))}}return y&&null!=g&&(y=z(g)),y}allowConnectToBlank(t){const e=this.graph,o=e.options.connecting.allowBlank;if("function"!=typeof o)return!!o;const r=e.findViewByCell(t),a=t.getSourceCell(),c=t.getTargetCell(),l=e.findViewByCell(a),h=e.findViewByCell(c);return Z(o,e,{edge:t,edgeView:r,sourceCell:a,targetCell:c,sourceView:l,targetView:h,sourcePort:t.getSourcePortId(),targetPort:t.getTargetPortId(),sourceMagnet:r.sourceMagnet,targetMagnet:r.targetMagnet})}validateEdge(t,e,n){const o=this.graph;if(!this.allowConnectToBlank(t)){const a=t.getSourceCellId(),c=t.getTargetCellId();if(!a||!c)return!1}const r=o.options.connecting.validateEdge;return!r||Z(r,o,{edge:t,type:e,previous:n})}arrowheadDragging(t,e,n,o){o.x=e,o.y=n,o.currentTarget!==t&&(o.currentMagnet&&o.currentView&&o.currentView.unhighlight(o.currentMagnet,{type:"magnetAdsorbed"}),o.currentView=this.graph.findViewByElem(t),o.currentView?(o.currentMagnet=o.currentView.findMagnet(t),o.currentMagnet&&this.validateConnection(...o.getValidateConnectionArgs(o.currentView,o.currentMagnet),o.currentView.getEdgeTerminal(o.currentMagnet,e,n,this.cell,o.terminalType))?o.currentView.highlight(o.currentMagnet,{type:"magnetAdsorbed"}):o.currentMagnet=null):o.currentMagnet=null),o.currentTarget=t,this.cell.prop(o.terminalType,{x:e,y:n},Object.assign(Object.assign({},o.options),{ui:!0}))}arrowheadDragged(t,e,n){const o=t.currentView,r=t.currentMagnet;if(!r||!o)return;o.unhighlight(r,{type:"magnetAdsorbed"});const a=t.terminalType,c=o.getEdgeTerminal(r,e,n,this.cell,a);this.cell.setTerminal(a,c,{ui:!0})}snapArrowhead(t,e,n){const o=this.graph,{snap:r,allowEdge:a}=o.options.connecting,c="object"==typeof r&&r.radius||50,l=o.renderer.findViewsInArea({x:t-c,y:e-c,width:2*c,height:2*c},{nodeOnly:!0});if(a){const z=o.renderer.findEdgeViewsFromPoint({x:t,y:e},c).filter(C=>C!==this);l.push(...z)}const h=n.closestView||null,u=n.closestMagnet||null;n.closestView=null,n.closestMagnet=null;let d,f=Number.MAX_SAFE_INTEGER;const p=new _(t,e);let g;l.forEach(z=>{if("false"!==z.container.getAttribute("magnet")){if(z.isNodeView())d=z.cell.getBBox().getCenter().distance(p);else if(z.isEdgeView()){const C=z.getClosestPoint(p);d=C?C.distance(p):Number.MAX_SAFE_INTEGER}d<c&&d<f&&(u===z.container||this.validateConnection(...n.getValidateConnectionArgs(z,null),z.getEdgeTerminal(z.container,t,e,this.cell,n.terminalType)))&&(f=d,n.closestView=z,n.closestMagnet=z.container)}z.container.querySelectorAll("[magnet]").forEach(C=>{if("false"!==C.getAttribute("magnet")){const x=z.getBBoxOfElement(C);d=p.distance(x.getCenter()),d<c&&d<f&&(u===C||this.validateConnection(...n.getValidateConnectionArgs(z,C),z.getEdgeTerminal(C,t,e,this.cell,n.terminalType)))&&(f=d,n.closestView=z,n.closestMagnet=C)}})});const m=n.terminalType,v=n.closestView,b=n.closestMagnet,y=u!==b;if(h&&y&&h.unhighlight(u,{type:"magnetAdsorbed"}),v){if(!y)return;v.highlight(b,{type:"magnetAdsorbed"}),g=v.getEdgeTerminal(b,t,e,this.cell,m)}else g={x:t,y:e};this.cell.setTerminal(m,g,{},Object.assign(Object.assign({},n.options),{ui:!0}))}snapArrowheadEnd(t){const e=t.closestView,n=t.closestMagnet;e&&n&&(e.unhighlight(n,{type:"magnetAdsorbed"}),t.currentMagnet=e.findMagnet(n)),t.closestView=null,t.closestMagnet=null}finishEmbedding(t){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(t.zIndex=null)}fallbackConnection(t){"remove"===t.fallbackAction?this.cell.remove({ui:!0}):this.cell.prop(t.terminalType,t.initialTerminal,{ui:!0})}notifyConnectionEvent(t,e){const n=t.terminalType,o=t.initialTerminal,r=this.cell[n];if(r&&!je.equalTerminals(o,r)){const c=this.graph,l=o,h=l.cell?c.getCellById(l.cell):null,u=l.port,d=h?c.findViewByCell(h):null,f=h||t.isNewEdge?null:_.create(o).toJSON(),p=r,g=p.cell?c.getCellById(p.cell):null,m=p.port,v=g?c.findViewByCell(g):null,b=g?null:_.create(r).toJSON();this.notify("edge:connected",{e,previousCell:h,previousPort:u,previousView:d,previousPoint:f,currentCell:g,currentView:v,currentPort:m,currentPoint:b,previousMagnet:t.initialMagnet,currentMagnet:t.currentMagnet,edge:this.cell,view:this,type:n,isNew:t.isNewEdge})}}highlightAvailableMagnets(t){const e=this.graph,n=e.model.getCells();t.marked={};for(let o=0,r=n.length;o<r;o+=1){const a=e.findViewByCell(n[o]);if(!a||a.cell.id===this.cell.id)continue;const c=Array.prototype.slice.call(a.container.querySelectorAll("[magnet]"));"false"!==a.container.getAttribute("magnet")&&c.push(a.container);const l=c.filter(h=>this.validateConnection(...t.getValidateConnectionArgs(a,h),a.getEdgeTerminal(h,t.x,t.y,this.cell,t.terminalType)));if(l.length>0){for(let h=0,u=l.length;h<u;h+=1)a.highlight(l[h],{type:"magnetAvailable"});a.highlight(null,{type:"nodeAvailable"}),t.marked[a.cell.id]=l}}}unhighlightAvailableMagnets(t){const e=t.marked||{};Object.keys(e).forEach(n=>{const o=this.graph.findViewByCell(n);o&&(e[n].forEach(a=>{o.unhighlight(a,{type:"magnetAvailable"})}),o.unhighlight(null,{type:"nodeAvailable"}))}),t.marked=null}startArrowheadDragging(t,e,n){if(!this.can("arrowheadMovable"))return void this.notifyUnhandledMouseDown(t,e,n);const r=t.target.getAttribute("data-terminal"),a=this.prepareArrowheadDragging(r,{x:e,y:n});this.setEventData(t,a)}dragArrowhead(t,e,n){const o=this.getEventData(t);this.graph.options.connecting.snap?this.snapArrowhead(e,n,o):this.arrowheadDragging(this.getEventTarget(t),e,n,o)}stopArrowheadDragging(t,e,n){const o=this.graph,r=this.getEventData(t);o.options.connecting.snap?this.snapArrowheadEnd(r):this.arrowheadDragged(r,e,n),this.validateEdge(this.cell,r.terminalType,r.initialTerminal)?(this.finishEmbedding(r),this.notifyConnectionEvent(r,t)):this.fallbackConnection(r),this.afterArrowheadDragging(r)}startLabelDragging(t,e,n){if(this.can("edgeLabelMovable")){const r=parseInt(t.currentTarget.getAttribute("data-index"),10),a=this.getLabelPositionAngle(r),c=this.getLabelPositionArgs(r),l=this.getDefaultLabelPositionArgs(),h=this.mergeLabelPositionArgs(c,l);this.setEventData(t,{index:r,positionAngle:a,positionArgs:h,stopPropagation:!0,action:"drag-label"})}else this.setEventData(t,{stopPropagation:!0});this.graph.view.delegateDragEvents(t,this)}dragLabel(t,e,n){const o=this.getEventData(t),r=this.cell.getLabelAt(o.index),a=Pe({},r,{position:this.getLabelPosition(e,n,o.positionAngle,o.positionArgs)});this.cell.setLabelAt(o.index,a)}stopLabelDragging(t,e,n){}}(function(i){i.toStringTag=`X6.${i.name}`,i.isEdgeView=function t(e){if(null==e)return!1;if(e instanceof i)return!0;const n=e[Symbol.toStringTag];return(null==n||n===i.toStringTag)&&"function"==typeof e.isNodeView&&"function"==typeof e.isEdgeView&&"function"==typeof e.confirmUpdate&&"function"==typeof e.update&&"function"==typeof e.getConnection}})(mn||(mn={})),mn.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],tools:["tools"],vertices:["vertices","update"]}}),mn.registry.register("edge",mn,!0);class en extends fe{get options(){return this.graph.options}constructor(t){super(),this.graph=t;const{selectors:e,fragment:n}=xe.parseJSONMarkup(en.markup);this.background=e.background,this.grid=e.grid,this.svg=e.svg,this.defs=e.defs,this.viewport=e.viewport,this.primer=e.primer,this.stage=e.stage,this.decorator=e.decorator,this.overlay=e.overlay,this.container=this.options.container,this.restore=en.snapshoot(this.container),ee(this.container,this.prefixClassName("graph")),Nn(this.container,n),this.delegateEvents()}delegateEvents(){return super.delegateEvents(this.constructor.events),this}guard(t,e){return!!("mousedown"===t.type&&2===t.button||this.options.guard&&this.options.guard(t,e))||(t.data&&void 0!==t.data.guarded?t.data.guarded:!(e&&e.cell&&ae.isCell(e.cell)||this.svg===t.target||this.container===t.target||this.svg.contains(t.target)))}findView(t){return this.graph.findViewByElem(t)}onDblClick(t){this.options.preventDefaultDblClick&&t.preventDefault();const e=this.normalizeEvent(t),n=this.findView(e.target);if(this.guard(e,n))return;const o=this.graph.snapToGrid(e.clientX,e.clientY);n?n.onDblClick(e,o.x,o.y):this.graph.trigger("blank:dblclick",{e,x:o.x,y:o.y})}onClick(t){if(this.getMouseMovedCount(t)<=this.options.clickThreshold){const e=this.normalizeEvent(t),n=this.findView(e.target);if(this.guard(e,n))return;const o=this.graph.snapToGrid(e.clientX,e.clientY);n?n.onClick(e,o.x,o.y):this.graph.trigger("blank:click",{e,x:o.x,y:o.y})}}isPreventDefaultContextMenu(t){let e=this.options.preventDefaultContextMenu;return"function"==typeof e&&(e=Z(e,this.graph,{view:t})),e}onContextMenu(t){const e=this.normalizeEvent(t),n=this.findView(e.target);if(this.isPreventDefaultContextMenu(n)&&t.preventDefault(),this.guard(e,n))return;const o=this.graph.snapToGrid(e.clientX,e.clientY);n?n.onContextMenu(e,o.x,o.y):this.graph.trigger("blank:contextmenu",{e,x:o.x,y:o.y})}delegateDragEvents(t,e){null==t.data&&(t.data={}),this.setEventData(t,{currentView:e||null,mouseMovedCount:0,startPosition:{x:t.clientX,y:t.clientY}}),this.delegateDocumentEvents(this.constructor.documentEvents,t.data),this.undelegateEvents()}getMouseMovedCount(t){return this.getEventData(t).mouseMovedCount||0}onMouseDown(t){const e=this.normalizeEvent(t),n=this.findView(e.target);if(this.guard(e,n))return;this.options.preventDefaultMouseDown&&t.preventDefault();const o=this.graph.snapToGrid(e.clientX,e.clientY);n?n.onMouseDown(e,o.x,o.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(e.type)&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e,x:o.x,y:o.y})),this.delegateDragEvents(e,n)}onMouseMove(t){const e=this.getEventData(t),n=e.startPosition;if(n&&n.x===t.clientX&&n.y===t.clientY||(null==e.mouseMovedCount&&(e.mouseMovedCount=0),e.mouseMovedCount+=1,e.mouseMovedCount<=this.options.moveThreshold))return;const r=this.normalizeEvent(t),a=this.graph.snapToGrid(r.clientX,r.clientY),c=e.currentView;c?c.onMouseMove(r,a.x,a.y):this.graph.trigger("blank:mousemove",{e:r,x:a.x,y:a.y}),this.setEventData(r,e)}onMouseUp(t){this.undelegateDocumentEvents();const e=this.normalizeEvent(t),n=this.graph.snapToGrid(e.clientX,e.clientY),r=this.getEventData(t).currentView;if(r?r.onMouseUp(e,n.x,n.y):this.graph.trigger("blank:mouseup",{e,x:n.x,y:n.y}),!t.isPropagationStopped()){const a=new Xt(t,{type:"click",data:t.data});this.onClick(a)}t.stopImmediatePropagation(),this.delegateEvents()}onMouseOver(t){const e=this.normalizeEvent(t),n=this.findView(e.target);if(!this.guard(e,n))if(n)n.onMouseOver(e);else{if(this.container===e.target)return;this.graph.trigger("blank:mouseover",{e})}}onMouseOut(t){const e=this.normalizeEvent(t),n=this.findView(e.target);if(!this.guard(e,n))if(n)n.onMouseOut(e);else{if(this.container===e.target)return;this.graph.trigger("blank:mouseout",{e})}}onMouseEnter(t){const e=this.normalizeEvent(t),n=this.findView(e.target);if(this.guard(e,n))return;const o=this.graph.findViewByElem(e.relatedTarget);if(n){if(o===n)return;n.onMouseEnter(e)}else{if(o)return;this.graph.trigger("graph:mouseenter",{e})}}onMouseLeave(t){const e=this.normalizeEvent(t),n=this.findView(e.target);if(this.guard(e,n))return;const o=this.graph.findViewByElem(e.relatedTarget);if(n){if(o===n)return;n.onMouseLeave(e)}else{if(o)return;this.graph.trigger("graph:mouseleave",{e})}}onMouseWheel(t){const e=this.normalizeEvent(t),n=this.findView(e.target);if(this.guard(e,n))return;const o=e.originalEvent,r=this.graph.snapToGrid(o.clientX,o.clientY),a=Math.max(-1,Math.min(1,o.wheelDelta||-o.detail));n?n.onMouseWheel(e,r.x,r.y,a):this.graph.trigger("blank:mousewheel",{e,delta:a,x:r.x,y:r.y})}onCustomEvent(t){const e=t.currentTarget,n=e.getAttribute("event")||e.getAttribute("data-event");if(n){const o=this.findView(e);if(o){const r=this.normalizeEvent(t);if(this.guard(r,o))return;const a=this.graph.snapToGrid(r.clientX,r.clientY);o.onCustomEvent(r,n,a.x,a.y)}}}handleMagnetEvent(t,e){const n=t.currentTarget,o=n.getAttribute("magnet");if(o&&"false"!==o.toLowerCase()){const r=this.findView(n);if(r){const a=this.normalizeEvent(t);if(this.guard(a,r))return;const c=this.graph.snapToGrid(a.clientX,a.clientY);Z(e,this.graph,r,a,n,c.x,c.y)}}}onMagnetMouseDown(t){this.handleMagnetEvent(t,(e,n,o,r,a)=>{e.onMagnetMouseDown(n,o,r,a)})}onMagnetDblClick(t){this.handleMagnetEvent(t,(e,n,o,r,a)=>{e.onMagnetDblClick(n,o,r,a)})}onMagnetContextMenu(t){const e=this.findView(t.target);this.isPreventDefaultContextMenu(e)&&t.preventDefault(),this.handleMagnetEvent(t,(n,o,r,a,c)=>{n.onMagnetContextMenu(o,r,a,c)})}onLabelMouseDown(t){const n=this.findView(t.currentTarget);if(n){const o=this.normalizeEvent(t);if(this.guard(o,n))return;const r=this.graph.snapToGrid(o.clientX,o.clientY);n.onLabelMouseDown(o,r.x,r.y)}}onImageDragStart(){return!1}dispose(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=()=>{}}}(function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)})([fe.dispose()],en.prototype,"dispose",null),function(i){const t=`${Ke.prefixCls}-graph`;i.markup=[{ns:Je.xhtml,tagName:"div",selector:"background",className:`${t}-background`},{ns:Je.xhtml,tagName:"div",selector:"grid",className:`${t}-grid`},{ns:Je.svg,tagName:"svg",selector:"svg",className:`${t}-svg`,attrs:{width:"100%",height:"100%","xmlns:xlink":Je.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:`${t}-svg-viewport`,children:[{tagName:"g",selector:"primer",className:`${t}-svg-primer`},{tagName:"g",selector:"stage",className:`${t}-svg-stage`},{tagName:"g",selector:"decorator",className:`${t}-svg-decorator`},{tagName:"g",selector:"overlay",className:`${t}-svg-overlay`}]}]}],i.snapshoot=function e(n){const o=n.cloneNode();return n.childNodes.forEach(r=>o.appendChild(r)),()=>{for(vs(n);n.attributes.length>0;)n.removeAttribute(n.attributes[0].name);for(let r=0,a=o.attributes.length;r<a;r+=1){const c=o.attributes[r];n.setAttribute(c.name,c.value)}o.childNodes.forEach(r=>n.appendChild(r))}}}(en||(en={})),function(i){const t=Ke.prefixCls;i.events={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel",[`mouseenter  .${t}-cell`]:"onMouseEnter",[`mouseleave  .${t}-cell`]:"onMouseLeave",[`mouseenter  .${t}-cell-tools`]:"onMouseEnter",[`mouseleave  .${t}-cell-tools`]:"onMouseLeave",[`mousedown   .${t}-cell [event]`]:"onCustomEvent",[`touchstart  .${t}-cell [event]`]:"onCustomEvent",[`mousedown   .${t}-cell [data-event]`]:"onCustomEvent",[`touchstart  .${t}-cell [data-event]`]:"onCustomEvent",[`dblclick    .${t}-cell [magnet]`]:"onMagnetDblClick",[`contextmenu .${t}-cell [magnet]`]:"onMagnetContextMenu",[`mousedown   .${t}-cell [magnet]`]:"onMagnetMouseDown",[`touchstart  .${t}-cell [magnet]`]:"onMagnetMouseDown",[`dblclick    .${t}-cell [data-magnet]`]:"onMagnetDblClick",[`contextmenu .${t}-cell [data-magnet]`]:"onMagnetContextMenu",[`mousedown   .${t}-cell [data-magnet]`]:"onMagnetMouseDown",[`touchstart  .${t}-cell [data-magnet]`]:"onMagnetMouseDown",[`dragstart   .${t}-cell image`]:"onImageDragStart",[`mousedown   .${t}-edge .${t}-edge-label`]:"onLabelMouseDown",[`touchstart  .${t}-edge .${t}-edge-label`]:"onLabelMouseDown"},i.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(en||(en={}));class et extends yt{get options(){return this.graph.options}get model(){return this.graph.model}get view(){return this.graph.view}constructor(t){super(),this.graph=t,this.init()}init(){}}class Wl extends et{init(){Ke.autoInsertCSS&&As("core",".x6-graph {\n  position: relative;\n  outline: none;\n  touch-action: none;\n}\n.x6-graph-background,\n.x6-graph-grid,\n.x6-graph-svg {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-background-stage,\n.x6-graph-grid-stage,\n.x6-graph-svg-stage {\n  user-select: none;\n}\n.x6-graph.x6-graph-pannable {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph.x6-graph-panning {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-node {\n  cursor: move;\n  /* stylelint-disable-next-line */\n}\n.x6-node.x6-node-immovable {\n  cursor: default;\n}\n.x6-node * {\n  -webkit-user-drag: none;\n}\n.x6-node .scalable * {\n  vector-effect: non-scaling-stroke;\n}\n.x6-node [magnet='true'] {\n  cursor: crosshair;\n  transition: opacity 0.3s;\n}\n.x6-node [magnet='true']:hover {\n  opacity: 0.7;\n}\n.x6-node foreignObject {\n  display: block;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-node foreignObject > body {\n  position: static;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-edge .source-marker,\n.x6-edge .target-marker {\n  vector-effect: non-scaling-stroke;\n}\n.x6-edge .connection {\n  stroke-linejoin: round;\n  fill: none;\n}\n.x6-edge .connection-wrap {\n  cursor: move;\n  opacity: 0;\n  fill: none;\n  stroke: #000;\n  stroke-width: 15;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n.x6-edge .connection-wrap:hover {\n  opacity: 0.4;\n  stroke-opacity: 0.4;\n}\n.x6-edge .vertices {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .vertices .vertex {\n  fill: #1abc9c;\n}\n.x6-edge .vertices .vertex :hover {\n  fill: #34495e;\n  stroke: none;\n}\n.x6-edge .vertices .vertex-remove {\n  cursor: pointer;\n  fill: #fff;\n}\n.x6-edge .vertices .vertex-remove-area {\n  cursor: pointer;\n  opacity: 0.1;\n}\n.x6-edge .vertices .vertex-group:hover .vertex-remove-area {\n  opacity: 1;\n}\n.x6-edge .arrowheads {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .arrowheads .arrowhead {\n  fill: #1abc9c;\n}\n.x6-edge .arrowheads .arrowhead :hover {\n  fill: #f39c12;\n  stroke: none;\n}\n.x6-edge .tools {\n  cursor: pointer;\n  opacity: 0;\n}\n.x6-edge .tools .tool-options {\n  display: none;\n}\n.x6-edge .tools .tool-remove circle {\n  fill: #f00;\n}\n.x6-edge .tools .tool-remove path {\n  fill: #fff;\n}\n.x6-edge:hover .vertices,\n.x6-edge:hover .arrowheads,\n.x6-edge:hover .tools {\n  opacity: 1;\n}\n.x6-highlight-opacity {\n  opacity: 0.3;\n}\n.x6-cell-tool-editor {\n  position: relative;\n  display: inline-block;\n  min-height: 1em;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n  white-space: normal;\n  text-align: center;\n  vertical-align: top;\n  overflow-wrap: normal;\n  outline: none;\n  transform-origin: 0 0;\n  -webkit-user-drag: none;\n}\n.x6-edge-tool-editor {\n  border: 1px solid #275fc5;\n  border-radius: 2px;\n}\n")}dispose(){Es("core")}}!function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([Wl.dispose()],Wl.prototype,"dispose",null);var Fs;(function(i){i.get=function t(e){const{grid:n}=e,c=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(e,["grid","panning","mousewheel","embedding"]),l=e.container;if(null==l)throw new Error("Ensure the container of the graph is specified and valid");null==c.width&&(c.width=l.clientWidth),null==c.height&&(c.height=l.clientHeight);const h=Pe({},i.defaults,c);return h.grid="number"==typeof n?{size:n,visible:!1}:Object.assign(Object.assign({},{size:10,visible:!1}),"boolean"==typeof n?{visible:n}:n),["panning","mousewheel","embedding"].forEach(f=>{const p=e[f];"boolean"==typeof p?h[f].enabled=p:h[f]=Object.assign(Object.assign({},h[f]),p)}),h}})(Fs||(Fs={})),function(i){i.defaults={x:0,y:0,scaling:{min:.01,max:16},grid:{size:10,visible:!1},background:!1,panning:{enabled:!1,eventTypes:["leftMouseDown"]},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:Ke.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:Ke.prefix("available-magnet")}}},connecting:{snap:!1,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,allowBlank:!0,allowMulti:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",router:"normal",connector:"normal",validateConnection:({type:t,sourceView:e,targetView:n})=>null!=("target"===t?n:e),createEdge:()=>new $6},translating:{restrict:!1},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:()=>!0},moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},async:!0,virtual:!1,guard:()=>!1}}(Fs||(Fs={}));class Ul extends et{get elem(){return this.view.grid}get grid(){return this.options.grid}init(){this.startListening(),this.draw(this.grid)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}setVisible(t){this.grid.visible!==t&&(this.grid.visible=t,this.update())}getGridSize(){return this.grid.size}setGridSize(t){this.grid.size=Math.max(t,1),this.update()}show(){this.setVisible(!0),this.update()}hide(){this.setVisible(!1),this.update()}clear(){this.elem.style.backgroundImage=""}draw(t){this.clear(),this.instance=null,Object.assign(this.grid,t),this.patterns=this.resolveGrid(t),this.update()}update(t={}){const e=this.grid.size;if(e<=1||!this.grid.visible)return this.clear();const n=this.graph.matrix(),o=this.getInstance(),r=Array.isArray(t)?t:[t];this.patterns.forEach((l,h)=>{const u=`pattern_${h}`,d=n.a||1,f=n.d||1,{update:p,markup:g}=l,m=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(l,["update","markup"]),v=Object.assign(Object.assign(Object.assign({},m),r[h]),{sx:d,sy:f,ox:n.e||0,oy:n.f||0,width:e*d,height:e*f});o.has(u)||o.add(u,X.create("pattern",{id:u,patternUnits:"userSpaceOnUse"},X.createVectors(g)).node);const b=o.get(u);"function"==typeof p&&p(b.childNodes[0],v);let y=v.ox%v.width;y<0&&(y+=v.width);let z=v.oy%v.height;z<0&&(z+=v.height),le(b,{x:y,y:z,width:v.width,height:v.height})});const a=(new XMLSerializer).serializeToString(o.root),c=`url(data:image/svg+xml;base64,${btoa(a)})`;this.elem.style.backgroundImage=c}getInstance(){return this.instance||(this.instance=new Pn),this.instance}resolveGrid(t){if(!t)return[];const e=t.type;if(null==e)return[Object.assign(Object.assign({},Pn.presets.dot),t.args)];const n=Pn.registry.get(e);if(n){let o=t.args||[];return Array.isArray(o)||(o=[o]),Array.isArray(n)?n.map((r,a)=>Object.assign(Object.assign({},r),o[a])):[Object.assign(Object.assign({},n),o[0])]}return Pn.registry.onNotFound(e)}dispose(){this.stopListening(),this.clear()}}!function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([et.dispose()],Ul.prototype,"dispose",null);class Y6 extends et{get container(){return this.graph.view.container}get viewport(){return this.graph.view.viewport}get stage(){return this.graph.view.stage}init(){this.resize()}getMatrix(){const t=this.viewport.getAttribute("transform");return t!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=t),Qe(this.viewportMatrix)}setMatrix(t){const e=Qe(t),n=ro(e);this.viewport.setAttribute("transform",n),this.viewportMatrix=e,this.viewportTransformString=n}resize(t,e){let n=void 0===t?this.options.width:t,o=void 0===e?this.options.height:e;this.options.width=n,this.options.height=o,"number"==typeof n&&(n=Math.round(n)),"number"==typeof o&&(o=Math.round(o)),this.container.style.width=null==n?"":`${n}px`,this.container.style.height=null==o?"":`${o}px`;const r=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},r)),this}getComputedSize(){let t=this.options.width,e=this.options.height;return vl(t)||(t=this.container.clientWidth),vl(e)||(e=this.container.clientHeight),{width:t,height:e}}getScale(){return function WE(i){let t,e,n,o;return i?(t=null==i.a?1:i.a,o=null==i.d?1:i.d,e=i.b,n=i.c):t=o=1,{sx:e?Math.sqrt(t*t+e*e):t,sy:n?Math.sqrt(n*n+o*o):o}}(this.getMatrix())}scale(t,e=t,n=0,o=0){if(t=this.clampScale(t),e=this.clampScale(e),n||o){const a=this.getTranslation(),c=a.tx-n*(t-1),l=a.ty-o*(e-1);(c!==a.tx||l!==a.ty)&&this.translate(c,l)}const r=this.getMatrix();return r.a=t,r.d=e,this.setMatrix(r),this.graph.trigger("scale",{sx:t,sy:e,ox:n,oy:o}),this}clampScale(t){const e=this.graph.options.scaling;return Ct(t,e.min||.01,e.max||16)}getZoom(){return this.getScale().sx}zoom(t,e){e=e||{};let n=t,o=t;const r=this.getScale(),a=this.getComputedSize();let c=a.width/2,l=a.height/2;if(e.absolute||(n+=r.sx,o+=r.sy),e.scaleGrid&&(n=Math.round(n/e.scaleGrid)*e.scaleGrid,o=Math.round(o/e.scaleGrid)*e.scaleGrid),e.maxScale&&(n=Math.min(e.maxScale,n),o=Math.min(e.maxScale,o)),e.minScale&&(n=Math.max(e.minScale,n),o=Math.max(e.minScale,o)),e.center&&(c=e.center.x,l=e.center.y),n=this.clampScale(n),o=this.clampScale(o),c||l){const h=this.getTranslation(),u=c-n/r.sx*(c-h.tx),d=l-o/r.sy*(l-h.ty);(u!==h.tx||d!==h.ty)&&this.translate(u,d)}return this.scale(n,o),this}getRotation(){return function UE(i){let t={x:0,y:1};i&&(t=kl(i,t));const e=180*Math.atan2(t.y,t.x)/Math.PI%360-90;return{angle:e%360+(e<0?360:0)}}(this.getMatrix())}rotate(t,e,n){if(null==e||null==n){const r=ye.getBBox(this.stage);e=r.width/2,n=r.height/2}const o=this.getMatrix().translate(e,n).rotate(t).translate(-e,-n);return this.setMatrix(o),this}getTranslation(){return function JE(i){return{tx:i&&i.e||0,ty:i&&i.f||0}}(this.getMatrix())}translate(t,e){const n=this.getMatrix();n.e=t||0,n.f=e||0,this.setMatrix(n);const o=this.getTranslation();return this.options.x=o.tx,this.options.y=o.ty,this.graph.trigger("translate",Object.assign({},o)),this}setOrigin(t,e){return this.translate(t||0,e||0)}fitToContent(t,e,n,o){if("object"==typeof t){const z=t;t=z.gridWidth||1,e=z.gridHeight||1,n=z.padding||0,o=z}else t=t||1,e=e||1,n=n||0,null==o&&(o={});const r=On(n),a=o.border||0,c=o.contentArea?F.create(o.contentArea):this.getContentArea(o);a>0&&c.inflate(a);const l=this.getScale(),h=this.getTranslation(),u=l.sx,d=l.sy;c.x*=u,c.y*=d,c.width*=u,c.height*=d;let f=Math.max(Math.ceil((c.width+c.x)/t),1)*t,p=Math.max(Math.ceil((c.height+c.y)/e),1)*e,g=0,m=0;("negative"===o.allowNewOrigin&&c.x<0||"positive"===o.allowNewOrigin&&c.x>=0||"any"===o.allowNewOrigin)&&(g=Math.ceil(-c.x/t)*t,g+=r.left,f+=g),("negative"===o.allowNewOrigin&&c.y<0||"positive"===o.allowNewOrigin&&c.y>=0||"any"===o.allowNewOrigin)&&(m=Math.ceil(-c.y/e)*e,m+=r.top,p+=m),f+=r.right,p+=r.bottom,f=Math.max(f,o.minWidth||0),p=Math.max(p,o.minHeight||0),f=Math.min(f,o.maxWidth||Number.MAX_SAFE_INTEGER),p=Math.min(p,o.maxHeight||Number.MAX_SAFE_INTEGER);const v=this.getComputedSize(),b=f!==v.width||p!==v.height;return(g!==h.tx||m!==h.ty)&&this.translate(g,m),b&&this.resize(f,p),new F(-g/u,-m/d,f/u,p/d)}scaleContentToFit(t={}){this.scaleContentToFitImpl(t)}scaleContentToFitImpl(t={},e=!0){let n,o;if(t.contentArea){const b=t.contentArea;n=this.graph.localToGraph(b),o=_.create(b)}else n=this.getContentBBox(t),o=this.graph.graphToLocal(n);if(!n.width||!n.height)return;const r=On(t.padding),a=t.minScale||0,c=t.maxScale||Number.MAX_SAFE_INTEGER,l=t.minScaleX||a,h=t.maxScaleX||c,u=t.minScaleY||a,d=t.maxScaleY||c;let f;if(t.viewportArea)f=t.viewportArea;else{const b=this.getComputedSize(),y=this.getTranslation();f={x:y.tx,y:y.ty,width:b.width,height:b.height}}f=F.create(f).moveAndExpand({x:r.left,y:r.top,width:-r.left-r.right,height:-r.top-r.bottom});const p=this.getScale();let g=f.width/n.width*p.sx,m=f.height/n.height*p.sy;!1!==t.preserveAspectRatio&&(g=m=Math.min(g,m));const v=t.scaleGrid;if(v&&(g=v*Math.floor(g/v),m=v*Math.floor(m/v)),g=Ct(g,l,h),m=Ct(m,u,d),this.scale(g,m),e){const b=this.options;this.translate(f.x-o.x*g-b.x,f.y-o.y*m-b.y)}}getContentArea(t={}){return!1!==t.useCellGeometry?this.model.getAllCellsBBox()||new F:ye.getBBox(this.stage)}getContentBBox(t={}){return this.graph.localToGraph(this.getContentArea(t))}getGraphArea(){const t=F.fromSize(this.getComputedSize());return this.graph.graphToLocal(t)}zoomToRect(t,e={}){const n=F.create(t),o=this.graph;e.contentArea=n,null==e.viewportArea&&(e.viewportArea={x:o.options.x,y:o.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(e,!1);const r=n.getCenter();return this.centerPoint(r.x,r.y),this}zoomToFit(t={}){return this.zoomToRect(this.getContentArea(t),t)}centerPoint(t,e){const n=this.getComputedSize(),o=this.getScale(),r=this.getTranslation(),a=n.width/2,c=n.height/2;e=c-(e="number"==typeof e?e:c)*o.sy,(r.tx!==(t=a-(t="number"==typeof t?t:a)*o.sx)||r.ty!==e)&&this.translate(t,e)}centerContent(t){const n=this.graph.getContentArea(t).getCenter();this.centerPoint(n.x,n.y)}centerCell(t){return this.positionCell(t,"center")}positionPoint(t,e,n){const o=this.getComputedSize();(e=$t(e,Math.max(0,o.width)))<0&&(e=o.width+e),(n=$t(n,Math.max(0,o.height)))<0&&(n=o.height+n);const r=this.getTranslation(),a=this.getScale(),c=e-t.x*a.sx,l=n-t.y*a.sy;(r.tx!==c||r.ty!==l)&&this.translate(c,l)}positionRect(t,e){const n=F.create(t);switch(e){case"center":return this.positionPoint(n.getCenter(),"50%","50%");case"top":return this.positionPoint(n.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(n.getTopRight(),"100%",0);case"right":return this.positionPoint(n.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(n.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(n.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(n.getBottomLeft(),0,"100%");case"left":return this.positionPoint(n.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(n.getTopLeft(),0,0);default:return this}}positionCell(t,e){const n=t.getBBox();return this.positionRect(n,e)}positionContent(t,e){const n=this.graph.getContentArea(e);return this.positionRect(n,t)}}class Jl extends et{get elem(){return this.view.background}init(){this.startListening(),this.options.background&&this.draw(this.options.background)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}updateBackgroundImage(t={}){let e=t.size||"auto auto",n=t.position||"center";const o=this.graph.transform.getScale(),r=this.graph.translate();"object"==typeof n&&(n=`${r.tx+o.sx*(n.x||0)}px ${r.ty+o.sy*(n.y||0)}px`),"object"==typeof e&&(e=F.fromSize(e).scale(o.sx,o.sy),e=`${e.width}px ${e.height}px`),this.elem.style.backgroundSize=e,this.elem.style.backgroundPosition=n}drawBackgroundImage(t,e={}){if(!(t instanceof HTMLImageElement))return void(this.elem.style.backgroundImage="");const n=this.optionsCache;if(n&&n.image!==e.image)return;let o;const r=e.opacity,a=e.size;let c=e.repeat||"no-repeat";const l=Ns.registry.get(c);if("function"==typeof l){const u=e.quality||1;t.width*=u,t.height*=u;const d=l(t,e);if(!(d instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");o=d.toDataURL("image/png"),c=e.repeat&&c!==e.repeat?e.repeat:"repeat","object"==typeof a?(a.width*=d.width/t.width,a.height*=d.height/t.height):void 0===a&&(e.size={width:d.width/u,height:d.height/u})}else o=t.src,void 0===a&&(e.size={width:t.width,height:t.height});null!=n&&"object"==typeof e.size&&e.image===n.image&&e.repeat===n.repeat&&e.quality===n.quality&&(n.size=rl(e.size));const h=this.elem.style;h.backgroundImage=`url(${o})`,h.backgroundRepeat=c,h.opacity=null==r||r>=1?"":`${r}`,this.updateBackgroundImage(e)}updateBackgroundColor(t){this.elem.style.backgroundColor=t||""}updateBackgroundOptions(t){this.graph.options.background=t}update(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}draw(t){const e=t||{};if(this.updateBackgroundOptions(t),this.updateBackgroundColor(e.color),e.image){this.optionsCache=rl(e);const n=document.createElement("img");n.onload=()=>this.drawBackgroundImage(n,t),n.setAttribute("crossorigin","anonymous"),n.src=e.image}else this.drawBackgroundImage(null),this.optionsCache=null}clear(){this.draw()}dispose(){this.clear(),this.stopListening()}}!function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([et.dispose()],Jl.prototype,"dispose",null);class G6 extends et{get widgetOptions(){return this.options.panning}get pannable(){return this.widgetOptions&&!0===this.widgetOptions.enabled}init(){this.startListening(),this.updateClassName()}startListening(){const t=this.widgetOptions.eventTypes;t&&(t.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),t.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),gt.on(this.graph.container,"mousedown",this.onRightMouseDown)),t.includes("mouseWheel")&&(this.mousewheelHandle=new Ih(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()))}stopListening(){const t=this.widgetOptions.eventTypes;t&&(t.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),t.includes("rightMouseDown")&&gt.off(this.graph.container,"mousedown",this.onRightMouseDown),t.includes("mouseWheel")&&this.mousewheelHandle&&this.mousewheelHandle.disable())}preparePanning({e:t}){const e=this.graph.getPlugin("selection"),n=e&&e.allowRubberband(t,!0);(this.allowPanning(t,!0)||this.allowPanning(t)&&!n)&&this.startPanning(t)}allowPanning(t,e){return this.pannable&&fi.isMatch(t,this.widgetOptions.modifiers,e)}startPanning(t){const e=this.view.normalizeEvent(t);this.clientX=e.clientX,this.clientY=e.clientY,this.panning=!0,this.updateClassName(),gt.on(document.body,{"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),gt.on(window,"mouseup.panning",this.stopPanning.bind(this))}pan(t){const e=this.view.normalizeEvent(t),n=e.clientX-this.clientX,o=e.clientY-this.clientY;this.clientX=e.clientX,this.clientY=e.clientY,this.graph.translateBy(n,o)}stopPanning(t){this.panning=!1,this.updateClassName(),gt.off(document.body,".panning"),gt.off(window,".panning")}updateClassName(){const t=this.view.container,e=this.view.prefixClassName("graph-panning"),n=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(ee(t,e),$e(t,n)):($e(t,e),ee(t,n)):($e(t,e),$e(t,n))}onRightMouseDown(t){2===t.button&&this.allowPanning(t,!0)&&this.startPanning(t)}allowMouseWheel(t){return this.pannable&&!t.ctrlKey}onMouseWheel(t,e,n){t.ctrlKey||this.graph.translateBy(-e,-n)}autoPanning(t,e){const o=this.graph.getGraphArea();let r=0,a=0;t<=o.left+10&&(r=-10),e<=o.top+10&&(a=-10),t>=o.right-10&&(r=10),e>=o.bottom-10&&(a=10),(0!==r||0!==a)&&this.graph.translateBy(-r,-a)}enablePanning(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}dispose(){this.stopListening()}}!function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([et.dispose()],G6.prototype,"dispose",null);class Ql extends et{constructor(){super(...arguments),this.cumulatedFactor=1}get widgetOptions(){return this.options.mousewheel}init(){this.container=this.graph.container,this.target=this.widgetOptions.global?document:this.container,this.mousewheelHandle=new Ih(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.widgetOptions.enabled&&this.enable(!0)}get disabled(){return!0!==this.widgetOptions.enabled}enable(t){(this.disabled||t)&&(this.widgetOptions.enabled=!0,this.mousewheelHandle.enable())}disable(){this.disabled||(this.widgetOptions.enabled=!1,this.mousewheelHandle.disable())}allowMouseWheel(t){const e=this.widgetOptions.guard;return(null==e||e.call(t))&&fi.isMatch(t,this.widgetOptions.modifiers)}onMouseWheel(t){const e=this.widgetOptions.guard;if((null==e||e.call(t))&&fi.isMatch(t,this.widgetOptions.modifiers)){const n=this.widgetOptions.factor||1.2;null==this.currentScale&&(this.startPos={x:t.clientX,y:t.clientY},this.currentScale=this.graph.transform.getScale().sx),this.cumulatedFactor=t.deltaY<0?this.currentScale<.15?(this.currentScale+.01)/this.currentScale:Math.round(this.currentScale*n*20)/20/this.currentScale:this.currentScale<=.15?(this.currentScale-.01)/this.currentScale:Math.round(this.currentScale*(1/n)*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const r=this.currentScale;let a=this.graph.transform.clampScale(r*this.cumulatedFactor);if(a=Ct(a,this.widgetOptions.minScale||Number.MIN_SAFE_INTEGER,this.widgetOptions.maxScale||Number.MAX_SAFE_INTEGER),a!==r)if(this.widgetOptions.zoomAtMousePosition){const u=this.graph.getPlugin("scroller")?this.graph.clientToLocal(this.startPos):this.graph.clientToGraph(this.startPos);this.graph.zoom(a,{absolute:!0,center:u.clone()})}else this.graph.zoom(a,{absolute:!0});this.currentScale=null,this.cumulatedFactor=1}}dispose(){this.disable()}}!function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([yt.dispose()],Ql.prototype,"dispose",null);class Z6 extends et{init(){this.resetRenderArea=function hb(i,t,e){var n=!0,o=!0;if("function"!=typeof i)throw new TypeError("Expected a function");return Ie(e)&&(n="leading"in e?!!e.leading:n,o="trailing"in e?!!e.trailing:o),Dc(i,t,{leading:n,maxWait:t,trailing:o})}(this.resetRenderArea,200,{leading:!0}),this.resetRenderArea(),this.startListening()}startListening(){this.graph.on("translate",this.resetRenderArea,this),this.graph.on("scale",this.resetRenderArea,this),this.graph.on("resize",this.resetRenderArea,this)}stopListening(){this.graph.off("translate",this.resetRenderArea,this),this.graph.off("scale",this.resetRenderArea,this),this.graph.off("resize",this.resetRenderArea,this)}enableVirtualRender(){this.options.virtual=!0,this.resetRenderArea()}disableVirtualRender(){this.options.virtual=!1,this.graph.renderer.setRenderArea(void 0)}resetRenderArea(){if(this.options.virtual){const t=this.graph.getGraphArea();this.graph.renderer.setRenderArea(t)}}dispose(){this.stopListening()}}!function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([et.dispose()],Z6.prototype,"dispose",null);class II{constructor(){this.isFlushing=!1,this.isFlushPending=!1,this.scheduleId=0,this.queue=[],this.frameInterval=33,this.initialTime=Date.now()}queueJob(t){if(t.priority&tn.PRIOR)t.cb();else{const e=this.findInsertionIndex(t);e>=0&&this.queue.splice(e,0,t)}}queueFlush(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.scheduleJob())}queueFlushSync(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.flushJobsSync())}clearJobs(){this.queue.length=0,this.isFlushing=!1,this.isFlushPending=!1,this.cancelScheduleJob()}flushJobs(){this.isFlushPending=!1,this.isFlushing=!0;const t=this.getCurrentTime();let e;for(;(e=this.queue.shift())&&(e.cb(),!(this.getCurrentTime()-t>=this.frameInterval)););this.isFlushing=!1,this.queue.length&&this.queueFlush()}flushJobsSync(){let t;for(this.isFlushPending=!1,this.isFlushing=!0;t=this.queue.shift();)try{t.cb()}catch(e){console.log(e)}this.isFlushing=!1}findInsertionIndex(t){let e=0,n=this.queue.length,o=n-1;const r=t.priority;for(;e<=o;){const a=(o-e>>1)+e;r<=this.queue[a].priority?e=a+1:(n=a,o=a-1)}return n}scheduleJob(){"requestIdleCallback"in window?(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.requestIdleCallback(this.flushJobs.bind(this),{timeout:100})):(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.setTimeout(this.flushJobs.bind(this)))}cancelScheduleJob(){"cancelIdleCallback"in window?(this.scheduleId&&window.cancelIdleCallback(this.scheduleId),this.scheduleId=0):(this.scheduleId&&clearTimeout(this.scheduleId),this.scheduleId=0)}getCurrentTime(){return"object"==typeof performance&&"function"==typeof performance.now?performance.now():Date.now()-this.initialTime}}var tn=(()=>(function(i){i[i.RenderEdge=2]="RenderEdge",i[i.RenderNode=4]="RenderNode",i[i.Update=8]="Update",i[i.PRIOR=1048576]="PRIOR"}(tn||(tn={})),tn))();class qe extends yt{get model(){return this.graph.model}get container(){return this.graph.view.stage}constructor(t){super(),this.views={},this.willRemoveViews={},this.queue=new II,this.graph=t,this.init()}init(){this.startListening(),this.renderViews(this.model.getCells())}startListening(){this.model.on("reseted",this.onModelReseted,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}stopListening(){this.model.off("reseted",this.onModelReseted,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}onModelReseted({options:t}){this.queue.clearJobs(),this.removeZPivots(),this.resetViews(),this.renderViews(this.model.getCells(),t)}onCellAdded({cell:t,options:e}){this.renderViews([t],e)}onCellRemoved({cell:t}){this.removeViews([t])}onCellZIndexChanged({cell:t,options:e}){const n=this.views[t.id];n&&this.requestViewUpdate(n.view,qe.FLAG_INSERT,e,tn.Update,!0)}onCellVisibleChanged({cell:t,current:e}){this.toggleVisible(t,!!e)}requestViewUpdate(t,e,n={},o=tn.Update,r=!0){const a=t.cell.id,c=this.views[a];if(!c)return;c.flag=e,c.options=n;const l=t.hasAction(e,["translate","resize","rotate"]);t.isNodeView()&&l&&(o=tn.PRIOR,r=!1),this.queue.queueJob({id:a,priority:o,cb:()=>{this.renderViewInArea(t,e,n)}}),this.getEffectedEdges(t).forEach(u=>{this.requestViewUpdate(u.view,u.flag,n,o,!1)}),r&&this.flush()}setRenderArea(t){this.renderArea=t,this.flushWaittingViews()}isViewMounted(t){if(null==t)return!1;const e=this.views[t.cell.id];return!!e&&e.state===qe.ViewState.MOUNTED}renderViews(t,e={}){t.sort((n,o)=>n.isNode()&&o.isEdge()?-1:0),t.forEach(n=>{const o=n.id;let a=0,c=this.views[o];if(c)a=qe.FLAG_INSERT;else{const l=this.createCellView(n);l&&(l.graph=this.graph,a=qe.FLAG_INSERT|l.getBootstrapFlag(),c={view:l,flag:a,options:e,state:qe.ViewState.CREATED},this.views[o]=c)}c&&this.requestViewUpdate(c.view,a,e,this.getRenderPriority(c.view),!1)}),this.flush()}renderViewInArea(t,e,n={}){const o=t.cell,r=o.id,a=this.views[r];if(!a)return;let c=0;this.isUpdateable(t)||a.state===qe.ViewState.MOUNTED?(c=this.updateView(t,e,n),a.flag=c):a.state=qe.ViewState.WAITTING,c&&o.isEdge()&&!(c&t.getFlag(["source","target"]))&&this.queue.queueJob({id:r,priority:tn.RenderEdge,cb:()=>{this.updateView(t,e,n)}})}removeViews(t){t.forEach(e=>{const n=e.id,o=this.views[n];o&&(this.willRemoveViews[n]=o,delete this.views[n],this.queue.queueJob({id:n,priority:this.getRenderPriority(o.view),cb:()=>{this.removeView(o.view)}}))}),this.flush()}flush(){this.graph.options.async?this.queue.queueFlush():this.queue.queueFlushSync()}flushWaittingViews(){Object.values(this.views).forEach(t=>{if(t&&t.state===qe.ViewState.WAITTING){const{view:e,flag:n,options:o}=t;this.requestViewUpdate(e,n,o,this.getRenderPriority(e),!1)}}),this.flush()}updateView(t,e,n={}){if(null==t)return 0;if(dt.isCellView(t)){if(e&qe.FLAG_REMOVE)return this.removeView(t.cell),0;e&qe.FLAG_INSERT&&(this.insertView(t),e^=qe.FLAG_INSERT)}return e?t.confirmUpdate(e,n):0}insertView(t){const e=this.views[t.cell.id];if(e){const n=t.cell.getZIndex(),o=this.addZPivot(n);this.container.insertBefore(t.container,o),t.cell.isVisible()||this.toggleVisible(t.cell,!1),e.state=qe.ViewState.MOUNTED,this.graph.trigger("view:mounted",{view:t})}}resetViews(){this.willRemoveViews=Object.assign(Object.assign({},this.views),this.willRemoveViews),Object.values(this.willRemoveViews).forEach(t=>{t&&this.removeView(t.view)}),this.views={},this.willRemoveViews={}}removeView(t){const e=t.cell,n=this.willRemoveViews[e.id];n&&t&&(n.view.remove(),delete this.willRemoveViews[e.id],this.graph.trigger("view:unmounted",{view:t}))}toggleVisible(t,e){const n=this.model.getConnectedEdges(t);for(let r=0,a=n.length;r<a;r+=1){const c=n[r];if(e){const l=c.getSourceCell(),h=c.getTargetCell();if(l&&!l.isVisible()||h&&!h.isVisible())continue;this.toggleVisible(c,!0)}else this.toggleVisible(c,!1)}const o=this.views[t.id];o&&Ye(o.view.container,{display:e?"unset":"none"})}addZPivot(t=0){null==this.zPivots&&(this.zPivots={});const e=this.zPivots;let n=e[t];if(n)return n;n=e[t]=document.createComment(`z-index:${t+1}`);let o=-1/0;for(const a in e){const c=+a;c<t&&c>o&&(o=c)}const r=this.container;return r.insertBefore(n,o!==-1/0?e[o].nextSibling:r.firstChild),n}removeZPivots(){this.zPivots&&Object.values(this.zPivots).forEach(t=>{t&&t.parentNode&&t.parentNode.removeChild(t)}),this.zPivots={}}createCellView(t){const e={graph:this.graph},n=this.graph.options.createCellView;if(n){const r=Z(n,this.graph,t);if(r)return new r(t,e);if(null===r)return null}const o=t.view;if(null!=o&&"string"==typeof o){const r=dt.registry.get(o);return r?new r(t,e):dt.registry.onNotFound(o)}return t.isNode()?new Ot(t,e):t.isEdge()?new mn(t,e):null}getEffectedEdges(t){const e=[],n=t.cell,o=this.model.getConnectedEdges(n);for(let r=0,a=o.length;r<a;r+=1){const c=o[r],l=this.views[c.id];if(!l)continue;const h=l.view;if(!this.isViewMounted(h))continue;const u=["update"];c.getTargetCell()===n&&u.push("target"),c.getSourceCell()===n&&u.push("source"),e.push({id:c.id,view:h,flag:h.getFlag(u)})}return e}isUpdateable(t){if(t.isNodeView())return!this.renderArea||this.renderArea.isIntersectWithRect(t.cell.getBBox());if(t.isEdgeView()){const e=t.cell,n=e.getSourceCell(),o=e.getTargetCell();if(n){const r=this.views[n.id];if(r&&!this.isViewMounted(r.view))return!1}if(o){const r=this.views[o.id];if(r&&!this.isViewMounted(r.view))return!1}}return!0}getRenderPriority(t){return t.cell.isNode()?tn.RenderNode:tn.RenderEdge}dispose(){this.stopListening()}}(function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)})([yt.dispose()],qe.prototype,"dispose",null),function(i){i.FLAG_INSERT=1<<30,i.FLAG_REMOVE=1<<29,i.FLAG_RENDER=67108863}(qe||(qe={})),function(i){let t;var e;(e=t=i.ViewState||(i.ViewState={}))[e.CREATED=0]="CREATED",e[e.MOUNTED=1]="MOUNTED",e[e.WAITTING=2]="WAITTING"}(qe||(qe={}));class Xl extends et{constructor(){super(...arguments),this.schedule=new qe(this.graph)}requestViewUpdate(t,e,n={}){this.schedule.requestViewUpdate(t,e,n)}isViewMounted(t){return this.schedule.isViewMounted(t)}setRenderArea(t){this.schedule.setRenderArea(t)}findViewByElem(t){if(null==t)return null;const n="string"==typeof t?this.options.container.querySelector(t):t instanceof Element?t:t[0];if(n){const o=this.graph.view.findAttr("data-cell-id",n);if(o){const r=this.schedule.views;if(r[o])return r[o].view}}return null}findViewByCell(t){if(null==t)return null;const e=ae.isCell(t)?t.id:t,n=this.schedule.views;return n[e]?n[e].view:null}findViewsFromPoint(t){const e={x:t.x,y:t.y};return this.model.getCells().map(n=>this.findViewByCell(n)).filter(n=>null!=n&&ye.getBBox(n.container,{target:this.view.stage}).containsPoint(e))}findEdgeViewsFromPoint(t,e=5){return this.model.getEdges().map(n=>this.findViewByCell(n)).filter(n=>{if(null!=n){const o=n.getClosestPoint(t);if(o)return o.distance(t)<=e}return!1})}findViewsInArea(t,e={}){const n=F.create(t);return this.model.getCells().map(o=>this.findViewByCell(o)).filter(o=>{if(o){if(e.nodeOnly&&!o.isNodeView())return!1;const r=ye.getBBox(o.container,{target:this.view.stage});return 0===r.width?r.inflate(1,0):0===r.height&&r.inflate(0,1),e.strict?n.containsRect(r):n.isIntersectWithRect(r)}return!1})}dispose(){this.schedule.dispose()}}!function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([et.dispose()],Xl.prototype,"dispose",null);var q6=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e};class W6 extends et{get cid(){return this.graph.view.cid}get svg(){return this.view.svg}get defs(){return this.view.defs}isDefined(t){return null!=this.svg.getElementById(t)}filter(t){let e=t.id;const n=t.name;if(e||(e=`filter-${n}-${this.cid}-${gl(JSON.stringify(t))}`),!this.isDefined(e)){const o=uo.registry.get(n);if(null==o)return uo.registry.onNotFound(n);const r=o(t.args||{}),a=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},t.attrs),{id:e});X.create(xe.sanitize(r),a).appendTo(this.defs)}return e}gradient(t){let e=t.id;const n=t.type;if(e||(e=`gradient-${n}-${this.cid}-${gl(JSON.stringify(t))}`),!this.isDefined(e)){const a=`<${n}>${t.stops.map(l=>{const h=null!=l.opacity&&Number.isFinite(l.opacity)?l.opacity:1;return`<stop offset="${l.offset}" stop-color="${l.color}" stop-opacity="${h}"/>`}).join("")}</${n}>`,c=Object.assign({id:e},t.attrs);X.create(a,c).appendTo(this.defs)}return e}marker(t){const{id:e,refX:n,refY:o,markerUnits:r,markerOrient:a,tagName:c,children:l}=t,h=q6(t,["id","refX","refY","markerUnits","markerOrient","tagName","children"]);let u=e;if(u||(u=`marker-${this.cid}-${gl(JSON.stringify(t))}`),!this.isDefined(u)){"path"!==c&&delete h.d;const d=X.create("marker",{refX:n,refY:o,id:u,overflow:"visible",orient:a??"auto",markerUnits:r||"userSpaceOnUse"},l?l.map(f=>{var{tagName:p}=f,g=q6(f,["tagName"]);return X.create(`${p}`||"path",bs(Object.assign(Object.assign({},h),g)))}):[X.create(c||"path",bs(h))]);this.defs.appendChild(d.node)}return u}remove(t){const e=this.svg.getElementById(t);e&&e.parentNode&&e.parentNode.removeChild(e)}}class U6 extends et{getClientMatrix(){return Qe(this.view.stage.getScreenCTM())}getClientOffset(){const t=this.view.svg.getBoundingClientRect();return new _(t.left,t.top)}getPageOffset(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}snapToGrid(t,e){return("number"==typeof t?this.clientToLocalPoint(t,e):this.clientToLocalPoint(t.x,t.y)).snapToGrid(this.graph.getGridSize())}localToGraphPoint(t,e){const n=_.create(t,e);return ye.transformPoint(n,this.graph.matrix())}localToClientPoint(t,e){const n=_.create(t,e);return ye.transformPoint(n,this.getClientMatrix())}localToPagePoint(t,e){return("number"==typeof t?this.localToGraphPoint(t,e):this.localToGraphPoint(t)).translate(this.getPageOffset())}localToGraphRect(t,e,n,o){const r=F.create(t,e,n,o);return ye.transformRectangle(r,this.graph.matrix())}localToClientRect(t,e,n,o){const r=F.create(t,e,n,o);return ye.transformRectangle(r,this.getClientMatrix())}localToPageRect(t,e,n,o){return("number"==typeof t?this.localToGraphRect(t,e,n,o):this.localToGraphRect(t)).translate(this.getPageOffset())}graphToLocalPoint(t,e){const n=_.create(t,e);return ye.transformPoint(n,this.graph.matrix().inverse())}clientToLocalPoint(t,e){const n=_.create(t,e);return ye.transformPoint(n,this.getClientMatrix().inverse())}clientToGraphPoint(t,e){const n=_.create(t,e);return ye.transformPoint(n,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalPoint(t,e){const o=_.create(t,e).diff(this.getPageOffset());return this.graphToLocalPoint(o)}graphToLocalRect(t,e,n,o){const r=F.create(t,e,n,o);return ye.transformRectangle(r,this.graph.matrix().inverse())}clientToLocalRect(t,e,n,o){const r=F.create(t,e,n,o);return ye.transformRectangle(r,this.getClientMatrix().inverse())}clientToGraphRect(t,e,n,o){const r=F.create(t,e,n,o);return ye.transformRectangle(r,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalRect(t,e,n,o){const r=F.create(t,e,n,o),a=this.getPageOffset();return r.x-=a.x,r.y-=a.y,this.graphToLocalRect(r)}}class Ca extends et{constructor(){super(...arguments),this.highlights={}}init(){this.startListening()}startListening(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}stopListening(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}onCellHighlight({view:t,magnet:e,options:n={}}){const o=this.resolveHighlighter(n);if(!o)return;const r=this.getHighlighterId(e,o);if(!this.highlights[r]){const a=o.highlighter;a.highlight(t,e,Object.assign({},o.args)),this.highlights[r]={cellView:t,magnet:e,highlighter:a,args:o.args}}}onCellUnhighlight({magnet:t,options:e={}}){const n=this.resolveHighlighter(e);if(!n)return;const o=this.getHighlighterId(t,n);this.unhighlight(o)}resolveHighlighter(t){const e=this.options;let n=t.highlighter;if(null==n){const c=t.type;n=c&&e.highlighting[c]||e.highlighting.default}if(null==n)return null;const o="string"==typeof n?{name:n}:n,r=o.name,a=pn.registry.get(r);return null==a?pn.registry.onNotFound(r):(pn.check(r,a),{name:r,highlighter:a,args:o.args||{}})}getHighlighterId(t,e){return Cl(t),e.name+t.id+JSON.stringify(e.args)}unhighlight(t){const e=this.highlights[t];e&&(e.highlighter.unhighlight(e.cellView,e.magnet,e.args),delete this.highlights[t])}dispose(){Object.keys(this.highlights).forEach(t=>this.unhighlight(t)),this.stopListening()}}!function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([Ca.dispose()],Ca.prototype,"dispose",null);class J6 extends et{getScroller(){const t=this.graph.getPlugin("scroller");return t&&t.options.enabled?t:null}getContainer(){const t=this.getScroller();return t?t.container.parentElement:this.graph.container.parentElement}getSensorTarget(){const t=this.options.autoResize;if(t)return"boolean"==typeof t?this.getContainer():t}init(){if(this.options.autoResize){const e=this.getSensorTarget();e&&ta.bind(e,()=>{this.resize(e.offsetWidth,e.offsetHeight)})}}resize(t,e){const n=this.getScroller();n?n.resize(t,e):this.graph.transform.resize(t,e)}dispose(){ta.clear(this.graph.container)}}!function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([et.dispose()],J6.prototype,"dispose",null);class D extends Ee{get container(){return this.options.container}get[Symbol.toStringTag](){return D.toStringTag}constructor(t){super(),this.installedPlugins=new Set,this.options=Fs.get(t),this.css=new Wl(this),this.view=new en(this),this.defs=new W6(this),this.coord=new U6(this),this.transform=new Y6(this),this.highlight=new Ca(this),this.grid=new Ul(this),this.background=new Jl(this),this.options.model?this.model=this.options.model:(this.model=new Vt,this.model.graph=this),this.renderer=new Xl(this),this.panning=new G6(this),this.mousewheel=new Ql(this),this.virtualRender=new Z6(this),this.size=new J6(this)}isNode(t){return t.isNode()}isEdge(t){return t.isEdge()}resetCells(t,e={}){return this.model.resetCells(t,e),this}clearCells(t={}){return this.model.clear(t),this}toJSON(t={}){return this.model.toJSON(t)}parseJSON(t){return this.model.parseJSON(t)}fromJSON(t,e={}){return this.model.fromJSON(t,e),this}getCellById(t){return this.model.getCell(t)}addNode(t,e={}){return this.model.addNode(t,e)}addNodes(t,e={}){return this.addCell(t.map(n=>Ze.isNode(n)?n:this.createNode(n)),e)}createNode(t){return this.model.createNode(t)}removeNode(t,e={}){return this.model.removeCell(t,e)}addEdge(t,e={}){return this.model.addEdge(t,e)}addEdges(t,e={}){return this.addCell(t.map(n=>je.isEdge(n)?n:this.createEdge(n)),e)}removeEdge(t,e={}){return this.model.removeCell(t,e)}createEdge(t){return this.model.createEdge(t)}addCell(t,e={}){return this.model.addCell(t,e),this}removeCell(t,e={}){return this.model.removeCell(t,e)}removeCells(t,e={}){return this.model.removeCells(t,e)}removeConnectedEdges(t,e={}){return this.model.removeConnectedEdges(t,e)}disconnectConnectedEdges(t,e={}){return this.model.disconnectConnectedEdges(t,e),this}hasCell(t){return this.model.has(t)}getCells(){return this.model.getCells()}getCellCount(){return this.model.total()}getNodes(){return this.model.getNodes()}getEdges(){return this.model.getEdges()}getOutgoingEdges(t){return this.model.getOutgoingEdges(t)}getIncomingEdges(t){return this.model.getIncomingEdges(t)}getConnectedEdges(t,e={}){return this.model.getConnectedEdges(t,e)}getRootNodes(){return this.model.getRoots()}getLeafNodes(){return this.model.getLeafs()}isRootNode(t){return this.model.isRoot(t)}isLeafNode(t){return this.model.isLeaf(t)}getNeighbors(t,e={}){return this.model.getNeighbors(t,e)}isNeighbor(t,e,n={}){return this.model.isNeighbor(t,e,n)}getSuccessors(t,e={}){return this.model.getSuccessors(t,e)}isSuccessor(t,e,n={}){return this.model.isSuccessor(t,e,n)}getPredecessors(t,e={}){return this.model.getPredecessors(t,e)}isPredecessor(t,e,n={}){return this.model.isPredecessor(t,e,n)}getCommonAncestor(...t){return this.model.getCommonAncestor(...t)}getSubGraph(t,e={}){return this.model.getSubGraph(t,e)}cloneSubGraph(t,e={}){return this.model.cloneSubGraph(t,e)}cloneCells(t){return this.model.cloneCells(t)}getNodesFromPoint(t,e){return this.model.getNodesFromPoint(t,e)}getNodesInArea(t,e,n,o,r){return this.model.getNodesInArea(t,e,n,o,r)}getNodesUnderNode(t,e={}){return this.model.getNodesUnderNode(t,e)}searchCell(t,e,n={}){return this.model.search(t,e,n),this}getShortestPath(t,e,n={}){return this.model.getShortestPath(t,e,n)}getAllCellsBBox(){return this.model.getAllCellsBBox()}getCellsBBox(t,e={}){return this.model.getCellsBBox(t,e)}startBatch(t,e={}){this.model.startBatch(t,e)}stopBatch(t,e={}){this.model.stopBatch(t,e)}batchUpdate(t,e,n){const o="string"==typeof t?t:"update",r="string"==typeof t?e:t,a="function"==typeof e?n:e;this.startBatch(o,a);const c=r();return this.stopBatch(o,a),c}updateCellId(t,e){return this.model.updateCellId(t,e)}findView(t){return ae.isCell(t)?this.findViewByCell(t):this.findViewByElem(t)}findViews(t){return F.isRectangleLike(t)?this.findViewsInArea(t):_.isPointLike(t)?this.findViewsFromPoint(t):[]}findViewByCell(t){return this.renderer.findViewByCell(t)}findViewByElem(t){return this.renderer.findViewByElem(t)}findViewsFromPoint(t,e){return this.renderer.findViewsFromPoint("number"==typeof t?{x:t,y:e}:t)}findViewsInArea(t,e,n,o,r){return this.renderer.findViewsInArea("number"==typeof t?{x:t,y:e,width:n,height:o}:t,"number"==typeof t?r:e)}matrix(t){return typeof t>"u"?this.transform.getMatrix():(this.transform.setMatrix(t),this)}resize(t,e){const n=this.getPlugin("scroller");return n?n.resize(t,e):this.transform.resize(t,e),this}scale(t,e=t,n=0,o=0){return typeof t>"u"?this.transform.getScale():(this.transform.scale(t,e,n,o),this)}zoom(t,e){const n=this.getPlugin("scroller");if(n){if(typeof t>"u")return n.zoom();n.zoom(t,e)}else{if(typeof t>"u")return this.transform.getZoom();this.transform.zoom(t,e)}return this}zoomTo(t,e={}){const n=this.getPlugin("scroller");return n?n.zoom(t,Object.assign(Object.assign({},e),{absolute:!0})):this.transform.zoom(t,Object.assign(Object.assign({},e),{absolute:!0})),this}zoomToRect(t,e={}){const n=this.getPlugin("scroller");return n?n.zoomToRect(t,e):this.transform.zoomToRect(t,e),this}zoomToFit(t={}){const e=this.getPlugin("scroller");return e?e.zoomToFit(t):this.transform.zoomToFit(t),this}rotate(t,e,n){return typeof t>"u"?this.transform.getRotation():(this.transform.rotate(t,e,n),this)}translate(t,e){return typeof t>"u"?this.transform.getTranslation():(this.transform.translate(t,e),this)}translateBy(t,e){const n=this.translate();return this.translate(n.tx+t,n.ty+e)}getGraphArea(){return this.transform.getGraphArea()}getContentArea(t={}){return this.transform.getContentArea(t)}getContentBBox(t={}){return this.transform.getContentBBox(t)}fitToContent(t,e,n,o){return this.transform.fitToContent(t,e,n,o)}scaleContentToFit(t={}){return this.transform.scaleContentToFit(t),this}center(t){return this.centerPoint(t)}centerPoint(t,e,n){const o=this.getPlugin("scroller");return o?o.centerPoint(t,e,n):this.transform.centerPoint(t,e),this}centerContent(t){const e=this.getPlugin("scroller");return e?e.centerContent(t):this.transform.centerContent(t),this}centerCell(t,e){const n=this.getPlugin("scroller");return n?n.centerCell(t,e):this.transform.centerCell(t),this}positionPoint(t,e,n,o={}){const r=this.getPlugin("scroller");return r?r.positionPoint(t,e,n,o):this.transform.positionPoint(t,e,n),this}positionRect(t,e,n){const o=this.getPlugin("scroller");return o?o.positionRect(t,e,n):this.transform.positionRect(t,e),this}positionCell(t,e,n){const o=this.getPlugin("scroller");return o?o.positionCell(t,e,n):this.transform.positionCell(t,e),this}positionContent(t,e){const n=this.getPlugin("scroller");return n?n.positionContent(t,e):this.transform.positionContent(t,e),this}snapToGrid(t,e){return this.coord.snapToGrid(t,e)}pageToLocal(t,e,n,o){return F.isRectangleLike(t)?this.coord.pageToLocalRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof o?this.coord.pageToLocalRect(t,e,n,o):this.coord.pageToLocalPoint(t,e)}localToPage(t,e,n,o){return F.isRectangleLike(t)?this.coord.localToPageRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof o?this.coord.localToPageRect(t,e,n,o):this.coord.localToPagePoint(t,e)}clientToLocal(t,e,n,o){return F.isRectangleLike(t)?this.coord.clientToLocalRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof o?this.coord.clientToLocalRect(t,e,n,o):this.coord.clientToLocalPoint(t,e)}localToClient(t,e,n,o){return F.isRectangleLike(t)?this.coord.localToClientRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof o?this.coord.localToClientRect(t,e,n,o):this.coord.localToClientPoint(t,e)}localToGraph(t,e,n,o){return F.isRectangleLike(t)?this.coord.localToGraphRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof o?this.coord.localToGraphRect(t,e,n,o):this.coord.localToGraphPoint(t,e)}graphToLocal(t,e,n,o){return F.isRectangleLike(t)?this.coord.graphToLocalRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof o?this.coord.graphToLocalRect(t,e,n,o):this.coord.graphToLocalPoint(t,e)}clientToGraph(t,e,n,o){return F.isRectangleLike(t)?this.coord.clientToGraphRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof o?this.coord.clientToGraphRect(t,e,n,o):this.coord.clientToGraphPoint(t,e)}defineFilter(t){return this.defs.filter(t)}defineGradient(t){return this.defs.gradient(t)}defineMarker(t){return this.defs.marker(t)}getGridSize(){return this.grid.getGridSize()}setGridSize(t){return this.grid.setGridSize(t),this}showGrid(){return this.grid.show(),this}hideGrid(){return this.grid.hide(),this}clearGrid(){return this.grid.clear(),this}drawGrid(t){return this.grid.draw(t),this}updateBackground(){return this.background.update(),this}drawBackground(t,e){const n=this.getPlugin("scroller");return null==n||null!=this.options.background&&e?this.background.draw(t):n.drawBackground(t,e),this}clearBackground(t){const e=this.getPlugin("scroller");return null==e||null!=this.options.background&&t?this.background.clear():e.clearBackground(t),this}enableVirtualRender(){return this.virtualRender.enableVirtualRender(),this}disableVirtualRender(){return this.virtualRender.disableVirtualRender(),this}isMouseWheelEnabled(){return!this.mousewheel.disabled}enableMouseWheel(){return this.mousewheel.enable(),this}disableMouseWheel(){return this.mousewheel.disable(),this}toggleMouseWheel(t){return null==t?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():t?this.enableMouseWheel():this.disableMouseWheel(),this}isPannable(){const t=this.getPlugin("scroller");return t?t.isPannable():this.panning.pannable}enablePanning(){const t=this.getPlugin("scroller");return t?t.enablePanning():this.panning.enablePanning(),this}disablePanning(){const t=this.getPlugin("scroller");return t?t.disablePanning():this.panning.disablePanning(),this}togglePanning(t){return null==t?this.isPannable()?this.disablePanning():this.enablePanning():t!==this.isPannable()&&(t?this.enablePanning():this.disablePanning()),this}use(t,...e){return this.installedPlugins.has(t)||(this.installedPlugins.add(t),t.init(this,...e)),this}getPlugin(t){return Array.from(this.installedPlugins).find(e=>e.name===t)}getPlugins(t){return Array.from(this.installedPlugins).filter(e=>t.includes(e.name))}enablePlugins(t){let e=t;return Array.isArray(e)||(e=[e]),this.getPlugins(e)?.forEach(o=>{var r;null===(r=o?.enable)||void 0===r||r.call(o)}),this}disablePlugins(t){let e=t;return Array.isArray(e)||(e=[e]),this.getPlugins(e)?.forEach(o=>{var r;null===(r=o?.disable)||void 0===r||r.call(o)}),this}isPluginEnabled(t){var e;const n=this.getPlugin(t);return null===(e=n?.isEnabled)||void 0===e?void 0:e.call(n)}disposePlugins(t){let e=t;return Array.isArray(e)||(e=[e]),this.getPlugins(e)?.forEach(o=>{o.dispose()}),this}dispose(){this.clearCells(),this.off(),this.css.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.highlight.dispose(),this.background.dispose(),this.mousewheel.dispose(),this.panning.dispose(),this.view.dispose(),this.renderer.dispose(),this.installedPlugins.forEach(t=>{t.dispose()})}}(function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)})([Ee.dispose()],D.prototype,"dispose",null),function(i){i.View=en,i.Renderer=Xl,i.MouseWheel=Ql,i.DefsManager=W6,i.GridManager=Ul,i.CoordManager=U6,i.TransformManager=Y6,i.HighlightManager=Ca,i.BackgroundManager=Jl}(D||(D={})),function(i){i.toStringTag=`X6.${i.name}`,i.isGraph=function t(e){if(null==e)return!1;if(e instanceof i)return!0;const n=e[Symbol.toStringTag];return null==n||n===i.toStringTag}}(D||(D={})),function(i){i.render=function t(e,n){const o=e instanceof HTMLElement?new i({container:e}):new i(e);return null!=n&&o.fromJSON(n),o}}(D||(D={})),function(i){i.registerNode=Ze.registry.register,i.registerEdge=je.registry.register,i.registerView=dt.registry.register,i.registerAttr=Kt.registry.register,i.registerGrid=Pn.registry.register,i.registerFilter=uo.registry.register,i.registerNodeTool=mo.registry.register,i.registerEdgeTool=vo.registry.register,i.registerBackground=Ns.registry.register,i.registerHighlighter=pn.registry.register,i.registerPortLayout=gi.registry.register,i.registerPortLabelLayout=po.registry.register,i.registerMarker=Ln.registry.register,i.registerRouter=jn.registry.register,i.registerConnector=mi.registry.register,i.registerAnchor=zo.registry.register,i.registerEdgeAnchor=bo.registry.register,i.registerConnectionPoint=yo.registry.register}(D||(D={})),function(i){i.unregisterNode=Ze.registry.unregister,i.unregisterEdge=je.registry.unregister,i.unregisterView=dt.registry.unregister,i.unregisterAttr=Kt.registry.unregister,i.unregisterGrid=Pn.registry.unregister,i.unregisterFilter=uo.registry.unregister,i.unregisterNodeTool=mo.registry.unregister,i.unregisterEdgeTool=vo.registry.unregister,i.unregisterBackground=Ns.registry.unregister,i.unregisterHighlighter=pn.registry.unregister,i.unregisterPortLayout=gi.registry.unregister,i.unregisterPortLabelLayout=po.registry.unregister,i.unregisterMarker=Ln.registry.unregister,i.unregisterRouter=jn.registry.unregister,i.unregisterConnector=mi.registry.unregister,i.unregisterAnchor=zo.registry.unregister,i.unregisterEdgeAnchor=bo.registry.unregister,i.unregisterConnectionPoint=yo.registry.unregister}(D||(D={}));var We,Rs;class Mo extends Ze{}(function(i){class t extends Ot{init(){super.init(),this.cell.on("change:*",({key:n})=>{const o=i.shapeMaps[this.cell.shape];if(o){const{effect:r}=o;(!r||r.includes(n))&&this.renderHTMLComponent()}})}confirmUpdate(n){const o=super.confirmUpdate(n);return this.handleAction(o,t.action,()=>this.renderHTMLComponent())}renderHTMLComponent(){const n=this.selectors&&this.selectors.foContent;if(n){vs(n);const o=i.shapeMaps[this.cell.shape];if(!o)return;let{html:r}=o;"function"==typeof r&&(r=r(this.cell)),r&&("string"==typeof r?n.innerHTML=r:Nn(n,r))}}}var e;i.View=t,(e=t=i.View||(i.View={})).action="html",e.config({bootstrap:[e.action],actions:{html:e.action}}),Ot.registry.register("html-view",e,!0)})(Mo||(Mo={})),function(i){i.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},xe.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),Ze.registry.register("html",i,!0)}(Mo||(Mo={})),function(i){i.shapeMaps={},i.register=function t(e){const{shape:n,html:o,effect:r,inherit:a}=e,c=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(e,["shape","html","effect","inherit"]);if(!n)throw new Error("should specify shape in config");i.shapeMaps[n]={html:o,effect:r},D.registerNode(n,Object.assign({inherit:a||"html"},c),!0)}}(Mo||(Mo={}));class Q6 extends fe{get model(){return this.graph.model}get view(){return this.graph.renderer.findViewByCell(this.node)}get containerClassName(){return this.prefixClassName("widget-transform")}get resizeClassName(){return`${this.containerClassName}-resize`}get rotateClassName(){return`${this.containerClassName}-rotate`}constructor(t,e,n){super(),this.node=e,this.graph=n,this.options=Object.assign(Object.assign({},We.defaultOptions),t),this.render(),this.startListening()}startListening(){this.delegateEvents({[`mousedown .${this.resizeClassName}`]:"startResizing",[`touchstart .${this.resizeClassName}`]:"startResizing",[`mousedown .${this.rotateClassName}`]:"startRotating",[`touchstart .${this.rotateClassName}`]:"startRotating"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.node.on("removed",this.remove,this),this.model.on("reseted",this.remove,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this)}stopListening(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.node.off("removed",this.remove,this),this.model.off("reseted",this.remove,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this)}renderHandles(){this.container=document.createElement("div");const t=document.createElement("div");le(t,"draggable","false");const e=t.cloneNode(!0);ee(e,this.rotateClassName);const n=We.POSITIONS.map(o=>{const r=t.cloneNode(!0);return ee(r,this.resizeClassName),le(r,"data-position",o),r});this.empty(),Nn(this.container,[...n,e])}render(){return this.renderHandles(),this.view&&this.view.addClass(We.NODE_CLS),ee(this.container,this.containerClassName),ms(this.container,"no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing),ms(this.container,"no-resize",!this.options.resizable),ms(this.container,"no-rotate",!this.options.rotatable),this.options.className&&ee(this.container,this.options.className),this.graph.container.appendChild(this.container),this.update()}update(){const t=this.graph.matrix(),e=this.node.getBBox();e.x*=t.a,e.x+=t.e,e.y*=t.d,e.y+=t.f,e.width*=t.a,e.height*=t.d;const n=he.normalize(this.node.getAngle());return Ye(this.container,{transform:0!==n?`rotate(${n}deg)`:"",width:e.width,height:e.height,left:e.x,top:e.y}),this.updateResizerDirections(),this}remove(){return this.view&&this.view.removeClass(We.NODE_CLS),super.remove()}onKnobMouseDown(){this.startHandle()}onKnobMouseUp(){this.stopHandle()}updateResizerDirections(){const t=he.normalize(this.node.getAngle()),e=Math.floor(t*(We.DIRECTIONS.length/360));if(e!==this.prevShift){const n=We.DIRECTIONS.slice(e).concat(We.DIRECTIONS.slice(0,e)),o=a=>`${this.containerClassName}-cursor-${a}`;this.container.querySelectorAll(`.${this.resizeClassName}`).forEach((a,c)=>{$e(a,We.DIRECTIONS.map(l=>o(l)).join(" ")),ee(a,o(n[c]))}),this.prevShift=e}}getTrueDirection(t){const e=he.normalize(this.node.getAngle());let n=We.POSITIONS.indexOf(t);return n+=Math.floor(e*(We.POSITIONS.length/360)),n%=We.POSITIONS.length,We.POSITIONS[n]}toValidResizeDirection(t){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[t]||t}startResizing(t){t.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});const e=le(t.target,"data-position");this.prepareResizing(t,e),this.startAction(t)}prepareResizing(t,e){const n=this.getTrueDirection(e);let o=0,r=0;e.split("-").forEach(h=>{o={left:-1,right:1}[h]||o,r={top:-1,bottom:1}[h]||r});const a=this.toValidResizeDirection(e),c={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[a],l=he.normalize(this.node.getAngle());this.setEventData(t,{selector:c,direction:a,trueDirection:n,relativeDirection:e,angle:l,resizeX:o,resizeY:r,action:"resizing"})}startRotating(t){t.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});const e=this.node.getBBox().getCenter(),n=this.normalizeEvent(t),o=this.graph.snapToGrid(n.clientX,n.clientY);this.setEventData(t,{center:e,action:"rotating",angle:he.normalize(this.node.getAngle()),start:_.create(o).theta(e)}),this.startAction(t)}onMouseMove(t){const e=this.graph.findViewByCell(this.node);let n=this.getEventData(t);if(n.action){const o=this.normalizeEvent(t);let r=o.clientX,a=o.clientY;const c=this.graph.getPlugin("scroller"),l=this.options.restrictedResizing;if(!0===l||"number"==typeof l){const p=!0===l?0:l,g=c?Math.max(p,8):p,m=this.graph.container.getBoundingClientRect();r=Ct(r,m.left+g,m.right-g),a=Ct(a,m.top+g,m.bottom-g)}else this.options.autoScrollOnResizing&&c&&c.autoScroll(r,a);const h=this.graph.snapToGrid(r,a),u=this.graph.getGridSize(),d=this.node,f=this.options;if("resizing"===n.action){n.resized||(e&&(e.addClass("node-resizing"),this.notify("node:resize",t,e)),n.resized=!0);const p=d.getBBox(),g=_.create(h).rotate(n.angle,p.getCenter()).diff(p[n.selector]);let m=n.resizeX?g.x*n.resizeX:p.width,v=n.resizeY?g.y*n.resizeY:p.height;const b=m,y=v;if(m=de.snapToGrid(m,u),v=de.snapToGrid(v,u),m=Math.max(m,f.minWidth||u),v=Math.max(v,f.minHeight||u),m=Math.min(m,f.maxWidth||1/0),v=Math.min(v,f.maxHeight||1/0),f.preserveAspectRatio){const C=p.width*v/p.height;m<C?v=p.height*m/p.width:m=C}const z=n.relativeDirection;if(f.allowReverse&&(b<=-m||y<=-v)){let C;"left"===z?b<=-m&&(C="right"):"right"===z?b<=-m&&(C="left"):"top"===z?y<=-v&&(C="bottom"):"bottom"===z?y<=-v&&(C="top"):"top-left"===z?b<=-m&&y<=-v?C="bottom-right":b<=-m?C="top-right":y<=-v&&(C="bottom-left"):"top-right"===z?b<=-m&&y<=-v?C="bottom-left":b<=-m?C="top-left":y<=-v&&(C="bottom-right"):"bottom-left"===z?b<=-m&&y<=-v?C="top-right":b<=-m?C="bottom-right":y<=-v&&(C="top-left"):"bottom-right"===z&&(b<=-m&&y<=-v?C="top-left":b<=-m?C="bottom-left":y<=-v&&(C="top-right"));const x=C;this.stopHandle();const w=this.container.querySelector(`.${this.resizeClassName}[data-position="${x}"]`);this.startHandle(w),this.prepareResizing(t,x),this.onMouseMove(t)}p.width===m&&p.height===v||(d.resize(m,v,{ui:!0,direction:n.direction,relativeDirection:n.relativeDirection,trueDirection:n.trueDirection,minWidth:f.minWidth,minHeight:f.minHeight,maxWidth:f.maxWidth,maxHeight:f.maxHeight,preserveAspectRatio:!0===f.preserveAspectRatio}),this.notify("node:resizing",t,e))}else if("rotating"===n.action){n.rotated||(e&&(e.addClass("node-rotating"),this.notify("node:rotate",t,e)),n.rotated=!0);const p=d.getAngle(),g=n.start-_.create(h).theta(n.center);let m=n.angle+g;f.rotateGrid&&(m=de.snapToGrid(m,f.rotateGrid)),m=he.normalize(m),p!==m&&(d.rotate(m,{absolute:!0}),this.notify("node:rotating",t,e))}}}onMouseUp(t){const e=this.getEventData(t);e.action&&(this.stopAction(t),this.model.stopBatch("resizing"===e.action?"resize":"rotate",{cid:this.cid}))}startHandle(t){if(this.handle=t||null,ee(this.container,`${this.containerClassName}-active`),t){ee(t,`${this.containerClassName}-active-handle`);const e=t.getAttribute("data-position");if(e){const n=We.DIRECTIONS[We.POSITIONS.indexOf(e)];ee(this.container,`${this.containerClassName}-cursor-${n}`)}}}stopHandle(){if($e(this.container,`${this.containerClassName}-active`),this.handle){$e(this.handle,`${this.containerClassName}-active-handle`);const t=this.handle.getAttribute("data-position");if(t){const e=We.DIRECTIONS[We.POSITIONS.indexOf(t)];$e(this.container,`${this.containerClassName}-cursor-${e}`)}this.handle=null}}startAction(t){this.startHandle(t.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(We.documentEvents,t.data)}stopAction(t){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();const e=this.graph.findViewByCell(this.node),n=this.getEventData(t);e&&(e.removeClass(`node-${n.action}`),"resizing"===n.action&&n.resized?this.notify("node:resized",t,e):"rotating"===n.action&&n.rotated&&this.notify("node:rotated",t,e))}notify(t,e,n,o={}){if(n){const r=n.graph,a=r.view.normalizeEvent(e),c=r.snapToGrid(a.clientX,a.clientY);this.trigger(t,Object.assign({e:a,view:n,node:n.cell,cell:n.cell,x:c.x,y:c.y},o))}}dispose(){this.remove(),this.off()}}!function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([fe.dispose()],Q6.prototype,"dispose",null),function(i){i.NODE_CLS="has-widget-transform",i.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],i.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],i.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},i.defaultOptions={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0,allowReverse:!0}}(We||(We={})),D.prototype.createTransformWidget=function(i){const t=this.getPlugin("transform");return t&&t.createWidget(i),this},D.prototype.clearTransformWidgets=function(){const i=this.getPlugin("transform");return i&&i.clearWidgets(),this};class vi extends Ee{constructor(t={}){super(),this.name="transform",this.widgets=new Map,this.disabled=!1,this.options=t,As(this.name,".x6-widget-transform {\n  position: absolute;\n  box-sizing: content-box !important;\n  margin: -5px 0 0 -5px;\n  padding: 4px;\n  border: 1px dashed #000;\n  border-radius: 5px;\n  user-select: none;\n  pointer-events: none;\n}\n.x6-widget-transform > div {\n  position: absolute;\n  box-sizing: border-box;\n  background-color: #fff;\n  border: 1px solid #000;\n  transition: background-color 0.2s;\n  pointer-events: auto;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-transform > div:hover {\n  background-color: #d3d3d3;\n}\n.x6-widget-transform-cursor-n {\n  cursor: n-resize;\n}\n.x6-widget-transform-cursor-s {\n  cursor: s-resize;\n}\n.x6-widget-transform-cursor-e {\n  cursor: e-resize;\n}\n.x6-widget-transform-cursor-w {\n  cursor: w-resize;\n}\n.x6-widget-transform-cursor-ne {\n  cursor: ne-resize;\n}\n.x6-widget-transform-cursor-nw {\n  cursor: nw-resize;\n}\n.x6-widget-transform-cursor-se {\n  cursor: se-resize;\n}\n.x6-widget-transform-cursor-sw {\n  cursor: sw-resize;\n}\n.x6-widget-transform-resize {\n  width: 10px;\n  height: 10px;\n  border-radius: 6px;\n}\n.x6-widget-transform-resize[data-position='top-left'] {\n  top: -5px;\n  left: -5px;\n}\n.x6-widget-transform-resize[data-position='top-right'] {\n  top: -5px;\n  right: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom-left'] {\n  bottom: -5px;\n  left: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom-right'] {\n  right: -5px;\n  bottom: -5px;\n}\n.x6-widget-transform-resize[data-position='top'] {\n  top: -5px;\n  left: 50%;\n  margin-left: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom'] {\n  bottom: -5px;\n  left: 50%;\n  margin-left: -5px;\n}\n.x6-widget-transform-resize[data-position='left'] {\n  top: 50%;\n  left: -5px;\n  margin-top: -5px;\n}\n.x6-widget-transform-resize[data-position='right'] {\n  top: 50%;\n  right: -5px;\n  margin-top: -5px;\n}\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {\n  display: none;\n}\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {\n  display: none;\n}\n.x6-widget-transform.no-resize .x6-widget-transform-resize {\n  display: none;\n}\n.x6-widget-transform-rotate {\n  top: -20px;\n  left: -20px;\n  width: 12px;\n  height: 12px;\n  border-radius: 6px;\n  cursor: crosshair;\n}\n.x6-widget-transform.no-rotate .x6-widget-transform-rotate {\n  display: none;\n}\n.x6-widget-transform-active {\n  border-color: transparent;\n  pointer-events: all;\n}\n.x6-widget-transform-active > div {\n  display: none;\n}\n.x6-widget-transform-active > .x6-widget-transform-active-handle {\n  display: block;\n  background-color: #808080;\n}\n")}init(t){this.graph=t,!this.disabled&&this.startListening()}startListening(){this.graph.on("node:click",this.onNodeClick,this),this.graph.on("blank:mousedown",this.onBlankMouseDown,this)}stopListening(){this.graph.off("node:click",this.onNodeClick,this),this.graph.off("blank:mousedown",this.onBlankMouseDown,this)}enable(){this.disabled&&(this.disabled=!1,this.startListening())}disable(){this.disabled||(this.disabled=!0,this.stopListening())}isEnabled(){return!this.disabled}createWidget(t){this.clearWidgets();const e=this.createTransform(t);e&&(this.widgets.set(t,e),e.on("*",(n,o)=>{this.trigger(n,o),this.graph.trigger(n,o)}))}onNodeClick({node:t}){this.createWidget(t)}onBlankMouseDown(){this.clearWidgets()}createTransform(t){const e=this.getTransformOptions(t);return e.resizable||e.rotatable?new Q6(e,t,this.graph):null}getTransformOptions(t){this.options.resizing||(this.options.resizing={enabled:!1}),this.options.rotating||(this.options.rotating={enabled:!1}),"boolean"==typeof this.options.resizing&&(this.options.resizing={enabled:this.options.resizing}),"boolean"==typeof this.options.rotating&&(this.options.rotating={enabled:this.options.rotating});const e=vi.parseOptionGroup(this.graph,t,this.options.resizing),n=vi.parseOptionGroup(this.graph,t,this.options.rotating);return{resizable:!!e.enabled,minWidth:e.minWidth||0,maxWidth:e.maxWidth||Number.MAX_SAFE_INTEGER,minHeight:e.minHeight||0,maxHeight:e.maxHeight||Number.MAX_SAFE_INTEGER,orthogonalResizing:"boolean"!=typeof e.orthogonal||e.orthogonal,restrictedResizing:!!e.restrict,autoScrollOnResizing:"boolean"!=typeof e.autoScroll||e.autoScroll,preserveAspectRatio:!!e.preserveAspectRatio,allowReverse:"boolean"!=typeof e.allowReverse||e.allowReverse,rotatable:!!n.enabled,rotateGrid:n.grid||15}}clearWidgets(){this.widgets.forEach((t,e)=>{this.graph.getCellById(e.id)&&t.dispose()}),this.widgets.clear()}dispose(){this.clearWidgets(),this.stopListening(),this.off(),Es(this.name)}}(function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)})([Ee.dispose()],vi.prototype,"dispose",null),function(i){i.parseOptionGroup=function t(e,n,o){const r={};return Object.keys(o||{}).forEach(a=>{const c=o[a];r[a]="function"==typeof c?c.call(e,n):c}),r}}(vi||(vi={}));class X6 extends fe{get model(){return this.graph.model}get containerClassName(){return this.prefixClassName("widget-snapline")}get verticalClassName(){return`${this.containerClassName}-vertical`}get horizontalClassName(){return`${this.containerClassName}-horizontal`}constructor(t){super();const{graph:e}=t,n=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(t,["graph"]);this.graph=e,this.options=Object.assign({},n),this.offset={x:0,y:0},this.render(),this.disabled||this.startListening()}get disabled(){return!0!==this.options.enabled}enable(){this.disabled&&(this.options.enabled=!0,this.startListening())}disable(){this.disabled||(this.options.enabled=!1,this.stopListening())}setFilter(t){this.options.filter=t}render(){const t=this.containerWrapper=new X("svg"),e=this.horizontal=new X("line"),n=this.vertical=new X("line");t.addClass(this.containerClassName),e.addClass(this.horizontalClassName),n.addClass(this.verticalClassName),t.setAttribute("width","100%"),t.setAttribute("height","100%"),e.setAttribute("display","none"),n.setAttribute("display","none"),t.append([e,n]),this.options.className&&t.addClass(this.options.className),this.container=this.containerWrapper.node}startListening(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})}stopListening(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()}onBatchStop({name:t,data:e}){"resize"===t&&this.snapOnResizing(e.cell,e)}captureCursorOffset({view:t,x:e,y:n}){const o=t.getDelegatedView();if(o&&this.isNodeMovable(o)){const r=t.cell.getPosition();this.offset={x:e-r.x,y:n-r.y}}}isNodeMovable(t){return t&&t.cell.isNode()&&t.can("nodeMovable")}getRestrictArea(t){const e=this.graph.options.translating.restrict,n="function"==typeof e?Z(e,this.graph,t):e;return"number"==typeof n?this.graph.transform.getGraphArea().inflate(n):!0===n?this.graph.transform.getGraphArea():n||null}snapOnResizing(t,e){if(this.options.resizing&&!e.snapped&&e.ui&&e.direction&&e.trueDirection){const n=this.graph.renderer.findViewByCell(t);if(n&&n.cell.isNode()){const o=t.getBBox(),r=o.bbox(t.getAngle()),a=r.getTopLeft(),c=r.getBottomRight(),l=he.normalize(t.getAngle()),h=this.options.tolerance||0;let u,d,f,p,g,m;const v={vertical:0,horizontal:0},b=e.direction,y=e.trueDirection,z=e.relativeDirection;v.vertical=-1!==y.indexOf("right")?c.x:a.x,v.horizontal=-1!==y.indexOf("bottom")?c.y:a.y,this.model.getNodes().some(V=>{if(this.isIgnored(t,V))return!1;const K=V.getBBox().bbox(V.getAngle()),J=K.getTopLeft(),S=K.getBottomRight(),I={vertical:[J.x,S.x],horizontal:[J.y,S.y]},W={};return Object.keys(I).forEach(me=>{const ve=me,ke=I[ve].map(Ae=>({position:Ae,distance:Math.abs(Ae-v[ve])})).filter(Ae=>Ae.distance<=h);W[ve]=hl(ke,Ae=>Ae.distance)}),null==u&&W.vertical.length>0&&(u=W.vertical[0].position,d=Math.min(r.y,K.y),f=Math.max(c.y,S.y)-d),null==p&&W.horizontal.length>0&&(p=W.horizontal[0].position,g=Math.min(r.x,K.x),m=Math.max(c.x,S.x)-g),null!=u&&null!=p}),this.hide();let C=0,x=0;(null!=p||null!=u)&&(null!=u&&(C=-1!==y.indexOf("right")?u-c.x:a.x-u),null!=p&&(x=-1!==y.indexOf("bottom")?p-c.y:a.y-p));let w=0,O=0;if(l%90==0)90===l||270===l?(w=x,O=C):(w=C,O=x);else{const V=l>=0&&l<90?1:l>=90&&l<180?4:l>=180&&l<270?3:2;null!=p&&null!=u&&(C<x?(x=0,p=void 0):(C=0,u=void 0));const K=he.toRad(l%90);C&&(w=3===V?C/Math.cos(K):C/Math.sin(K)),x&&(O=3===V?x/Math.cos(K):x/Math.sin(K));const J=1===V||3===V;switch(z){case"top":case"bottom":O=x?x/(J?Math.cos(K):Math.sin(K)):C/(J?Math.sin(K):Math.cos(K));break;case"left":case"right":w=C?C/(J?Math.cos(K):Math.sin(K)):x/(J?Math.sin(K):Math.cos(K))}}switch(z){case"top":case"bottom":w=0;break;case"left":case"right":O=0}const P=this.graph.getGridSize();let E=Math.max(o.width+w,P),L=Math.max(o.height+O,P);e.minWidth&&e.minWidth>P&&(E=Math.max(E,e.minWidth)),e.minHeight&&e.minHeight>P&&(L=Math.max(L,e.minHeight)),e.maxWidth&&(E=Math.min(E,e.maxWidth)),e.maxHeight&&(L=Math.min(L,e.maxHeight)),e.preserveAspectRatio&&(O<w?L=E*(o.height/o.width):E=L*(o.width/o.height)),(E!==o.width||L!==o.height)&&(t.resize(E,L,{direction:b,relativeDirection:z,trueDirection:y,snapped:!0,snaplines:this.cid,restrict:this.getRestrictArea(n)}),f&&(f+=L-o.height),m&&(m+=E-o.width));const k=t.getBBox().bbox(l);u&&Math.abs(k.x-u)>1&&Math.abs(k.width+k.x-u)>1&&(u=void 0),p&&Math.abs(k.y-p)>1&&Math.abs(k.height+k.y-p)>1&&(p=void 0),this.update({verticalLeft:u,verticalTop:d,verticalHeight:f,horizontalTop:p,horizontalLeft:g,horizontalWidth:m})}}}snapOnMoving({view:t,e,x:n,y:o}){const r=t.getEventData(e).delegatedView||t;if(!this.isNodeMovable(r))return;const a=r.cell,c=a.getSize(),l=a.getPosition(),h=new F(n-this.offset.x,o-this.offset.y,c.width,c.height),u=a.getAngle(),d=h.getCenter(),f=h.bbox(u),p=f.getTopLeft(),g=f.getBottomRight(),m=this.options.tolerance||0;let v,b,y,z,C,x,w=0,O=0;if(this.model.getNodes().some(P=>{if(this.isIgnored(a,P))return!1;const E=P.getBBox().bbox(P.getAngle()),L=E.getCenter(),k=E.getTopLeft(),V=E.getBottomRight();return null==v&&(Math.abs(L.x-d.x)<m?(v=L.x,w=.5):Math.abs(k.x-p.x)<m?(v=k.x,w=0):Math.abs(k.x-g.x)<m?(v=k.x,w=1):Math.abs(V.x-g.x)<m?(v=V.x,w=1):Math.abs(V.x-p.x)<m&&(v=V.x),null!=v&&(b=Math.min(f.y,E.y),y=Math.max(g.y,V.y)-b)),null==z&&(Math.abs(L.y-d.y)<m?(z=L.y,O=.5):Math.abs(k.y-p.y)<m?z=k.y:Math.abs(k.y-g.y)<m?(z=k.y,O=1):Math.abs(V.y-g.y)<m?(z=V.y,O=1):Math.abs(V.y-p.y)<m&&(z=V.y),null!=z&&(C=Math.min(f.x,E.x),x=Math.max(g.x,V.x)-C)),null!=v&&null!=z}),this.hide(),null!=z||null!=v){null!=z&&(f.y=z-O*f.height),null!=v&&(f.x=v-w*f.width);const P=f.getCenter(),k=P.x-h.width/2-l.x,V=P.y-h.height/2-l.y;(0!==k||0!==V)&&(a.translate(k,V,{snapped:!0,restrict:this.getRestrictArea(r)}),x&&(x+=k),y&&(y+=V)),this.update({verticalLeft:v,verticalTop:b,verticalHeight:y,horizontalTop:z,horizontalLeft:C,horizontalWidth:x})}}isIgnored(t,e){return e.id===t.id||e.isDescendantOf(t)||!this.filter(e)}filter(t){const e=this.options.filter;return Array.isArray(e)?e.some(n=>"string"==typeof n?t.shape===n:t.id===n.id):"function"!=typeof e||Z(e,this.graph,t)}update(t){if(t.horizontalTop){const e=this.graph.localToGraph(new _(t.horizontalLeft,t.horizontalTop)),n=this.graph.localToGraph(new _(t.horizontalLeft+t.horizontalWidth,t.horizontalTop));this.horizontal.setAttributes({x1:this.options.sharp?`${e.x}`:"0",y1:`${e.y}`,x2:this.options.sharp?`${n.x}`:"100%",y2:`${n.y}`,display:"inherit"})}else this.horizontal.setAttribute("display","none");if(t.verticalLeft){const e=this.graph.localToGraph(new _(t.verticalLeft,t.verticalTop)),n=this.graph.localToGraph(new _(t.verticalLeft,t.verticalTop+t.verticalHeight));this.vertical.setAttributes({x1:`${e.x}`,y1:this.options.sharp?`${e.y}`:"0",x2:`${n.x}`,y2:this.options.sharp?`${n.y}`:"100%",display:"inherit"})}else this.vertical.setAttribute("display","none");this.show()}resetTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}show(){return this.resetTimer(),null==this.container.parentNode&&this.graph.container.appendChild(this.container),this}hide(){this.resetTimer(),this.vertical.setAttribute("display","none"),this.horizontal.setAttribute("display","none");const t=this.options.clean,e="number"==typeof t?t:!1!==t?3e3:0;return e>0&&(this.timer=window.setTimeout(()=>{null!==this.container.parentNode&&this.unmount()},e)),this}onRemove(){this.stopListening(),this.hide()}dispose(){this.remove()}}!function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([fe.dispose()],X6.prototype,"dispose",null),D.prototype.isSnaplineEnabled=function(){const i=this.getPlugin("snapline");return!!i&&i.isEnabled()},D.prototype.enableSnapline=function(){const i=this.getPlugin("snapline");return i&&i.enable(),this},D.prototype.disableSnapline=function(){const i=this.getPlugin("snapline");return i&&i.disable(),this},D.prototype.toggleSnapline=function(){const i=this.getPlugin("snapline");return i&&i.toggleEnabled(),this},D.prototype.hideSnapline=function(){const i=this.getPlugin("snapline");return i&&i.hide(),this},D.prototype.setSnaplineFilter=function(i){const t=this.getPlugin("snapline");return t&&t.setFilter(i),this},D.prototype.isSnaplineOnResizingEnabled=function(){const i=this.getPlugin("snapline");return!!i&&i.isOnResizingEnabled()},D.prototype.enableSnaplineOnResizing=function(){const i=this.getPlugin("snapline");return i&&i.enableOnResizing(),this},D.prototype.disableSnaplineOnResizing=function(){const i=this.getPlugin("snapline");return i&&i.disableOnResizing(),this},D.prototype.toggleSnaplineOnResizing=function(i){const t=this.getPlugin("snapline");return t&&t.toggleOnResizing(i),this},D.prototype.isSharpSnapline=function(){const i=this.getPlugin("snapline");return!!i&&i.isSharp()},D.prototype.enableSharpSnapline=function(){const i=this.getPlugin("snapline");return i&&i.enableSharp(),this},D.prototype.disableSharpSnapline=function(){const i=this.getPlugin("snapline");return i&&i.disableSharp(),this},D.prototype.toggleSharpSnapline=function(i){const t=this.getPlugin("snapline");return t&&t.toggleSharp(i),this},D.prototype.getSnaplineTolerance=function(){const i=this.getPlugin("snapline");if(i)return i.getTolerance()},D.prototype.setSnaplineTolerance=function(i){const t=this.getPlugin("snapline");return t&&t.setTolerance(i),this};class K6 extends yt{constructor(t={}){super(),this.name="snapline",this.options=Object.assign({enabled:!0,tolerance:10},t),As(this.name,".x6-widget-snapline {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  pointer-events: none;\n}\n.x6-widget-snapline-vertical,\n.x6-widget-snapline-horizontal {\n  stroke: #2ecc71;\n  stroke-width: 1px;\n}\n")}init(t){this.snaplineImpl=new X6(Object.assign(Object.assign({},this.options),{graph:t}))}isEnabled(){return!this.snaplineImpl.disabled}enable(){this.snaplineImpl.enable()}disable(){this.snaplineImpl.disable()}toggleEnabled(t){if(null==t)return this.isEnabled()?this.disable():this.enable(),this;t!==this.isEnabled()&&(t?this.enable():this.disable())}hide(){return this.snaplineImpl.hide(),this}setFilter(t){return this.snaplineImpl.setFilter(t),this}isOnResizingEnabled(){return!0===this.snaplineImpl.options.resizing}enableOnResizing(){return this.snaplineImpl.options.resizing=!0,this}disableOnResizing(){return this.snaplineImpl.options.resizing=!1,this}toggleOnResizing(t){return null!=t?t!==this.isOnResizingEnabled()&&(t?this.enableOnResizing():this.disableOnResizing()):this.isOnResizingEnabled()?this.disableOnResizing():this.enableOnResizing(),this}isSharp(){return!0===this.snaplineImpl.options.sharp}enableSharp(){return this.snaplineImpl.options.sharp=!0,this}disableSharp(){return this.snaplineImpl.options.sharp=!1,this}toggleSharp(t){return null!=t?t!==this.isSharp()&&(t?this.enableSharp():this.disableSharp()):this.isSharp()?this.disableSharp():this.enableSharp(),this}getTolerance(){return this.snaplineImpl.options.tolerance}setTolerance(t){return this.snaplineImpl.options.tolerance=t,this}captureCursorOffset(t){this.snaplineImpl.captureCursorOffset(t)}snapOnMoving(t){this.snaplineImpl.snapOnMoving(t)}dispose(){this.snaplineImpl.dispose(),Es(this.name)}}!function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([yt.dispose()],K6.prototype,"dispose",null);class WI{constructor(){this.cells=[]}copy(t,e,n={}){this.options=Object.assign({},n);const r=(Vt.isModel(e)?e:e.model).cloneSubGraph(t,n);this.cells=hl(Object.keys(r).map(a=>r[a]),a=>a.isEdge()?2:1),this.serialize(n)}cut(t,e,n={}){this.copy(t,e,n),(D.isGraph(e)?e.model:e).batchUpdate("cut",()=>{t.forEach(r=>r.remove())})}paste(t,e={}){const n=Object.assign(Object.assign({},this.options),e),{offset:o,edgeProps:r,nodeProps:a}=n;let c=20,l=20;o&&(c="number"==typeof o?o:o.dx,l="number"==typeof o?o:o.dy),this.deserialize(n);const h=this.cells;h.forEach(d=>{d.model=null,d.removeProp("zIndex"),(c||l)&&d.translate(c,l),a&&d.isNode()&&d.prop(a),r&&d.isEdge()&&d.prop(r)});const u=D.isGraph(t)?t.model:t;return u.batchUpdate("paste",()=>{u.addCells(this.cells)}),this.copy(h,t,e),h}serialize(t){!1!==t.useLocalStorage&&Rs.save(this.cells)}deserialize(t){if(t.useLocalStorage){const e=Rs.fetch();e&&(this.cells=e)}}isEmpty(t={}){return t.useLocalStorage&&this.deserialize(t),this.cells.length<=0}clean(){this.options={},this.cells=[],Rs.clean()}}(function(i){const t=`${Ke.prefixCls}.clipboard.cells`;i.save=function e(r){if(window.localStorage){const a=r.map(c=>c.toJSON());localStorage.setItem(t,JSON.stringify(a))}},i.fetch=function n(){if(window.localStorage){const r=localStorage.getItem(t),a=r?JSON.parse(r):[];if(a)return Vt.fromJSON(a)}},i.clean=function o(){window.localStorage&&localStorage.removeItem(t)}})(Rs||(Rs={})),D.prototype.isClipboardEnabled=function(){const i=this.getPlugin("clipboard");return!!i&&i.isEnabled()},D.prototype.enableClipboard=function(){const i=this.getPlugin("clipboard");return i&&i.enable(),this},D.prototype.disableClipboard=function(){const i=this.getPlugin("clipboard");return i&&i.disable(),this},D.prototype.toggleClipboard=function(i){const t=this.getPlugin("clipboard");return t&&t.toggleEnabled(i),this},D.prototype.isClipboardEmpty=function(i){const t=this.getPlugin("clipboard");return!t||t.isEmpty(i)},D.prototype.getCellsInClipboard=function(){const i=this.getPlugin("clipboard");return i?i.getCellsInClipboard():[]},D.prototype.cleanClipboard=function(){const i=this.getPlugin("clipboard");return i&&i.clean(),this},D.prototype.copy=function(i,t){const e=this.getPlugin("clipboard");return e&&e.copy(i,t),this},D.prototype.cut=function(i,t){const e=this.getPlugin("clipboard");return e&&e.cut(i,t),this},D.prototype.paste=function(i,t){const e=this.getPlugin("clipboard");return e?e.paste(i,t):[]};class e8 extends Ee{get disabled(){return!0!==this.options.enabled}get cells(){return this.clipboardImpl.cells}constructor(t={}){super(),this.name="clipboard",this.options=Object.assign({enabled:!0},t)}init(t){this.graph=t,this.clipboardImpl=new WI,this.clipboardImpl.deserialize(this.options)}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(t){return null!=t?t!==this.isEnabled()&&(t?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}isEmpty(t={}){return this.clipboardImpl.isEmpty(t)}getCellsInClipboard(){return this.cells}clean(t){return(!this.disabled||t)&&(this.clipboardImpl.clean(),this.notify("clipboard:changed",{cells:[]})),this}copy(t,e={}){return this.disabled||(this.clipboardImpl.copy(t,this.graph,Object.assign(Object.assign({},this.commonOptions),e)),this.notify("clipboard:changed",{cells:t})),this}cut(t,e={}){return this.disabled||(this.clipboardImpl.cut(t,this.graph,Object.assign(Object.assign({},this.commonOptions),e)),this.notify("clipboard:changed",{cells:t})),this}paste(t={},e=this.graph){return this.disabled?[]:this.clipboardImpl.paste(e,Object.assign(Object.assign({},this.commonOptions),t))}get commonOptions(){return function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(this.options,["enabled"])}notify(t,e){this.trigger(t,e),this.graph.trigger(t,e)}dispose(){this.clean(!0),this.off()}}!function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([Ee.dispose()],e8.prototype,"dispose",null);var QI=j(7521),XI=j.n(QI);class So extends yt{get graph(){return this.options.graph}constructor(t){super(),this.options=t;const e=this.graph.getPlugin("scroller");this.container=e?e.container:this.graph.container,t.global?this.target=document:(this.target=this.container,this.disabled||this.target.setAttribute("tabindex","-1"),this.graph.on("cell:mouseup",this.focus,this),this.graph.on("blank:mouseup",this.focus,this)),this.mousetrap=So.createMousetrap(this)}get disabled(){return!0!==this.options.enabled}enable(){this.disabled&&(this.options.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}disable(){this.disabled||(this.options.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}on(t,e,n){this.mousetrap.bind(this.getKeys(t),e,n)}off(t,e){this.mousetrap.unbind(this.getKeys(t),e)}clear(){this.mousetrap.reset()}trigger(t,e){this.mousetrap.trigger(t,e)}focus(t){this.isInputEvent(t.e)||this.target.focus({preventScroll:!0})}getKeys(t){return(Array.isArray(t)?t:[t]).map(e=>this.formatkey(e))}formatkey(t){const e=t.toLocaleLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command"),n=this.options.format;return n?Z(n,this.graph,e):e}isGraphEvent(t){const e=t.target;return!!e&&(e===this.target||t.currentTarget===this.target||e===document.body||wl(this.container,e))}isInputEvent(t){var e;const n=t.target,o=null===(e=n?.tagName)||void 0===e?void 0:e.toLowerCase();let r=["input","textarea"].includes(o);return"true"===le(n,"contenteditable")&&(r=!0),r}isEnabledForEvent(t){const e=!this.disabled&&this.isGraphEvent(t),n=this.isInputEvent(t);if(e){if(n&&("Backspace"===t.key||"Delete"===t.key))return!1;if(this.options.guard)return Z(this.options.guard,this.graph,t)}return e}dispose(){this.mousetrap.reset()}}(function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)})([yt.dispose()],So.prototype,"dispose",null),function(i){i.createMousetrap=function t(e){const n=new(XI())(e.target),o=n.stopCallback;return n.stopCallback=(r,a,c)=>!e.isEnabledForEvent(r)||!!o&&o.call(n,r,a,c),n}}(So||(So={})),D.prototype.isKeyboardEnabled=function(){const i=this.getPlugin("keyboard");return!!i&&i.isEnabled()},D.prototype.enableKeyboard=function(){const i=this.getPlugin("keyboard");return i&&i.enable(),this},D.prototype.disableKeyboard=function(){const i=this.getPlugin("keyboard");return i&&i.disable(),this},D.prototype.toggleKeyboard=function(i){const t=this.getPlugin("keyboard");return t&&t.toggleEnabled(i),this},D.prototype.bindKey=function(i,t,e){const n=this.getPlugin("keyboard");return n&&n.bindKey(i,t,e),this},D.prototype.unbindKey=function(i,t){const e=this.getPlugin("keyboard");return e&&e.unbindKey(i,t),this},D.prototype.clearKeys=function(){const i=this.getPlugin("keyboard");return i&&i.clear(),this},D.prototype.triggerKey=function(i,t){const e=this.getPlugin("keyboard");return e&&e.trigger(i,t),this};class t8 extends yt{constructor(t={}){super(),this.name="keyboard",this.options=Object.assign({enabled:!0},t)}init(t){this.keyboardImpl=new So(Object.assign(Object.assign({},this.options),{graph:t}))}isEnabled(){return!this.keyboardImpl.disabled}enable(){this.keyboardImpl.enable()}disable(){this.keyboardImpl.disable()}toggleEnabled(t){return null!=t?t!==this.isEnabled()&&(t?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}bindKey(t,e,n){return this.keyboardImpl.on(t,e,n),this}trigger(t,e){return this.keyboardImpl.trigger(t,e),this}clear(){return this.keyboardImpl.clear(),this}unbindKey(t,e){return this.keyboardImpl.off(t,e),this}dispose(){this.keyboardImpl.dispose()}}(function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)})([yt.dispose()],t8.prototype,"dispose",null),D.prototype.isHistoryEnabled=function(){const i=this.getPlugin("history");return!!i&&i.isEnabled()},D.prototype.enableHistory=function(){const i=this.getPlugin("history");return i&&i.enable(),this},D.prototype.disableHistory=function(){const i=this.getPlugin("history");return i&&i.disable(),this},D.prototype.toggleHistory=function(i){const t=this.getPlugin("history");return t&&t.toggleEnabled(i),this},D.prototype.undo=function(i){const t=this.getPlugin("history");return t&&t.undo(i),this},D.prototype.redo=function(i){const t=this.getPlugin("history");return t&&t.redo(i),this},D.prototype.undoAndCancel=function(i){const t=this.getPlugin("history");return t&&t.cancel(i),this},D.prototype.canUndo=function(){const i=this.getPlugin("history");return!!i&&i.canUndo()},D.prototype.canRedo=function(){const i=this.getPlugin("history");return!!i&&i.canRedo()},D.prototype.cleanHistory=function(i){const t=this.getPlugin("history");return t&&t.clean(i),this},D.prototype.getHistoryStackSize=function(){return this.getPlugin("history").getSize()},D.prototype.getUndoStackSize=function(){return this.getPlugin("history").getUndoSize()},D.prototype.getRedoStackSize=function(){return this.getPlugin("history").getRedoSize()},D.prototype.getUndoRemainSize=function(){return this.getPlugin("history").getUndoRemainSize()};var Ne,_t,n8=function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);return o>3&&r&&Object.defineProperty(t,e,r),r};class To extends Ee{constructor(t={}){super(),this.name="history",this.batchCommands=null,this.batchLevel=0,this.lastBatchIndex=-1,this.freezed=!1,this.stackSize=0,this.handlers=[];const{stackSize:e=0}=t;this.stackSize=e,this.options=Ne.getOptions(t),this.validator=new To.Validator({history:this,cancelInvalid:this.options.cancelInvalid})}init(t){this.graph=t,this.model=this.graph.model,this.clean(),this.startListening()}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(t){return null!=t?t!==this.isEnabled()&&(t?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}undo(t={}){if(!this.disabled){const e=this.undoStack.pop();e&&(this.revertCommand(e,t),this.redoStack.push(e),this.notify("undo",e,t))}return this}redo(t={}){if(!this.disabled){const e=this.redoStack.pop();e&&(this.applyCommand(e,t),this.undoStackPush(e),this.notify("redo",e,t))}return this}cancel(t={}){if(!this.disabled){const e=this.undoStack.pop();e&&(this.revertCommand(e,t),this.redoStack=[],this.notify("cancel",e,t))}return this}getSize(){return this.stackSize}getUndoRemainSize(){return this.stackSize-this.undoStack.length}getUndoSize(){return this.undoStack.length}getRedoSize(){return this.redoStack.length}canUndo(){return!this.disabled&&this.undoStack.length>0}canRedo(){return!this.disabled&&this.redoStack.length>0}clean(t={}){return this.undoStack=[],this.redoStack=[],this.notify("clean",null,t),this}get disabled(){return!0!==this.options.enabled}validate(t,...e){return this.validator.validate(t,...e),this}startListening(){this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach((t,e)=>{this.handlers[e]=this.addCommand.bind(this,t),this.model.on(t,this.handlers[e])}),this.validator.on("invalid",t=>this.trigger("invalid",t))}stopListening(){this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach((t,e)=>{this.model.off(t,this.handlers[e])}),this.handlers.length=0),this.validator.off("invalid")}createCommand(t){return{batch:!!t&&t.batch,data:{}}}revertCommand(t,e){this.freezed=!0;const n=Array.isArray(t)?Ne.sortBatchCommands(t):[t];for(let o=n.length-1;o>=0;o-=1){const r=n[o],a=Object.assign(Object.assign({},e),g3(r.options,this.options.revertOptionsList||[]));this.executeCommand(r,!0,a)}this.freezed=!1}applyCommand(t,e){this.freezed=!0;const n=Array.isArray(t)?Ne.sortBatchCommands(t):[t];for(let o=0;o<n.length;o+=1){const r=n[o],a=Object.assign(Object.assign({},e),g3(r.options,this.options.applyOptionsList||[]));this.executeCommand(r,!1,a)}this.freezed=!1}executeCommand(t,e,n){const o=this.model,r=o.getCell(t.data.id),a=t.event;if(Ne.isAddEvent(a)&&e||Ne.isRemoveEvent(a)&&!e)r&&r.remove(n);else if(Ne.isAddEvent(a)&&!e||Ne.isRemoveEvent(a)&&e){const c=t.data;c.node?o.addNode(c.props,n):c.edge&&o.addEdge(c.props,n)}else if(Ne.isChangeEvent(a)){const c=t.data,l=c.key;if(l&&r){const h=e?c.prev[l]:c.next[l];"attrs"===c.key&&this.ensureUndefinedAttrs(h,e?c.next[l]:c.prev[l]),r.prop(l,h,n)}}else{const c=this.options.executeCommand;c&&Z(c,this,t,e,n)}}addCommand(t,e){if(this.freezed||this.disabled)return;const n=e,o=n.options||{};if(o.dryrun||Ne.isAddEvent(t)&&this.options.ignoreAdd||Ne.isRemoveEvent(t)&&this.options.ignoreRemove||Ne.isChangeEvent(t)&&this.options.ignoreChange)return;const r=this.options.beforeAddCommand;if(null!=r&&!1===Z(r,this,t,e))return;"cell:change:*"===t&&(t=`cell:change:${n.key}`);const a=n.cell,c=Vt.isModel(a);let l;if(this.batchCommands){if(l=this.batchCommands[Math.max(this.lastBatchIndex,0)],this.lastBatchIndex>=0&&(c&&!l.modelChange||l.data.id!==a.id||l.event!==t)){const f=this.batchCommands.findIndex(p=>(c&&p.modelChange||p.data.id===a.id)&&p.event===t);f<0||Ne.isAddEvent(t)||Ne.isRemoveEvent(t)?l=this.createCommand({batch:!0}):(l=this.batchCommands[f],this.batchCommands.splice(f,1)),this.batchCommands.push(l),this.lastBatchIndex=this.batchCommands.length-1}}else l=this.createCommand({batch:!1});if(Ne.isAddEvent(t)||Ne.isRemoveEvent(t)){const u=l.data;return l.event=t,l.options=o,u.id=a.id,u.props=Oe(a.toJSON()),a.isEdge()?u.edge=!0:a.isNode()&&(u.node=!0),this.push(l,o)}if(Ne.isChangeEvent(t)){const u=e.key,d=l.data;return(!l.batch||!l.event)&&(l.event=t,l.options=o,d.key=u,null==d.prev&&(d.prev={}),d.prev[u]=Oe(a.previous(u)),c?l.modelChange=!0:d.id=a.id),null==d.next&&(d.next={}),d.next[u]=Oe(a.prop(u)),this.push(l,o)}const h=this.options.afterAddCommand;h&&Z(h,this,t,e,l),this.push(l,o)}initBatchCommand(t){this.freezed||(this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1))}storeBatchCommand(t){if(!this.freezed)if(this.batchCommands&&this.batchLevel<=0){const e=this.filterBatchCommand(this.batchCommands);e.length>0&&(this.redoStack=[],this.undoStackPush(e),this.consolidateCommands(),this.notify("add",e,t)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)}filterBatchCommand(t){let e=t.slice();const n=[];for(;e.length>0;){const o=e.shift(),r=o.event,a=o.data.id;if(null!=r&&(null!=a||o.modelChange)){if(Ne.isAddEvent(r)){const c=e.findIndex(l=>Ne.isRemoveEvent(l.event)&&l.data.id===a);if(c>=0){e=e.filter((l,h)=>c<h||l.data.id!==a);continue}}else if(Ne.isRemoveEvent(r)){const c=e.findIndex(l=>Ne.isAddEvent(l.event)&&l.data.id===a);if(c>=0){e.splice(c,1);continue}}else if(Ne.isChangeEvent(r)){const c=o.data;if(Jt(c.prev,c.next))continue}n.push(o)}}return n}notify(t,e,n){const o=null==e?null:Array.isArray(e)?e:[e];this.emit(t,{cmds:o,options:n}),this.graph.trigger(`history:${t}`,{cmds:o,options:n}),this.emit("change",{cmds:o,options:n}),this.graph.trigger("history:change",{cmds:o,options:n})}push(t,e){this.redoStack=[],t.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:t,options:e})):(this.undoStackPush(t),this.consolidateCommands(),this.notify("add",t,e))}consolidateCommands(){var t;const e=this.undoStack[this.undoStack.length-1],n=this.undoStack[this.undoStack.length-2];if(!Array.isArray(e))return;const o=new Set(e.map(a=>a.event));if(!(2===o.size&&o.has("cell:change:parent")&&o.has("cell:change:children")&&e.every(a=>{var c;return a.batch&&(null===(c=a.options)||void 0===c?void 0:c.ui)})&&Array.isArray(n)&&1===n.length))return;const r=n[0];"cell:change:position"!==r.event||null===(t=r.options)||void 0===t||!t.ui||(n.push(...e),this.undoStack.pop())}undoStackPush(t){0!==this.stackSize?(this.undoStack.length>=this.stackSize&&this.undoStack.shift(),this.undoStack.push(t)):this.undoStack.push(t)}ensureUndefinedAttrs(t,e){"object"==typeof t&&"object"==typeof e&&Object.keys(e).forEach(n=>{t.hasOwnProperty(n)?"object"==typeof t[n]&&"object"==typeof e[n]&&this.ensureUndefinedAttrs(t[n],e[n]):t[n]=void 0})}dispose(){this.validator.dispose(),this.clean(),this.stopListening(),this.off()}}n8([Ee.dispose()],To.prototype,"dispose",null),function(i){class t extends Ee{constructor(n){super(),this.map={},this.command=n.history,this.cancelInvalid=!1!==n.cancelInvalid,this.command.on("add",this.onCommandAdded,this)}onCommandAdded({cmds:n}){return Array.isArray(n)?n.every(o=>this.isValidCommand(o)):this.isValidCommand(n)}isValidCommand(n){if(n.options&&!1===n.options.validation)return!0;let r=null;return(n.event&&this.map[n.event]||[]).forEach(a=>{let c=0;const l=h=>{const u=a[c];c+=1;try{if(!u)return void(r=h);u(h,n,l)}catch(d){l(d)}};l(r)}),!r||(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:r}),!1)}validate(n,...o){const r=Array.isArray(n)?n:n.split(/\s+/);return o.forEach(a=>{if("function"!=typeof a)throw new Error(`${r.join(" ")} requires callback functions.`)}),r.forEach(a=>{null==this.map[a]&&(this.map[a]=[]),this.map[a].push(o)}),this}dispose(){this.command.off("add",this.onCommandAdded,this)}}n8([Ee.dispose()],t.prototype,"dispose",null),i.Validator=t}(To||(To={})),function(i){i.isAddEvent=function t(a){return"cell:added"===a},i.isRemoveEvent=function e(a){return"cell:removed"===a},i.isChangeEvent=function n(a){return null!=a&&a.startsWith("cell:change:")},i.getOptions=function o(a){const c=["cell:added","cell:removed","cell:change:*"],l=["batch:start","batch:stop"],h=a.eventNames?a.eventNames.filter(u=>!(i.isChangeEvent(u)||c.includes(u)||l.includes(u))):c;return Object.assign(Object.assign({enabled:!0},a),{eventNames:h,applyOptionsList:a.applyOptionsList||["propertyPath"],revertOptionsList:a.revertOptionsList||["propertyPath"]})},i.sortBatchCommands=function r(a){const c=[];for(let l=0,h=a.length;l<h;l+=1){const u=a[l];let d=null;if(i.isAddEvent(u.event)){const f=u.data.id;for(let p=0;p<l;p+=1)if(a[p].data.id===f){d=p;break}}null!==d?c.splice(d,0,u):c.push(u)}return c}}(Ne||(Ne={}));class o8 extends fe{get graph(){return this.options.graph}get boxClassName(){return this.prefixClassName(_t.classNames.box)}get $boxes(){return function zE(i,t){const e=[];let n=i.firstChild;for(;n;n=n.nextSibling)1===n.nodeType&&(!t||so(n,t))&&e.push(n);return e}(this.container,this.boxClassName)}get handleOptions(){return this.options}constructor(t){super(),this.options=t,this.options.model&&(this.options.collection=this.options.model.collection),this.options.collection?this.collection=this.options.collection:(this.collection=new j6([],{comparator:_t.depthComparator}),this.options.collection=this.collection),this.boxCount=0,this.createContainer(),this.startListening()}startListening(){const t=this.graph,e=this.collection;this.delegateEvents({[`mousedown .${this.boxClassName}`]:"onSelectionBoxMouseDown",[`touchstart .${this.boxClassName}`]:"onSelectionBoxMouseDown"},!0),t.on("scale",this.onGraphTransformed,this),t.on("translate",this.onGraphTransformed,this),t.model.on("updated",this.onModelUpdated,this),e.on("added",this.onCellAdded,this),e.on("removed",this.onCellRemoved,this),e.on("reseted",this.onReseted,this),e.on("updated",this.onCollectionUpdated,this),e.on("node:change:position",this.onNodePositionChanged,this),e.on("cell:changed",this.onCellChanged,this)}stopListening(){const t=this.graph,e=this.collection;this.undelegateEvents(),t.off("scale",this.onGraphTransformed,this),t.off("translate",this.onGraphTransformed,this),t.model.off("updated",this.onModelUpdated,this),e.off("added",this.onCellAdded,this),e.off("removed",this.onCellRemoved,this),e.off("reseted",this.onReseted,this),e.off("updated",this.onCollectionUpdated,this),e.off("node:change:position",this.onNodePositionChanged,this),e.off("cell:changed",this.onCellChanged,this)}onRemove(){this.stopListening()}onGraphTransformed(){this.updateSelectionBoxes()}onCellChanged(){this.updateSelectionBoxes()}onNodePositionChanged({node:t,options:e}){const{showNodeSelectionBox:n,pointerEvents:o}=this.options,{ui:r,selection:a,translateBy:c,snapped:l}=e;if(!(!0===n&&"none"!==o||this.translating||a)&&(r&&c&&t.id===c||l)){this.translating=!0;const d=t.position(),f=t.previous("position"),p=d.x-f.x,g=d.y-f.y;(0!==p||0!==g)&&this.translateSelectedNodes(p,g,t,e),this.translating=!1}}onModelUpdated({removed:t}){t&&t.length&&this.unselect(t)}isEmpty(){return this.length<=0}isSelected(t){return this.collection.has(t)}get length(){return this.collection.length}get cells(){return this.collection.toArray()}select(t,e={}){e.dryrun=!0;const n=this.filter(Array.isArray(t)?t:[t]);return this.collection.add(n,e),this}unselect(t,e={}){return e.dryrun=!0,this.collection.remove(Array.isArray(t)?t:[t],e),this}reset(t,e={}){if(t){if(e.batch){const h=this.filter(Array.isArray(t)?t:[t]);return this.collection.reset(h,Object.assign(Object.assign({},e),{ui:!0})),this}const n=this.cells,o=this.filter(Array.isArray(t)?t:[t]),r={},a={};n.forEach(h=>r[h.id]=h),o.forEach(h=>a[h.id]=h);const c=[],l=[];return o.forEach(h=>{r[h.id]||c.push(h)}),n.forEach(h=>{a[h.id]||l.push(h)}),l.length&&this.unselect(l,Object.assign(Object.assign({},e),{ui:!0})),c.length&&this.select(c,Object.assign(Object.assign({},e),{ui:!0})),0===l.length&&0===c.length&&this.updateContainer(),this}return this.clean(e)}clean(t={}){return this.length&&(!1===t.batch?this.unselect(this.cells,t):this.collection.reset([],Object.assign(Object.assign({},t),{ui:!0}))),this}setFilter(t){this.options.filter=t}setContent(t){this.options.content=t}startSelecting(t){let e,n;t=this.normalizeEvent(t),this.clean();const o=this.graph.container;if(null!=t.offsetX&&null!=t.offsetY&&o.contains(t.target))e=t.offsetX,n=t.offsetY;else{const r=Ss(o);e=t.clientX-r.left+window.pageXOffset+o.scrollLeft,n=t.clientY-r.top+window.pageYOffset+o.scrollTop}Ye(this.container,{top:n,left:e,width:1,height:1}),this.setEventData(t,{action:"selecting",clientX:t.clientX,clientY:t.clientY,offsetX:e,offsetY:n,scrollerX:0,scrollerY:0,moving:!1}),this.delegateDocumentEvents(_t.documentEvents,t.data)}filter(t){const e=this.options.filter;return t.filter(n=>Array.isArray(e)?e.some(o=>"string"==typeof o?n.shape===o:n.id===o.id):"function"!=typeof e||Z(e,this.graph,n))}stopSelecting(t){const e=this.graph,n=this.getEventData(t);switch(n.action){case"selecting":{let r=function eN(i){return i.getBoundingClientRect().width}(this.container),a=function tN(i){return i.getBoundingClientRect().height}(this.container);const c=Ss(this.container),l=e.pageToLocal(c.left,c.top),h=e.transform.getScale();r/=h.sx,a/=h.sy;const u=new F(l.x,l.y,r,a),d=this.getCellViewsInArea(u).map(f=>f.cell);this.reset(d,{batch:!0}),this.hideRubberband();break}case"translating":{const r=e.snapToGrid(t.clientX,t.clientY);this.options.following||this.updateSelectedNodesPosition({dx:n.clientX-n.originX,dy:n.clientY-n.originY}),this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",t,r.x,r.y);break}default:this.clean()}}onMouseUp(t){this.getEventData(t).action&&(this.stopSelecting(t),this.undelegateDocumentEvents())}onSelectionBoxMouseDown(t){this.options.following||t.stopPropagation();const e=this.normalizeEvent(t);this.options.movable&&this.startTranslating(e);const n=this.getCellViewFromElem(e.target);this.setEventData(e,{activeView:n});const o=this.graph.snapToGrid(e.clientX,e.clientY);this.notifyBoxEvent("box:mousedown",e,o.x,o.y),this.delegateDocumentEvents(_t.documentEvents,e.data)}startTranslating(t){this.graph.model.startBatch("move-selection");const e=this.graph.snapToGrid(t.clientX,t.clientY);this.setEventData(t,{action:"translating",clientX:e.x,clientY:e.y,originX:e.x,originY:e.y})}getRestrictArea(){const t=this.graph.options.translating.restrict,e="function"==typeof t?Z(t,this.graph,null):t;return"number"==typeof e?this.graph.transform.getGraphArea().inflate(e):!0===e?this.graph.transform.getGraphArea():e||null}getSelectionOffset(t,e){let n=t.x-e.clientX,o=t.y-e.clientY;const r=this.getRestrictArea();if(r){const a=this.collection.toArray(),c=ae.getCellsBBox(a,{deep:!0})||F.create(),l=r.x-c.x,h=r.y-c.y,u=r.x+r.width-(c.x+c.width),d=r.y+r.height-(c.y+c.height);if(n<l&&(n=l),o<h&&(o=h),u<n&&(n=u),d<o&&(o=d),!this.options.following){const f=t.x-e.originX,p=t.y-e.originY;n=f<=l||f>=u?0:n,o=p<=h||p>=d?0:o}}return{dx:n,dy:o}}updateElementPosition(t,e,n){const o=Ye(t,"left"),r=Ye(t,"top"),a=o?parseFloat(o):0,c=r?parseFloat(r):0;Ye(t,"left",a+e),Ye(t,"top",c+n)}updateSelectedNodesPosition(t){const{dx:e,dy:n}=t;if(e||n)if(this.translateSelectedNodes(e,n),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{const o=this.graph.transform.getScale();for(let r=0,a=this.$boxes.length;r<a;r+=1)this.updateElementPosition(this.$boxes[r],e*o.sx,n*o.sy);this.updateElementPosition(this.selectionContainer,e*o.sx,n*o.sy)}}autoScrollGraph(t,e){const n=this.graph.getPlugin("scroller");return n?n.autoScroll(t,e):{scrollerX:0,scrollerY:0}}adjustSelection(t){const e=this.normalizeEvent(t),n=this.getEventData(e);switch(n.action){case"selecting":{const r=n;!0!==r.moving&&(zs(this.container,this.graph.container),this.showRubberband(),r.moving=!0);const{scrollerX:a,scrollerY:c}=this.autoScrollGraph(e.clientX,e.clientY);r.scrollerX+=a,r.scrollerY+=c;const l=e.clientX-r.clientX+r.scrollerX,h=e.clientY-r.clientY+r.scrollerY,u=parseInt(Ye(this.container,"left")||"0",10),d=parseInt(Ye(this.container,"top")||"0",10);Ye(this.container,{left:l<0?r.offsetX+l:u,top:h<0?r.offsetY+h:d,width:Math.abs(l),height:Math.abs(h)});break}case"translating":{const r=this.graph.snapToGrid(e.clientX,e.clientY),a=n,c=this.getSelectionOffset(r,a);this.options.following?this.updateSelectedNodesPosition(c):this.updateContainerPosition(c),c.dx&&(a.clientX=r.x),c.dy&&(a.clientY=r.y),this.notifyBoxEvent("box:mousemove",t,r.x,r.y);break}}this.boxesUpdated=!1}translateSelectedNodes(t,e,n,o){const r={},a=[];if(n&&(r[n.id]=!0),this.collection.toArray().forEach(c=>{c.getDescendants({deep:!0}).forEach(l=>{r[l.id]=!0})}),o&&o.translateBy){const c=this.graph.getCellById(o.translateBy);c&&(r[c.id]=!0,c.getDescendants({deep:!0}).forEach(l=>{r[l.id]=!0}),a.push(c))}this.collection.toArray().forEach(c=>{if(!r[c.id]){const l=Object.assign(Object.assign({},o),{selection:this.cid,exclude:a});c.translate(t,e,l),this.graph.model.getConnectedEdges(c).forEach(h=>{r[h.id]||(h.translate(t,e,l),r[h.id]=!0)})}})}getCellViewsInArea(t){const e=this.graph,n={strict:this.options.strict};let o=[];return this.options.rubberNode&&(o=o.concat(e.model.getNodesInArea(t,n).map(r=>e.renderer.findViewByCell(r)).filter(r=>null!=r))),this.options.rubberEdge&&(o=o.concat(e.model.getEdgesInArea(t,n).map(r=>e.renderer.findViewByCell(r)).filter(r=>null!=r))),o}notifyBoxEvent(t,e,n,o){const a=this.getEventData(e).activeView;this.trigger(t,{e,view:a,x:n,y:o,cell:a.cell})}getSelectedClassName(t){return this.prefixClassName((t.isNode()?"node":"edge")+"-selected")}addCellSelectedClassName(t){const e=this.graph.renderer.findViewByCell(t);e&&e.addClass(this.getSelectedClassName(t))}removeCellUnSelectedClassName(t){const e=this.graph.renderer.findViewByCell(t);e&&e.removeClass(this.getSelectedClassName(t))}destroySelectionBox(t){this.removeCellUnSelectedClassName(t),this.canShowSelectionBox(t)&&(Qt(this.container.querySelector(`[data-cell-id="${t.id}"]`)),0===this.$boxes.length&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}destroyAllSelectionBoxes(t){t.forEach(e=>this.removeCellUnSelectedClassName(e)),this.hide(),Qt(this.$boxes),this.boxCount=0}hide(){$e(this.container,this.prefixClassName(_t.classNames.rubberband)),$e(this.container,this.prefixClassName(_t.classNames.selected))}showRubberband(){ee(this.container,this.prefixClassName(_t.classNames.rubberband))}hideRubberband(){$e(this.container,this.prefixClassName(_t.classNames.rubberband))}showSelected(){Sl(this.container,"style"),ee(this.container,this.prefixClassName(_t.classNames.selected))}createContainer(){this.container=document.createElement("div"),ee(this.container,this.prefixClassName(_t.classNames.root)),this.options.className&&ee(this.container,this.options.className),this.selectionContainer=document.createElement("div"),ee(this.selectionContainer,this.prefixClassName(_t.classNames.inner)),this.selectionContent=document.createElement("div"),ee(this.selectionContent,this.prefixClassName(_t.classNames.content)),Nn(this.selectionContainer,this.selectionContent),le(this.selectionContainer,"data-selection-length",this.collection.length),gh(this.container,this.selectionContainer)}updateContainerPosition(t){(t.dx||t.dy)&&this.updateElementPosition(this.selectionContainer,t.dx,t.dy)}updateContainer(){const t={x:1/0,y:1/0},e={x:0,y:0};this.collection.toArray().filter(r=>this.canShowSelectionBox(r)).forEach(r=>{const a=this.graph.renderer.findViewByCell(r);if(a){const c=a.getBBox({useCellGeometry:!0});t.x=Math.min(t.x,c.x),t.y=Math.min(t.y,c.y),e.x=Math.max(e.x,c.x+c.width),e.y=Math.max(e.y,c.y+c.height)}}),Ye(this.selectionContainer,{position:"absolute",pointerEvents:"none",left:t.x,top:t.y,width:e.x-t.x,height:e.y-t.y}),le(this.selectionContainer,"data-selection-length",this.collection.length);const o=this.options.content;if(o)if("function"==typeof o){const r=Z(o,this.graph,this,this.selectionContent);r&&(this.selectionContent.innerHTML=r)}else this.selectionContent.innerHTML=o;this.collection.length>0&&!this.container.parentNode?zs(this.container,this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}canShowSelectionBox(t){return t.isNode()&&!0===this.options.showNodeSelectionBox||t.isEdge()&&!0===this.options.showEdgeSelectionBox}createSelectionBox(t){if(this.addCellSelectedClassName(t),this.canShowSelectionBox(t)){const e=this.graph.renderer.findViewByCell(t);if(e){const n=e.getBBox({useCellGeometry:!0}),o=this.boxClassName,r=document.createElement("div");ee(r,o),ee(r,`${o}-${t.isNode()?"node":"edge"}`),le(r,"data-cell-id",t.id),Ye(r,{position:"absolute",left:n.x,top:n.y,width:n.width,height:n.height,pointerEvents:this.options.pointerEvents||"auto"}),zs(r,this.container),this.showSelected(),this.boxCount+=1}}}updateSelectionBoxes(){this.collection.length>0&&(this.boxesUpdated=!0,this.confirmUpdate())}confirmUpdate(){if(this.boxCount){this.hide();for(let t=0,e=this.$boxes.length;t<e;t+=1){const n=this.$boxes[t],o=le(n,"data-cell-id");Qt(n);const r=this.collection.get(o);r&&this.createSelectionBox(r)}this.updateContainer()}return 0}getCellViewFromElem(t){const e=t.getAttribute("data-cell-id");if(e){const n=this.collection.get(e);if(n)return this.graph.renderer.findViewByCell(n)}return null}onCellRemoved({cell:t}){this.destroySelectionBox(t),this.updateContainer()}onReseted({previous:t,current:e}){this.destroyAllSelectionBoxes(t),e.forEach(n=>{this.listenCellRemoveEvent(n),this.createSelectionBox(n)}),this.updateContainer()}onCellAdded({cell:t}){this.listenCellRemoveEvent(t),this.createSelectionBox(t),this.updateContainer()}listenCellRemoveEvent(t){t.off("removed",this.onCellRemoved,this),t.on("removed",this.onCellRemoved,this)}onCollectionUpdated({added:t,removed:e,options:n}){t.forEach(r=>{this.trigger("cell:selected",{cell:r,options:n}),r.isNode()?this.trigger("node:selected",{cell:r,options:n,node:r}):r.isEdge()&&this.trigger("edge:selected",{cell:r,options:n,edge:r})}),e.forEach(r=>{this.trigger("cell:unselected",{cell:r,options:n}),r.isNode()?this.trigger("node:unselected",{cell:r,options:n,node:r}):r.isEdge()&&this.trigger("edge:unselected",{cell:r,options:n,edge:r})});const o={added:t,removed:e,options:n,selected:this.cells.filter(r=>!!this.graph.getCellById(r.id))};this.trigger("selection:changed",o)}dispose(){this.clean(),this.remove(),this.off()}}!function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([fe.dispose()],o8.prototype,"dispose",null),function(i){const t="widget-selection";i.classNames={root:t,inner:`${t}-inner`,box:`${t}-box`,content:`${t}-content`,rubberband:`${t}-rubberband`,selected:`${t}-selected`},i.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},i.depthComparator=function e(n){return n.getAncestors().length}}(_t||(_t={})),D.prototype.isSelectionEnabled=function(){const i=this.getPlugin("selection");return!!i&&i.isEnabled()},D.prototype.enableSelection=function(){const i=this.getPlugin("selection");return i&&i.enable(),this},D.prototype.disableSelection=function(){const i=this.getPlugin("selection");return i&&i.disable(),this},D.prototype.toggleSelection=function(i){const t=this.getPlugin("selection");return t&&t.toggleEnabled(i),this},D.prototype.isMultipleSelection=function(){const i=this.getPlugin("selection");return!!i&&i.isMultipleSelection()},D.prototype.enableMultipleSelection=function(){const i=this.getPlugin("selection");return i&&i.enableMultipleSelection(),this},D.prototype.disableMultipleSelection=function(){const i=this.getPlugin("selection");return i&&i.disableMultipleSelection(),this},D.prototype.toggleMultipleSelection=function(i){const t=this.getPlugin("selection");return t&&t.toggleMultipleSelection(i),this},D.prototype.isSelectionMovable=function(){const i=this.getPlugin("selection");return!!i&&i.isSelectionMovable()},D.prototype.enableSelectionMovable=function(){const i=this.getPlugin("selection");return i&&i.enableSelectionMovable(),this},D.prototype.disableSelectionMovable=function(){const i=this.getPlugin("selection");return i&&i.disableSelectionMovable(),this},D.prototype.toggleSelectionMovable=function(i){const t=this.getPlugin("selection");return t&&t.toggleSelectionMovable(i),this},D.prototype.isRubberbandEnabled=function(){const i=this.getPlugin("selection");return!!i&&i.isRubberbandEnabled()},D.prototype.enableRubberband=function(){const i=this.getPlugin("selection");return i&&i.enableRubberband(),this},D.prototype.disableRubberband=function(){const i=this.getPlugin("selection");return i&&i.disableRubberband(),this},D.prototype.toggleRubberband=function(i){const t=this.getPlugin("selection");return t&&t.toggleRubberband(i),this},D.prototype.isStrictRubberband=function(){const i=this.getPlugin("selection");return!!i&&i.isStrictRubberband()},D.prototype.enableStrictRubberband=function(){const i=this.getPlugin("selection");return i&&i.enableStrictRubberband(),this},D.prototype.disableStrictRubberband=function(){const i=this.getPlugin("selection");return i&&i.disableStrictRubberband(),this},D.prototype.toggleStrictRubberband=function(i){const t=this.getPlugin("selection");return t&&t.toggleStrictRubberband(i),this},D.prototype.setRubberbandModifiers=function(i){const t=this.getPlugin("selection");return t&&t.setRubberbandModifiers(i),this},D.prototype.setSelectionFilter=function(i){const t=this.getPlugin("selection");return t&&t.setSelectionFilter(i),this},D.prototype.setSelectionDisplayContent=function(i){const t=this.getPlugin("selection");return t&&t.setSelectionDisplayContent(i),this},D.prototype.isSelectionEmpty=function(){const i=this.getPlugin("selection");return!i||i.isEmpty()},D.prototype.cleanSelection=function(i){const t=this.getPlugin("selection");return t&&t.clean(i),this},D.prototype.resetSelection=function(i,t){const e=this.getPlugin("selection");return e&&e.reset(i,t),this},D.prototype.getSelectedCells=function(){const i=this.getPlugin("selection");return i?i.getSelectedCells():[]},D.prototype.getSelectedCellCount=function(){const i=this.getPlugin("selection");return i?i.getSelectedCellCount():0},D.prototype.isSelected=function(i){const t=this.getPlugin("selection");return!!t&&t.isSelected(i)},D.prototype.select=function(i,t){const e=this.getPlugin("selection");return e&&e.select(i,t),this},D.prototype.unselect=function(i,t){const e=this.getPlugin("selection");return e?e.unselect(i,t):this};class Oo extends Ee{get rubberbandDisabled(){return!0!==this.options.enabled||!0!==this.options.rubberband}get disabled(){return!0!==this.options.enabled}get length(){return this.selectionImpl.length}get cells(){return this.selectionImpl.cells}constructor(t={}){super(),this.name="selection",this.movedMap=new WeakMap,this.unselectMap=new WeakMap,this.options=Pe({enabled:!0},Oo.defaultOptions,t),As(this.name,".x6-widget-selection {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: none;\n  width: 0;\n  height: 0;\n  touch-action: none;\n}\n.x6-widget-selection-rubberband {\n  display: block;\n  overflow: visible;\n  opacity: 0.3;\n}\n.x6-widget-selection-selected {\n  display: block;\n}\n.x6-widget-selection-box {\n  cursor: move;\n}\n.x6-widget-selection-inner[data-selection-length='0'],\n.x6-widget-selection-inner[data-selection-length='1'] {\n  display: none;\n}\n.x6-widget-selection-content {\n  position: absolute;\n  top: 100%;\n  right: -20px;\n  left: -20px;\n  margin-top: 30px;\n  padding: 6px;\n  line-height: 14px;\n  text-align: center;\n  border-radius: 6px;\n}\n.x6-widget-selection-content:empty {\n  display: none;\n}\n.x6-widget-selection-rubberband {\n  background-color: #3498db;\n  border: 2px solid #2980b9;\n}\n.x6-widget-selection-box {\n  box-sizing: content-box !important;\n  margin-top: -4px;\n  margin-left: -4px;\n  padding-right: 4px;\n  padding-bottom: 4px;\n  border: 2px dashed #feb663;\n  box-shadow: 2px 2px 5px #d3d3d3;\n}\n.x6-widget-selection-inner {\n  box-sizing: content-box !important;\n  margin-top: -8px;\n  margin-left: -8px;\n  padding-right: 12px;\n  padding-bottom: 12px;\n  border: 2px solid #feb663;\n  box-shadow: 2px 2px 5px #d3d3d3;\n}\n.x6-widget-selection-content {\n  color: #fff;\n  font-size: 10px;\n  background-color: #6a6b8a;\n}\n")}init(t){this.graph=t,this.selectionImpl=new o8(Object.assign(Object.assign({},this.options),{graph:t})),this.setup(),this.startListening()}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(t){return null!=t?t!==this.isEnabled()&&(t?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}isMultipleSelection(){return this.isMultiple()}enableMultipleSelection(){return this.enableMultiple(),this}disableMultipleSelection(){return this.disableMultiple(),this}toggleMultipleSelection(t){return null!=t?t!==this.isMultipleSelection()&&(t?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}isSelectionMovable(){return!1!==this.options.movable}enableSelectionMovable(){return this.selectionImpl.options.movable=!0,this}disableSelectionMovable(){return this.selectionImpl.options.movable=!1,this}toggleSelectionMovable(t){return null!=t?t!==this.isSelectionMovable()&&(t?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}isRubberbandEnabled(){return!this.rubberbandDisabled}enableRubberband(){return this.rubberbandDisabled&&(this.options.rubberband=!0),this}disableRubberband(){return this.rubberbandDisabled||(this.options.rubberband=!1),this}toggleRubberband(t){return null!=t?t!==this.isRubberbandEnabled()&&(t?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}isStrictRubberband(){return!0===this.selectionImpl.options.strict}enableStrictRubberband(){return this.selectionImpl.options.strict=!0,this}disableStrictRubberband(){return this.selectionImpl.options.strict=!1,this}toggleStrictRubberband(t){return null!=t?t!==this.isStrictRubberband()&&(t?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}setRubberbandModifiers(t){this.setModifiers(t)}setSelectionFilter(t){return this.setFilter(t),this}setSelectionDisplayContent(t){return this.setContent(t),this}isEmpty(){return this.length<=0}clean(t={}){return this.selectionImpl.clean(t),this}reset(t,e={}){return this.selectionImpl.reset(t?this.getCells(t):[],e),this}getSelectedCells(){return this.cells}getSelectedCellCount(){return this.length}isSelected(t){return this.selectionImpl.isSelected(t)}select(t,e={}){const n=this.getCells(t);return n.length&&(this.isMultiple()?this.selectionImpl.select(n,e):this.reset(n.slice(0,1),e)),this}unselect(t,e={}){return this.selectionImpl.unselect(this.getCells(t),e),this}setup(){this.selectionImpl.on("*",(t,e)=>{this.trigger(t,e),this.graph.trigger(t,e)})}startListening(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.selectionImpl.on("box:mousedown",this.onBoxMouseDown,this)}stopListening(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.selectionImpl.off("box:mousedown",this.onBoxMouseDown,this)}onBlankMouseDown({e:t}){const e=this.graph.panning.allowPanning(t,!0),n=this.graph.getPlugin("scroller"),o=n&&n.allowPanning(t,!0);(this.allowRubberband(t,!0)||this.allowRubberband(t)&&!o&&!e)&&this.startRubberband(t)}onBlankClick(){this.clean()}allowRubberband(t,e){return!this.rubberbandDisabled&&fi.isMatch(t,this.options.modifiers,e)}allowMultipleSelection(t){return this.isMultiple()&&fi.isMatch(t,this.options.multipleSelectionModifiers)}onCellMouseMove({cell:t}){this.movedMap.set(t,!0)}onCellMouseUp({e:t,cell:e}){const n=this.options;let o=this.disabled;!o&&this.movedMap.has(e)&&(o=!1===n.selectCellOnMoved,o||(o=!1===n.selectNodeOnMoved&&e.isNode()),o||(o=!1===n.selectEdgeOnMoved&&e.isEdge())),o||(this.allowMultipleSelection(t)?this.unselectMap.has(e)?this.unselectMap.delete(e):this.isSelected(e)?this.unselect(e):this.select(e):this.reset(e)),this.movedMap.delete(e)}onBoxMouseDown({e:t,cell:e}){this.disabled||this.allowMultipleSelection(t)&&(this.unselect(e),this.unselectMap.set(e,!0))}getCells(t){return(Array.isArray(t)?t:[t]).map(e=>"string"==typeof e?this.graph.getCellById(e):e).filter(e=>null!=e)}startRubberband(t){return this.rubberbandDisabled||this.selectionImpl.startSelecting(t),this}isMultiple(){return!1!==this.options.multiple}enableMultiple(){return this.options.multiple=!0,this}disableMultiple(){return this.options.multiple=!1,this}setModifiers(t){return this.options.modifiers=t,this}setContent(t){return this.selectionImpl.setContent(t),this}setFilter(t){return this.selectionImpl.setFilter(t),this}dispose(){this.stopListening(),this.off(),this.selectionImpl.dispose(),Es(this.name)}}(function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)})([Ee.dispose()],Oo.prototype,"dispose",null),function(i){i.defaultOptions={rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,following:!0,content:null}}(Oo||(Oo={})),D.prototype.toSVG=function(i,t){const e=this.getPlugin("export");e&&e.toSVG(i,t)},D.prototype.toPNG=function(i,t){const e=this.getPlugin("export");e&&e.toPNG(i,t)},D.prototype.toJPEG=function(i,t){const e=this.getPlugin("export");e&&e.toJPEG(i,t)},D.prototype.exportPNG=function(i,t){const e=this.getPlugin("export");e&&e.exportPNG(i,t)},D.prototype.exportJPEG=function(i,t){const e=this.getPlugin("export");e&&e.exportJPEG(i,t)},D.prototype.exportSVG=function(i,t){const e=this.getPlugin("export");e&&e.exportSVG(i,t)};class s8 extends Ee{constructor(){super(),this.name="export"}get view(){return this.graph.view}init(t){this.graph=t}exportPNG(t="chart",e={}){this.toPNG(n=>{li.downloadDataUri(n,t)},e)}exportJPEG(t="chart",e={}){this.toPNG(n=>{li.downloadDataUri(n,t)},e)}exportSVG(t="chart",e={}){this.toSVG(n=>{li.downloadDataUri(li.svgToDataUrl(n),t)},e)}toSVG(t,e={}){this.notify("before:export",e);const n=this.view.svg,o=X.create(n).clone();let r=o.node;const a=o.findOne(`.${this.view.prefixClassName("graph-svg-stage")}`),c=e.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),l=e.preserveDimensions;if(l){const d="boolean"==typeof l?c:l;o.attr({width:d.width,height:d.height})}if(o.removeAttribute("style").attr("viewBox",[c.x,c.y,c.width,c.height].join(" ")),a.removeAttribute("transform"),!1!==e.copyStyles){const d=n.ownerDocument,f=Array.from(n.querySelectorAll("*")),p=Array.from(r.querySelectorAll("*")),g=d.styleSheets.length,m=[];for(let y=g-1;y>=0;y-=1)m[y]=d.styleSheets[y],d.styleSheets[y].disabled=!0;const v={};f.forEach((y,z)=>{const C=window.getComputedStyle(y,null),x={};Object.keys(C).forEach(w=>{x[w]=C.getPropertyValue(w)}),v[z]=x}),g!==d.styleSheets.length&&m.forEach((y,z)=>{d.styleSheets[z]=y});for(let y=0;y<g;y+=1)d.styleSheets[y].disabled=!1;const b={};f.forEach((y,z)=>{const C=window.getComputedStyle(y,null),x=v[z],w={};Object.keys(C).forEach(O=>{!vl(O)&&C.getPropertyValue(O)!==x[O]&&(w[O]=C.getPropertyValue(O))}),b[z]=w}),p.forEach((y,z)=>{Ye(y,b[z])})}const h=e.stylesheet;if("string"==typeof h){const d=n.ownerDocument.implementation.createDocument(null,"xml",null).createCDATASection(h);o.prepend(X.create("style",{type:"text/css"},[d]))}const u=()=>{const d=e.beforeSerialize;if("function"==typeof d){const p=Z(d,this.graph,r);p instanceof SVGSVGElement&&(r=p)}const f=(new XMLSerializer).serializeToString(r).replace(/&nbsp;/g,"\xa0");this.notify("after:export",e),t(f)};if(e.serializeImages){const d=o.find("image").map(f=>new Promise(p=>{const g=f.attr("xlink:href")||f.attr("href");li.imageToDataUri(g,(m,v)=>{!m&&v&&f.attr("xlink:href",v),p()})}));Promise.all(d).then(u)}else u()}toDataURL(t,e){let n=e.viewBox||this.graph.getContentBBox();const o=On(e.padding);e.width&&e.height&&(o.left+o.right>=e.width&&(o.left=o.right=0),o.top+o.bottom>=e.height&&(o.top=o.bottom=0));const r=new F(-o.left,-o.top,o.left+o.right,o.top+o.bottom);e.width&&e.height&&r.scale((n.width+o.left+o.right)/e.width,(n.height+o.top+o.bottom)/e.height),n=F.create(n).moveAndExpand(r);const a="number"==typeof e.width&&"number"==typeof e.height?{width:e.width,height:e.height}:n;let c=e.ratio?parseFloat(e.ratio):1;(!Number.isFinite(c)||0===c)&&(c=1);const l={width:Math.max(Math.round(a.width*c),1),height:Math.max(Math.round(a.height*c),1)};{const u=document.createElement("canvas"),d=u.getContext("2d");u.width=l.width,u.height=l.height;const f=l.width-1,p=l.height-1;d.fillStyle="rgb(1,1,1)",d.fillRect(f,p,1,1);const g=d.getImageData(f,p,1,1).data;if(1!==g[0]||1!==g[1]||1!==g[2])throw new Error("size exceeded")}const h=new Image;h.onload=()=>{const u=document.createElement("canvas");u.width=l.width,u.height=l.height;const d=u.getContext("2d");d.fillStyle=e.backgroundColor||"white",d.fillRect(0,0,l.width,l.height);try{d.drawImage(h,0,0,l.width,l.height);const f=u.toDataURL(e.type,e.quality);t(f)}catch{}},this.toSVG(u=>{h.src=`data:image/svg+xml,${encodeURIComponent(u)}`},Object.assign(Object.assign({},e),{viewBox:n,serializeImages:!0,preserveDimensions:Object.assign({},l)}))}toPNG(t,e={}){this.toDataURL(t,Object.assign(Object.assign({},e),{type:"image/png"}))}toJPEG(t,e={}){this.toDataURL(t,Object.assign(Object.assign({},e),{type:"image/jpeg"}))}notify(t,e){this.trigger(t,e),this.graph.trigger(t,e)}dispose(){this.off()}}!function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)}([Ee.dispose()],s8.prototype,"dispose",null);class zi extends fe{get targetScroller(){return this.options.target.getPlugin("scroller")}get targetGraph(){return this.options.target}get targetModel(){return this.targetGraph.model}get snapline(){return this.options.target.getPlugin("snapline")}constructor(t){super(),this.name="dnd",this.options=Object.assign(Object.assign({},zi.defaults),t),this.init()}init(){As(this.name,".x6-widget-dnd {\n  position: absolute;\n  top: -10000px;\n  left: -10000px;\n  z-index: 999999;\n  display: none;\n  cursor: move;\n  opacity: 0.7;\n  pointer-events: 'cursor';\n}\n.x6-widget-dnd.dragging {\n  display: inline-block;\n}\n.x6-widget-dnd.dragging * {\n  pointer-events: none !important;\n}\n.x6-widget-dnd .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n"),this.container=document.createElement("div"),ee(this.container,this.prefixClassName("widget-dnd")),this.draggingGraph=new D(Object.assign(Object.assign({},this.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1,async:!1})),Nn(this.container,this.draggingGraph.container)}start(t,e){const n=e;n.preventDefault(),this.targetModel.startBatch("dnd"),ee(this.container,"dragging"),zs(this.container,this.options.draggingContainer||document.body),this.sourceNode=t,this.prepareDragging(t,n.clientX,n.clientY);const o=this.updateNodePosition(n.clientX,n.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:n,node:t,cell:t,view:this.draggingView,x:o.x,y:o.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(zi.documentEvents,n.data)}isSnaplineEnabled(){return this.snapline&&this.snapline.isEnabled()}prepareDragging(t,e,n){const o=this.draggingGraph,r=o.model,a=this.options.getDragNode(t,{sourceNode:t,draggingGraph:o,targetGraph:this.targetGraph});a.position(0,0);let c=5;if(this.isSnaplineEnabled()&&(c+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){const u=this.targetGraph.transform.getScale();o.scale(u.sx,u.sy),c*=Math.max(u.sx,u.sy)}else o.scale(1,1);this.clearDragging(),r.resetCells([a]);const l=o.findViewByCell(a);l.undelegateEvents(),l.cell.off("changed"),o.fitToContent({padding:c,allowNewOrigin:"any"});const h=l.getBBox();this.geometryBBox=l.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(h.getTopLeft()),this.draggingNode=a,this.draggingView=l,this.draggingBBox=a.getBBox(),this.padding=c,this.originOffset=this.updateGraphPosition(e,n)}updateGraphPosition(t,e){const n=document.body.scrollTop||document.documentElement.scrollTop,o=this.delta,r=this.geometryBBox,a=this.padding||5,c={left:t-o.x-r.width/2-a,top:e-o.y-r.height/2-a+n};return this.draggingGraph&&Ye(this.container,{left:`${c.left}px`,top:`${c.top}px`}),c}updateNodePosition(t,e){const n=this.targetGraph.clientToLocal(t,e),o=this.draggingBBox;return n.x-=o.width/2,n.y-=o.height/2,this.draggingNode.position(n.x,n.y),n}snap({cell:t,current:e,options:n}){const o=t;if(n.snapped){const r=this.draggingBBox;o.position(r.x+n.tx,r.y+n.ty,{silent:!0}),this.draggingView.translate(),o.position(e.x,e.y,{silent:!0}),this.snapOffset={x:n.tx,y:n.ty}}else this.snapOffset=null}onDragging(t){const e=this.draggingView;if(e){t.preventDefault();const n=this.normalizeEvent(t),o=n.clientX,r=n.clientY;this.updateGraphPosition(o,r);const a=this.updateNodePosition(o,r),c=this.targetGraph.options.embedding.enabled,l=(c||this.isSnaplineEnabled())&&this.isInsideValidArea({x:o,y:r});if(c){e.setEventData(n,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});const h=e.getEventData(n);l?e.processEmbedding(n,h):e.clearEmbedding(h),this.candidateEmbedView=h.candidateEmbedView}this.isSnaplineEnabled()&&(l?this.snapline.snapOnMoving({e:n,view:e,x:a.x,y:a.y}):this.snapline.hide())}}onDragEnd(t){const e=this.draggingNode;if(e){const n=this.normalizeEvent(t),o=this.draggingView,r=this.draggingBBox,a=this.snapOffset;let c=r.x,l=r.y;a&&(c+=a.x,l+=a.y),e.position(c,l,{silent:!0});const h=this.drop(e,{x:n.clientX,y:n.clientY}),u=d=>{d?(this.onDropped(e),this.targetGraph.options.embedding.enabled&&o&&(o.setEventData(n,{cell:d,graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView}),o.finalizeEmbedding(n,o.getEventData(n)))):this.onDropInvalid(),this.candidateEmbedView=null,this.targetModel.stopBatch("dnd")};Ic(h)?(this.undelegateDocumentEvents(),h.then(u)):u(h)}}clearDragging(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())}onDropped(t){this.draggingNode===t&&(this.clearDragging(),$e(this.container,"dragging"),Qt(this.container))}onDropInvalid(){const t=this.draggingNode;t&&this.onDropped(t)}isInsideValidArea(t){let e,n=null;const o=this.targetGraph,r=this.targetScroller;this.options.dndContainer&&(n=this.getDropArea(this.options.dndContainer));const a=n&&n.containsPoint(t);if(r)if(r.options.autoResize)e=this.getDropArea(r.container);else{const c=this.getDropArea(r.container);e=this.getDropArea(o.container).intersectsWithRect(c)}else e=this.getDropArea(o.container);return!a&&e&&e.containsPoint(t)}getDropArea(t){const e=Ss(t),n=document.body.scrollTop||document.documentElement.scrollTop,o=document.body.scrollLeft||document.documentElement.scrollLeft;return F.create({x:e.left+parseInt(Ye(t,"border-left-width"),10)-o,y:e.top+parseInt(Ye(t,"border-top-width"),10)-n,width:t.clientWidth,height:t.clientHeight})}drop(t,e){if(this.isInsideValidArea(e)){const n=this.targetGraph,o=n.model,r=n.clientToLocal(e),a=this.sourceNode,c=this.options.getDropNode(t,{sourceNode:a,draggingNode:t,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),l=c.getBBox();r.x+=l.x-l.width/2,r.y+=l.y-l.height/2;const h=this.snapOffset?1:n.getGridSize();c.position(de.snapToGrid(r.x,h),de.snapToGrid(r.y,h)),c.removeZIndex();const u=this.options.validateNode,d=!u||u(c,{sourceNode:a,draggingNode:t,droppingNode:c,targetGraph:n,draggingGraph:this.draggingGraph});return"boolean"==typeof d?d?(o.addCell(c,{stencil:this.cid}),c):null:function fb(...i){const t=Pc(i);return"boolean"==typeof t?Promise.resolve(t):t}(d).then(f=>f?(o.addCell(c,{stencil:this.cid}),c):null)}return null}onRemove(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())}dispose(){this.remove(),Es(this.name)}}(function(i,t,e,n){var a,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(r=(o<3?a(r):o>3?a(t,e,r):a(t,e))||r);o>3&&r&&Object.defineProperty(t,e,r)})([fe.dispose()],zi.prototype,"dispose",null),function(i){i.defaults={getDragNode:t=>t.clone(),getDropNode:t=>t.clone()},i.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"}}(zi||(zi={}));class r8 extends Ze{}!function(i){function t(e){const n=[],o=xe.getForeignObjectMarkup();return e?n.push({tagName:e,selector:"body"},o):n.push(o),n}i.config({view:"angular-shape-view",markup:t(),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}},propHooks(e){if(null==e.markup){const n=e.primer;if(n){e.markup=t(n);let o={};switch(n){case"circle":o={refCx:"50%",refCy:"50%",refR:"50%"};break;case"ellipse":o={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}e.attrs=Pe({},{body:Object.assign({refWidth:null,refHeight:null},o)},e.attrs||{})}}return e}}),Ze.registry.register("angular-shape",i,!0)}(r8||(r8={}));const a8=new Map;class _a extends Ot{getNodeContainer(){return this.selectors&&this.selectors.foContent}confirmUpdate(t){const e=super.confirmUpdate(t);return this.handleAction(e,_a.action,()=>this.renderAngularContent())}getNgArguments(){var t;return(null===(t=this.cell.data)||void 0===t?void 0:t.ngArguments)||{}}setInstanceInput(t,e){const n=this.getNgArguments();if(t instanceof s.Rgc)e.context={ngArguments:n};else{const o=e;Object.keys(n).forEach(r=>o.setInput(r,n[r])),o.changeDetectorRef.detectChanges()}}renderAngularContent(){this.unmountAngularContent();const t=this.getNodeContainer();if(t){const e=this.cell,{injector:n,content:o}=a8.get(e.shape),r=n.get(s.s_b);if(o instanceof s.Rgc){const a=this.getNgArguments(),c=r.createEmbeddedView(o,{ngArguments:a});c.rootNodes.forEach(l=>t.appendChild(l)),c.detectChanges(),e.on("change:data",()=>this.setInstanceInput(o,c))}else{const a=r.createComponent(o);t.appendChild(a.hostView.rootNodes[0]),this.setInstanceInput(o,a),e.on("change:data",()=>this.setInstanceInput(o,a))}}}unmountAngularContent(){const t=this.getNodeContainer();return t.innerHTML="",t}onMouseDown(t,e,n){const o=t.target;if("input"===o.tagName.toLowerCase()){const a=o.getAttribute("type");if(null==a||["text","password","number","email","search","tel","url"].includes(a))return}super.onMouseDown(t,e,n)}unmount(){return this.unmountAngularContent(),super.unmount(),this}}!function(i){i.action="angular",i.config({bootstrap:[i.action],actions:{component:i.action}}),Ot.registry.register("angular-shape-view",i,!0)}(_a||(_a={}));const lP={groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#2D8CF0",strokeWidth:2,fill:"#fff"}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#2D8CF0",strokeWidth:2,fill:"#fff"}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#2D8CF0",strokeWidth:2,fill:"#fff"}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#2D8CF0",strokeWidth:2,fill:"#fff"}}}},items:[{id:"port1",group:"top"},{id:"port2",group:"bottom"},{id:"port3",group:"left"},{id:"port4",group:"right"}]};let hP=(()=>{class i{constructor(e,n){this.element=e,this.injector=n,this.graph=new D({container:e.nativeElement,width:800,autoResize:!0,background:{color:"#fff"},grid:{size:10,visible:!0,type:"doubleMesh",args:[{color:"#f0f0f0",thickness:1},{color:"#d0d0d0",thickness:1,factor:4}]},panning:{enabled:!0,eventTypes:["rightMouseDown"]},mousewheel:{enabled:!0,modifiers:["ctrl","meta"]},connecting:{snap:!1,connector:"normal",createEdge:()=>new $6({shape:"line",attrs:{line:{stroke:"#333",strokeWidth:1,targetMarker:null,strokeDasharray:0,style:{animation:"ant-line 30s infinite linear"}}},label:{text:""},router:{name:"normal"}})},highlighting:{magnetAvailable:{name:"stroke",args:{padding:4,attrs:{strokeWidth:2,stroke:"rgba(223,234,255)"}}}}}),this.graph.use(new t8({enabled:!0})),this.graph.use(new vi({resizing:{enabled:!0},rotating:{enabled:!0}})),this.graph.use(new K6({enabled:!0})),this.graph.use(new e8({enabled:!0})),this.graph.use(new To({enabled:!0})),this.graph.use(new Oo({enabled:!0,multiple:!0,rubberband:!0,movable:!0,strict:!0,showNodeSelectionBox:!0})),this.graph.use(new s8),this.dnd=new zi({target:this.graph}),this.graph.bindKey("ctrl+s",o=>{this.graph.exportPNG(),o.preventDefault()}),this.graph.bindKey("ctrl+z",()=>this.graph.undo()),this.graph.bindKey("ctrl+y",()=>this.graph.redo()),this.graph.bindKey("ctrl+x",()=>this.graph.cut(this.graph.getSelectedCells())),this.graph.bindKey("ctrl+c",()=>this.graph.copy(this.graph.getSelectedCells())),this.graph.bindKey("ctrl+v",()=>this.graph.resetSelection(this.graph.paste())),this.graph.bindKey("backspace",()=>this.graph.getSelectedCells().forEach(o=>o.remove())),this.graph.container.onmousemove=o=>{this.line&&(this.graph.addEdge({shape:this.line.id,source:[o.offsetX,o.offsetY],target:[o.offsetX-120,o.offsetY+80],...this.line.meta}),this.line=void 0)},this.graph.on("edge:selected",Dc(({edge:o})=>{o.addTools([{name:"source-arrowhead",args:{attrs:{cursor:"pointer",fill:"#3c9566"}}},{name:"target-arrowhead",args:{attrs:{cursor:"pointer",fill:"#3c9566"}}},{name:"vertices",args:{attrs:{fill:"#3c9566",cursor:"crosshair"},stopPropagation:!1}}])})),this.graph.on("edge:unselected",({cell:o})=>{o.removeTools()}),this.graph.on("node:mouseenter",Dc(({e:o})=>{const r=o.target.parentElement.querySelectorAll(".x6-port-body");this.showPorts(r,!0)}),500),this.graph.on("node:mouseleave",({e:o})=>{const r=o.target.parentElement.querySelectorAll(".x6-port-body");this.showPorts(r,!1)}),this.graph.on("blank:click",()=>{const o=document.querySelectorAll(".x6-port-body");this.showPorts(o,!1)}),this.graph.on("node:click",({node:o,e:r})=>{console.log("node");const a=r.target.parentElement.querySelectorAll(".x6-port-body");this.showPorts(a,!1);const c=o.data;if(/electric-switch/.test(c.id)){const l="attrs/switch/transform",h=c.value?I2:D2;c.value=!c.value,o.transition(l,h,{interp:(u,d)=>{const f=/-?\d+/g,p=parseInt(u.match(f)[0],10),m=parseInt(d.match(f)[0],10)-p;return v=>`rotate(${p+m*v} ${ni.x} ${ni.y})`}})}})}Draw(e){let n,{component:o}=e;switch(o.type){case"line":return o.extends&&!o.registered&&(D.registerEdge(o.id,o.extends),o.registered=!0),void(this.line=o);case"shape":if(o.extends&&!o.registered&&(D.registerNode(o.id,o.extends),o.registered=!0),o.meta){let r=["node-editor"];"text-block"===o.id&&(r=[]),n=this.graph.createNode({shape:o.id,...o.meta,data:{id:o.id,...o.meta.data||{}},tools:r})}break;case"angular":o.registered||(function cP(i){const{shape:t,injector:e,content:n}=i,o=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(i);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(i,n[o])&&(e[n[o]]=i[n[o]])}return e}(i,["shape","injector","content"]);a8.set(t,{injector:e,content:n}),D.registerNode(t,Object.assign({inherit:"angular-shape"},o),!0)}({shape:o.id,content:o.content,width:100,height:60,injector:this.injector}),o.registered=!0),o.content&&(n=this.graph.createNode({shape:o.id,...o.meta,data:{id:o.id},ports:lP}))}n&&e.event&&this.dnd.start(n,e.event)}showPorts(e,n){for(let o=0,r=e.length;o<r;o+=1)e[o].style.visibility=n?"visible":"hidden"}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq),s.Y36(s.zs3))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-canvas"]],decls:0,vars:0,template:function(e,n){}}),i})();function uP(i,t){1&i&&s._UZ(0,"span",10)}function dP(i,t){1&i&&s._UZ(0,"span",11)}function fP(i,t){1&i&&s._UZ(0,"span",12)}function pP(i,t){1&i&&s._UZ(0,"span",13)}function gP(i,t){1&i&&s._UZ(0,"span",14)}function mP(i,t){if(1&i&&(s.ynx(0),s._UZ(1,"span",15),s.BQk()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("innerHTML",e.instance.content,s.oJD)}}function vP(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"nz-message",2),s.NdJ("destroyed",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.remove(o.id,o.userAction))}),s.qZA()}2&i&&s.Q6J("instance",t.$implicit)}let zP=0;class bP{constructor(t,e,n){this.nzSingletonService=t,this.overlay=e,this.injector=n}remove(t){this.container&&(t?this.container.remove(t):this.container.removeAll())}getInstanceId(){return`${this.componentPrefix}-${zP++}`}withContainer(t){let e=this.nzSingletonService.getSingletonWithKey(this.componentPrefix);if(e)return e;const n=this.overlay.create({hasBackdrop:!1,scrollStrategy:this.overlay.scrollStrategies.noop(),positionStrategy:this.overlay.position().global()}),o=new Wo(t,null,this.injector),r=n.attach(o);return n.overlayElement.style.zIndex="1010",e||(this.container=e=r.instance,this.nzSingletonService.registerSingletonWithKey(this.componentPrefix,e)),e}}let yP=(()=>{class i{constructor(e,n){this.cdr=e,this.nzConfigService=n,this.instances=[],this.destroy$=new H.x,this.updateConfig()}ngOnInit(){this.subscribeConfigChange()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}create(e){const n=this.onCreate(e);return this.instances.length>=this.config.nzMaxStack&&(this.instances=this.instances.slice(1)),this.instances=[...this.instances,n],this.readyInstances(),n}remove(e,n=!1){this.instances.some((o,r)=>o.messageId===e&&(this.instances.splice(r,1),this.instances=[...this.instances],this.onRemove(o,n),this.readyInstances(),!0))}removeAll(){this.instances.forEach(e=>this.onRemove(e,!1)),this.instances=[],this.readyInstances()}onCreate(e){return e.options=this.mergeOptions(e.options),e.onClose=new H.x,e}onRemove(e,n){e.onClose.next(n),e.onClose.complete()}readyInstances(){this.cdr.detectChanges()}mergeOptions(e){const{nzDuration:n,nzAnimate:o,nzPauseOnHover:r}=this.config;return{nzDuration:n,nzAnimate:o,nzPauseOnHover:r,...e}}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.sBO),s.Y36(nt))},i.\u0275dir=s.lG2({type:i}),i})(),CP=(()=>{class i{constructor(e){this.cdr=e,this.destroyed=new s.vpe,this.animationStateChanged=new H.x,this.userAction=!1,this.eraseTimer=null}ngOnInit(){this.options=this.instance.options,this.options.nzAnimate&&(this.instance.state="enter",this.animationStateChanged.pipe((0,Y.h)(e=>"done"===e.phaseName&&"leave"===e.toState),(0,Ft.q)(1)).subscribe(()=>{clearTimeout(this.closeTimer),this.destroyed.next({id:this.instance.messageId,userAction:this.userAction})})),this.autoClose=this.options.nzDuration>0,this.autoClose&&(this.initErase(),this.startEraseTimeout())}ngOnDestroy(){this.autoClose&&this.clearEraseTimeout(),this.animationStateChanged.complete()}onEnter(){this.autoClose&&this.options.nzPauseOnHover&&(this.clearEraseTimeout(),this.updateTTL())}onLeave(){this.autoClose&&this.options.nzPauseOnHover&&this.startEraseTimeout()}destroy(e=!1){this.userAction=e,this.options.nzAnimate?(this.instance.state="leave",this.cdr.detectChanges(),this.closeTimer=setTimeout(()=>{this.closeTimer=void 0,this.destroyed.next({id:this.instance.messageId,userAction:e})},200)):this.destroyed.next({id:this.instance.messageId,userAction:e})}initErase(){this.eraseTTL=this.options.nzDuration,this.eraseTimingStart=Date.now()}updateTTL(){this.autoClose&&(this.eraseTTL-=Date.now()-this.eraseTimingStart)}startEraseTimeout(){this.eraseTTL>0?(this.clearEraseTimeout(),this.eraseTimer=setTimeout(()=>this.destroy(),this.eraseTTL),this.eraseTimingStart=Date.now()):this.destroy()}clearEraseTimeout(){null!==this.eraseTimer&&(clearTimeout(this.eraseTimer),this.eraseTimer=null)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.sBO))},i.\u0275dir=s.lG2({type:i}),i})(),_P=(()=>{class i extends CP{constructor(e){super(e),this.destroyed=new s.vpe}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.sBO))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-message"]],inputs:{instance:"instance"},outputs:{destroyed:"destroyed"},exportAs:["nzMessage"],features:[s.qOj],decls:10,vars:9,consts:[[1,"ant-message-notice",3,"mouseenter","mouseleave"],[1,"ant-message-notice-content"],[1,"ant-message-custom-content",3,"ngClass"],[3,"ngSwitch"],["nz-icon","","nzType","check-circle",4,"ngSwitchCase"],["nz-icon","","nzType","info-circle",4,"ngSwitchCase"],["nz-icon","","nzType","exclamation-circle",4,"ngSwitchCase"],["nz-icon","","nzType","close-circle",4,"ngSwitchCase"],["nz-icon","","nzType","loading",4,"ngSwitchCase"],[4,"nzStringTemplateOutlet"],["nz-icon","","nzType","check-circle"],["nz-icon","","nzType","info-circle"],["nz-icon","","nzType","exclamation-circle"],["nz-icon","","nzType","close-circle"],["nz-icon","","nzType","loading"],[3,"innerHTML"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.NdJ("@moveUpMotion.done",function(r){return n.animationStateChanged.next(r)})("mouseenter",function(){return n.onEnter()})("mouseleave",function(){return n.onLeave()}),s.TgZ(1,"div",1)(2,"div",2),s.ynx(3,3),s.YNc(4,uP,1,0,"span",4),s.YNc(5,dP,1,0,"span",5),s.YNc(6,fP,1,0,"span",6),s.YNc(7,pP,1,0,"span",7),s.YNc(8,gP,1,0,"span",8),s.BQk(),s.YNc(9,mP,2,1,"ng-container",9),s.qZA()()()),2&e&&(s.Q6J("@moveUpMotion",n.instance.state),s.xp6(2),s.Q6J("ngClass","ant-message-"+n.instance.type),s.xp6(1),s.Q6J("ngSwitch",n.instance.type),s.xp6(1),s.Q6J("ngSwitchCase","success"),s.xp6(1),s.Q6J("ngSwitchCase","info"),s.xp6(1),s.Q6J("ngSwitchCase","warning"),s.xp6(1),s.Q6J("ngSwitchCase","error"),s.xp6(1),s.Q6J("ngSwitchCase","loading"),s.xp6(1),s.Q6J("nzStringTemplateOutlet",n.instance.content))},dependencies:[M.mk,M.RF,M.n9,De,Be],encapsulation:2,data:{animation:[r7]},changeDetection:0}),i})();const xa="message",xP={nzAnimate:!0,nzDuration:3e3,nzMaxStack:7,nzPauseOnHover:!0,nzTop:24,nzDirection:"ltr"};let wP=(()=>{class i extends yP{constructor(e,n){super(e,n),this.dir="ltr";const o=this.nzConfigService.getConfigForComponent(xa);this.dir=o?.nzDirection||"ltr"}subscribeConfigChange(){this.nzConfigService.getConfigChangeEventForComponent(xa).pipe(N(this.destroy$)).subscribe(()=>{this.updateConfig();const e=this.nzConfigService.getConfigForComponent(xa);if(e){const{nzDirection:n}=e;this.dir=n||this.dir}})}updateConfig(){this.config={...xP,...this.config,...this.nzConfigService.getConfigForComponent(xa)},this.top=function A1(i){return He(i)}(this.config.nzTop),this.cdr.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.sBO),s.Y36(nt))},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-message-container"]],exportAs:["nzMessageContainer"],features:[s.qOj],decls:2,vars:5,consts:[[1,"ant-message"],[3,"instance","destroyed",4,"ngFor","ngForOf"],[3,"instance","destroyed"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.YNc(1,vP,1,1,"nz-message",1),s.qZA()),2&e&&(s.Udp("top",n.top),s.ekj("ant-message-rtl","rtl"===n.dir),s.xp6(1),s.Q6J("ngForOf",n.instances))},dependencies:[M.sg,_P],encapsulation:2,changeDetection:0}),i})(),MP=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})(),l8=(()=>{class i extends bP{constructor(e,n,o){super(e,n,o),this.componentPrefix="message-"}success(e,n){return this.createInstance({type:"success",content:e},n)}error(e,n){return this.createInstance({type:"error",content:e},n)}info(e,n){return this.createInstance({type:"info",content:e},n)}warning(e,n){return this.createInstance({type:"warning",content:e},n)}loading(e,n){return this.createInstance({type:"loading",content:e},n)}create(e,n,o){return this.createInstance({type:e,content:n},o)}createInstance(e,n){return this.container=this.withContainer(wP),this.container.create({...e,createdAt:new Date,messageId:this.getInstanceId(),options:n})}}return i.\u0275fac=function(e){return new(e||i)(s.LFG(n7),s.LFG(Li),s.LFG(s.zs3))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:MP}),i})();function SP(i,t){if(1&i&&(s.TgZ(0,"th"),s._uU(1),s.qZA()),2&i){const e=t.$implicit;s.xp6(1),s.Oqu(e.title)}}function TP(i,t){if(1&i&&s._UZ(0,"nz-input-number",12),2&i){const e=s.oxw().$implicit;s.Q6J("formControlName",e.keyName)}}function OP(i,t){if(1&i&&s._UZ(0,"input",13),2&i){const e=s.oxw().$implicit;s.Q6J("formControlName",e.keyName)}}function AP(i,t){if(1&i&&(s.TgZ(0,"td"),s.YNc(1,TP,1,1,"nz-input-number",10),s.YNc(2,OP,1,1,"input",11),s.qZA()),2&i){const e=t.$implicit;s.xp6(1),s.Q6J("ngIf","number"===e.type),s.xp6(1),s.Q6J("ngIf",!e.type)}}function EP(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"tr",7),s.YNc(1,AP,3,2,"td",4),s.TgZ(2,"td",8)(3,"span",9),s.NdJ("click",function(){const r=s.CHM(e).index,a=s.oxw(2);return s.KtG(a.propertyDel(r))}),s.qZA()()()}if(2&i){const e=t.index,n=s.oxw(2);s.Q6J("formGroupName",e),s.xp6(1),s.Q6J("ngForOf",n.constListData)}}function NP(i,t){if(1&i&&(s.TgZ(0,"nz-table",3)(1,"thead")(2,"tr"),s.YNc(3,SP,2,1,"th",4),s.TgZ(4,"th"),s._uU(5,"\u64cd\u4f5c"),s.qZA()()(),s.TgZ(6,"tbody",5),s.YNc(7,EP,4,2,"tr",6),s.qZA()()),2&i){const e=s.oxw();s.Q6J("formGroup",e.group),s.xp6(3),s.Q6J("ngForOf",e.constListData),s.xp6(4),s.Q6J("ngForOf",e.aliases.controls)}}let kP=(()=>{class i{set listData(e){const n={};for(let o=0;o<e.length;o++){const{keyName:r,defaultValue:a}=e[o];n[r]=a||""}this.row=n,this.constListData=e}constructor(e,n){this.msg=e,this.fb=n,this.row={},this.constListData=[]}ngOnInit(){this.group=this.fb.group({keyName:this.fb.array([])});const e=[];for(const n in this.data)"id"!=n&&e.push({name:n,value:this.data[n]});this.writeValue(e)}writeValue(e){const n=JSON.parse(JSON.stringify(this.row));e&&e.length&&e.forEach(o=>{const r=this.fb.group(Object.assign(n,o));this.aliases.push(r)})}propertyDel(e){this.aliases.removeAt(e)}get aliases(){return this.group.get("keyName")}propertyAdd(){this.aliases.insert(0,this.fb.group(this.row))}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(l8),s.Y36(ne.qu))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-edit-table"]],inputs:{data:"data",listData:"listData"},features:[s._Bn([l8])],decls:4,vars:1,consts:[[3,"click"],["type","button","nz-icon","","nzType","plus"],["nzTemplateMode","",3,"formGroup",4,"ngIf"],["nzTemplateMode","",3,"formGroup"],[4,"ngFor","ngForOf"],["formArrayName","keyName"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],[1,"td-oper"],["nz-icon","","nzType","delete","nzTheme","outline","title","\u5220\u9664",2,"cursor","pointer",3,"click"],[3,"formControlName",4,"ngIf"],["nz-input","",3,"formControlName",4,"ngIf"],[3,"formControlName"],["nz-input","",3,"formControlName"]],template:function(e,n){1&e&&(s.TgZ(0,"button",0),s.NdJ("click",function(){return n.propertyAdd()}),s._UZ(1,"i",1),s._uU(2," \u6dfb\u52a0\u5c5e\u6027\n"),s.qZA(),s.YNc(3,NP,8,3,"nz-table",2)),2&e&&(s.xp6(3),s.Q6J("ngIf",n.aliases.controls&&n.aliases.controls.length))},dependencies:[M.sg,M.O5,ne.Fj,ne.JJ,ne.JL,ne.sg,ne.u,ne.x0,ne.CE,De,Pi,pt]}),i})();const DP=["dialogPopup"],IP=["hueSlider"],PP=["alphaSlider"];function VP(i,t){if(1&i&&s._UZ(0,"div"),2&i){const e=s.oxw();s.Gre("arrow arrow-",e.cpUsePosition,""),s.Udp("left",e.cpArrowPosition)("top",e.arrowTop,"px")}}function LP(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",28),s.NdJ("newValue",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onColorChange(o))})("dragStart",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.onDragStart("saturation-lightness"))})("dragEnd",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.onDragEnd("saturation-lightness"))}),s._UZ(1,"div",14),s.qZA()}if(2&i){const e=s.oxw();s.Udp("background-color",e.hueSliderColor),s.Q6J("rgX",1)("rgY",1),s.xp6(1),s.Udp("top",null==e.slider?null:e.slider.v,"px")("left",null==e.slider?null:e.slider.s,"px")}}function HP(i,t){1&i&&(s.O4$(),s.TgZ(0,"svg",29),s._UZ(1,"path",30)(2,"path",31),s.qZA())}function BP(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",32),s.NdJ("click",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onAddPresetColor(o,r.selectedColor))}),s._uU(1),s.qZA()}if(2&i){const e=s.oxw();s.Tol(e.cpAddColorButtonClass),s.Q6J("disabled",e.cpPresetColors&&e.cpPresetColors.length>=e.cpMaxPresetColorsLength),s.xp6(1),s.hij(" ",e.cpAddColorButtonText," ")}}function FP(i,t){1&i&&s._UZ(0,"div",33)}function RP(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"input",39),s.NdJ("keyup.enter",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onAlphaInput(o))}),s.qZA()}if(2&i){const e=s.oxw(2);s.Q6J("rg",1)("value",null==e.cmykText?null:e.cmykText.a)}}function jP(i,t){1&i&&(s.TgZ(0,"div"),s._uU(1,"A"),s.qZA())}function $P(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",34)(1,"div",35)(2,"input",36),s.NdJ("keyup.enter",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onCyanInput(o))}),s.qZA(),s.TgZ(3,"input",36),s.NdJ("keyup.enter",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onMagentaInput(o))}),s.qZA(),s.TgZ(4,"input",36),s.NdJ("keyup.enter",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onYellowInput(o))}),s.qZA(),s.TgZ(5,"input",36),s.NdJ("keyup.enter",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onBlackInput(o))}),s.qZA(),s.YNc(6,RP,1,2,"input",37),s.qZA(),s.TgZ(7,"div",35)(8,"div"),s._uU(9,"C"),s.qZA(),s.TgZ(10,"div"),s._uU(11,"M"),s.qZA(),s.TgZ(12,"div"),s._uU(13,"Y"),s.qZA(),s.TgZ(14,"div"),s._uU(15,"K"),s.qZA(),s.YNc(16,jP,2,0,"div",38),s.qZA()()}if(2&i){const e=s.oxw();s.Udp("display",3!==e.format?"none":"block"),s.xp6(2),s.Q6J("rg",100)("value",null==e.cmykText?null:e.cmykText.c),s.xp6(1),s.Q6J("rg",100)("value",null==e.cmykText?null:e.cmykText.m),s.xp6(1),s.Q6J("rg",100)("value",null==e.cmykText?null:e.cmykText.y),s.xp6(1),s.Q6J("rg",100)("value",null==e.cmykText?null:e.cmykText.k),s.xp6(1),s.Q6J("ngIf","disabled"!==e.cpAlphaChannel),s.xp6(10),s.Q6J("ngIf","disabled"!==e.cpAlphaChannel)}}function YP(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"input",39),s.NdJ("keyup.enter",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onAlphaInput(o))}),s.qZA()}if(2&i){const e=s.oxw(2);s.Q6J("rg",1)("value",null==e.hslaText?null:e.hslaText.a)}}function GP(i,t){1&i&&(s.TgZ(0,"div"),s._uU(1,"A"),s.qZA())}function ZP(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",40)(1,"div",35)(2,"input",41),s.NdJ("keyup.enter",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onHueInput(o))}),s.qZA(),s.TgZ(3,"input",36),s.NdJ("keyup.enter",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onSaturationInput(o))}),s.qZA(),s.TgZ(4,"input",36),s.NdJ("keyup.enter",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onLightnessInput(o))}),s.qZA(),s.YNc(5,YP,1,2,"input",37),s.qZA(),s.TgZ(6,"div",35)(7,"div"),s._uU(8,"H"),s.qZA(),s.TgZ(9,"div"),s._uU(10,"S"),s.qZA(),s.TgZ(11,"div"),s._uU(12,"L"),s.qZA(),s.YNc(13,GP,2,0,"div",38),s.qZA()()}if(2&i){const e=s.oxw();s.Udp("display",2!==e.format?"none":"block"),s.xp6(2),s.Q6J("rg",360)("value",null==e.hslaText?null:e.hslaText.h),s.xp6(1),s.Q6J("rg",100)("value",null==e.hslaText?null:e.hslaText.s),s.xp6(1),s.Q6J("rg",100)("value",null==e.hslaText?null:e.hslaText.l),s.xp6(1),s.Q6J("ngIf","disabled"!==e.cpAlphaChannel),s.xp6(8),s.Q6J("ngIf","disabled"!==e.cpAlphaChannel)}}function qP(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"input",39),s.NdJ("keyup.enter",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onAlphaInput(o))}),s.qZA()}if(2&i){const e=s.oxw(2);s.Q6J("rg",1)("value",null==e.rgbaText?null:e.rgbaText.a)}}function WP(i,t){1&i&&(s.TgZ(0,"div"),s._uU(1,"A"),s.qZA())}function UP(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",42)(1,"div",35)(2,"input",43),s.NdJ("keyup.enter",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onRedInput(o))}),s.qZA(),s.TgZ(3,"input",43),s.NdJ("keyup.enter",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onGreenInput(o))}),s.qZA(),s.TgZ(4,"input",43),s.NdJ("keyup.enter",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onBlueInput(o))}),s.qZA(),s.YNc(5,qP,1,2,"input",37),s.qZA(),s.TgZ(6,"div",35)(7,"div"),s._uU(8,"R"),s.qZA(),s.TgZ(9,"div"),s._uU(10,"G"),s.qZA(),s.TgZ(11,"div"),s._uU(12,"B"),s.qZA(),s.YNc(13,WP,2,0,"div",38),s.qZA()()}if(2&i){const e=s.oxw();s.Udp("display",1!==e.format?"none":"block"),s.xp6(2),s.Q6J("rg",255)("value",null==e.rgbaText?null:e.rgbaText.r),s.xp6(1),s.Q6J("rg",255)("value",null==e.rgbaText?null:e.rgbaText.g),s.xp6(1),s.Q6J("rg",255)("value",null==e.rgbaText?null:e.rgbaText.b),s.xp6(1),s.Q6J("ngIf","disabled"!==e.cpAlphaChannel),s.xp6(8),s.Q6J("ngIf","disabled"!==e.cpAlphaChannel)}}function JP(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"input",39),s.NdJ("keyup.enter",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onAlphaInput(o))}),s.qZA()}if(2&i){const e=s.oxw(2);s.Q6J("rg",1)("value",e.hexAlpha)}}function QP(i,t){1&i&&(s.TgZ(0,"div"),s._uU(1,"A"),s.qZA())}function XP(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",44)(1,"div",35)(2,"input",45),s.NdJ("blur",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.onHexInput(null))})("keyup.enter",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onHexInput(o))}),s.qZA(),s.YNc(3,JP,1,2,"input",37),s.qZA(),s.TgZ(4,"div",35)(5,"div"),s._uU(6,"Hex"),s.qZA(),s.YNc(7,QP,2,0,"div",38),s.qZA()()}if(2&i){const e=s.oxw();s.Udp("display",0!==e.format?"none":"block"),s.ekj("hex-alpha","forced"===e.cpAlphaChannel),s.xp6(2),s.Q6J("value",e.hexText),s.xp6(1),s.Q6J("ngIf","forced"===e.cpAlphaChannel),s.xp6(4),s.Q6J("ngIf","forced"===e.cpAlphaChannel)}}function KP(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"input",39),s.NdJ("keyup.enter",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onAlphaInput(o))}),s.qZA()}if(2&i){const e=s.oxw(2);s.Q6J("rg",1)("value",null==e.hslaText?null:e.hslaText.a)}}function eV(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",46)(1,"div",35)(2,"input",36),s.NdJ("keyup.enter",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onAcceptColor(o))})("newValue",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.onValueInput(o))}),s.qZA(),s.YNc(3,KP,1,2,"input",37),s.qZA(),s.TgZ(4,"div",35)(5,"div"),s._uU(6,"V"),s.qZA(),s.TgZ(7,"div"),s._uU(8,"A"),s.qZA()()()}if(2&i){const e=s.oxw();s.xp6(2),s.Q6J("rg",100)("value",null==e.hslaText?null:e.hslaText.l),s.xp6(1),s.Q6J("ngIf","disabled"!==e.cpAlphaChannel)}}function tV(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",47)(1,"span",48),s.NdJ("click",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.onFormatToggle(-1))}),s.qZA(),s.TgZ(2,"span",48),s.NdJ("click",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.onFormatToggle(1))}),s.qZA()()}}function nV(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"span",55),s.NdJ("click",function(o){s.CHM(e);const r=s.oxw().$implicit,a=s.oxw(3);return s.KtG(a.onRemovePresetColor(o,r))}),s.qZA()}if(2&i){const e=s.oxw(4);s.Tol(e.cpRemoveColorButtonClass)}}function iV(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"div",53),s.NdJ("click",function(){const r=s.CHM(e).$implicit,a=s.oxw(3);return s.KtG(a.setColorFromString(r))}),s.YNc(1,nV,1,3,"span",54),s.qZA()}if(2&i){const e=t.$implicit,n=s.oxw(3);s.Udp("background-color",e),s.xp6(1),s.Q6J("ngIf",n.cpAddColorButton)}}function oV(i,t){if(1&i&&(s.TgZ(0,"div"),s.YNc(1,iV,2,3,"div",52),s.qZA()),2&i){const e=s.oxw(2);s.Tol(e.cpPresetColorsClass),s.xp6(1),s.Q6J("ngForOf",e.cpPresetColors)}}function sV(i,t){if(1&i&&(s.TgZ(0,"div"),s._uU(1),s.qZA()),2&i){const e=s.oxw(2);s.Tol(e.cpPresetEmptyMessageClass),s.xp6(1),s.Oqu(e.cpPresetEmptyMessage)}}function rV(i,t){if(1&i&&(s.TgZ(0,"div",49),s._UZ(1,"hr"),s.TgZ(2,"div",50),s._uU(3),s.qZA(),s.YNc(4,oV,2,4,"div",51),s.YNc(5,sV,2,4,"div",51),s.qZA()),2&i){const e=s.oxw();s.xp6(3),s.Oqu(e.cpPresetLabel),s.xp6(1),s.Q6J("ngIf",null==e.cpPresetColors?null:e.cpPresetColors.length),s.xp6(1),s.Q6J("ngIf",!(null!=e.cpPresetColors&&e.cpPresetColors.length)&&e.cpAddColorButton)}}function aV(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",58),s.NdJ("click",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onCancelColor(o))}),s._uU(1),s.qZA()}if(2&i){const e=s.oxw(2);s.Tol(e.cpCancelButtonClass),s.xp6(1),s.Oqu(e.cpCancelButtonText)}}function cV(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"button",58),s.NdJ("click",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onAcceptColor(o))}),s._uU(1),s.qZA()}if(2&i){const e=s.oxw(2);s.Tol(e.cpOKButtonClass),s.xp6(1),s.Oqu(e.cpOKButtonText)}}function lV(i,t){if(1&i&&(s.TgZ(0,"div",56),s.YNc(1,aV,2,4,"button",57),s.YNc(2,cV,2,4,"button",57),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.cpCancelButton),s.xp6(1),s.Q6J("ngIf",e.cpOKButton)}}function hV(i,t){1&i&&s.GkF(0)}function uV(i,t){if(1&i&&(s.TgZ(0,"div",59),s.YNc(1,hV,1,0,"ng-container",60),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.cpExtraTemplate)}}var st=(()=>(function(i){i[i.HEX=0]="HEX",i[i.RGBA=1]="RGBA",i[i.HSLA=2]="HSLA",i[i.CMYK=3]="CMYK"}(st||(st={})),st))();class vn{constructor(t,e,n,o){this.r=t,this.g=e,this.b=n,this.a=o}}class wa{constructor(t,e,n,o){this.h=t,this.s=e,this.v=n,this.a=o}}class bi{constructor(t,e,n,o){this.h=t,this.s=e,this.l=n,this.a=o}}class js{constructor(t,e,n,o,r=1){this.c=t,this.m=e,this.y=n,this.k=o,this.a=r}}let pV=(()=>{class i{constructor(){this.newValue=new s.vpe}inputChange(e){const n=e.target.value;if(void 0===this.rg)this.newValue.emit(n);else{const o=parseFloat(n);this.newValue.emit({v:o,rg:this.rg})}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=s.lG2({type:i,selectors:[["","text",""]],hostBindings:function(e,n){1&e&&s.NdJ("input",function(r){return n.inputChange(r)})},inputs:{rg:"rg",text:"text"},outputs:{newValue:"newValue"}}),i})(),gV=(()=>{class i{constructor(e){this.elRef=e,this.dragEnd=new s.vpe,this.dragStart=new s.vpe,this.newValue=new s.vpe,this.listenerMove=n=>this.move(n),this.listenerStop=()=>this.stop()}mouseDown(e){this.start(e)}touchStart(e){this.start(e)}move(e){e.preventDefault(),this.setCursor(e)}start(e){this.setCursor(e),e.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(e){const n=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageX?e.pageX:e.touches[0].pageX)-n.left-window.pageXOffset}getY(e){const n=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageY?e.pageY:e.touches[0].pageY)-n.top-window.pageYOffset}setCursor(e){const n=this.elRef.nativeElement.offsetWidth,o=this.elRef.nativeElement.offsetHeight,r=Math.max(0,Math.min(this.getX(e),n)),a=Math.max(0,Math.min(this.getY(e),o));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:r/n,v:1-a/o,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:a/o,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:r/n,rgX:this.rgX})}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.SBq))},i.\u0275dir=s.lG2({type:i,selectors:[["","slider",""]],hostBindings:function(e,n){1&e&&s.NdJ("mousedown",function(r){return n.mouseDown(r)})("touchstart",function(r){return n.touchStart(r)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),i})();class h8{constructor(t,e,n,o){this.h=t,this.s=e,this.v=n,this.a=o}}class u8{constructor(t,e,n,o){this.h=t,this.s=e,this.v=n,this.a=o}}let Kl=(()=>{class i{constructor(){this.active=null}setActive(e){this.active&&this.active!==e&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=e}hsva2hsla(e){const n=e.h,o=e.s,r=e.v,a=e.a;if(0===r)return new bi(n,0,0,a);if(0===o&&1===r)return new bi(n,1,1,a);{const c=r*(2-o)/2;return new bi(n,r*o/(1-Math.abs(2*c-1)),c,a)}}hsla2hsva(e){const n=Math.min(e.h,1),o=Math.min(e.s,1),r=Math.min(e.l,1),a=Math.min(e.a,1);if(0===r)return new wa(n,0,0,a);{const c=r+o*(1-Math.abs(2*r-1))/2;return new wa(n,2*(c-r)/c,c,a)}}hsvaToRgba(e){let n,o,r;const a=e.h,c=e.s,l=e.v,h=e.a,u=Math.floor(6*a),d=6*a-u,f=l*(1-c),p=l*(1-d*c),g=l*(1-(1-d)*c);switch(u%6){case 0:n=l,o=g,r=f;break;case 1:n=p,o=l,r=f;break;case 2:n=f,o=l,r=g;break;case 3:n=f,o=p,r=l;break;case 4:n=g,o=f,r=l;break;case 5:n=l,o=f,r=p;break;default:n=0,o=0,r=0}return new vn(n,o,r,h)}cmykToRgb(e){return new vn((1-e.c)*(1-e.k),(1-e.m)*(1-e.k),(1-e.y)*(1-e.k),e.a)}rgbaToCmyk(e){const n=1-Math.max(e.r,e.g,e.b);return 1===n?new js(0,0,0,1,e.a):new js((1-e.r-n)/(1-n),(1-e.g-n)/(1-n),(1-e.b-n)/(1-n),n,e.a)}rgbaToHsva(e){let n,o;const r=Math.min(e.r,1),a=Math.min(e.g,1),c=Math.min(e.b,1),l=Math.min(e.a,1),h=Math.max(r,a,c),u=Math.min(r,a,c),d=h,f=h-u;if(o=0===h?0:f/h,h===u)n=0;else{switch(h){case r:n=(a-c)/f+(a<c?6:0);break;case a:n=(c-r)/f+2;break;case c:n=(r-a)/f+4;break;default:n=0}n/=6}return new wa(n,o,d,l)}rgbaToHex(e,n){let o="#"+(16777216|e.r<<16|e.g<<8|e.b).toString(16).substr(1);return n&&(o+=(256|Math.round(255*e.a)).toString(16).substr(1)),o}normalizeCMYK(e){return new js(e.c/100,e.m/100,e.y/100,e.k/100,e.a)}denormalizeCMYK(e){return new js(Math.floor(100*e.c),Math.floor(100*e.m),Math.floor(100*e.y),Math.floor(100*e.k),e.a)}denormalizeRGBA(e){return new vn(Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b),e.a)}stringToHsva(e="",n=!1){let o=null;e=(e||"").toLowerCase();const r=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return new vn(parseInt(a[2],10)/255,parseInt(a[3],10)/255,parseInt(a[4],10)/255,isNaN(parseFloat(a[5]))?1:parseFloat(a[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return new bi(parseInt(a[2],10)/360,parseInt(a[3],10)/100,parseInt(a[4],10)/100,isNaN(parseFloat(a[5]))?1:parseFloat(a[5]))}}];r.push(n?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(a){return new vn(parseInt(a[1],16)/255,parseInt(a[2],16)/255,parseInt(a[3],16)/255,parseInt(a[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(a){return new vn(parseInt(a[1],16)/255,parseInt(a[2],16)/255,parseInt(a[3],16)/255,1)}}),r.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(a){return new vn(parseInt(a[1]+a[1],16)/255,parseInt(a[2]+a[2],16)/255,parseInt(a[3]+a[3],16)/255,1)}});for(const a in r)if(r.hasOwnProperty(a)){const c=r[a],l=c.re.exec(e),h=l&&c.parse(l);if(h)return h instanceof vn?o=this.rgbaToHsva(h):h instanceof bi&&(o=this.hsla2hsva(h)),o}return o}outputFormat(e,n,o){switch("auto"===n&&(n=e.a<1?"rgba":"hex"),n){case"hsla":const r=this.hsva2hsla(e),a=new bi(Math.round(360*r.h),Math.round(100*r.s),Math.round(100*r.l),Math.round(100*r.a)/100);return e.a<1||"always"===o?"hsla("+a.h+","+a.s+"%,"+a.l+"%,"+a.a+")":"hsl("+a.h+","+a.s+"%,"+a.l+"%)";case"rgba":const c=this.denormalizeRGBA(this.hsvaToRgba(e));return e.a<1||"always"===o?"rgba("+c.r+","+c.g+","+c.b+","+Math.round(100*c.a)/100+")":"rgb("+c.r+","+c.g+","+c.b+")";default:const l="always"===o||"forced"===o;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(e)),l)}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac}),i})();const d8=typeof window<"u"&&"ontouchstart"in window;let mV=(()=>{class i{constructor(e,n,o,r,a,c){this.ngZone=e,this.elRef=n,this.cdRef=o,this.document=r,this.platformId=a,this.service=c,this.isIE10=!1,this.dialogArrowSize=10,this.dialogArrowOffset=15,this.dialogInputFields=[st.HEX,st.RGBA,st.HSLA,st.CMYK],this.useRootViewContainer=!1,this.eyeDropperSupported=(0,M.NF)(this.platformId)&&"EyeDropper"in this.document.defaultView}handleEsc(e){this.show&&"popup"===this.cpDialogDisplay&&this.onCancelColor(e)}handleEnter(e){this.show&&"popup"===this.cpDialogDisplay&&this.onAcceptColor(e)}ngOnInit(){this.slider=new h8(0,0,0,0),this.sliderDimMax=new u8(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.format=this.cpCmykEnabled?st.CMYK:"rgba"===this.cpOutputFormat?st.RGBA:"hsla"===this.cpOutputFormat?st.HSLA:st.HEX,this.listenerMouseDown=o=>{this.onMouseDown(o)},this.listenerResize=()=>{this.onResize()},this.openDialog(this.initialColor,!1)}ngOnDestroy(){this.closeDialog()}ngAfterViewInit(){230===this.cpWidth&&"inline"!==this.cpDialogDisplay||(this.sliderDimMax=new u8(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.updateColorPicker(!1),this.cdRef.detectChanges())}openDialog(e,n=!0){this.service.setActive(this),this.width||(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(e),this.setColorFromString(e,n),this.openColorPicker()}closeDialog(){this.closeColorPicker()}setupDialog(e,n,o,r,a,c,l,h,u,d,f,p,g,m,v,b,y,z,C,x,w,O,P,E,L,k,V,K,J,S,I,W,me,ve,ke,Ae,Ao,Eo){this.setInitialColor(o),this.setColorMode(h),this.isIE10=10===function fV(){let i="";typeof navigator<"u"&&(i=navigator.userAgent.toLowerCase());const t=i.indexOf("msie ");return t>0&&parseInt(i.substring(t+5,i.indexOf(".",t)),10)}(),this.directiveInstance=e,this.directiveElementRef=n,this.cpDisableInput=p,this.cpCmykEnabled=u,this.cpAlphaChannel=d,this.cpOutputFormat=f,this.cpDialogDisplay=c,this.cpIgnoredElements=g,this.cpSaveClickOutside=m,this.cpCloseClickOutside=v,this.useRootViewContainer=b,this.width=this.cpWidth=parseInt(r,10),this.height=this.cpHeight=parseInt(a,10),this.cpPosition=y,this.cpPositionOffset=parseInt(z,10),this.cpOKButton=k,this.cpOKButtonText=K,this.cpOKButtonClass=V,this.cpCancelButton=J,this.cpCancelButtonText=I,this.cpCancelButtonClass=S,this.cpEyeDropper=Ae,this.fallbackColor=l||"#fff",this.setPresetConfig(x,w),this.cpPresetColorsClass=O,this.cpMaxPresetColorsLength=P,this.cpPresetEmptyMessage=E,this.cpPresetEmptyMessageClass=L,this.cpAddColorButton=W,this.cpAddColorButtonText=ve,this.cpAddColorButtonClass=me,this.cpRemoveColorButtonClass=ke,this.cpTriggerElement=Ao,this.cpExtraTemplate=Eo,C||(this.dialogArrowOffset=0),"inline"===c&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),"hex"===f&&"always"!==d&&"forced"!==d&&(this.cpAlphaChannel="disabled")}setColorMode(e){switch(e.toString().toUpperCase()){case"1":case"C":case"COLOR":default:this.cpColorMode=1;break;case"2":case"G":case"GRAYSCALE":this.cpColorMode=2;break;case"3":case"P":case"PRESETS":this.cpColorMode=3}}setInitialColor(e){this.initialColor=e}setPresetConfig(e,n){this.cpPresetLabel=e,this.cpPresetColors=n}setColorFromString(e,n=!0,o=!0){let r;"always"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel?(r=this.service.stringToHsva(e,!0),!r&&!this.hsva&&(r=this.service.stringToHsva(e,!1))):r=this.service.stringToHsva(e,!1),!r&&!this.hsva&&(r=this.service.stringToHsva(this.fallbackColor,!1)),r&&(this.hsva=r,this.sliderH=this.hsva.h,"hex"===this.cpOutputFormat&&"disabled"===this.cpAlphaChannel&&(this.hsva.a=1),this.updateColorPicker(n,o))}onResize(){"fixed"===this.position?this.setDialogPosition():"inline"!==this.cpDialogDisplay&&this.closeColorPicker()}onDragEnd(e){this.directiveInstance.sliderDragEnd({slider:e,color:this.outputColor})}onDragStart(e){this.directiveInstance.sliderDragStart({slider:e,color:this.outputColor})}onMouseDown(e){this.show&&!this.isIE10&&"popup"===this.cpDialogDisplay&&e.target!==this.directiveElementRef.nativeElement&&!this.isDescendant(this.elRef.nativeElement,e.target)&&!this.isDescendant(this.directiveElementRef.nativeElement,e.target)&&0===this.cpIgnoredElements.filter(n=>n===e.target).length&&this.ngZone.run(()=>{this.cpSaveClickOutside?this.directiveInstance.colorSelected(this.outputColor):(this.hsva=null,this.setColorFromString(this.initialColor,!1),this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor),this.directiveInstance.colorCanceled()),this.cpCloseClickOutside&&this.closeColorPicker()})}onAcceptColor(e){e.stopPropagation(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor),"popup"===this.cpDialogDisplay&&this.closeColorPicker()}onCancelColor(e){this.hsva=null,e.stopPropagation(),this.directiveInstance.colorCanceled(),this.setColorFromString(this.initialColor,!0),"popup"===this.cpDialogDisplay&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker())}onEyeDropper(){this.eyeDropperSupported&&(new window.EyeDropper).open().then(n=>{this.setColorFromString(n.sRGBHex,!0)})}onFormatToggle(e){const n=this.dialogInputFields.length-(this.cpCmykEnabled?0:1),o=((this.dialogInputFields.indexOf(this.format)+e)%n+n)%n;this.format=this.dialogInputFields[o]}onColorChange(e){this.hsva.s=e.s/e.rgX,this.hsva.v=e.v/e.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor})}onHueChange(e){this.hsva.h=e.v/e.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor})}onValueChange(e){this.hsva.v=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor})}onAlphaChange(e){this.hsva.a=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor})}onHexInput(e){if(null===e)this.updateColorPicker();else{e&&"#"!==e[0]&&(e="#"+e);let n=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;"always"===this.cpAlphaChannel&&(n=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi);const o=n.test(e);o&&(e.length<5&&(e="#"+e.substring(1).split("").map(r=>r+r).join("")),"forced"===this.cpAlphaChannel&&(e+=Math.round(255*this.hsva.a).toString(16)),this.setColorFromString(e,!0,!1)),this.directiveInstance.inputChanged({input:"hex",valid:o,value:e,color:this.outputColor})}}onRedInput(e){const n=this.service.hsvaToRgba(this.hsva),o=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;o&&(n.r=e.v/e.rg,this.hsva=this.service.rgbaToHsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"red",valid:o,value:n.r,color:this.outputColor})}onBlueInput(e){const n=this.service.hsvaToRgba(this.hsva),o=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;o&&(n.b=e.v/e.rg,this.hsva=this.service.rgbaToHsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"blue",valid:o,value:n.b,color:this.outputColor})}onGreenInput(e){const n=this.service.hsvaToRgba(this.hsva),o=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;o&&(n.g=e.v/e.rg,this.hsva=this.service.rgbaToHsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"green",valid:o,value:n.g,color:this.outputColor})}onHueInput(e){const n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(this.hsva.h=e.v/e.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"hue",valid:n,value:this.hsva.h,color:this.outputColor})}onValueInput(e){const n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(this.hsva.v=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"value",valid:n,value:this.hsva.v,color:this.outputColor})}onAlphaInput(e){const n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(this.hsva.a=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"alpha",valid:n,value:this.hsva.a,color:this.outputColor})}onLightnessInput(e){const n=this.service.hsva2hsla(this.hsva),o=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;o&&(n.l=e.v/e.rg,this.hsva=this.service.hsla2hsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"lightness",valid:o,value:n.l,color:this.outputColor})}onSaturationInput(e){const n=this.service.hsva2hsla(this.hsva),o=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;o&&(n.s=e.v/e.rg,this.hsva=this.service.hsla2hsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"saturation",valid:o,value:n.s,color:this.outputColor})}onCyanInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.c=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}onMagentaInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.m=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}onYellowInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.y=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}onBlackInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.k=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}onAddPresetColor(e,n){e.stopPropagation(),this.cpPresetColors.filter(o=>o===n).length||(this.cpPresetColors=this.cpPresetColors.concat(n),this.directiveInstance.presetColorsChanged(this.cpPresetColors))}onRemovePresetColor(e,n){e.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter(o=>o!==n),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}openColorPicker(){this.show||(this.show=!0,this.hidden=!0,setTimeout(()=>{this.hidden=!1,this.setDialogPosition(),this.cdRef.detectChanges()},0),this.directiveInstance.stateChanged(!0),this.isIE10||this.ngZone.runOutsideAngular(()=>{d8?document.addEventListener("touchstart",this.listenerMouseDown):document.addEventListener("mousedown",this.listenerMouseDown)}),window.addEventListener("resize",this.listenerResize))}closeColorPicker(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||(d8?document.removeEventListener("touchstart",this.listenerMouseDown):document.removeEventListener("mousedown",this.listenerMouseDown)),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())}updateColorPicker(e=!0,n=!0,o=!1){if(this.sliderDimMax){let r,a,c;2===this.cpColorMode&&(this.hsva.s=0);const l=this.outputColor;if(a=this.service.hsva2hsla(this.hsva),this.cpCmykEnabled?(o?(c=this.service.cmykToRgb(this.service.normalizeCMYK(this.cmyk)),this.hsva=this.service.rgbaToHsva(c)):(c=this.service.hsvaToRgba(this.hsva),this.cmyk=this.service.denormalizeCMYK(this.service.rgbaToCmyk(c))),c=this.service.denormalizeRGBA(c),this.sliderH=this.hsva.h):c=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),r=this.service.denormalizeRGBA(this.service.hsvaToRgba(new wa(this.sliderH||this.hsva.h,1,1,1))),n&&(this.hslaText=new bi(Math.round(360*a.h),Math.round(100*a.s),Math.round(100*a.l),Math.round(100*a.a)/100),this.rgbaText=new vn(c.r,c.g,c.b,Math.round(100*c.a)/100),this.cpCmykEnabled&&(this.cmykText=new js(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k,Math.round(100*this.cmyk.a)/100)),this.hexText=this.service.rgbaToHex(c,"always"===this.cpAlphaChannel),this.hexAlpha=this.rgbaText.a),"auto"===this.cpOutputFormat&&this.format!==st.RGBA&&this.format!==st.CMYK&&this.format!==st.HSLA&&this.hsva.a<1&&(this.format=this.hsva.a<1?st.RGBA:st.HEX),this.hueSliderColor="rgb("+r.r+","+r.g+","+r.b+")",this.alphaSliderColor="rgb("+c.r+","+c.g+","+c.b+")",this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.format!==st.CMYK)this.cmykColor="";else if("always"===this.cpAlphaChannel||"enabled"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel){const h=Math.round(100*this.cmyk.a)/100;this.cmykColor=`cmyka(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k},${h})`}else this.cmykColor=`cmyk(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k})`;this.slider=new h8((this.sliderH||this.hsva.h)*this.sliderDimMax.h-8,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-8),e&&l!==this.outputColor&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.outputColor))}}setDialogPosition(){if("inline"===this.cpDialogDisplay)this.position="relative";else{let o,e="static",n="",r=null,a=null,c=this.directiveElementRef.nativeElement.parentNode;const l=this.dialogElement.nativeElement.offsetHeight;for(;null!==c&&"HTML"!==c.tagName;){if(o=window.getComputedStyle(c),e=o.getPropertyValue("position"),n=o.getPropertyValue("transform"),"static"!==e&&null===r&&(r=c),n&&"none"!==n&&null===a&&(a=c),"fixed"===e){r=a;break}c=c.parentNode}const h=this.createDialogBox(this.directiveElementRef.nativeElement,"fixed"!==e);if(this.useRootViewContainer||"fixed"===e&&(!r||r instanceof HTMLUnknownElement))this.top=h.top,this.left=h.left;else{null===r&&(r=c);const d=this.createDialogBox(r,"fixed"!==e);this.top=h.top-d.top,this.left=h.left-d.left}"fixed"===e&&(this.position="fixed");let u=this.cpPosition;if("auto"===this.cpPosition){const d=this.dialogElement.nativeElement.getBoundingClientRect(),f=window.innerHeight,p=window.innerWidth,g=this.elRef.nativeElement.getBoundingClientRect();this.top+d.height>f&&(this.top=f-d.height,this.cpArrowPosition=g.x/2-20),this.left+d.width>p&&(this.left=p-d.width,this.cpArrowPosition=g.x/2-20),u=function dV(i,t){let e="right",n="bottom";const{height:o,width:r}=i,{top:a,left:c}=t,l=a+t.height,h=c+t.width,u=a-o<0,d=l+o>(window.innerHeight||document.documentElement.clientHeight),f=c-r<0,p=h+r>(window.innerWidth||document.documentElement.clientWidth);return d&&(n="top"),u&&(n="bottom"),f&&(e="right"),p&&(e="left"),u&&d&&f&&p?["left","right","top","bottom"].reduce((v,b)=>i[v]>i[b]?v:b):f&&p?u?"bottom":d||a>l?"top":"bottom":u&&d?f?"right":p||c>h?"left":"right":`${n}-${e}`}(d,this.cpTriggerElement.nativeElement.getBoundingClientRect())}"top"===u?(this.arrowTop=l-1,this.top-=l+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*h.width-this.dialogArrowOffset):"bottom"===u?(this.top+=h.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*h.width-this.dialogArrowOffset):"top-left"===u||"left-top"===u?(this.top-=l-h.height+h.height*this.cpPositionOffset/100,this.left-=this.cpWidth+this.dialogArrowSize-2-this.dialogArrowOffset):"top-right"===u||"right-top"===u?(this.top-=l-h.height+h.height*this.cpPositionOffset/100,this.left+=h.width+this.dialogArrowSize-2-this.dialogArrowOffset):"left"===u||"bottom-left"===u||"left-bottom"===u?(this.top+=h.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2):(this.top+=h.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=h.width+this.dialogArrowSize-2),this.cpUsePosition=u}}isDescendant(e,n){let o=n.parentNode;for(;null!==o;){if(o===e)return!0;o=o.parentNode}return!1}createDialogBox(e,n){const{top:o,left:r}=e.getBoundingClientRect();return{top:o+(n?window.pageYOffset:0),left:r+(n?window.pageXOffset:0),width:e.offsetWidth,height:e.offsetHeight}}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.R0b),s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(M.K0),s.Y36(s.Lbi),s.Y36(Kl))},i.\u0275cmp=s.Xpm({type:i,selectors:[["color-picker"]],viewQuery:function(e,n){if(1&e&&(s.Gf(DP,7),s.Gf(IP,7),s.Gf(PP,7)),2&e){let o;s.iGM(o=s.CRH())&&(n.dialogElement=o.first),s.iGM(o=s.CRH())&&(n.hueSlider=o.first),s.iGM(o=s.CRH())&&(n.alphaSlider=o.first)}},hostBindings:function(e,n){1&e&&s.NdJ("keyup.esc",function(r){return n.handleEsc(r)},!1,s.evT)("keyup.enter",function(r){return n.handleEnter(r)},!1,s.evT)},decls:30,vars:51,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],[3,"left","class","top",4,"ngIf"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue","dragStart","dragEnd",4,"ngIf"],[1,"hue-alpha","box"],[1,"left"],[1,"selected-color-background"],[1,"selected-color",3,"click"],["class","eyedropper-icon","xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#000000",4,"ngIf"],["type","button",3,"class","disabled","click",4,"ngIf"],[1,"right"],["style","height: 16px;",4,"ngIf"],[1,"hue",3,"slider","rgX","newValue","dragStart","dragEnd"],["hueSlider",""],[1,"cursor"],[1,"value",3,"slider","rgX","newValue","dragStart","dragEnd"],["valueSlider",""],[1,"alpha",3,"slider","rgX","newValue","dragStart","dragEnd"],["alphaSlider",""],["class","cmyk-text",3,"display",4,"ngIf"],["class","hsla-text",3,"display",4,"ngIf"],["class","rgba-text",3,"display",4,"ngIf"],["class","hex-text",3,"hex-alpha","display",4,"ngIf"],["class","value-text",4,"ngIf"],["class","type-policy",4,"ngIf"],["class","preset-area",4,"ngIf"],["class","button-area",4,"ngIf"],["class","extra-template",4,"ngIf"],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue","dragStart","dragEnd"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#000000",1,"eyedropper-icon"],["d","M0 0h24v24H0V0z","fill","none"],["d","M17.66 5.41l.92.92-2.69 2.69-.92-.92 2.69-2.69M17.67 3c-.26 0-.51.1-.71.29l-3.12 3.12-1.93-1.91-1.41 1.41 1.42 1.42L3 16.25V21h4.75l8.92-8.92 1.42 1.42 1.41-1.41-1.92-1.92 3.12-3.12c.4-.4.4-1.03.01-1.42l-2.34-2.34c-.2-.19-.45-.29-.7-.29zM6.92 19L5 17.08l8.06-8.06 1.92 1.92L6.92 19z"],["type","button",3,"disabled","click"],[2,"height","16px"],[1,"cmyk-text"],[1,"box"],["type","number","pattern","[0-9]*","min","0","max","100",3,"text","rg","value","keyup.enter","newValue"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue",4,"ngIf"],[4,"ngIf"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue"],[1,"hsla-text"],["type","number","pattern","[0-9]*","min","0","max","360",3,"text","rg","value","keyup.enter","newValue"],[1,"rgba-text"],["type","number","pattern","[0-9]*","min","0","max","255",3,"text","rg","value","keyup.enter","newValue"],[1,"hex-text"],[3,"text","value","blur","keyup.enter","newValue"],[1,"value-text"],[1,"type-policy"],[1,"type-policy-arrow",3,"click"],[1,"preset-area"],[1,"preset-label"],[3,"class",4,"ngIf"],["class","preset-color",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"preset-color",3,"click"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"button-area"],["type","button",3,"class","click",4,"ngIf"],["type","button",3,"click"],[1,"extra-template"],[4,"ngTemplateOutlet"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0,1),s.NdJ("click",function(r){return r.stopPropagation()}),s.YNc(2,VP,1,7,"div",2),s.YNc(3,LP,2,8,"div",3),s.TgZ(4,"div",4)(5,"div",5),s._UZ(6,"div",6),s.TgZ(7,"div",7),s.NdJ("click",function(){return n.eyeDropperSupported&&n.cpEyeDropper&&n.onEyeDropper()}),s.YNc(8,HP,3,0,"svg",8),s.qZA(),s.YNc(9,BP,2,5,"button",9),s.qZA(),s.TgZ(10,"div",10),s.YNc(11,FP,1,0,"div",11),s.TgZ(12,"div",12,13),s.NdJ("newValue",function(r){return n.onHueChange(r)})("dragStart",function(){return n.onDragStart("hue")})("dragEnd",function(){return n.onDragEnd("hue")}),s._UZ(14,"div",14),s.qZA(),s.TgZ(15,"div",15,16),s.NdJ("newValue",function(r){return n.onValueChange(r)})("dragStart",function(){return n.onDragStart("value")})("dragEnd",function(){return n.onDragEnd("value")}),s._UZ(17,"div",14),s.qZA(),s.TgZ(18,"div",17,18),s.NdJ("newValue",function(r){return n.onAlphaChange(r)})("dragStart",function(){return n.onDragStart("alpha")})("dragEnd",function(){return n.onDragEnd("alpha")}),s._UZ(20,"div",14),s.qZA()()(),s.YNc(21,$P,17,12,"div",19),s.YNc(22,ZP,14,10,"div",20),s.YNc(23,UP,14,10,"div",21),s.YNc(24,XP,8,7,"div",22),s.YNc(25,eV,9,3,"div",23),s.YNc(26,tV,3,0,"div",24),s.YNc(27,rV,6,3,"div",25),s.YNc(28,lV,3,2,"div",26),s.YNc(29,uV,2,1,"div",27),s.qZA()),2&e&&(s.Udp("display",n.show?"block":"none")("visibility",n.hidden?"hidden":"visible")("top",n.top,"px")("left",n.left,"px")("position",n.position)("height",n.cpHeight,"px")("width",n.cpWidth,"px"),s.ekj("open",n.show),s.xp6(2),s.Q6J("ngIf","popup"===n.cpDialogDisplay),s.xp6(1),s.Q6J("ngIf",1===(n.cpColorMode||1)),s.xp6(4),s.Udp("background-color",n.selectedColor)("cursor",n.eyeDropperSupported&&n.cpEyeDropper?"pointer":null),s.xp6(1),s.Q6J("ngIf",n.eyeDropperSupported&&n.cpEyeDropper),s.xp6(1),s.Q6J("ngIf",n.cpAddColorButton),s.xp6(2),s.Q6J("ngIf","disabled"===n.cpAlphaChannel),s.xp6(1),s.Udp("display",1===(n.cpColorMode||1)?"block":"none"),s.Q6J("rgX",1),s.xp6(2),s.Udp("left",null==n.slider?null:n.slider.h,"px"),s.xp6(1),s.Udp("display",2===(n.cpColorMode||1)?"block":"none"),s.Q6J("rgX",1),s.xp6(2),s.Udp("right",null==n.slider?null:n.slider.v,"px"),s.xp6(1),s.Udp("display","disabled"===n.cpAlphaChannel?"none":"block")("background-color",n.alphaSliderColor),s.Q6J("rgX",1),s.xp6(2),s.Udp("left",null==n.slider?null:n.slider.a,"px"),s.xp6(1),s.Q6J("ngIf",!n.cpDisableInput&&1===(n.cpColorMode||1)),s.xp6(1),s.Q6J("ngIf",!n.cpDisableInput&&1===(n.cpColorMode||1)),s.xp6(1),s.Q6J("ngIf",!n.cpDisableInput&&1===(n.cpColorMode||1)),s.xp6(1),s.Q6J("ngIf",!n.cpDisableInput&&1===(n.cpColorMode||1)),s.xp6(1),s.Q6J("ngIf",!n.cpDisableInput&&2===(n.cpColorMode||1)),s.xp6(1),s.Q6J("ngIf",!n.cpDisableInput&&1===(n.cpColorMode||1)),s.xp6(1),s.Q6J("ngIf",(null==n.cpPresetColors?null:n.cpPresetColors.length)||n.cpAddColorButton),s.xp6(1),s.Q6J("ngIf",n.cpOKButton||n.cpCancelButton),s.xp6(1),s.Q6J("ngIf",n.cpExtraTemplate))},dependencies:[M.sg,M.O5,M.tP,pV,gV],styles:['.color-picker{position:absolute;z-index:1000;width:230px;height:auto;border:#777 solid 1px;cursor:default;-webkit-user-select:none;user-select:none;background-color:#fff}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:invalid,.color-picker input:-moz-ui-invalid,.color-picker input:-moz-submit-invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .arrow{position:absolute;z-index:999999;width:0;height:0;border-style:solid}.color-picker .arrow.arrow-top{left:8px;border-width:10px 5px;border-color:#777 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .arrow.arrow-bottom{top:-20px;left:8px;border-width:10px 5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #777 rgba(0,0,0,0)}.color-picker .arrow.arrow-top-left,.color-picker .arrow.arrow-left-top{right:-21px;bottom:8px;border-width:5px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) #777}.color-picker .arrow.arrow-top-right,.color-picker .arrow.arrow-right-top{bottom:8px;left:-20px;border-width:5px 10px;border-color:rgba(0,0,0,0) #777 rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .arrow.arrow-left,.color-picker .arrow.arrow-left-bottom,.color-picker .arrow.arrow-bottom-left{top:8px;right:-21px;border-width:5px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) #777}.color-picker .arrow.arrow-right,.color-picker .arrow.arrow-right-bottom,.color-picker .arrow.arrow-bottom-right{top:8px;left:-20px;border-width:5px 10px;border-color:rgba(0,0,0,0) #777 rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .cursor{position:relative;width:16px;height:16px;border:#222 solid 2px;border-radius:50%;cursor:default}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{flex:1 1 auto;padding:12px 8px}.color-picker .button-area{padding:0 16px 16px;text-align:right}.color-picker .button-area button{margin-left:8px}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-label{overflow:hidden;width:100%;padding:4px;font-size:11px;white-space:nowrap;text-align:left;text-overflow:ellipsis;color:#555}.color-picker .preset-area .preset-color{position:relative;display:inline-block;width:18px;height:18px;margin:4px 6px 8px;border:#a9a9a9 solid 1px;border-radius:25%;cursor:pointer}.color-picker .preset-area .preset-empty-message{min-height:18px;margin-top:4px;margin-bottom:8px;font-style:italic;text-align:center}.color-picker .hex-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .hex-text .box{padding:0 24px 8px 8px}.color-picker .hex-text .box div{float:left;flex:1 1 auto;text-align:center;color:#555;clear:left}.color-picker .hex-text .box input{flex:1 1 auto;padding:1px;border:#a9a9a9 solid 1px}.color-picker .hex-alpha .box div:first-child,.color-picker .hex-alpha .box input:first-child{flex-grow:3;margin-right:8px}.color-picker .cmyk-text,.color-picker .hsla-text,.color-picker .rgba-text,.color-picker .value-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .cmyk-text .box,.color-picker .hsla-text .box,.color-picker .rgba-text .box{padding:0 24px 8px 8px}.color-picker .value-text .box{padding:0 8px 8px}.color-picker .cmyk-text .box div,.color-picker .hsla-text .box div,.color-picker .rgba-text .box div,.color-picker .value-text .box div{flex:1 1 auto;margin-right:8px;text-align:center;color:#555}.color-picker .cmyk-text .box div:last-child,.color-picker .hsla-text .box div:last-child,.color-picker .rgba-text .box div:last-child,.color-picker .value-text .box div:last-child{margin-right:0}.color-picker .cmyk-text .box input,.color-picker .hsla-text .box input,.color-picker .rgba-text .box input,.color-picker .value-text .box input{float:left;flex:1;padding:1px;margin:0 8px 0 0;border:#a9a9a9 solid 1px}.color-picker .cmyk-text .box input:last-child,.color-picker .hsla-text .box input:last-child,.color-picker .rgba-text .box input:last-child,.color-picker .value-text .box input:last-child{margin-right:0}.color-picker .hue-alpha{align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwkUFWbCCAAAAFxJREFUaN7t0kEKg0AQAME2x83/n2qu5qCgD1iDhCoYdpnbQC9bbY1qVO/jvc6k3ad91s7/7F1/csgPrujuQ17BDYSFsBAWwgJhISyEBcJCWAgLhIWwEBYIi2f7Ar/1TCgFH2X9AAAAAElFTkSuQmCC)}.color-picker .value{direction:rtl;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAACTklEQVR42u3SYUcrABhA4U2SkmRJMmWSJklKJiWZZpKUJJskKUmaTFImKZOUzMySpGRmliRNJilJSpKSJEtmSpIpmWmSdO736/6D+x7OP3gUCoWCv1cqlSQlJZGcnExKSgqpqamkpaWRnp5ORkYGmZmZqFQqsrKyyM7OJicnh9zcXNRqNXl5eeTn56PRaCgoKKCwsJCioiK0Wi3FxcWUlJRQWlpKWVkZ5eXlVFRUUFlZiU6no6qqiurqampqaqitraWurg69Xk99fT0GgwGj0UhDQwONjY00NTXR3NxMS0sLra2ttLW10d7ejslkwmw209HRQWdnJ11dXXR3d9PT00Nvby99fX309/czMDDA4OAgFouFoaEhrFYrw8PDjIyMMDo6ytjYGDabjfHxcSYmJpicnGRqagq73c709DQzMzPMzs4yNzfH/Pw8DocDp9OJy+XC7XazsLDA4uIiS0tLLC8vs7KywurqKmtra3g8HrxeLz6fD7/fz/r6OhsbG2xubrK1tcX29jaBQICdnR2CwSC7u7vs7e2xv7/PwcEBh4eHHB0dcXx8zMnJCaenp5ydnXF+fs7FxQWXl5dcXV1xfX3Nzc0Nt7e33N3dEQqFuL+/5+HhgXA4TCQS4fHxkaenJ56fn3l5eeH19ZVoNMrb2xvv7+98fHwQi8WIx+N8fn6SSCT4+vri+/ubn58ffn9/+VcKgSWwBJbAElgCS2AJLIElsASWwBJYAktgCSyBJbAElsASWAJLYAksgSWwBJbAElgCS2AJLIElsP4/WH8AmJ5Z6jHS4h8AAAAASUVORK5CYII=)}.color-picker .alpha{direction:ltr;width:100%;height:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwYQlZMa3gAAAWVJREFUaN7tmEGO6jAQRCsOArHgBpyAJYGjcGocxAm4A2IHpmoWE0eBH+ezmFlNvU06shJ3W6VEelWMUQAIIF9f6qZpimsA1LYtS2uF51/u27YVAFZVRUkEoGHdPV/sIcbIEIIkUdI/9Xa7neyv61+SWFUVAVCSct00TWn2fv6u3+Ecfd3tXzy/0+nEUu+SPjo/kqzrmiQpScN6v98XewfA8/lMkiLJ2WxGSUopcT6fM6U0NX9/frfbjev1WtfrlZfLhYfDQQHG/AIOlnGwjINlHCxjHCzjYJm/TJWdCwquJXseFFzGwDNNeiKMOJTO8xQdDQaeB29+K9efeLaBo9J7vdvtJj1RjFFjfiv7qv95tjx/7leSQgh93e1ffMeIp6O+YQjho/N791t1XVOSSI7N//K+4/GoxWLBx+PB5/Op5XLJ+/3OlJJWqxU3m83ovv5iGf8KjYNlHCxjHCzjYBkHy5gf5gusvQU7U37jTAAAAABJRU5ErkJggg==)}.color-picker .type-policy{position:absolute;top:218px;right:12px;width:16px;height:24px;background-size:8px 16px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACewAAAnsB01CO3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIASURBVEiJ7ZY9axRRFIafsxMStrLQJpAgpBFhi+C9w1YSo00I6RZ/g9vZpBf/QOr4GyRgkSKNSrAadsZqQGwCkuAWyRZJsySwvhZ7N/vhzrgbLH3Ld8597jlzz50zJokyxXH8DqDVar0qi6v8BbItqSGpEcfxdlmsFWXkvX8AfAVWg3UKPEnT9GKujMzsAFgZsVaCN1VTQd77XUnrgE1kv+6935268WRpzrnHZvYRWC7YvC3pRZZl3wozqtVqiyH9IgjAspkd1Gq1xUJQtVrdB9ZKIAOthdg/Qc65LUk7wNIMoCVJO865rYFhkqjX6/d7vV4GPJwBMqofURS5JEk6FYBer/eeYb/Mo9WwFnPOvQbeAvfuAAK4BN4sAJtAG/gJIElmNuiJyba3EGNmZiPeZuEVmVell/Y/6N+CzDn3AXhEOOo7Hv/3BeAz8IzQkMPnJbuPx1wC+yYJ7/0nYIP5S/0FHKdp+rwCEEXRS/rf5Hl1Gtb2M0iSpCOpCZzPATmX1EySpHMLAsiy7MjMDoHrGSDXZnaYZdnRwBh7J91utwmczAA6CbG3GgPleX4jqUH/a1CktqRGnuc3hSCAMB32gKspkCtgb3KCQMmkjeP4WNJThrNNZval1WptTIsv7JtQ4tmIdRa8qSoEpWl6YWZNoAN0zKxZNPehpLSBZv2t+Q0CJ9lLnARQLAAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center}.color-picker .type-policy .type-policy-arrow{display:block;width:100%;height:50%}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;border:1px solid #a9a9a9;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC)}.color-picker .saturation-lightness{direction:ltr;width:100%;height:130px;border:none;cursor:pointer;touch-action:manipulation;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOYAAACCCAYAAABSD7T3AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwksPWR6lgAAIABJREFUeNrtnVuT47gRrAHN+P//Or/61Y5wONZ7mZ1u3XAeLMjJZGZVgdKsfc5xR3S0RIIUW+CHzCpc2McYo7XGv3ex7UiZd57rjyzzv+v+33X/R/+3r/f7vR386Y+TvKNcf/wdhTLPcv9qU2wZd74uth0t1821jkIZLPcsI/6nWa4XvutquU0Z85mnx80S/ZzgpnLnOtHNt7/ofx1TKXcSNzN/7qbMQ3ju7rNQmMYYd/4s2j9aa+P+gGaMcZrb1M/tdrvf7/d2v99P9/t93O/3cbvdxu12G9frdVwul3E+n8c///nP+2+//Xb66aefxl//+tfx5z//2YK5Al2rgvf4UsbpdGrB52bAvArXpuzjmiqAVSGz5eDmGYXzhbAZmCrnmzddpUU+8Y1dAOYeXCtDUwVwV7YCGH6uAmyMcZ9l5vkUaBPGMUZ7/J5w/792/fvv9Xq93263dr/fTxPECeME8nK5jM/Pz/HTTz/dv337dvrll1/GP/7xj/G3v/1t/OUvfwkVswongjdOp9PzH3U3D3zmWGnZVXn4jCqs7wC2BKP4/8tAzkZsoWx6XrqeHZymvp4ABCBJhTQwKfDT8gzrZCIqi5AhiACjBfEB2rP8/X63MM7f6/V6v9/v7Xa7bYC83W7jcrlsVHIq5ffv30+//fbb+OWXX8ZPP/00/v73v4+ff/75JSvbeu+bL2WMMaFbAlpBNM85QX+ct6qoSqkPAwuQlBVKqGNFSUOAA3Bmu7gC5hNOd15nSwvAOUW7C4giUCV8Sgn5L9hNFIqTsp0GxI0ysioyjAjkY/tGJVEpz+fz+OWXX+7fv38//f777+Pbt2/j119/HT///PP49ddfx8fHRwrmTjV779EXu2px2xhjwtdJZQcAWQIPLPISsMJaSwiD8gzIKrwSyATE5j5nAbR5c1dBUwBlsEWW0h6LqiYsqFPAQxCyRZ3wOSARxmlXMX5k64pQfvv27f75+dk+Pj5OHx8f4/v37+Pbt2/jt99+G9++fRsfHx/jcrmUFLO31gYDWblxRIs/TqfT7ousxJsAxXA2Gc7TA9XdgfdoHbFsj76X2+1WArgI1ageGwA3qupqoHsmcbI6Fu93quggFa9d7LeDtgKfAFHBJ+NEByIkcJ5KervdTmhhGcgJJSZ5vn//fj+fz+18Pp8+Pz/H5+fnmGD+/vvv4/v37+Pj42N8fn6O2+1Ws7JjjP6wraMI5E4RZ8x2vV5TSwkquotV7/d7Tz6HFWsD/qNcdw0CQ3q/321c686TwDVIdbuy73zNldhSHb8I2klZznm+InBS4U6n0302aBFsLhHDAKJVJVglfI9jhvu53W53sLANYNxAiDA6MCeUHx8f9+v12i6XS7tcLqcZW57P5yeY8/fz83Ocz+fnsSmYUyknWEG85WBst9stzSLyMdfr9Qi08iY15UZ0LlDGLhR3o5zK2j7OPUTD0E+nU3tk7Xb/16NFbhloAMuY1zjLUOO3BKeIDe+Z8s3/J4gFo4TM5jPmuRg28foUKKVSwo16TgA5npywcWLHgYl/Pz8/73/605/ab7/91m63W7tcLie0sZj4mao5gTyfz88E0f1+j8EcYzwTPEG2cqjyfHNF0M8fuqEiaOVnRzZZQNh5fwQyHg/HDGfJo89Q1zb/quu5XC6773I2XKfTqd/v9+d3wuqWva/YTdUdEV3fhIv/Viyps6YE3x3r43K5bJQS66zaxVGFsvd+//j4aF+/fm3fv39vt9utff36tf3+++/tdrudvn37ZuNLBaaCMgUzC+rZRiFowxUuJI8YMqcCp9Opq5vagaYU6lGJA1XQqejchw6Cj0Gw5nYBrGw01A2O206n04BGouNNyTfp/FwElhUey6nXrIKw7QQWddxuN2ldL5fL839gSPF8ahu/JvBO48CPSuqMf8Vp9/P53L58+dLu93s7n8/tfr8/39/v9/b5+TkhPJ3P56mQ436/j+/fv+/iSgbzer0+AZx/5+88bv6OMda6S5z6kd21fYC9dxv7cIJJ2d9AOS30fPMzyHiTM8B4DF6XUlYHp4KQW3W+1t77MNB1vGHxWq7Xa7vf78+y5/N5A+H1et29xuP5dbYtyaRu4AksbPq6936fjRzXRxBbPr/b+b18+fKljTHaBBBfn8/n0/1+H1++fBnn8zm0sB8fH5u4cr5GuBhMVk0EEn9RsctgVhM+ixlJtMA23R8B6yysAstBOgFXIKKCMIgToMqNEu2fYMH7ztc732dQKkCj1ytAZtY0Kx8pIr8GGJ+AT3V+2Hirhl++fBmXy2Wz73w+b17P8p+fn8/tUwGVleVkTyUb68DkfayWY4zxNRihU4EpLJPZVrK+u7J4/mgfKqeLW9X2REWlItL1diynbDDb3+jXgYjQqn0rrxWc+NkILP7F7xIbMvx7vV53x40xnlbWJF12ZSag/N0pW6t+ZzmOMzHjajKwDfond78zYTdfq18up97zr2q8v3IioBprRtBl0EZ9og5WBRGOdOHjIjXF7UotFbgOWnXzIJyzYvjG5IYgsmMOxHkz8OsMSrVNWeq5T8DaOcbEv1Od5rbs9aO7YvMet63EkF++fMExq+MRl4/L5bLZN/+ez+fnZ6KazuMqXSQVO5spJXflHAIzes/xJseckRJiDMog9d6VfRrqXMr6KpVV27jRwJacGovOAM1zMdQMnwK1AubK63kdCChvI1C7g0z9nf/D+Xze2Vj8H7Gx4P9duQlsYCrqyN8XqG3Hm/10Oj3jw/n+crlstuM+jPmmxT2dTuPz83Pzt2pn1XsEHX/bnPaVqVmh0xwOt0o6XLLAHePUU203wHfcrspCwmV3TryB5s0Mseeg97x/BwzCjBlbB+pRAPla0BVQuT6V6QHdBlj3d0KG147b+DqxQeUymDO43W4dQar+TIjwmAd0z8/h65vf0/yLv3Pb5XLpru/ydDo9s7ET0I+Pj6dKK9VUEIeKWQWPAOrJ8LKd4vE+t91Y3e7UFlWatg2VwJnb+HPmtvm/sfK59/OaWF3x/eP1UPHvA5DDYDpYXfb0drv1V2DkBkxtw/tEWVVlXWdC9pFYs5/jfh9dS/16vW7s6lTG+TfqsxSJHxkXXq/Xdr1eu4LsfD6P3vsT3N77DkL+zPm5jSdKL4zR3AxQd6rHkLkYlSowsrq7znzu6wSwdsMJOXmA5fBcjxtgMGBYHlr5zokhtsMCTgXLQOW4XC6dEyEMprL8mAQzXRgduix2yZzorxkYsDn3hB1VeMLGsXsVtgl2pW8S3svk0vw7R4hNaHvv4cACl5HFzwIH0Kc6zu4XjDPR/jpAVxWzO1Xk2DDb3vTcxeGU1iWZHkmIDWziWKvirCJ4Dravs6IJ/GG6cTqWdXDy+fArQDVVkLqkVjAoZIITdmmIqXwqa95N3+MGYoZQdRVNO53Y1xRkhO16vY7eu507Ca9lJnbGpxOemQhSw/AQsmmp5zU9BiU8G6wvX76M6/U6Pj4+do0Bz4CpgiknTUeDqwlKBmg3u4OVjrZ1A+rAcgaejWq6eJCvCYFDONSwOgHX4EQRw8lxbzDOdEK6gZ3Hk1b+8g2o1JFtKXyv/fEdTXuWjWXdAZiBp6ADeDrCFiim7B6ZFneeI7Gvm/PMkUDX67W7xI8b0D7/v8dA9qfN5oaCf74WZjH0mf1cmfY1Y0JUFmVrTWu8uzkNcLtEj7u5FXBTkfC6GOA5q8YMxO8KVvF6sAVGdcrUbsKODcQKkLMOMdmlxum642YrPm26AlhZW1YB1R+rrGswE8TaYAWeUMxdf+WjwSvZ2Ef3ytOyfn5+PpVPAaqOn43MtNBqvmjjxbjM4lZjZY4gqNMI5ktaW/sYKNwS+9lFQzGihmMCKPa7+Z0V6Eb0GRmobtpX8JljWu5FMLN5ja6hG9kwQgZqf5+1NH5UxzkFReCdWhJ8XdlGUkxO7HRlYRm4mVO43W7ter12TPJEw/rmEN3L5SKHIWZg9mz+pUoKOYq5bJTJdX2gme1UcxMZQFaEQIlHct32M+Y1BzGkGuzfiyAN9z+ugplZ1symCrDCYYkGxDTpI9RzBy0rHyeDUC1nWaeUaD9n4xkNyYMBDZtzZ3B++fJlY21XFDOcARJlabOyiS3uCpLI9jrZjCDkaVvcCCjwognKShWdzXZWlZMvVTgD8LpqlCLrqgbcB+qYwrgKYpT0ccCqbKyCValkEabn/FynogCrPKfqf51xJ7sGB2ZXcZmxoSOztjx300DZi7a0/2AIR0UlBag9SuDw6KcAzlaB7vHZvWpjK90dyrq6bKyDUZQbR0B05biLQkHIcSUmgIK+SwuqgHCnoio2RQU1yj+BnBy9pphVKLGyC7ZzFK1pxWK+E8IhVCWLN/uLtnUU4ayoYLoaANz8FdtaSvY4pV0BEW2ls61czqllBKpTyKgMAhrZ1cdc1RROtPmvWNkdcKZ7ZKxaWjiPLJMpp7OZKxA+rqG/oJLjxf0pnJlqLoDZo3gyU0mKGys2taKecj/d1C+rJSplBqlTyAqgR+D8KjKlmRL2gtUcAdCtsL+ijCNT1oqqqkH2OHEbG5sDFnUg5Aa+yLou2VU1ptj1S2ZQqv1ORZN9IWzRfgaRBxKoBE8UWyqlJFtrIc0AxNjSjed99CTY/XDfSzCz5M0IZoVEsWnPFNTsl8ooVC1TzbGgqFZNDSgVwKK+1sGDMKqxZCWGVMDysiEr1jVSQJUYwj5iHOlThdHt44SQg9CN+nl8D90NMIgAdgr46JqRiR9I8vRdFvbr17m/yxUMKjNLMiVUADwu2CWGhhi+F55TWM9M9cogzms1dnM4uOF/LAEYWdcqnM7yFmyq3IfwmOROd7Y1iFWtOjoY8To41mTV5IysgFFuRzsbWFGbNIIJCDv1dOo4lZG7jWBwRFtVTKuWyeCByJKOan8oZ3ep9XddNl0tDuaywLz9cXPYeDAA0SpkBO9sbVcTOVWldPv4uyzEkzxHtjvonHoSkFEWNoo1d8DhcQputd2ppNon4BzoAiJ1hBFQg0dVtdbGHHDQWushmNEQukLM2QO1G2Y8bgTXqFhcBJj7EjPgcPts8US8qPpPB/dXznOh5Z438tzH5ec6QgrOKrRRfKmysBmUDB+PhYabMlVPER+GCSITTzr7am2tArH3bgcEzPJm+cr5jJ4NnHNFDVrFXcI5Le9k5Jnw+bedbV+FfRzZIHaOOaOsLY0/7UGs58DjrGwKMIMFIGzOEW1/jGsdAtCN6hEAI4hBe9YXeRROBSVPAVPAqvIM5bx5hVKWAMP6zBRy3iescridVdFBinBxXDnG2GRY2XbCvp1lhvGtO9Bxu5h908XQu42lnSArMFdizMim8uwRCxPGnnOS8lwpnbOiDqTAjsrRN/PcoAScCbaACqVM40ylnjjTBs+bwWlAG23/UKbdkiwKWIQPGzWaczpoSlxPEj822cNWkpS7FyzsDrqpfgpG3jahw2vgbaSQAxuLWZYt7JzyNe8JoZpNAcvDFOdw0wqYT9AK1rZz/DdbSlLPp0ryIxgQJlK9AZlEq7IOXpohg9PIhrCng88JsOxiV4ZWAYfg4sikx/8ky2Z9l862uqwrfscIH8+ugTmVGyiddeVYUgEMn4GZzg14EwIsh9sx2cKKiWXReuOE5gzGOQgdlRKVVdlevqb279Xq0Qnsts2VDaBO0coezsruWtHApu6sKG4IBhN0aGU2kLrMKGRTN3HmbCDwKV14zvkMEDG4QfZVspVlaNU2mhc5TEZ3N1h/zqTheuLpW05ZWTGVjb3dbnNmxKZBnN8JqidaVLKAOyARNLS+MB54Z2+VaqoMLKroVBlngefnTPAcoHNWCSvlfA8CI0HEmBNBnBlXyMrzU7A7WVm94PPqQ2gmqKx+WDGsnvilmcSOBJqOK1nYyAIzuAyesq3UdSK3KfWcYKD95HmfYOU3qser2CtYEUA+FpfqdNvgPBZUBhDrGONRVlQsh8rLcaUCykHG0OOUwTlLBrsh5soEMGezi1E4HRVt1icp5wZEFXdibCkG8Y8vX75sbO4E0iom9z+hjSiOfy3DhpXItpVhE+UGQdvoWjtChmrGHf4YAzKgBNnGtuJxFCeGdhUAfQLLK8kBYAP6gvFJZajMG3Xkycy8KuC0q4Eyymwtwdxdv2M0mIBtK0LKnf640j00Auq4gUkdWGlhs22qJc6dZCsL19oxnlTJG4SYVRIGpD8TPFBuM6OElbS1pldid4mGAyN6ZIupbC5bXJN9fdpbThSxLUaI8IG1XIYBxW3Tjs6KQosKcxfxcQmdnwRGM10GnFcCy2XYunLMyAkdgk4mePiczsLygthcBut6goOqS7YVFXADLjaosB6s6ofcZWAZSIRYqSUkizYwttYab3vUOQ9w2HRxIIg8WwRVeE68xi4UtL3zRphxplzwuZrcqYCq1I3jPI5dnJIygEohMbPqVJSzrwzxBJTs5zN+ReUSgxikPQVF3JVBeNQxbHENrEMNvEdFZVV9lH9+ORGEsNZQpyTNc4C3AG7XF4ngzq+DrO2zbuaaOXgdaFcdkEotoSFBVX2qJ0C8OWZeG4KGlpghA0XfTOPCqV2qqwQ26QWfF2PMLhI2w1lVAa2aPsYd0za25MQRwgcZN6uQDCi+ZxiD4XEM2kZxOT41FnZnaRlcpZouzlRqqdbQVWopQoSB58RV50lBNrHi/AwXS5LrwDVlpY3Fc3ByiYGc52Trist6kOXdwInAQtJpp5QchyaquYOV7Su+fxVMaV3dc0RE2S6mUY0gLt2pMcYqrKIQ9w2l1gpQUMtQYcmmbt5DTNxdhnUCjQqtbK9SUSzvrC0mmhhE1e2FS2+oxypy/ZASutkmtjx3vcBC24PX65nbqkBCRhfjS9kIYPnee8cMagVOhI/3T1fAmdtAWZsCswTJCkQVNa0qWKSKPOpHAUhD9DrbVcyoYkwqhvh17vYAayXLQyKGYdxlUDFp494rBXRjYgO17DDYetNIUj/ezp6S0lnlpEwsWmJMkOwsKXeZKEAjIHn0EQJISaRBcO6UMINz7p/bEjjnw4ft+xmDvksxX4G2rIris7qaeKwAFMP2Oi7n4criuZwtpSUwpfLxSnORSrIqusc5ZFaXysqRWjiZ2DyAWEIL35tVSoQElFACjOeGGSE7AHEQgdo/LSvCOgGBvkxsmDbvlS3Fp5vhaB2TAGqRKrKKMrhLVpaGzEVjZ0OQxDhaCTA+QyRR1d15aQzrJntL3RibsipjG6jlgL4yqbS0sNYg1e84vhbBVrElK64CUcWYXDfKxhpIuxiVJZUxsbMy/uRBKTNRQ4kQ3LdRYLS0rJjRPlTPqY6gdJsEDc+aQXAn+HgsNUCbRuF0Oj0zwnA7bWDkbhO5Ens00qeQhS1laBMl5M/cAaxsLF8rKyql+Tf7ELLEGu/ixiimdCvo0TjfpjKwaggen4eh5v7LokLKbLuyvHhcZG8dhGrEDx7Hg93ZppJF7qBqO3iVveXEDQNInzeoe8Yq6ePaZBZ2JviM3W2UAGotekRCAGq4EkF1X3DOnR11yRsBL1tRa0PVcZiNFXZ2c34FskvomInQQ6lzpJoZbJxk43NwKJFBquJSsrByHydxKOnTxQASBmS3j+JMnsHSla3Ec6K9VWoJVn9zfjwOM7hqYAAqJQwE2a3nA48J2QGegRkpZNivSY+ys3EkKd4oJIwsvIHl3cWgLt5k4NH6OmtLWdpurOkwEMupYc7eMtDRhOcI2ui5JhVIzXzLyto/GAPuZoyo8wkoduVgJglCt7OhGbgID4Mq4si+63zUS1FuFFXFlqyaj2emHlLMcBqYu0FMuR28BbB7lOxRMSiCQXFhCKuwkhZ+pYDiGSgbsKKV8MiSRsuHSIWM9rklRiIlZZuqXjsQK8ooYJMgq3JKWVkhHbhsVxFUzthOWPkYijcbx54IKsSdT+uLr3crGKyoYgFiGR9iBk4kfloUX+JIlQRQqabmpgnhqtpQpb6RVQ1WH5DnrS4hEoGZqaerQ2dhFbz8XePxShmDbo70eISjoorO2vK8SJXI4SUmEU4zWKDzUDtWTYw7xXlbSTEj4FRg7zKnKoGRALv0Gs9Tgc1BpCywGZRQAtqVz2xrBcAMzEpfZwFSa2G5W0QBFjSMapWAEFa3HcGN7CxDzECyIkJ97qwrqWNTWVo876PPsjPkj2wvgroM5lLZKMETKVql/CvnWVFiFa/SzJUQwkoZsr67Y6vlSRV3/2tmNTOY3vnaxYwMuoPKqdzR1w7IqHymlPxaAThfU7Ko2ZXYj4AYJHL+kNdKwRQYESTRa5fsUZ/rVC1TMTyWVyYoqNtuzaHsMyv2tvoarxdfqwYgU1axFo/cnql1FGsqK+uAROV8BX4GU8WcZTATi2q7Qcyi0O0V+GhWBMNRUkn8H1SsWVE5By3Gi0ECqUeJoBfAtDa4amkdXG37AGP5Ggeb84p7UazpoKRzdFzeQ8HkoHGxprKy/Hpm5t12p47J6xTYDEz7uINEXSuxYXvFskYAc+ySxH9sf5ftKzU6IbwVBcUGg5e5FMCEXSErZR0wGayV19woM9guPjTqJdVTqR4uE4nJnLldWVkECCZLd2VLF+xtamex7IpiriSDUpvrpn9lrwGMCHyppMH+ps6LILsuFGUj1XEOXiqbqSHPUKnClpWV68kqtURVNDY4TNaocykoYeTU5ngGEQa/S1DnnE4AeXMcKjHPAmFVjCBENaeyLVNHfr3px8xUstJ94hIpfH4HKE/eDaArK6lSyVVFbdt1gxTIVk3pppVlFXi4pEhVBTObquohU85MLXn1iahvUkHJjSCMc01tLFveVVBx0DodM6jftCu7DOtIzYxrc0qp1JGP2ayYFz2Gb6HvMrO8cnGtV6Gjm3uImSfD2GpWK6uowbZGMxFKQCo1pOMtcMXFpRst+hXGoAomF3sSTBGgTglbBKWwsQ3tZqaYSp0Z1CimRDWFcCJUPYJ00BI5FkKYNoifuQxmN88SWVXWLMaUqqqgC0BmQJR6sk3u9NCf6jYLXxAfqsYEgVLAhRY2AtgtflZNFmFyhxdrLkAdWlk4D88M2ixHyepIdhMHrG/iR1ZGtq0MGpbDbRPYOXeSY1M6Ny4ZstvGSktK+XbFPATj2D371saPEsAMXhXrsZ0km/XStkhhMyBfsa6uXFZe2VCe+YMr1+GKgwrQyNYq1VRrB+EizAow6NsdNKcyVEkYeM73ys6q4kAHp6BiFklTkIrVC5oYV7uzwOGCz4UJ0Stq2lWMJy4wtb+RetL6tZFicnJmBw5UjCvXXMZVJX2MQkbf+XN5EWd78Vz8/JEsMZTBiKNzsm1inLRUQ74H4NidaqI68j5sAFgxcRveC7ieLJXfQYxjZZ2CsiWFewZXJmBIlZ1tdtrX4hSuateKso/RZOtOKW2nmq1oTzeK6dRWAWu2NRVb4hq0SXm1GvtugHrbr5IXqmSktg5CuDE2MSlPwsY5kNE2Wp3AqiZbWVLAxiBF+2iBZbuNj6MB6rsMLC7FyasaYDyo7KkoPyEtw3pEMXfPvxAJi2jAQQgjrz0rLIZSWZlIoNhwd5xK4AR9mYNjWAaLrnuImJeBVN9zBORObVvbr+mTTfFSEJLSRnHo7hEJoIi8MFqjxmvgmF5URZz4zLFgZZ8Ctu2X7ggVccKm9gVxIsOHqxXgNMKnFWZYnf1dBnOhayXq17QwFlWW09eNKyVJFmXqaONGA5aCegMbJ3UUkGY1ic3nKWgjq8qfVYGQG1gRt6rs62a6HiqqUOqdesK5NmX4nGofJoiE1d0dF9lVVkvT1/kEEaaCoYOwFpcVcoLM+7669PxC9rWqktH0sWUYld0VCpuBZ/stVRcGgy9WX2+U1Qthi9SzAqSxzZsy+OiFzBYnySGV6Gku44rD8BCOZBV3BvD5+AKRHNwMEsB6EzHnJpkTAeiUlEGkcECeB6GDZTp5YEJTlvdrknxYjTllMkfNtXwDjM7uVjK5JXUUn43rrqpK2jytaxHW0M5G8DC8rtHMYs7KSgduVQMGTYFqFvVS6rkD3sDJ46afdYFwoq11AOKCBLhvwoUgc8IGANycR6knZrdJPdsuxnyjfd3FovTlRMdEdtOl5CMV5EHsXQBis7TOwvIDZaGj2Vnpbh7cpK63VwYEMLwqbjzyl699sawFFkF1yqjUU31HfC6sW1ZFVFuXVXVgz9keEaw0ys1lWfm+azQAQSWA+hKYVfsZjPncAcUB9oIayy/UZXRNckDGji77GsWbvBo6tPrWPqOyVkBUq+INeqpzNdYs/u0ifh5qmpqIW+33JVSUcwY70KL4U9lYdU6ljtSls7lmfi9g3YzeQfVkaGFaV3ODCnaD2N8wsEDFklE3RzM3ZghdYkWHsszq70FIecnKkVkt8ezMzRq9bkGuKojRLBVSod3Y1yPqKgYW7JRQTPVyy5xIYLjOgxgT52RKJUY1dOrIiRd4futQx/A5AcSmEjz0vFWrkLzvbWAu9HOWbGgxFk1VNTpnBKk6TgwisI/HcxYXP1uAWO72ULFlBTq+aSu2VTUs6hrxM2CF+hEor1VIA9ZmFUaab1lSSgZsVs4sxzHlVLoJHr9H4DhONTkI1XC0/wiY2NoWAG5RlnHFnq6oLccpQddMuJ/O17JVA5OHLi0BqCztq7Y1++ucCd98qLI8MIHBV/cKjxQTme3hFBS3MyCqnDsuym2o80HjvFFTtrURmNaGJsmVahImjTsUXKtQZTAVs7Mvv8/+fzUrZAXcLJ6M4koe6XP0b6SmWWNDzyUpQ8bl+LtWx4tuqZ36cRYV3yuVxPNwvIiqiQCSmu7srgTzR6nkyhpCarXwFy1vGd5iP2cY06lFr5Njhhg1Y6+NB28ftbK83s8rf7kLJbKwDFPbLg25a0AdZJEiqr5phixKMDlRUtcssq1hriLqGoH+zeNgVm9OemjsETV8JdF0NHnkIFxWY1OB4Yrp7rtWJ7NgAAAPXklEQVQ3oNs5nplyVf8u2FoLu1JrHveaZWQjqAkshtFa2gzsSG3Zpkbvg3HafF9slPPlldjFlK80Gysm8Mr4MPhneNWENPGjAIpmilTPATdTRTXlCBYHYAQuPwA36xIpWtGN4q3Y2MhiGsUpuSSnlEJRD8PorC7CFYVw+F51qThgabxsTxWzCGY0ZSsb3lfqAy0OPNjNy8xiQQKsHYFQ2HBZVvVbBuq3m1oWKajqaonsM6uZUr6CjXWNZ0l5E3h3jURma6kP3MJIiy1Lm+kahQq41N2iZja5sjtlLYNZHZrH6qUGm4vMbDp6Rw2CFmvuyFkrBcCyMtFqBaECmsHoK9BZ2LA/lJcRqSaDqnaWbrZdGaz3DLgIvBln4woGztbyJGqslwxkhhHrTjTYFXCtOoKS8uLdofVdAbOylGU6nlYpXWZts4nXBq6WxJitMNokHUJnbnJplQm+aGpY2a5GMV2QD1hRubBPFKdumf5OHkLHz0F9luE5kjBjRa0nFE5CUGqHw32MmjZ6xkgINVnSnZ1VZStK2qKlRaLlQgK7uTq7JFXJwM+3SOEKyhZNI+tJ0I5qMYy9k2qJD7dVWdqKXa0CKNR0Ccjg+B2IYu2fcBZJZkMFgM11r0X92wilghFGgzVnexlqB7xL9mS29SiYUVY2nXOZjNBRsyDsQPRWW5hrZ4XcdC4HVWRbjgJr4sFofK5SzjQ7rhI1UebdPdEbj6sqIvTZQZ5va08rABsAW0UxeWytAk7A2KJ9ZpxzCioB24XFtYAeXYxr6anSqhLgppEqWbGwLunTgrV+IjWlL29ljaAl4EQMGsErp4apeZiquwRXLXAqOCeru32mmydc6oWTSWpFAGdzeTB8RTHVMEtlM90CbbQCYhPjq3egYr1FGdYIQjiuDGZ5zZ/AzobKGOyLxti6c4Rwtv2anyWlLICnlLhxJRXt6A5ebDBWFNONbxWZ2d02mnu4S9YECpeppV1zSWRBWxHYzVIv1CXSouwqqX3jBBBDZdYQbpTQW4ZQlS8r5kH4suSRmg2++3JN10x1PaAmEkmtYlEdeGpJEM6kOuCqCR22oSujj5IV2HdT0zj5prLKTjXFAPjdQlyq7xIBxAQP5yMczG4VxAKw0n6ilZ2QBce2pLulkuxxqnoIzFfgqyqjil9S1VNwBrFmeyeops8yOjZUybZdfS8CuaTIJumzs5tODaNtLpFDQ/PcJGweLhmeL1nB0KqiUDScsiUVD89Di3HtrKtSULw3RLiygZD+7sF8JTObgYsrGvDNUFRGl1iy0Ll1YkUc2aJYMog920I8qW6YDCg1Mqk0JHJFKXkbgbRreI+qpYNOZHrVcDUba7pjsphSJNtK6upgRNAVoOS0mugBeN4bIZgHhuPZ/s1ENaX6KsVr+YNrh1Nb7ipR0PE5zbNRegCbrHRUw6Yf07dLBJl1f8KB9as2V1nNqAsl62LBBhehwalerkHmB1JFIEZKSEusdl5JQj1nJlHXSCF342gJ9CYGrXelknJIXqVP8sD+qtplCR3XH2qfKq0ygMp+KnVkKxNlZ8m2YkIlVMiCnXUwl7qznBKSvQz3m3Pt6oQbXO5b5FixCh/fHxUQW/AEcK6zCNqKQnL9sywqmKuwvqSYzT/aPVNNpVyhvRW21aqciCsjdWvBwILUvh5VyCzbWoC1pJjJ680CWsl+udKB6T5RwG1mlohnlpbg47iz5U9ha0FGtmRLFYBtO99y97Ap0z+ZDTAog6kSLZsMHg/IFkkgp6CpvU2U0cYVSdnmkjwBdOmXbxTWNWzuIbipMioVxEckZEoahSOiy2M3K0jcC1LhVDwaqG0ZvkcWqCnrG4GIxykrqlbWdw6LQyBaZR8HmLRIhQWsHswD42ZXVLNkf9l+FlW0HVQ2lwFsC/Z1FdzlQR0KaPfo+Fdfu+/dwVRICu1CGR7AEIiAhc+AZUF0kOBaPxmUqg4i64vQnU4nFDYJ9Nz+1fVXveH9qmr+kPILx8oKcRV/BFbxbE0JMT0kSD4w6L/lNY8ocsqagVdU3A3MjxhxcGuqzsPH4irpaow1q6OyrVjvp9Npc59E91LldboYVzJWdimWfAW2SNEKcDaX2FmBLLA/uKxlmhh613Is1URQApbKfttwxL02q6Onx5pQxSbPojAg+v5hAnN6LHVRDXIsvKtRjiS0qJUyZTAXVbAK82ElFJWaQdVoqUC1Unt7BVaTQudM6SuqexjQJN4+0icaxv/utbKv83ETbT8H8gjcOKxOJmbUa6OOVXht3dFY6rHv9XoNzFLceEA1o8+pKm0LAHPHZ2rYKjFq0hfZFixsqHJgD3eD5n+U0kb1mFjXkn2lvMSSOsNE/CdIAKF0Sytq6urOHUN5gwg4GZosgbmggM5ucra2qrS2Ig1cbiBBcxYzgzUDNLCvL8GbZXNp6ORy3LmS+Kk83zRIAK6A1ioKa2I9NapIuiUFdfC9766PFZUtqUr6KbWk+zZU1a/ZrIXEztrjTOfz7hwKziCeXIaraHtbZIMz+2pGgazCmw4qWAFvEdhodYp0Xq0pV7G1YWYWbO4qhGq42+Z8BYtrLWvluNPpZAeaFFS1vubPgbgxsqcpnAaszBovKaFoDQ8BGtjfUOl4NAG2nmQV04feJgumvX2fsrQEWZghL0JnVdYkn3DOZIeRN86RqPWCmsvGVqEMRnwxQAxwS8EMYo3IzmY2+BCcLp4MKiuyuhImamlbZFcNoNl7tp+RHd18ZjQIRKyXdFRhN98/hyKqwXWNo7O1wiaXoHN108REZZWEq6grnIfjzeg8jdRf1XEL4kkXa5bBjKxoKaljBjeHlVxQ4GaycpW4lDOAKtnTxHAtOfzOtZwHAM7sqVXkV6yu6kap1nHkXKqWF/4XHqjenNKqBjpR3l1ch3Ejg1+EsgdQhsdG0B4FM9sWAVWpuAyiwTPleZxt9VyZVS2qXfReWqTAilpr9ApoWTjxymit7NwV4JTriZyOA9B0k7HFfULourmKYHVnRQvqGL5HMHdqFcR2qWpmcK6eTwx2dipWrviDilr+fKWq3OWRWdHKwA4eu8wjchbeRzFilqjjZN3ufCpfkJ0/scVpnYk6L0PI77lxdWCZ87WiWm7B/AGquQSnujGKsB8CJmiJq8q1pKIVWyqOiTK66r18BN8r74/AE71fdC3yPS2MxdOpnE1tlVxD9JmVOoggN+r4PjAXVFPa3Eg5jVJGFVUGNolH20GVrUB7BOySWq6WqYQdWR92pcFMYMwckbSgCKCqD67DiiWu1g8MQC9ByfcFqW1L+jL714qNCuznoSxt0da2gtWN1G8F0BK0NN0nuimelUF9dIdAfjO44UT3CjQLoUeLHJFTO3gmpRuIIOvwBQCbqNeo3qtZ9iF6xVK13GRlo4zqimq+CGdTiR1uRY8oqgE02hZBa79kZXPMquxRHKla2saZWN4mRqZUj0vLCKhkjKnqOQHNuSZVJoKvAqS1wpEquvWDC1B2ypwrCPsRMEPVTODMLJMDv6qeKXwi2JYV5Sq4qKyvgGsHCLiuj2jR59V8gMqSJ2FJZRXEHVRHj3sFPrct6OpqlW1GpatQdt0GvwfM6n63InsGVFhJGaBqgqqIV6IsXllZgySPq4R3bnt3wi5cv+cN2yqQLW1T95KYVsWWtKk4cB9W53WQQflQYR6Wl4HaJZjvVE0D5yvq+RKgZCs5qdBEP5sD94cAvQLlSgNaSMAtHx88BuNQ41zdFsX30zKbcs0MLD/ihkpQzl0wiTqKLTfbKmCmyYICnK0IbaieC4CG9iSyLQ7cIMGQwau6TKoq60Apl3WN40LZpca1CKKK9VQyyIEn8w0F8F6CL2h8o3ixGwC7s7EWzCOqmcApYxYD4jsAzVS0sl2t98pA7vrKophCVSonbYpgH6mvSn24pTBV4sdtV3BtMq5k82y+IADvUJ0uAlkCVTxIaPm+UNu/qkV4F1TzHXCGrXIAqItBKypqK99VtAOVs64O4ObX7pHLVCpYHcRmwvLR7TvYAKBBN58LGVzDuFz+hQbWgncQyCZAk+VbsPSouf93261iZgmfCpwRbAvqmSqriU2PwhjaoOyYqtIegVXViTsmyta6bGySpY3gyRrpIyAeaWDDxtpsXwKyalMDKNP7YBXMqEskUsi2uC8FNAPxAKTVfT1o6VzM0E0jF+1rWcUuHvdyg7vgoFplX8HpvHpMCOMRUPHzZkInsqlFKNX/EIO52E0SxSzOwob2VmRLW5D1XIU0rbgM1AzWgyC7fe8G7xUAK/taEBat7luqtyP7EmsaJQOj5F+mrnZfCuYCfBUAWwShyd6pMY/vAHG1UqOYpbI/gy5T0CMKm+UO3gFuC85dgfDVeguPDfITrIBLsLrcgdh3CFgFZjaKJ4Iv3F8ANEqvuxR1tVKOgLoCa1jxboBAkj6v7j/icFbA7f4rfRnQDLRViG13i0vqBQrYVqBbADZT0ZpiHoSzvQpopKIFS3sE1HfBWlHXd0H7LnArqvougMtljHBgZnh3Eoz/BKjLML4Z2Aq0+hEJr9jaVUBbvNzCIUiroC7AWmmFw4o5AK3MtB5VypZMSFgs05JyGVwlwBqsEGAAa2ZU1CjUexXGsE4rKriilBvFzOKKo3AuAroE6QFQU3u8YpNXwS5k+1TZt5UrwouN4KiUEw+k3ZWDp1RXHNRqXb21Ts39945yZSg3VnZFNQ9CF3XeZyr5DgBXKiwCMa2MxeTDYXgP1Fsf9QNKZc0k81RJk3r6EQ3rCmBVyLL75EjZ1pIVDHoFtiOAHoB0BdTVylqBsKKKS+AeBXJVLY+CXASuGvO/Auq7GuEjDfGKg1oKa1z/dmmi9I9SUGNhl0AtfulHAawoYrnSkmNXAVuGEhrEVXvUF+A5Ct2PqNOjDetyna4CmeUolmeXLN4Aq7C5Sj10Q7yjgl+t6CNxSRHmI5X+CpwreYB3Qfdqna4q21KdBuc4GoZsn49ZOOiVinwHqK9WzjvgeweEh2AU5+vtxZ9Cd9Wqkh49V18E5oj6vVyn0RStAyGIO5edXRKd5B0VGVXq2yr3xYp+5Ut+C4QJ4P1N339pQMjRejj4vb/Dcr6rQc3O/0rjmtZpeYCBiCHfCemRbNhbK/pNUPc3wfKy5f2D7OlL3/uPhve/oU4T0F8f+VNM2vyoiv0jK+KHQfdHq+0bncz4oz73/+Y6LbKw1o/5B7eOf1Rl/0du9B9tn/9bvrf/j+v0h6ttn2tp/r/4819y4/zv5391uvzzfwDifz6phT1MPgAAAABJRU5ErkJggg==)}.color-picker .cp-add-color-button-class{position:absolute;display:inline;padding:0;margin:3px -3px;border:0;cursor:pointer;background:transparent}.color-picker .cp-add-color-button-class:hover{text-decoration:underline}.color-picker .cp-add-color-button-class:disabled{cursor:not-allowed;color:#999}.color-picker .cp-add-color-button-class:disabled:hover{text-decoration:none}.color-picker .cp-remove-color-button-class{position:absolute;top:-5px;right:-5px;display:block;width:10px;height:10px;border-radius:50%;cursor:pointer;text-align:center;background:#fff;box-shadow:1px 1px 5px #333}.color-picker .cp-remove-color-button-class:before{content:"x";position:relative;bottom:3.5px;display:inline-block;font-size:10px}.color-picker .eyedropper-icon{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);fill:#fff;mix-blend-mode:exclusion}\n'],encapsulation:2}),i})(),zV=(()=>{class i{constructor(e,n,o,r,a,c){this.injector=e,this.cfr=n,this.appRef=o,this.vcRef=r,this.elRef=a,this._service=c,this.dialogCreated=!1,this.ignoreChanges=!1,this.viewAttachedToAppRef=!1,this.cpWidth="230px",this.cpHeight="auto",this.cpToggle=!1,this.cpDisabled=!1,this.cpIgnoredElements=[],this.cpFallbackColor="",this.cpColorMode="color",this.cpCmykEnabled=!1,this.cpOutputFormat="auto",this.cpAlphaChannel="enabled",this.cpDisableInput=!1,this.cpDialogDisplay="popup",this.cpSaveClickOutside=!0,this.cpCloseClickOutside=!0,this.cpUseRootViewContainer=!1,this.cpPosition="auto",this.cpPositionOffset="0%",this.cpPositionRelativeToArrow=!1,this.cpOKButton=!1,this.cpOKButtonText="OK",this.cpOKButtonClass="cp-ok-button-class",this.cpCancelButton=!1,this.cpCancelButtonText="Cancel",this.cpCancelButtonClass="cp-cancel-button-class",this.cpEyeDropper=!1,this.cpPresetLabel="Preset colors",this.cpPresetColorsClass="cp-preset-colors-class",this.cpMaxPresetColorsLength=6,this.cpPresetEmptyMessage="No colors added",this.cpPresetEmptyMessageClass="preset-empty-message",this.cpAddColorButton=!1,this.cpAddColorButtonText="Add color",this.cpAddColorButtonClass="cp-add-color-button-class",this.cpRemoveColorButtonClass="cp-remove-color-button-class",this.cpArrowPosition=0,this.cpInputChange=new s.vpe(!0),this.cpToggleChange=new s.vpe(!0),this.cpSliderChange=new s.vpe(!0),this.cpSliderDragEnd=new s.vpe(!0),this.cpSliderDragStart=new s.vpe(!0),this.colorPickerOpen=new s.vpe(!0),this.colorPickerClose=new s.vpe(!0),this.colorPickerCancel=new s.vpe(!0),this.colorPickerSelect=new s.vpe(!0),this.colorPickerChange=new s.vpe(!1),this.cpCmykColorChange=new s.vpe(!0),this.cpPresetColorsChange=new s.vpe(!0)}handleClick(){this.inputFocus()}handleFocus(){this.inputFocus()}handleInput(e){this.inputChange(e)}ngOnDestroy(){null!=this.cmpRef&&(this.viewAttachedToAppRef&&this.appRef.detachView(this.cmpRef.hostView),this.cmpRef.destroy(),this.cmpRef=null,this.dialog=null)}ngOnChanges(e){e.cpToggle&&!this.cpDisabled&&(e.cpToggle.currentValue?this.openDialog():e.cpToggle.currentValue||this.closeDialog()),e.colorPicker&&(this.dialog&&!this.ignoreChanges&&("inline"===this.cpDialogDisplay&&this.dialog.setInitialColor(e.colorPicker.currentValue),this.dialog.setColorFromString(e.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay&&this.cmpRef.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(e.cpPresetLabel||e.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)}openDialog(){if(this.dialogCreated)this.dialog&&this.dialog.openDialog(this.colorPicker);else{let e=this.vcRef;if(this.dialogCreated=!0,this.viewAttachedToAppRef=!1,this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay){const r=this.injector.get(this.appRef.componentTypes[0],s.zs3.NULL);r!==s.zs3.NULL?e=r.vcRef||r.viewContainerRef||this.vcRef:this.viewAttachedToAppRef=!0}const n=this.cfr.resolveComponentFactory(mV);if(this.viewAttachedToAppRef)this.cmpRef=n.create(this.injector),this.appRef.attachView(this.cmpRef.hostView),document.body.appendChild(this.cmpRef.hostView.rootNodes[0]);else{const o=s.zs3.create({providers:[],parent:e.injector});this.cmpRef=e.createComponent(n,0,o,[])}this.cmpRef.instance.setupDialog(this,this.elRef,this.colorPicker,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpCmykEnabled,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpCloseClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpPresetColorsClass,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonClass,this.cpAddColorButtonText,this.cpRemoveColorButtonClass,this.cpEyeDropper,this.elRef,this.cpExtraTemplate),this.dialog=this.cmpRef.instance,this.vcRef!==e&&this.cmpRef.changeDetectorRef.detectChanges()}}closeDialog(){this.dialog&&"popup"===this.cpDialogDisplay&&this.dialog.closeDialog()}cmykChanged(e){this.cpCmykColorChange.emit(e)}stateChanged(e){this.cpToggleChange.emit(e),e?this.colorPickerOpen.emit(this.colorPicker):this.colorPickerClose.emit(this.colorPicker)}colorChanged(e,n=!0){this.ignoreChanges=n,this.colorPickerChange.emit(e)}colorSelected(e){this.colorPickerSelect.emit(e)}colorCanceled(){this.colorPickerCancel.emit()}inputFocus(){const e=this.elRef.nativeElement,n=this.cpIgnoredElements.filter(o=>o===e);!this.cpDisabled&&!n.length&&(typeof document<"u"&&e===document.activeElement?this.openDialog():this.dialog&&this.dialog.show?this.closeDialog():this.openDialog())}inputChange(e){this.dialog?this.dialog.setColorFromString(e.target.value,!0):(this.colorPicker=e.target.value,this.colorPickerChange.emit(this.colorPicker))}inputChanged(e){this.cpInputChange.emit(e)}sliderChanged(e){this.cpSliderChange.emit(e)}sliderDragEnd(e){this.cpSliderDragEnd.emit(e)}sliderDragStart(e){this.cpSliderDragStart.emit(e)}presetColorsChanged(e){this.cpPresetColorsChange.emit(e)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(s.zs3),s.Y36(s._Vd),s.Y36(s.z2F),s.Y36(s.s_b),s.Y36(s.SBq),s.Y36(Kl))},i.\u0275dir=s.lG2({type:i,selectors:[["","colorPicker",""]],hostBindings:function(e,n){1&e&&s.NdJ("click",function(){return n.handleClick()})("focus",function(){return n.handleFocus()})("input",function(r){return n.handleInput(r)})},inputs:{colorPicker:"colorPicker",cpWidth:"cpWidth",cpHeight:"cpHeight",cpToggle:"cpToggle",cpDisabled:"cpDisabled",cpIgnoredElements:"cpIgnoredElements",cpFallbackColor:"cpFallbackColor",cpColorMode:"cpColorMode",cpCmykEnabled:"cpCmykEnabled",cpOutputFormat:"cpOutputFormat",cpAlphaChannel:"cpAlphaChannel",cpDisableInput:"cpDisableInput",cpDialogDisplay:"cpDialogDisplay",cpSaveClickOutside:"cpSaveClickOutside",cpCloseClickOutside:"cpCloseClickOutside",cpUseRootViewContainer:"cpUseRootViewContainer",cpPosition:"cpPosition",cpPositionOffset:"cpPositionOffset",cpPositionRelativeToArrow:"cpPositionRelativeToArrow",cpOKButton:"cpOKButton",cpOKButtonText:"cpOKButtonText",cpOKButtonClass:"cpOKButtonClass",cpCancelButton:"cpCancelButton",cpCancelButtonText:"cpCancelButtonText",cpCancelButtonClass:"cpCancelButtonClass",cpEyeDropper:"cpEyeDropper",cpPresetLabel:"cpPresetLabel",cpPresetColors:"cpPresetColors",cpPresetColorsClass:"cpPresetColorsClass",cpMaxPresetColorsLength:"cpMaxPresetColorsLength",cpPresetEmptyMessage:"cpPresetEmptyMessage",cpPresetEmptyMessageClass:"cpPresetEmptyMessageClass",cpAddColorButton:"cpAddColorButton",cpAddColorButtonText:"cpAddColorButtonText",cpAddColorButtonClass:"cpAddColorButtonClass",cpRemoveColorButtonClass:"cpRemoveColorButtonClass",cpArrowPosition:"cpArrowPosition",cpExtraTemplate:"cpExtraTemplate"},outputs:{cpInputChange:"cpInputChange",cpToggleChange:"cpToggleChange",cpSliderChange:"cpSliderChange",cpSliderDragEnd:"cpSliderDragEnd",cpSliderDragStart:"cpSliderDragStart",colorPickerOpen:"colorPickerOpen",colorPickerClose:"colorPickerClose",colorPickerCancel:"colorPickerCancel",colorPickerSelect:"colorPickerSelect",colorPickerChange:"colorPickerChange",cpCmykColorChange:"cpCmykColorChange",cpPresetColorsChange:"cpPresetColorsChange"},exportAs:["ngxColorPicker"],features:[s.TTD]}),i})(),f8=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({providers:[Kl],imports:[M.ez]}),i})();function bV(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"input",7),s.NdJ("change",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.inputChange(o))}),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("value",e.cell.getPropByPath(e.property.path)||"")}}function yV(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"input",8),s.NdJ("change",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.inputChange(o))}),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("value",e.cell.getPropByPath(e.property.path))}}function CV(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"input",8),s.NdJ("change",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.inputChange(o))}),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("value",e.cell.getPropByPath(e.property.path))}}function _V(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"input",9),s.NdJ("change",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.inputChange(o))}),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("value",e.cell.getPropByPath(e.property.path))}}function xV(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"input",10),s.NdJ("colorPickerChange",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.change(o))})("cpPresetColorsChange",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.setPresentColors(o))}),s.qZA()}if(2&i){const e=s.oxw(),n=s.MAs(7);s.Udp("color",e.cell.getPropByPath(e.property.path)),s.Q6J("value",e.cell.getPropByPath(e.property.path))("colorPicker",e.cell.getPropByPath(e.property.path))("cpEyeDropper",!0)("cpUseRootViewContainer",!0)("cpPresetColors",e.getPresentColors())("cpExtraTemplate",n)}}function wV(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"a",11),s.NdJ("click",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.clearColor())}),s._uU(1,"\u6e05\u7a7a\u8f93\u5165\u6846"),s.qZA()}}function MV(i,t){if(1&i&&(s.TgZ(0,"option",14),s._uU(1),s.qZA()),2&i){const e=t.$implicit;s.Q6J("value",e.value),s.xp6(1),s.Oqu(e.name)}}function SV(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"select",12),s.NdJ("change",function(o){s.CHM(e);const r=s.oxw();return s.KtG(r.inputChange(o))}),s.YNc(1,MV,2,2,"option",13),s.qZA()}if(2&i){const e=s.oxw();s.Q6J("value",e.cell.getPropByPath(e.property.path)),s.xp6(1),s.Q6J("ngForOf",e.property.options)}}let TV=(()=>{class i{inputChange(e){this.cell.setPropByPath(this.property.path,e.target.value)}change(e){this.cell.setPropByPath(this.property.path,e);let n=this.getPresentColors(),o=n.indexOf(e);o>-1&&n.splice(o,1),n.unshift(e),n.length>12&&(n.length=12),this.setPresentColors(n)}getPresentColors(){let e=localStorage.getItem("present-colors");if(e)try{return JSON.parse(e)}catch{}return[]}setPresentColors(e){localStorage.setItem("present-colors",JSON.stringify(e))}clearColor(){this.cell.setPropByPath(this.property.path,"none")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-property-input"]],inputs:{property:"property",cell:"cell"},decls:9,vars:7,consts:[[3,"ngSwitch"],["nz-input","","nzSize","small","placeholder","\u7a7a",3,"value","change",4,"ngSwitchCase"],["nz-input","","nzSize","small","type","number",3,"value","change",4,"ngSwitchCase"],["nz-input","","nzSize","small","type","checkbox",3,"value","change",4,"ngSwitchCase"],["nz-input","","nzSize","small","cpPresetLabel","\u5386\u53f2\u8bb0\u5f55",3,"value","color","colorPicker","cpEyeDropper","cpUseRootViewContainer","cpPresetColors","cpExtraTemplate","colorPickerChange","cpPresetColorsChange",4,"ngSwitchCase"],["suffixIconClear",""],[3,"value","change",4,"ngSwitchCase"],["nz-input","","nzSize","small","placeholder","\u7a7a",3,"value","change"],["nz-input","","nzSize","small","type","number",3,"value","change"],["nz-input","","nzSize","small","type","checkbox",3,"value","change"],["nz-input","","nzSize","small","cpPresetLabel","\u5386\u53f2\u8bb0\u5f55",3,"value","colorPicker","cpEyeDropper","cpUseRootViewContainer","cpPresetColors","cpExtraTemplate","colorPickerChange","cpPresetColorsChange"],[3,"click"],[3,"value","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){1&e&&(s.ynx(0,0),s.YNc(1,bV,1,1,"input",1),s.YNc(2,yV,1,1,"input",2),s.YNc(3,CV,1,1,"input",2),s.YNc(4,_V,1,1,"input",3),s.YNc(5,xV,1,8,"input",4),s.YNc(6,wV,2,0,"ng-template",null,5,s.W1O),s.YNc(8,SV,2,2,"select",6),s.BQk()),2&e&&(s.Q6J("ngSwitch",n.property.type),s.xp6(1),s.Q6J("ngSwitchCase","text"),s.xp6(1),s.Q6J("ngSwitchCase","number"),s.xp6(1),s.Q6J("ngSwitchCase","stroke"),s.xp6(1),s.Q6J("ngSwitchCase","boolean"),s.xp6(1),s.Q6J("ngSwitchCase","color"),s.xp6(3),s.Q6J("ngSwitchCase","select"))},dependencies:[M.sg,M.RF,M.n9,ne.YN,ne.Kr,zV,Pi]}),i})(),OV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-graph-settings"]],decls:2,vars:0,template:function(e,n){1&e&&(s.TgZ(0,"table"),s._UZ(1,"tr"),s.qZA())}}),i})();function AV(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"form",8),s.NdJ("change",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onPositionChange(o))}),s.TgZ(1,"table")(2,"tr")(3,"td"),s._uU(4,"X"),s.qZA(),s.TgZ(5,"td"),s._UZ(6,"input",9),s.qZA()(),s.TgZ(7,"tr")(8,"td"),s._uU(9,"Y"),s.qZA(),s.TgZ(10,"td"),s._UZ(11,"input",10),s.qZA()()()()}if(2&i){const e=s.oxw(2);s.Q6J("formGroup",e.formPosition)}}function EV(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"form",8),s.NdJ("change",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onSizeChange(o))}),s.TgZ(1,"table")(2,"tr")(3,"td"),s._uU(4,"\u5bbd\u5ea6"),s.qZA(),s.TgZ(5,"td"),s._UZ(6,"input",11),s.qZA()(),s.TgZ(7,"tr")(8,"td"),s._uU(9,"\u9ad8\u5ea6"),s.qZA(),s.TgZ(10,"td"),s._UZ(11,"input",12),s.qZA()()()()}if(2&i){const e=s.oxw(2);s.Q6J("formGroup",e.formSize)}}function NV(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"form",8),s.NdJ("change",function(o){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onLinePositionChange(o))}),s.TgZ(1,"table")(2,"tr",13)(3,"td"),s._uU(4,"\u8d77\u70b9"),s.qZA(),s.TgZ(5,"td"),s._uU(6,"X:"),s._UZ(7,"input",14),s.qZA(),s.TgZ(8,"td"),s._uU(9,"Y:"),s._UZ(10,"input",15),s.qZA()(),s.TgZ(11,"tr",16)(12,"td"),s._uU(13,"\u7ec8\u70b9"),s.qZA(),s.TgZ(14,"td"),s._uU(15,"X:"),s._UZ(16,"input",14),s.qZA(),s.TgZ(17,"td"),s._uU(18,"Y:"),s._UZ(19,"input",15),s.qZA()()()()}if(2&i){const e=s.oxw(2);s.Q6J("formGroup",e.formLinePosition)}}function kV(i,t){if(1&i&&(s.TgZ(0,"tr")(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._UZ(4,"app-property-input",17),s.qZA()()),2&i){const e=t.$implicit,n=s.oxw(2);s.xp6(2),s.hij(" ",e.name," "),s.xp6(2),s.Q6J("property",e)("cell",n.cell)}}function DV(i,t){if(1&i&&(s.TgZ(0,"app-collapse",5),s.YNc(1,AV,12,1,"form",6),s.YNc(2,EV,12,1,"form",6),s.YNc(3,NV,20,1,"form",6),s.TgZ(4,"table"),s.YNc(5,kV,5,3,"tr",7),s.qZA()()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.cell.isNode()),s.xp6(1),s.Q6J("ngIf",e.cell.isNode()),s.xp6(1),s.Q6J("ngIf",e.cell.isEdge()),s.xp6(2),s.Q6J("ngForOf",e.cmp.properties)}}function IV(i,t){if(1&i&&(s.TgZ(0,"tr")(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._UZ(4,"app-property-input",17),s.qZA()()),2&i){const e=t.$implicit,n=s.oxw(2);s.xp6(2),s.hij(" ",e.name," "),s.xp6(2),s.Q6J("property",e)("cell",n.cell)}}function PV(i,t){if(1&i&&(s.TgZ(0,"app-collapse",18)(1,"table"),s.YNc(2,IV,5,3,"tr",7),s.qZA()()),2&i){const e=s.oxw();s.xp6(2),s.Q6J("ngForOf",e.textProperties)}}function VV(i,t){if(1&i&&(s.TgZ(0,"td"),s._uU(1),s.qZA(),s.TgZ(2,"td"),s._uU(3),s.qZA()),2&i){const e=s.oxw().$implicit;s.xp6(1),s.hij("",e.key,":"),s.xp6(2),s.Oqu(e.value)}}function LV(i,t){if(1&i&&(s.TgZ(0,"tr"),s.YNc(1,VV,4,2,"ng-template",21),s.qZA()),2&i){const e=t.$implicit;s.xp6(1),s.Q6J("ngIf","id"!=e.key)}}function HV(i,t){if(1&i){const e=s.EpF();s.TgZ(0,"app-collapse",19)(1,"table")(2,"tr")(3,"td"),s._uU(4,"ID:"),s.qZA(),s.TgZ(5,"td"),s._uU(6),s.qZA()(),s.YNc(7,LV,2,1,"tr",7),s.ALo(8,"keyvalue"),s.qZA(),s.TgZ(9,"button",20),s.NdJ("click",function(){s.CHM(e);const o=s.oxw();return s.KtG(o.handleEditData())}),s._uU(10,"\u7f16\u8f91"),s.qZA()()}if(2&i){const e=s.oxw();s.xp6(6),s.Oqu(e.cell.id),s.xp6(1),s.Q6J("ngForOf",s.lcZ(8,2,e.cell.data))}}function BV(i,t){1&i&&s._UZ(0,"app-collapse",22)}let FV=(()=>{class i{set graph(e){e.on("cell:change:size",n=>{n.cell==this.cell&&this.formSize.patchValue(n.current)}),e.on("cell:change:position",n=>{n.cell==this.cell&&this.formPosition.patchValue(n.current)}),e.on("cell:unselected",({cell:n})=>{if(n==this.cell&&(this.cmp=void 0),"text-block"===n.shape){const r=e.findViewByCell(n.id)?.container.querySelector("foreignObject")?.querySelector("div");r&&this.cell.setPropByPath("attrs/label/text",r.innerText)}}),e.on("selection:changed",({selected:n})=>{if(this.selected=n,1===e.getSelectedCellCount()){if(this.cell=e.getSelectedCells()[0],this.cell.isNode()){const o=this.cell.getPosition();this.formPosition.patchValue(o);const r=this.cell.getSize();this.formSize.patchValue(r)}else if(this.cell.isEdge()){const o=this.cell.getProp("source"),r=this.cell.getProp("target");this.formLinePosition.patchValue({source:o,target:r})}V2.find(o=>o.components.find(r=>r.id===this.cell.shape&&(this.cmp=r,!0)))}})}constructor(e,n,o){this.fb=e,this.modal=n,this.viewContainerRef=o,this.selected=[],this.textProperties=[{name:"\u6587\u672c",path:"attrs/text/text",type:"text"},{name:"\u6587\u672c\u989c\u8272",path:"attrs/text/fill",type:"color"},{name:"\u5b57\u53f7",path:"attrs/text/fontSize",type:"stroke"}],this.formPosition=e.group({x:[0,[ne.kI.required]],y:[0,[ne.kI.required]]}),this.formSize=e.group({width:[0,[ne.kI.required]],height:[0,[ne.kI.required]]}),this.formLinePosition=e.group({source:e.group({x:[0,[ne.kI.required]],y:[0,[ne.kI.required]]}),target:e.group({x:[0,[ne.kI.required]],y:[0,[ne.kI.required]]})})}onPositionChange(e){console.log("onPositionChange",this.formPosition.value),this.cell.isNode()&&this.cell.setPosition(this.formPosition.value)}onSizeChange(e){console.log("onPositionChange",this.formSize.value),this.cell.isNode()&&this.cell.setSize(this.formSize.value)}onLinePositionChange(e){this.cell.setProp(this.formLinePosition.value)}handleEditData(){const e=this.modal.create({nzContent:kP,nzComponentParams:{listData:[{title:"\u5c5e\u6027\u540d",keyName:"name"},{title:"\u5c5e\u6027\u503c",keyName:"value"}],data:this.cell.data},nzViewContainerRef:this.viewContainerRef,nzFooter:[{label:"\u53d6\u6d88",onClick:()=>e.destroy()},{label:"\u4fdd\u5b58",type:"primary",onClick:()=>{const o=e.getContentComponent().aliases.value,r={};for(let a=0;a<o.length;a++){const{name:c,value:l}=o[a];r[c]=l}this.cell.setData(r,{overwrite:!0}),e.destroy()}}]})}colorCheckChange(e,n){this.cell.setPropByPath(n.path,e?"#333":"none")}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(ne.qu),s.Y36(Nc),s.Y36(s.s_b))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-property"]],inputs:{graph:"graph"},decls:6,vars:4,consts:[["title","\u9875\u9762"],["title","\u5c5e\u6027",4,"ngIf"],["title","\u6587\u672c",4,"ngIf"],["title","\u6570\u636e\u7ed1\u5b9a",4,"ngIf"],["title","\u4e8b\u4ef6\u54cd\u5e94",4,"ngIf"],["title","\u5c5e\u6027"],[3,"formGroup","change",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"formGroup","change"],["nz-input","","nzSize","small","type","number","formControlName","x"],["nz-input","","nzSize","small","type","number","formControlName","y"],["nz-input","","nzSize","small","type","number","formControlName","width"],["nz-input","","nzSize","small","type","number","formControlName","height"],["formGroupName","source"],["nz-input","","nzSize","small","type","number","formControlName","x",2,"width","60px"],["nz-input","","nzSize","small","type","number","formControlName","y",2,"width","60px"],["formGroupName","target"],[3,"property","cell"],["title","\u6587\u672c"],["title","\u6570\u636e\u7ed1\u5b9a"],[2,"width","100%",3,"click"],[3,"ngIf"],["title","\u4e8b\u4ef6\u54cd\u5e94"]],template:function(e,n){1&e&&(s.TgZ(0,"app-collapse",0),s._UZ(1,"app-graph-settings"),s.qZA(),s.YNc(2,DV,6,4,"app-collapse",1),s.YNc(3,PV,3,1,"app-collapse",2),s.YNc(4,HV,11,4,"app-collapse",3),s.YNc(5,BV,1,0,"app-collapse",4)),2&e&&(s.xp6(2),s.Q6J("ngIf",n.selected.length&&n.cmp),s.xp6(1),s.Q6J("ngIf",n.cmp&&n.cell.isNode()&&"text-block"!=n.cell.shape),s.xp6(1),s.Q6J("ngIf",1==n.selected.length),s.xp6(1),s.Q6J("ngIf",1==n.selected.length))},dependencies:[M.sg,M.O5,ne._Y,ne.Fj,ne.wV,ne.JJ,ne.JL,ne.sg,ne.u,ne.x0,Pi,TV,OV,Z2,M.Nd],styles:["[_nghost-%COMP%]{width:241px;height:100%;overflow-y:auto;overflow-x:hidden;border-left:1px solid #a8a8a8}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child(tr){min-width:80px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),i})();function RV(i,t){if(1&i&&(s.ynx(0),s._uU(1),s.BQk()),2&i){const e=s.oxw(2);s.xp6(1),s.Oqu(e.nzText)}}function jV(i,t){if(1&i&&(s.TgZ(0,"span",1),s.YNc(1,RV,2,1,"ng-container",2),s.qZA()),2&i){const e=s.oxw();s.xp6(1),s.Q6J("nzStringTemplateOutlet",e.nzText)}}let $V=(()=>{class i{constructor(){this.nzType="horizontal",this.nzOrientation="center",this.nzDashed=!1,this.nzPlain=!1}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["nz-divider"]],hostAttrs:[1,"ant-divider"],hostVars:16,hostBindings:function(e,n){2&e&&s.ekj("ant-divider-horizontal","horizontal"===n.nzType)("ant-divider-vertical","vertical"===n.nzType)("ant-divider-with-text",n.nzText)("ant-divider-plain",n.nzPlain)("ant-divider-with-text-left",n.nzText&&"left"===n.nzOrientation)("ant-divider-with-text-right",n.nzText&&"right"===n.nzOrientation)("ant-divider-with-text-center",n.nzText&&"center"===n.nzOrientation)("ant-divider-dashed",n.nzDashed)},inputs:{nzText:"nzText",nzType:"nzType",nzOrientation:"nzOrientation",nzDashed:"nzDashed",nzPlain:"nzPlain"},exportAs:["nzDivider"],decls:1,vars:1,consts:[["class","ant-divider-inner-text",4,"ngIf"],[1,"ant-divider-inner-text"],[4,"nzStringTemplateOutlet"]],template:function(e,n){1&e&&s.YNc(0,jV,2,1,"span",0),2&e&&s.Q6J("ngIf",n.nzText)},dependencies:[M.O5,Be],encapsulation:2,changeDetection:0}),(0,T.gn)([R()],i.prototype,"nzDashed",void 0),(0,T.gn)([R()],i.prototype,"nzPlain",void 0),i})(),YV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,St]}),i})(),GV=(()=>{class i{constructor(){this.pages=[{label:"\u4e3b\u9875",value:"home"},{label:"\u8bbe\u7f6e",value:"setting"}],this.showGrid=!0}handleSave(){console.log("save",this.graph.toJSON())}handleExport(){this.graph.exportJPEG()}handleUndo(){this.graph.undo()}handleRedo(){this.graph.redo()}handleCut(){this.graph.getSelectedCells().forEach(e=>e.removeTools()),this.graph.cut(this.graph.getSelectedCells())}handleCopy(){this.graph.getSelectedCells().forEach(e=>e.removeTools()),this.graph.copy(this.graph.getSelectedCells())}handlePaste(){this.graph.paste()}handleDelete(){this.graph.getSelectedCells().forEach(e=>e.remove())}handleAlignLeft(){let e;this.graph.getSelectedCells().forEach(n=>{if(!n.isNode())return;let o=n,r=o.position();void 0===e?e=r.x:(r.x=e,o.setPosition(r))})}handleAlignCenter(){let e;this.graph.getSelectedCells().forEach(n=>{if(!n.isNode())return;let o=n,r=o.position(),a=o.size();void 0===e?e=r.x+.5*a.width:(r.x=e-.5*a.width,o.setPosition(r))})}handleAlignRight(){let e;this.graph.getSelectedCells().forEach(n=>{if(!n.isNode())return;let o=n,r=o.position(),a=o.size();void 0===e?e=r.x+a.width:(r.x=e-a.width,o.setPosition(r))})}handleValignTop(){let e;this.graph.getSelectedCells().forEach(n=>{if(!n.isNode())return;let o=n,r=o.position();void 0===e?e=r.y:(r.y=e,o.setPosition(r))})}handleValignMiddle(){let e;this.graph.getSelectedCells().forEach(n=>{if(!n.isNode())return;let o=n,r=o.position(),a=o.size();void 0===e?e=r.y+.5*a.height:(r.y=e-.5*a.height,o.setPosition(r))})}handleValignBottom(){let e;this.graph.getSelectedCells().forEach(n=>{if(!n.isNode())return;let o=n,r=o.position(),a=o.size();void 0===e?e=r.y+a.height:(r.y=e-a.height,o.setPosition(r))})}handleMoveTop(){}handleMoveUp(){}handleMoveDown(){}handleMoveBottom(){}handleGroup(){let e=this.graph.getSelectedCells().map(r=>r.getBBox()),n={x:e.reduce((r,a)=>r.x<a.x?r:a).x,y:e.reduce((r,a)=>r.y<a.y?r:a).y,right:e.reduce((r,a)=>r.right>a.right?r:a).right,bottom:e.reduce((r,a)=>r.bottom>a.bottom?r:a).bottom};console.log("group",n);let o=this.graph.addNode({shape:"rect",x:n.x,y:n.y,width:n.right-n.x,height:n.bottom-n.y,attrs:{body:{fill:"none",stroke:"none"}}});console.log("parent",o),this.graph.getSelectedCells().forEach(r=>o.addChild(r))}handleUngroup(){this.graph.getSelectedCells().forEach(e=>{e.setChildren(null),e.remove()})}isGroup(){return 1===this.graph.getSelectedCellCount()&&this.graph.getSelectedCells()[0].getChildCount()>0}handleGrid(){this.showGrid?this.graph.hideGrid():this.graph.showGrid(),this.showGrid=!this.showGrid}settingPage(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-toolbar"]],inputs:{graph:"graph"},decls:53,vars:16,consts:[["nz-button","",3,"click"],["nz-icon","","nzType","save","title","\u4fdd\u5b58"],["nz-icon","","nzType","export","title","\u5bfc\u51fa"],["nzType","vertical"],["nz-button","","title","\u64a4\u9500(ctrl+z)",3,"disabled","click"],["nz-icon","","nzType","undo"],["nz-button","","title","\u91cd\u505a(ctrl+y)",3,"disabled","click"],["nz-icon","","nzType","redo"],["nz-button","","title","\u526a\u5207(ctrl+x)",3,"disabled","click"],["nz-icon","","nzType","scissor"],["nz-button","","title","\u590d\u5236(ctrl+c)",3,"disabled","click"],["nz-icon","","nzType","copy"],["nz-button","","title","\u7c98\u8d34(ctrl+v)",3,"disabled","click"],["nz-icon","","nzType","snippets"],["nz-button","","title","\u5220\u9664",3,"disabled","click"],["nz-icon","","nzType","delete"],["nz-button","",3,"disabled","click"],["nz-icon","","nzType","align-left","title","\u5de6\u5bf9\u9f50"],["nz-icon","","nzType","align-center","title","\u5c45\u4e2d\u5bf9\u9f50"],["nz-icon","","nzType","align-right","title","\u53f3\u5bf9\u9f50"],["nz-icon","","nzType","vertical-align-top","title","\u4e0a\u5bf9\u9f50"],["nz-icon","","nzType","vertical-align-middle","title","\u5c45\u4e2d\u5bf9\u9f50"],["nz-icon","","nzType","vertical-align-bottom","title","\u4e0b\u5bf9\u9f50"],["nz-icon","","nzType","vertical-right","title","\u7f6e\u9876",3,"nzRotate"],["nz-icon","","nzType","up","title","\u4e0a\u79fb\u4e00\u5c42"],["nz-icon","","nzType","down","title","\u4e0b\u79fb\u4e00\u5c42"],["nz-icon","","nzType","vertical-left","title","\u7f6e\u5e95",3,"nzRotate"],["nz-icon","","nzType","group","title","\u7ec4\u5408"],["nz-icon","","nzType","ungroup","title","\u89e3\u9664\u7ec4\u5408"],["nz-icon","","nzType","table","title","\u663e\u793a\u7f51\u683c"],["nz-icon","","nzType","setting","title","\u9875\u9762\u8bbe\u7f6e"]],template:function(e,n){1&e&&(s.TgZ(0,"a",0),s.NdJ("click",function(){return n.handleSave()}),s._UZ(1,"i",1),s._uU(2," \u4fdd\u5b58\n"),s.qZA(),s.TgZ(3,"a",0),s.NdJ("click",function(){return n.handleExport()}),s._UZ(4,"i",2),s._uU(5," \u5bfc\u51fa\n"),s.qZA(),s._UZ(6,"nz-divider",3),s.TgZ(7,"a",4),s.NdJ("click",function(){return n.handleUndo()}),s._UZ(8,"i",5),s.qZA(),s.TgZ(9,"a",6),s.NdJ("click",function(){return n.handleRedo()}),s._UZ(10,"i",7),s.qZA(),s._UZ(11,"nz-divider",3),s.TgZ(12,"a",8),s.NdJ("click",function(){return n.handleCut()}),s._UZ(13,"i",9),s.qZA(),s.TgZ(14,"a",10),s.NdJ("click",function(){return n.handleCopy()}),s._UZ(15,"i",11),s.qZA(),s.TgZ(16,"a",12),s.NdJ("click",function(){return n.handlePaste()}),s._UZ(17,"i",13),s.qZA(),s.TgZ(18,"a",14),s.NdJ("click",function(){return n.handleDelete()}),s._UZ(19,"i",15),s.qZA(),s._UZ(20,"nz-divider",3),s.TgZ(21,"a",16),s.NdJ("click",function(){return n.handleAlignLeft()}),s._UZ(22,"i",17),s.qZA(),s.TgZ(23,"a",16),s.NdJ("click",function(){return n.handleAlignCenter()}),s._UZ(24,"i",18),s.qZA(),s.TgZ(25,"a",16),s.NdJ("click",function(){return n.handleAlignRight()}),s._UZ(26,"i",19),s.qZA(),s._UZ(27,"nz-divider",3),s.TgZ(28,"a",16),s.NdJ("click",function(){return n.handleValignTop()}),s._UZ(29,"i",20),s.qZA(),s.TgZ(30,"a",16),s.NdJ("click",function(){return n.handleValignMiddle()}),s._UZ(31,"i",21),s.qZA(),s.TgZ(32,"a",16),s.NdJ("click",function(){return n.handleValignBottom()}),s._UZ(33,"i",22),s.qZA(),s._UZ(34,"nz-divider",3),s.TgZ(35,"a",0),s.NdJ("click",function(){return n.handleMoveTop()}),s._UZ(36,"i",23),s.qZA(),s.TgZ(37,"a",0),s.NdJ("click",function(){return n.handleMoveUp()}),s._UZ(38,"i",24),s.qZA(),s.TgZ(39,"a",0),s.NdJ("click",function(){return n.handleMoveDown()}),s._UZ(40,"i",25),s.qZA(),s.TgZ(41,"a",0),s.NdJ("click",function(){return n.handleMoveBottom()}),s._UZ(42,"i",26),s.qZA(),s._UZ(43,"nz-divider",3),s.TgZ(44,"a",16),s.NdJ("click",function(){return n.handleGroup()}),s._UZ(45,"i",27),s.qZA(),s.TgZ(46,"a",16),s.NdJ("click",function(){return n.handleUngroup()}),s._UZ(47,"i",28),s.qZA(),s._UZ(48,"nz-divider",3),s.TgZ(49,"a",0),s.NdJ("click",function(){return n.handleGrid()}),s._UZ(50,"i",29),s.qZA(),s.TgZ(51,"a",0),s.NdJ("click",function(){return n.settingPage()}),s._UZ(52,"i",30),s.qZA()),2&e&&(s.xp6(7),s.Q6J("disabled",!n.graph.canUndo()),s.xp6(2),s.Q6J("disabled",!n.graph.canRedo()),s.xp6(3),s.Q6J("disabled",!n.graph.getSelectedCellCount()),s.xp6(2),s.Q6J("disabled",!n.graph.getSelectedCellCount()),s.xp6(2),s.Q6J("disabled",!n.graph.getCellsInClipboard().length),s.xp6(2),s.Q6J("disabled",!n.graph.getSelectedCellCount()),s.xp6(3),s.Q6J("disabled",n.graph.getSelectedCellCount()<2),s.xp6(2),s.Q6J("disabled",n.graph.getSelectedCellCount()<2),s.xp6(2),s.Q6J("disabled",n.graph.getSelectedCellCount()<2),s.xp6(3),s.Q6J("disabled",n.graph.getSelectedCellCount()<2),s.xp6(2),s.Q6J("disabled",n.graph.getSelectedCellCount()<2),s.xp6(2),s.Q6J("disabled",n.graph.getSelectedCellCount()<2),s.xp6(4),s.Q6J("nzRotate",90),s.xp6(6),s.Q6J("nzRotate",90),s.xp6(2),s.Q6J("disabled",n.graph.getSelectedCellCount()<2),s.xp6(2),s.Q6J("disabled",!n.isGroup()))},dependencies:[De,$V,qo,pt],styles:["[_nghost-%COMP%]{height:50px;display:flex;align-items:center;vertical-align:middle;padding:0 20px;font-size:20px;font-weight:700;overflow:hidden;border-bottom:1px solid #a8a8a8;background-color:#a8a8a8}a[_ngcontent-%COMP%]{padding:5px;margin:1px;cursor:pointer;text-decoration:none}a.disabled[_ngcontent-%COMP%]{color:gray;cursor:default}"]}),i})();const ZV=["canvas"];let p8=(()=>{class i{constructor(e){this.title=e,e.setTitle("\u7ec4\u6001\u7f16\u8f91\u5668")}onDrag(e){this.canvas.Draw(e)}}return i.\u0275fac=function(e){return new(e||i)(s.Y36(wi.Dx))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-editor"]],viewQuery:function(e,n){if(1&e&&s.Gf(ZV,5),2&e){let o;s.iGM(o=s.CRH())&&(n.canvas=o.first)}},decls:6,vars:2,consts:[[3,"graph"],[1,"body"],[3,"onDrag"],["canvas",""]],template:function(e,n){if(1&e&&(s._UZ(0,"app-toolbar",0),s.TgZ(1,"div",1)(2,"app-library",2),s.NdJ("onDrag",function(r){return n.onDrag(r)}),s.qZA(),s._UZ(3,"app-canvas",null,3)(5,"app-property",0),s.qZA()),2&e){const o=s.MAs(4);s.Q6J("graph",o.graph),s.xp6(5),s.Q6J("graph",o.graph)}},dependencies:[Tz,hP,FV,GV],styles:["[_nghost-%COMP%]{height:100%;min-width:600px;overflow:hidden;display:flex;flex-direction:column;letter-spacing:.1em;font-size:12px}.body[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.body[_ngcontent-%COMP%]   app-canvas[_ngcontent-%COMP%]{flex:1;overflow:auto}"]}),i})();const qV=[{path:"",component:p8},{path:":id",component:p8}];let WV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[Lt.Bz.forChild(qV),Lt.Bz]}),i})(),UV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[M.ez,t5,Vi,sc,Dv,Sp,lv]}),i})(),g8=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,nc,ft]}),i})(),nL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,g8,at,T2,nc,ft,St,g8]}),i})(),aL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,at,nc,ft]}),i})(),uL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez]}),i})();j(590),new s.OlP("NZ_TAB_SET");let ZL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[we,M.ez,tc,at,St,ft,oc,hc,r2]}),i})(),qL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[M.ez,ne.u5,ne.UX,f8,fc,at,sc,Vi]}),i})(),WL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[M.ez,ne.u5,ne.UX,UV,WV,at.forChild([ud,qu,gd,rd,hd,j1,fd,$1,Su,ku,Vu,q1,yd,zd,Cd,bd,Z1,Y1,Ku,md]),YV,Vi,f8,nL,sc,bz,aL,uL,ZL,fc,qL,p2]}),i})()},7521:(Gn,yn,j)=>{var Gt;!function(Zt,nn,ko){if(Zt){for(var on,At={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},yi={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ci={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},_i={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},xt=1;xt<20;++xt)At[111+xt]="f"+xt;for(xt=0;xt<=9;++xt)At[xt+96]=xt.toString();Ue.prototype.bind=function(B,G,ue){var T=this;return T._bindMultiple.call(T,B=B instanceof Array?B:[B],G,ue),T},Ue.prototype.unbind=function(B,G){return this.bind.call(this,B,function(){},G)},Ue.prototype.trigger=function(B,G){return this._directMap[B+":"+G]&&this._directMap[B+":"+G]({},B),this},Ue.prototype.reset=function(){var B=this;return B._callbacks={},B._directMap={},B},Ue.prototype.stopCallback=function(B,G){if((" "+G.className+" ").indexOf(" mousetrap ")>-1||Gs(G,this.target))return!1;if("composedPath"in B&&"function"==typeof B.composedPath){var T=B.composedPath()[0];T!==B.target&&(G=T)}return"INPUT"==G.tagName||"SELECT"==G.tagName||"TEXTAREA"==G.tagName||G.isContentEditable},Ue.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},Ue.addKeycodes=function(B){for(var G in B)B.hasOwnProperty(G)&&(At[G]=B[G]);on=null},Ue.init=function(){var B=Ue(nn);for(var G in B)"_"!==G.charAt(0)&&(Ue[G]=function(ue){return function(){return B[ue].apply(B,arguments)}}(G))},Ue.init(),Zt.Mousetrap=Ue,Gn.exports&&(Gn.exports=Ue),void 0!==(Gt=function(){return Ue}.call(yn,j,yn,Gn))&&(Gn.exports=Gt)}function Zn(B,G,ue){B.addEventListener?B.addEventListener(G,ue,!1):B.attachEvent("on"+G,ue)}function xi(B){if("keypress"==B.type){var G=String.fromCharCode(B.which);return B.shiftKey||(G=G.toLowerCase()),G}return At[B.which]?At[B.which]:yi[B.which]?yi[B.which]:String.fromCharCode(B.which).toLowerCase()}function Do(B,G){return B.sort().join(",")===G.sort().join(",")}function s(B){return"shift"==B||"ctrl"==B||"alt"==B||"meta"==B}function Mi(B,G,ue){return ue||(ue=function wi(){if(!on)for(var B in on={},At)B>95&&B<112||At.hasOwnProperty(B)&&(on[At[B]]=B);return on}()[B]?"keydown":"keypress"),"keypress"==ue&&G.length&&(ue="keydown"),ue}function Ys(B,G){var ue,T,H,ze=[];for(ue=function Ta(B){return"+"===B?["+"]:(B=B.replace(/\+{2}/g,"+plus")).split("+")}(B),H=0;H<ue.length;++H)_i[T=ue[H]]&&(T=_i[T]),G&&"keypress"!=G&&Ci[T]&&(T=Ci[T],ze.push("shift")),s(T)&&ze.push(T);return{key:T,modifiers:ze,action:G=Mi(T,ze,G)}}function Gs(B,G){return null!==B&&B!==nn&&(B===G||Gs(B.parentNode,G))}function Ue(B){var G=this;if(B=B||nn,!(G instanceof Ue))return new Ue(B);G.target=B,G._callbacks={},G._directMap={};var T,ue={},H=!1,ze=!1,Si=!1;function Et(Y){Y=Y||{};var se,Q=!1;for(se in ue)Y[se]?Q=!0:ue[se]=0;Q||(Si=!1)}function mt(Y,Q,se,re,U,wt){var oe,te,qt=[],Ce=se.type;if(!G._callbacks[Y])return[];for("keyup"==Ce&&s(Y)&&(Q=[Y]),oe=0;oe<G._callbacks[Y].length;++oe)te=G._callbacks[Y][oe],!re&&te.seq&&ue[te.seq]!=te.level||Ce!=te.action||("keypress"!=Ce||se.metaKey||se.ctrlKey)&&!Do(Q,te.modifiers)||((!re&&te.combo==U||re&&te.seq==re&&te.level==wt)&&G._callbacks[Y].splice(oe,1),qt.push(te));return qt}function Le(Y,Q,se,re){G.stopCallback(Q,Q.target||Q.srcElement,se,re)||!1===Y(Q,se)&&(function M(B){B.preventDefault?B.preventDefault():B.returnValue=!1}(Q),function Lt(B){B.stopPropagation?B.stopPropagation():B.cancelBubble=!0}(Q))}function Po(Y){"number"!=typeof Y.which&&(Y.which=Y.keyCode);var Q=xi(Y);if(Q){if("keyup"==Y.type&&H===Q)return void(H=!1);G.handleKey(Q,function Io(B){var G=[];return B.shiftKey&&G.push("shift"),B.altKey&&G.push("alt"),B.ctrlKey&&G.push("ctrl"),B.metaKey&&G.push("meta"),G}(Y),Y)}}function N(Y,Q,se,re,U){G._directMap[Y+":"+se]=Q;var oe,wt=(Y=Y.replace(/\s+/g," ")).split(" ");wt.length>1?function Ti(Y,Q,se,re){function U(Ce){return function(){Si=Ce,++ue[Y],function Cn(){clearTimeout(T),T=setTimeout(Et,1e3)}()}}function wt(Ce){Le(se,Ce,Y),"keyup"!==re&&(H=xi(Ce)),setTimeout(Et,10)}ue[Y]=0;for(var oe=0;oe<Q.length;++oe){var qt=oe+1===Q.length?wt:U(re||Ys(Q[oe+1]).action);N(Q[oe],qt,re,Y,oe)}}(Y,wt,Q,se):(oe=Ys(Y,se),G._callbacks[oe.key]=G._callbacks[oe.key]||[],mt(oe.key,oe.modifiers,{type:oe.action},re,Y,U),G._callbacks[oe.key][re?"unshift":"push"]({callback:Q,modifiers:oe.modifiers,action:oe.action,seq:re,level:U,combo:Y}))}G._handleKey=function(Y,Q,se){var U,re=mt(Y,Q,se),wt={},oe=0,te=!1;for(U=0;U<re.length;++U)re[U].seq&&(oe=Math.max(oe,re[U].level));for(U=0;U<re.length;++U)if(re[U].seq){if(re[U].level!=oe)continue;te=!0,wt[re[U].seq]=1,Le(re[U].callback,se,re[U].combo,re[U].seq)}else te||Le(re[U].callback,se,re[U].combo);var qt="keypress"==se.type&&ze;se.type==Si&&!s(Y)&&!qt&&Et(wt),ze=te&&"keydown"==se.type},G._bindMultiple=function(Y,Q,se){for(var re=0;re<Y.length;++re)N(Y[re],Q,se)},Zn(B,"keypress",Po),Zn(B,"keydown",Po),Zn(B,"keyup",Po)}}(typeof window<"u"?window:null,typeof window<"u"?document:null)}}]);